(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{632:function(e,t,n){n(673)},633:function(e,t,n){n(674)},634:function(e,t,n){n(675)},635:function(e,t,n){n(676)},636:function(e,t,n){n(677)},637:function(e,t,n){n(678)},638:function(e,t,n){n(679)},639:function(e,t,n){n(680)},640:function(e,t,n){n(681)},641:function(e,t,n){n(682)},642:function(e,t,n){n(683)},643:function(e,t,n){n(684)},644:function(e,t,n){n(685)},645:function(e,t,n){n(686)},646:function(e,t,n){n(687)},647:function(e,t,n){n(688)},648:function(e,t,n){n(689)},649:function(e,t,n){n(690)},650:function(e,t,n){n(691)},651:function(e,t,n){n(692)},652:function(e,t,n){n(693)},653:function(e,t,n){n(694)},654:function(e,t,n){n(695)},655:function(e,t,n){n(696)},656:function(e,t,n){n(697)},657:function(e,t,n){n(698)},658:function(e,t,n){n(699)},673:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.ModelManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,n=e=>t=>typeof t===e,o=e=>a=>e===a,r=t("string"),l=t("object"),c=t("array"),d=o(null),m=n("boolean"),h=o(void 0),f=a=>!(a=>null==a)(a),y=n("function"),v=n("number"),w=()=>{},x=e=>()=>e,k=e=>e,C=(a,b)=>a===b;function S(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const T=e=>t=>!e(t),_=e=>e(),A=x(!1),O=x(!0);class D{constructor(e,t){this.tag=e,this.value=t}static some(e){return new D(!0,e)}static none(){return D.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?D.some(e(this.value)):D.none()}bind(e){return this.tag?e(this.value):D.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:D.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return f(e)?D.some(e):D.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}D.singletonNone=new D(!1);const E=Array.prototype.slice,N=Array.prototype.indexOf,R=Array.prototype.push,M=(e,t)=>{return n=e,o=t,N.call(n,o)>-1;var n,o},F=(e,t)=>{for(let i=0,n=e.length;i<n;i++){if(t(e[i],i))return!0}return!1},P=(e,t)=>{const n=[];for(let i=0;i<e;i++)n.push(t(i));return n},I=(e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o},L=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},B=(e,t)=>{const n=[],o=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];(t(r,i)?n:o).push(r)}return{pass:n,fail:o}},j=(e,t)=>{const n=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];t(o,i)&&n.push(o)}return n},z=(e,t,n)=>(((e,t)=>{for(let i=e.length-1;i>=0;i--)t(e[i],i)})(e,((e,i)=>{n=t(n,e,i)})),n),$=(e,t,n)=>(L(e,((e,i)=>{n=t(n,e,i)})),n),U=(e,t)=>((e,t,n)=>{for(let i=0,o=e.length;i<o;i++){const o=e[i];if(t(o,i))return D.some(o);if(n(o,i))break}return D.none()})(e,t,A),W=(e,t)=>{for(let i=0,n=e.length;i<n;i++){if(t(e[i],i))return D.some(i)}return D.none()},H=e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!c(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);R.apply(t,e[i])}return t},V=(e,t)=>H(I(e,t)),K=(e,t)=>{for(let i=0,n=e.length;i<n;++i){if(!0!==t(e[i],i))return!1}return!0},Z=(e,t)=>{const n={};for(let i=0,o=e.length;i<o;i++){const o=e[i];n[String(o)]=t(o,i)}return n},G=(e,i)=>i>=0&&i<e.length?D.some(e[i]):D.none(),head=e=>G(e,0),Y=e=>G(e,e.length-1),J=(e,t)=>{for(let i=0;i<e.length;i++){const n=t(e[i],i);if(n.isSome())return n}return D.none()},X=Object.keys,Q=Object.hasOwnProperty,ee=(e,t)=>{const n=X(e);for(let o=0,r=n.length;o<r;o++){const i=n[o];t(e[i],i)}},map=(e,t)=>te(e,((e,i)=>({k:i,v:t(e,i)}))),te=(e,t)=>{const n={};return ee(e,((e,i)=>{const o=t(e,i);n[o.k]=o.v})),n},ne=(e,t)=>{const n={};return((e,t,n,o)=>{ee(e,((e,i)=>{(t(e,i)?n:o)(e,i)}))})(e,t,(e=>(t,i)=>{e[i]=t})(n),w),n},oe=(e,t)=>{const n=[];return ee(e,((e,o)=>{n.push(t(e,o))})),n},re=e=>oe(e,k),se=(e,t)=>Q.call(e,t);"undefined"!=typeof window?window:Function("return this;")();const ae=element=>element.dom.nodeName.toLowerCase(),le=element=>element.dom.nodeType,ie=e=>element=>le(element)===e,ce=element=>8===le(element)||"#comment"===ae(element),ue=ie(1),de=ie(3),me=ie(9),ge=ie(11),pe=e=>t=>ue(t)&&ae(t)===e,he=(e,t,n)=>{if(!(r(n)||m(n)||v(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},fe=(element,e,t)=>{he(element.dom,e,t)},be=(element,e)=>{const t=element.dom;ee(e,((e,n)=>{he(t,n,e)}))},ye=(element,e)=>{const t=element.dom.getAttribute(e);return null===t?void 0:t},ve=(element,e)=>D.from(ye(element,e)),we=(element,e)=>{element.dom.removeAttribute(e)},xe=element=>$(element.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),ke=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Ce={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return ke(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return ke(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return ke(t)},fromDom:ke,fromPoint:(e,t,n)=>D.from(e.dom.elementFromPoint(t,n)).map(ke)},Se=(element,e)=>{const t=element.dom;if(1!==t.nodeType)return!1;{const n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},Te=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,_e=(e,t)=>{const base=void 0===t?document:t.dom;return Te(base)?D.none():D.from(base.querySelector(e)).map(Ce.fromDom)},Ae=(e,t)=>e.dom===t.dom,Oe=(e,t)=>{const n=e.dom,o=t.dom;return n!==o&&n.contains(o)},De=Se,Ee=element=>Ce.fromDom(element.dom.ownerDocument),Ne=e=>me(e)?e:Ee(e),Re=element=>D.from(element.dom.parentNode).map(Ce.fromDom),Me=(element,e)=>{const t=y(e)?e:A;let n=element.dom;const o=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,p=Ce.fromDom(e);if(o.push(p),!0===t(p))break;n=e}return o},Fe=element=>D.from(element.dom.previousSibling).map(Ce.fromDom),Pe=element=>D.from(element.dom.nextSibling).map(Ce.fromDom),Ie=element=>I(element.dom.childNodes,Ce.fromDom),Le=(element,e)=>{const t=element.dom.childNodes;return D.from(t[e]).map(Ce.fromDom)},Be=(marker,element)=>{Re(marker).each((e=>{e.dom.insertBefore(element.dom,marker.dom)}))},je=(marker,element)=>{Pe(marker).fold((()=>{Re(marker).each((e=>{$e(e,element)}))}),(e=>{Be(e,element)}))},ze=(e,element)=>{const t=(element=>Le(element,0))(e);t.fold((()=>{$e(e,element)}),(t=>{e.dom.insertBefore(element.dom,t.dom)}))},$e=(e,element)=>{e.dom.appendChild(element.dom)},Ue=(element,e)=>{Be(element,e),$e(e,element)},We=(marker,e)=>{L(e,((t,i)=>{const n=0===i?marker:e[i-1];je(n,t)}))},He=(e,t)=>{L(t,(t=>{$e(e,t)}))},qe=element=>{element.dom.textContent="",L(Ie(element),(e=>{Ve(e)}))},Ve=element=>{const e=element.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Ke=e=>{const t=Ie(e);t.length>0&&We(e,t),Ve(e)},Ze=(e,t)=>Ce.fromDom(e.dom.cloneNode(t)),Ge=e=>Ze(e,!1),Ye=e=>Ze(e,!0),Je=(e,t)=>{const n=Ce.fromTag(t),o=xe(e);return be(n,o),n},Xe=["tfoot","thead","tbody","colgroup"],Qe=(element,e,t)=>({element:element,rowspan:e,colspan:t}),et=(element,e,section)=>({element:element,cells:e,section:section}),tt=(element,e,t)=>({element:element,isNew:e,isLocked:t}),nt=(element,e,section,t)=>({element:element,cells:e,section:section,isNew:t}),ot=y(Element.prototype.attachShadow)&&y(Node.prototype.getRootNode),st=x(ot),at=ot?e=>Ce.fromDom(e.dom.getRootNode()):Ne,lt=e=>{const t=at(e);return ge(n=t)&&f(n.dom.host)?D.some(t):D.none();var n},it=e=>Ce.fromDom(e.dom.host),ct=element=>f(element.dom.shadowRoot),ut=element=>{const e=de(element)?element.dom.parentNode:element.dom;if(null==e||null===e.ownerDocument)return!1;const t=e.ownerDocument;return lt(Ce.fromDom(e)).fold((()=>t.body.contains(e)),(n=ut,o=it,a=>n(o(a))));var n,o},mt=e=>{const b=e.dom.body;if(null==b)throw new Error("Body is not available yet");return Ce.fromDom(b)},gt=(e,t)=>{let n=[];return L(Ie(e),(e=>{t(e)&&(n=n.concat([e])),n=n.concat(gt(e,t))})),n},pt=(e,t,n)=>((e,t,n)=>j(Me(e,n),t))(e,(e=>Se(e,t)),n),ht=(e,t)=>((e,t)=>j(Ie(e),t))(e,(e=>Se(e,t))),ft=(e,t)=>((e,t)=>{const base=void 0===t?document:t.dom;return Te(base)?[]:I(base.querySelectorAll(e),Ce.fromDom)})(t,e);var bt=(e,t,n,a,o)=>e(n,a)?D.some(n):y(o)&&o(n)?D.none():t(n,a,o);const yt=(e,t,n)=>{let element=e.dom;const o=y(n)?n:A;for(;element.parentNode;){element=element.parentNode;const e=Ce.fromDom(element);if(t(e))return D.some(e);if(o(e))break}return D.none()},vt=(e,t,n)=>yt(e,(e=>Se(e,t)),n),wt=(e,t)=>((e,t)=>U(e.dom.childNodes,(e=>t(Ce.fromDom(e)))).map(Ce.fromDom))(e,(e=>Se(e,t))),xt=(e,t)=>_e(t,e),kt=(e,t,n)=>bt(((element,e)=>Se(element,e)),vt,e,t,n),Ct=(e,t,n=C)=>e.exists((e=>n(e,t))),St=e=>{const t=[],n=e=>{t.push(e)};for(let i=0;i<e.length;i++)e[i].each(n);return t},Tt=(b,a)=>b?D.some(a):D.none(),_t=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,At=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return-1!==r&&(!!h(o)||r+t.length<=o)},Ot=(e,t)=>_t(e,t,0),Dt=(e,t)=>_t(e,t,e.length-t.length),Et=(e=>s=>s.replace(e,""))(/^\s+|\s+$/g),Nt=s=>s.length>0,Rt=e=>void 0!==e.style&&y(e.style.getPropertyValue),Mt=(e,t,n)=>{if(!r(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Rt(e)&&e.style.setProperty(t,n)},Ft=(element,e,t)=>{const n=element.dom;Mt(n,e,t)},Pt=(element,e)=>{const t=element.dom;ee(e,((e,n)=>{Mt(t,n,e)}))},It=(element,e)=>{const t=element.dom,n=window.getComputedStyle(t).getPropertyValue(e);return""!==n||ut(element)?n:Lt(t,e)},Lt=(e,t)=>Rt(e)?e.style.getPropertyValue(t):"",Bt=(element,e)=>{const t=element.dom,n=Lt(t,e);return D.from(n).filter((e=>e.length>0))},jt=(element,e)=>{((e,t)=>{Rt(e)&&e.style.removeProperty(t)})(element.dom,e),Ct(ve(element,"style").map(Et),"")&&we(element,"style")},zt=(e,t,n=0)=>ve(e,t).map((e=>parseInt(e,10))).getOr(n),$t=(e,t)=>zt(e,t,1),Ut=e=>pe("col")(e)?zt(e,"span",1)>1:$t(e,"colspan")>1,Wt=e=>$t(e,"rowspan")>1,Ht=(element,e)=>parseInt(It(element,e),10),qt=x(10),Vt=x(10),Kt=(e,t)=>Zt(e,t,O),Zt=(e,t,n)=>V(Ie(e),(e=>Se(e,t)?n(e)?[e]:[]:Zt(e,t,n))),Gt=(element,e)=>((e,element,t=A)=>t(element)?D.none():M(e,ae(element))?D.some(element):vt(element,e.join(","),(e=>Se(e,"table")||t(e))))(["td","th"],element,e),Yt=e=>Kt(e,"th,td"),Jt=e=>Se(e,"colgroup")?ht(e,"col"):V(Qt(e),(e=>ht(e,"col"))),table=(element,e)=>kt(element,"table",e),Xt=e=>Kt(e,"tr"),Qt=e=>table(e).fold(x([]),(table=>ht(table,"colgroup"))),en=(e,t)=>I(e,(e=>{if("colgroup"===ae(e)){const t=I(Jt(e),(e=>{const t=zt(e,"span",1);return Qe(e,1,t)}));return et(e,t,"colgroup")}{const n=I(Yt(e),(e=>{const t=zt(e,"rowspan",1),n=zt(e,"colspan",1);return Qe(e,t,n)}));return et(e,n,t(e))}})),tn=e=>Re(e).map((e=>{const t=ae(e);return(e=>M(Xe,e))(t)?t:"tbody"})).getOr("tbody"),nn=table=>{const e=Xt(table),t=[...Qt(table),...e];return en(t,tn)},on=e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)},rn=()=>sn(0,0),sn=(e,t)=>({major:e,minor:t}),an={nu:sn,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?rn():((e,t)=>{const n=((e,s)=>{for(let i=0;i<e.length;i++){const t=e[i];if(t.test(s))return t}})(e,t);if(!n)return{major:0,minor:0};const o=i=>Number(t.replace(n,"$"+i));return sn(o(1),o(2))})(e,n)},unknown:rn},ln=(e,t)=>{const n=String(t).toLowerCase();return U(e,(e=>e.search(n)))},cn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,un=e=>t=>At(t,e),dn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>At(e,"edge/")&&At(e,"chrome")&&At(e,"safari")&&At(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,cn],search:e=>At(e,"chrome")&&!At(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>At(e,"msie")||At(e,"trident")},{name:"Opera",versionRegexes:[cn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:un("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:un("firefox")},{name:"Safari",versionRegexes:[cn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(At(e,"safari")||At(e,"mobile/"))&&At(e,"applewebkit")}],mn=[{name:"Windows",search:un("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>At(e,"iphone")||At(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:un("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:un("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:un("linux"),versionRegexes:[]},{name:"Solaris",search:un("sunos"),versionRegexes:[]},{name:"FreeBSD",search:un("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:un("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],gn={browsers:x(dn),oses:x(mn)},pn="Edge",hn="Chromium",fn="Opera",bn="Firefox",yn="Safari",vn=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isEdge:o(pn),isChromium:o(hn),isIE:o("IE"),isOpera:o(fn),isFirefox:o(bn),isSafari:o(yn)}},wn={unknown:()=>vn({current:void 0,version:an.unknown()}),nu:vn,edge:x(pn),chromium:x(hn),ie:x("IE"),opera:x(fn),firefox:x(bn),safari:x(yn)},xn="Windows",kn="Android",Cn="Linux",Sn="macOS",Tn="Solaris",_n="FreeBSD",An="ChromeOS",On=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isWindows:o(xn),isiOS:o("iOS"),isAndroid:o(kn),isMacOS:o(Sn),isLinux:o(Cn),isSolaris:o(Tn),isFreeBSD:o(_n),isChromeOS:o(An)}},Dn={unknown:()=>On({current:void 0,version:an.unknown()}),nu:On,windows:x(xn),ios:x("iOS"),android:x(kn),linux:x(Cn),macos:x(Sn),solaris:x(Tn),freebsd:x(_n),chromeos:x(An)},En=(e,t,n)=>{const o=gn.browsers(),r=gn.oses(),l=t.bind((e=>((e,t)=>J(t.brands,(t=>{const n=t.brand.toLowerCase();return U(e,(e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:an.nu(parseInt(t.version,10),0)})))})))(o,e))).orThunk((()=>((e,t)=>ln(e,t).map((e=>{const n=an.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(o,e))).fold(wn.unknown,wn.nu),c=((e,t)=>ln(e,t).map((e=>{const n=an.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(r,e).fold(Dn.unknown,Dn.nu),d=((e,t,n,o)=>{const r=e.isiOS()&&!0===/ipad/i.test(n),l=e.isiOS()&&!r,c=e.isiOS()||e.isAndroid(),d=c||o("(pointer:coarse)"),m=r||!l&&c&&o("(min-device-width:768px)"),h=l||c&&!m,f=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),y=!h&&!m&&!f;return{isiPad:x(r),isiPhone:x(l),isTablet:x(m),isPhone:x(h),isTouch:x(d),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:x(f),isDesktop:x(y)}})(c,l,e,n);return{browser:l,os:c,deviceType:d}},Nn=e=>window.matchMedia(e).matches;let Rn=on((()=>En(navigator.userAgent,D.from(navigator.userAgentData),Nn)));const Mn=()=>Rn(),Fn=(e,t)=>{const n=element=>{const n=t(element);if(n<=0||null===n){const t=It(element,e);return parseFloat(t)||0}return n},o=(element,e)=>$(e,((e,t)=>{const n=It(element,t),o=void 0===n?0:parseInt(n,10);return isNaN(o)?e:e+o}),0);return{set:(element,t)=>{if(!v(t)&&!t.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+t);const n=element.dom;Rt(n)&&(n.style[e]=t+"px")},get:n,getOuter:n,aggregate:o,max:(element,e,t)=>{const n=o(element,t);return e>n?e-n:0}}},Pn=(e,t)=>(e=>{const t=parseFloat(e);return isNaN(t)?D.none():D.some(t)})(e).getOr(t),In=(element,e,t)=>Pn(It(element,e),t),Ln=(element,e)=>{const t=element.dom,n=t.getBoundingClientRect().width||t.offsetWidth;return"border-box"===e?n:((element,e,t,n)=>e-In(element,`padding-${t}`,0)-In(element,`padding-${n}`,0)-In(element,`border-${t}-width`,0)-In(element,`border-${n}-width`,0))(element,n,"left","right")},Bn=Fn("width",(element=>element.dom.offsetWidth)),jn=element=>Bn.get(element),zn=element=>Bn.getOuter(element),$n=element=>Ln(element,"content-box"),Un=element=>In(element,"width",element.dom.offsetWidth),Wn=(e,t,n)=>{const o=e.cells,r=o.slice(0,t),l=o.slice(t),c=r.concat(n).concat(l);return Vn(e,c)},Hn=(e,t,n)=>Wn(e,t,[n]),qn=(e,t,n)=>{e.cells[t]=n},Vn=(e,t)=>nt(e.element,t,e.section,e.isNew),Kn=(e,t)=>e.cells[t],Zn=(e,t)=>Kn(e,t).element,Gn=e=>e.cells.length,Yn=e=>{const t=B(e,(e=>"colgroup"===e.section));return{rows:t.fail,cols:t.pass}},Jn=(e,t,n)=>{const o=I(e.cells,n);return nt(t(e.element),o,e.section,!0)},Xn="data-snooker-locked-cols",Qn=table=>ve(table,Xn).bind((e=>D.from(e.match(/\d+/g)))).map((e=>Z(e,O))),eo=e=>{const t=$(Yn(e).rows,((e,t)=>(L(t.cells,((t,n)=>{t.isLocked&&(e[n]=!0)})),e)),{}),n=oe(t,((e,t)=>parseInt(t,10)));return((e,t)=>{const n=E.call(e,0);return n.sort(t),n})(n)},to=(e,t)=>e+","+t,no=(e,t)=>{const n=V(e.all,(e=>e.cells));return j(n,t)},oo=e=>{const t={},n=[],o=head(e).map((e=>e.element)).bind(table).bind(Qn).getOr({});let r=0,l=0,c=0;const{pass:d,fail:m}=B(e,(e=>"colgroup"===e.section));L(m,(e=>{const d=[];L(e.cells,(e=>{let n=0;for(;void 0!==t[to(c,n)];)n++;const r=((e,t)=>se(e,t)&&void 0!==e[t]&&null!==e[t])(o,n.toString()),m=((element,e,t,n,o,r)=>({element:element,rowspan:e,colspan:t,row:n,column:o,isLocked:r}))(e.element,e.rowspan,e.colspan,c,n,r);for(let o=0;o<e.colspan;o++)for(let r=0;r<e.rowspan;r++){const e=n+o,d=to(c+r,e);t[d]=m,l=Math.max(l,e+1)}d.push(m)})),r++,n.push(et(e.element,d,e.section)),c++}));const{columns:h,colgroups:f}=Y(d).map((e=>{const t=(e=>{const t={};let n=0;return L(e.cells,(e=>{const o=e.colspan;P(o,(r=>{const l=n+r;t[l]=((element,e,t)=>({element:element,colspan:e,column:t}))(e.element,o,l)})),n+=o})),t})(e),n=((element,e)=>({element:element,columns:e}))(e.element,re(t));return{colgroups:[n],columns:t}})).getOrThunk((()=>({colgroups:[],columns:{}}))),y=((e,t)=>({rows:e,columns:t}))(r,l);return{grid:y,access:t,all:n,columns:h,colgroups:f}},ro={fromTable:table=>{const e=nn(table);return oo(e)},generate:oo,getAt:(e,t,n)=>D.from(e.access[to(t,n)]),findItem:(e,t,n)=>{const o=no(e,(e=>n(t,e.element)));return o.length>0?D.some(o[0]):D.none()},filterItems:no,justCells:e=>V(e.all,(e=>e.cells)),justColumns:e=>re(e.columns),hasColumns:e=>X(e.columns).length>0,getColumnAt:(e,t)=>D.from(e.columns[t])},so=(e,t=O)=>{const n=e.grid,o=P(n.columns,k),r=P(n.rows,k);return I(o,(col=>ao((()=>V(r,(t=>ro.getAt(e,t,col).filter((e=>e.column===col)).toArray()))),(e=>1===e.colspan&&t(e.element)),(()=>ro.getAt(e,0,col)))))},ao=(e,t,n)=>{const o=e();return U(o,t).orThunk((()=>D.from(o[0]).orThunk(n))).map((e=>e.element))},lo=e=>{const t=e.grid,n=P(t.rows,k),o=P(t.columns,k);return I(n,(t=>ao((()=>V(o,(n=>ro.getAt(e,t,n).filter((e=>e.row===t)).fold(x([]),(e=>[e]))))),(e=>1===e.rowspan),(()=>ro.getAt(e,t,0)))))},io=(e,t)=>{if(t<0||t>=e.length-1)return D.none();const n=e[t].fold((()=>{const n=(e=>{const t=E.call(e,0);return t.reverse(),t})(e.slice(0,t));return J(n,((a,i)=>a.map((e=>({value:e,delta:i+1})))))}),(e=>D.some({value:e,delta:0}))),o=e[t+1].fold((()=>{const n=e.slice(t+1);return J(n,((a,i)=>a.map((e=>({value:e,delta:i+1})))))}),(e=>D.some({value:e,delta:1})));return n.bind((e=>o.map((t=>{const n=t.delta+e.delta;return Math.abs(t.value-e.value)/n}))))},co=(e,t)=>element=>"rtl"===uo(element)?t:e,uo=element=>"rtl"===It(element,"direction")?"rtl":"ltr",mo=Fn("height",(element=>{const e=element.dom;return ut(element)?e.getBoundingClientRect().height:e.offsetHeight})),go=element=>mo.get(element),po=element=>mo.getOuter(element),ho=element=>In(element,"height",element.dom.offsetHeight),fo=(e,t)=>({left:e,top:t,translate:(n,o)=>fo(e+n,t+o)}),bo=fo,yo=(a,b)=>void 0!==a?a:void 0!==b?b:0,vo=element=>{const e=element.dom.ownerDocument,body=e.body,t=e.defaultView,html=e.documentElement;if(body===element.dom)return bo(body.offsetLeft,body.offsetTop);const n=yo(null==t?void 0:t.pageYOffset,html.scrollTop),o=yo(null==t?void 0:t.pageXOffset,html.scrollLeft),r=yo(html.clientTop,body.clientTop),l=yo(html.clientLeft,body.clientLeft);return wo(element).translate(o-l,n-r)},wo=element=>{const e=element.dom,body=e.ownerDocument.body;return body===e?bo(body.offsetLeft,body.offsetTop):ut(element)?(e=>{const t=e.getBoundingClientRect();return bo(t.left,t.top)})(e):bo(0,0)},xo=(e,t)=>({row:e,y:t}),ko=(col,e)=>({col:col,x:e}),Co=e=>vo(e).left+zn(e),So=e=>vo(e).left,To=(e,t)=>ko(e,So(t)),_o=(e,t)=>ko(e,Co(t)),Ao=e=>vo(e).top,Oo=(e,t)=>xo(e,Ao(t)),Do=(e,t)=>xo(e,Ao(t)+po(t)),Eo=(e,t,n)=>{if(0===n.length)return[];const o=I(n.slice(1),((t,n)=>t.map((t=>e(n,t))))),r=n[n.length-1].map((e=>t(n.length-1,e)));return o.concat([r])},No={delta:k,positions:e=>Eo(Oo,Do,e),edge:Ao},Ro=co({delta:k,edge:So,positions:e=>Eo(To,_o,e)},{delta:e=>-e,edge:Co,positions:e=>Eo(_o,To,e)}),Mo={delta:(e,table)=>Ro(table).delta(e,table),positions:(e,table)=>Ro(table).positions(e,table),edge:e=>Ro(e).edge(e)},Fo={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},pattern=(()=>{const e="[0-9]+",t="[eE]"+("[+-]?"+e),n=input=>`(?:${input})?`,o=["Infinity",e+"\\."+n(e)+n(t),"\\."+e+n(t),e+n(t)].join("|");return new RegExp(`^(${`[+-]?(?:${o})`})(.*)$`)})(),Po=(input,e)=>D.from(pattern.exec(input)).bind((t=>{const n=Number(t[1]),o=t[2];return((e,t)=>F(t,(t=>F(Fo[t],(t=>e===t)))))(o,e)?D.some({value:n,unit:o}):D.none()})),Io=/(\d+(\.\d+)?)%/,Lo=/(\d+(\.\d+)?)px|em/,Bo=pe("col"),jo=(e,t,n)=>{const o=(element=e,D.from(element.dom.parentElement).map(Ce.fromDom)).getOrThunk((()=>mt(Ee(e))));var element;return t(e)/n(o)*100},zo=(e,t)=>{Ft(e,"width",t+"px")},$o=(e,t)=>{Ft(e,"width",t+"%")},Uo=(e,t)=>{Ft(e,"height",t+"px")},Wo=(e,t,n,o)=>{const r=parseFloat(e);return Dt(e,"%")&&"table"!==ae(t)?((e,t,n,o)=>{const r=table(e).map((table=>{const e=n(table);return Math.floor(t/100*e)})).getOr(t);return o(e,r),r})(t,r,n,o):r},Ho=e=>{const t=(e=>ho(e)+"px")(e);return t?Wo(t,e,go,Uo):go(e)},qo=(element,e)=>Bt(element,e).orThunk((()=>ve(element,e).map((e=>e+"px")))),Vo=element=>qo(element,"width"),Ko=e=>jo(e,jn,$n),Zo=e=>Bo(e)?jn(e):Un(e),Go=e=>((e,t,n)=>n(e)/$t(e,t))(e,"rowspan",Ho),Yo=(e,t,n)=>{Ft(e,"width",t+n)},Jo=table=>jo(table,jn,$n)+"%",Xo=x(Io),Qo=pe("col"),er=e=>Vo(e).getOrThunk((()=>Zo(e)+"px")),nr=e=>{return(element=e,qo(element,"height")).getOrThunk((()=>Go(e)+"px"));var element},or=(e,t,n,filter,o,r)=>e.filter(filter).fold((()=>r(io(n,t))),(e=>o(e))),rr=(e,table,t,n)=>{const o=so(e),r=ro.hasColumns(e)?(e=>I(ro.justColumns(e),(e=>D.from(e.element))))(e):o,l=[D.some(Mo.edge(table))].concat(I(Mo.positions(o,table),(e=>e.map((p=>p.x))))),c=T(Ut);return I(r,((e,r)=>or(e,r,l,c,(e=>{if((e=>{const t=Mn().browser,n=t.isChromium()||t.isFirefox();return!Qo(e)||n})(e))return t(e);{const e=(a=o[r],d=k,null!=a?d(a):D.none());return or(e,r,l,c,(e=>n(D.some(jn(e)))),n)}var a,d}),n)))},sr=e=>e.map((e=>e+"px")).getOr(""),ar=(e,table,t)=>rr(e,table,Zo,(e=>e.getOrThunk(t.minCellWidth))),lr=(e,table,t,n,o)=>{const r=lo(e),l=[D.some(t.edge(table))].concat(I(t.positions(r,table),(e=>e.map((p=>p.y)))));return I(r,((e,t)=>or(e,t,l,T(Wt),n,o)))},ir=(table,e)=>()=>ut(table)?e(table):parseFloat(Bt(table,"width").getOr("0")),cr=table=>{const e=ir(table,jn),t=x(0);return{width:e,pixelWidth:e,getWidths:(e,t)=>ar(e,table,t),getCellDelta:t,singleColumnWidth:x([0]),minCellWidth:t,setElementWidth:w,adjustTableWidth:w,isRelative:!0,label:"none"}},ur=table=>{const e=ir(table,(e=>parseFloat(Jo(e)))),t=ir(table,jn);return{width:e,pixelWidth:t,getWidths:(e,t)=>((e,table,t)=>rr(e,table,Ko,(e=>e.fold((()=>t.minCellWidth()),(e=>e/t.pixelWidth()*100)))))(e,table,t),getCellDelta:e=>e/t()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>qt()/t()*100,setElementWidth:$o,adjustTableWidth:t=>{const n=e();$o(table,n+t/100*n)},isRelative:!0,label:"percent"}},dr=table=>{const e=ir(table,jn);return{width:e,pixelWidth:e,getWidths:(e,t)=>ar(e,table,t),getCellDelta:k,singleColumnWidth:(e,t)=>[Math.max(qt(),e+t)-e],minCellWidth:qt,setElementWidth:zo,adjustTableWidth:t=>{const n=e()+t;zo(table,n)},isRelative:!1,label:"pixel"}},mr=table=>Vo(table).fold((()=>cr(table)),(e=>((element,e)=>null!==Xo().exec(e)?ur(element):dr(element))(table,e))),gr=dr,pr=ur,fr=(e,t,n)=>{const o=e[n].element,td=Ce.fromTag("td");$e(td,Ce.fromTag("br"));(t?$e:ze)(o,td)},yr=(table,e)=>{const t=t=>Se(t.element,e),n=Ye(table),o=nn(n),r=mr(table),l=ro.generate(o),c=((e,t)=>{const n=e.grid.columns;let o=e.grid.rows,r=n,l=0,c=0;const d=[],m=[];return ee(e.access,(e=>{if(d.push(e),t(e)){m.push(e);const t=e.row,n=t+e.rowspan-1,d=e.column,h=d+e.colspan-1;t<o?o=t:n>l&&(l=n),d<r?r=d:h>c&&(c=h)}})),((e,t,n,o,r,l)=>({minRow:e,minCol:t,maxRow:n,maxCol:o,allCells:r,selectedCells:l}))(o,r,l,c,d,m)})(l,t),d="th:not("+e+"),td:not("+e+")",m=Zt(n,"th,td",(e=>Se(e,d)));L(m,Ve),((e,t,n,o)=>{const r=j(e,(e=>"colgroup"!==e.section)),l=t.grid.columns,c=t.grid.rows;for(let i=0;i<c;i++){let e=!1;for(let c=0;c<l;c++)i<n.minRow||i>n.maxRow||c<n.minCol||c>n.maxCol||(ro.getAt(t,i,c).filter(o).isNone()?fr(r,e,i):e=!0)}})(o,l,c,t);const h=((table,e,t,n)=>{if(0===n.minCol&&e.grid.columns===n.maxCol+1)return 0;const o=ar(e,table,t),r=$(o,((e,t)=>e+t),0),l=$(o.slice(n.minCol,n.maxCol+1),((e,t)=>e+t),0),c=l/r*t.pixelWidth()-t.pixelWidth();return t.getCellDelta(c)})(table,ro.fromTable(table),r,c);return((e,t,n,o)=>{ee(n.columns,(col=>{(col.column<t.minCol||col.column>t.maxCol)&&Ve(col.element)}));const r=j(Kt(e,"tr"),(e=>0===e.dom.childElementCount));L(r,Ve),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||L(Kt(e,"th,td"),(e=>{we(e,"rowspan"),we(e,"colspan")})),we(e,Xn),we(e,"data-snooker-col-series"),mr(e).adjustTableWidth(o)})(n,c,l,h),n},vr=((e,t)=>{const n=element=>e(element)?D.from(element.dom.nodeValue):D.none();return{get:element=>{if(!e(element))throw new Error("Can only get "+t+" value of a "+t+" node");return n(element).getOr("")},getOption:n,set:(element,n)=>{if(!e(element))throw new Error("Can only set raw "+t+" value of a "+t+" node");element.dom.nodeValue=n}}})(de,"text"),wr=element=>vr.get(element),xr=element=>vr.getOption(element),kr=(element,e)=>vr.set(element,e),Cr=element=>"img"===ae(element)?1:xr(element).fold((()=>Ie(element).length),(e=>e.length)),Sr=["img","br"],Tr=e=>xr(e).filter((text=>0!==text.trim().length||text.indexOf(" ")>-1)).isSome()||M(Sr,ae(e)),_r=element=>((e,t)=>{const n=e=>{for(let i=0;i<e.childNodes.length;i++){const o=Ce.fromDom(e.childNodes[i]);if(t(o))return D.some(o);const r=n(e.childNodes[i]);if(r.isSome())return r}return D.none()};return n(e.dom)})(element,Tr),Ar=element=>Or(element,Tr),Or=(e,t)=>{const n=element=>{const e=Ie(element);for(let i=e.length-1;i>=0;i--){const o=e[i];if(t(o))return D.some(o);const r=n(o);if(r.isSome())return r}return D.none()};return n(e)},Dr={scope:["row","col"]},Er=e=>()=>{const td=Ce.fromTag("td",e.dom);return $e(td,Ce.fromTag("br",e.dom)),td},Nr=e=>()=>Ce.fromTag("col",e.dom),Rr=e=>()=>Ce.fromTag("colgroup",e.dom),Mr=e=>()=>Ce.fromTag("tr",e.dom),Fr=(e,t,n)=>{const o=((e,t)=>{const n=Je(e,t),o=Ie(Ye(e));return He(n,o),n})(e,t);return ee(n,((e,t)=>{null===e?we(o,t):fe(o,t,e)})),o},Pr=e=>e,Ir=(e,t,n)=>{const o=(e,t)=>{((source,e)=>{const t=source.dom,n=e.dom;Rt(t)&&Rt(n)&&(n.style.cssText=t.style.cssText)})(e.element,t),jt(t,"height"),1!==e.colspan&&jt(t,"width")};return{col:n=>{const col=Ce.fromTag(ae(n.element),t.dom);return o(n,col),e(n.element,col),col},colgroup:Rr(t),row:Mr(t),cell:r=>{const td=Ce.fromTag(ae(r.element),t.dom),l=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),c=l.length>0?((e,t,n)=>_r(e).map((o=>{const r=n.join(","),l=pt(o,r,(element=>Ae(element,e)));return z(l,((e,t)=>{const n=Ge(t);return we(n,"contenteditable"),$e(e,n),n}),t)})).getOr(t))(r.element,td,l):td;return $e(c,Ce.fromTag("br")),o(r,td),((e,t)=>{ee(Dr,((n,o)=>ve(e,o).filter((e=>M(n,e))).each((e=>fe(t,o,e)))))})(r.element,td),e(r.element,td),td},replace:Fr,colGap:Nr(t),gap:Er(t)}},Lr=e=>({col:Nr(e),colgroup:Rr(e),row:Mr(e),cell:Er(e),replace:Pr,colGap:Nr(e),gap:Er(e)}),Br=e=>Ce.fromDom(e.getBody()),jr=e=>element=>Ae(element,Br(e)),zr=table=>{we(table,"data-mce-style");const e=element=>we(element,"data-mce-style");L(Yt(table),e),L(Jt(table),e),L(Xt(table),e)},$r=e=>Ce.fromDom(e.selection.getStart()),Ur=e=>e.getBoundingClientRect().width,Wr=e=>e.getBoundingClientRect().height,Hr=(e,t)=>{const n=t.column,o=t.column+t.colspan-1,r=t.row,l=t.row+t.rowspan-1;return n<=e.finishCol&&o>=e.startCol&&r<=e.finishRow&&l>=e.startRow},qr=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Vr=(e,t,n)=>{const o=ro.findItem(e,t,Ae),r=ro.findItem(e,n,Ae);return o.bind((e=>r.map((t=>{return n=e,o=t,r=Math.min(n.row,o.row),l=Math.min(n.column,o.column),c=Math.max(n.row+n.rowspan-1,o.row+o.rowspan-1),d=Math.max(n.column+n.colspan-1,o.column+o.colspan-1),{startRow:r,startCol:l,finishRow:c,finishCol:d};var n,o,r,l,c,d}))))},Kr=(e,t,n)=>Vr(e,t,n).bind((t=>((e,t)=>{let n=!0;const o=S(qr,t);for(let i=t.startRow;i<=t.finishRow;i++)for(let r=t.startCol;r<=t.finishCol;r++)n=n&&ro.getAt(e,i,r).exists(o);return n?D.some(t):D.none()})(e,t))),Zr=(e,t,n)=>Vr(e,t,n).map((t=>{const n=ro.filterItems(e,S(Hr,t));return I(n,(e=>e.element))})),Gr=(e,t)=>ro.findItem(e,t,((e,t)=>Oe(t,e))).map((e=>e.element)),Yr=(e,t,n)=>table(e).bind((table=>((e,t,n,o)=>ro.findItem(e,t,Ae).bind((t=>{const r=n>0?t.row+t.rowspan-1:t.row,l=o>0?t.column+t.colspan-1:t.column;return ro.getAt(e,r+n,l+o).map((e=>e.element))})))(Qr(table),e,t,n))),Jr=(table,e,t)=>{const n=Qr(table);return Zr(n,e,t)},Xr=(table,e,t,n,o)=>{const r=Qr(table),l=Ae(table,t)?D.some(e):Gr(r,e),c=Ae(table,o)?D.some(n):Gr(r,n);return l.bind((e=>c.bind((t=>Zr(r,e,t)))))},Qr=ro.fromTable;var es=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ts=()=>({up:x({selector:vt,closest:kt,predicate:yt,all:Me}),down:x({selector:ft,predicate:gt}),styles:x({get:It,getRaw:Bt,set:Ft,remove:jt}),attrs:x({get:ye,set:fe,remove:we,copyTo:(source,e)=>{const t=xe(source);be(e,t)}}),insert:x({before:Be,after:je,afterAll:We,append:$e,appendAll:He,prepend:ze,wrap:Ue}),remove:x({unwrap:Ke,remove:Ve}),create:x({nu:Ce.fromTag,clone:element=>Ce.fromDom(element.dom.cloneNode(!1)),text:Ce.fromText}),query:x({comparePosition:(element,e)=>element.dom.compareDocumentPosition(e.dom),prevSibling:Fe,nextSibling:Pe}),property:x({children:Ie,name:ae,parent:Re,document:element=>Ne(element).dom,isText:de,isComment:ce,isElement:ue,isSpecial:element=>{const e=ae(element);return M(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],e)},getLanguage:element=>ue(element)?ve(element,"lang"):D.none(),getText:wr,setText:kr,isBoundary:element=>!!ue(element)&&("body"===ae(element)||M(es,ae(element))),isEmptyTag:element=>!!ue(element)&&M(["br","img","hr","input"],ae(element)),isNonEditable:element=>ue(element)&&"false"===ye(element,"contenteditable")}),eq:Ae,is:De});const ns=(e,t,head,n)=>{const o=t(e,head);return z(n,((b,a)=>{const n=t(e,a);return os(e,b,n)}),o)},os=(e,t,n)=>t.bind((s=>n.filter(S(e.eq,s)))),rs=(e,t,n)=>n.length>0?((e,t,n,o)=>o(e,t,n[0],n.slice(1)))(e,t,n,ns):D.none(),ss=(e,t,n,o=A)=>{const r=[t].concat(e.up().all(t)),l=[n].concat(e.up().all(n)),c=path=>W(path,o).fold((()=>path),(e=>path.slice(0,e+1))),d=c(r),m=c(l),h=U(d,(t=>F(m,((e,t)=>S(e.eq,t))(e,t))));return{firstpath:d,secondpath:m,shared:h}},as=ts(),ls=(e,t)=>rs(as,((t,element)=>e(element)),t),is=e=>vt(e,"table"),cs=(e,t,n)=>{const o=e=>element=>void 0!==n&&n(element)||Ae(element,e);return Ae(e,t)?D.some({boxes:D.some([e]),start:e,finish:t}):is(e).bind((r=>is(t).bind((l=>{if(Ae(r,l))return D.some({boxes:Jr(r,e,t),start:e,finish:t});if(Oe(r,l)){const n=pt(t,"td,th",o(r)),c=n.length>0?n[n.length-1]:t;return D.some({boxes:Xr(r,e,r,t,l),start:e,finish:c})}if(Oe(l,r)){const n=pt(e,"td,th",o(l)),c=n.length>0?n[n.length-1]:e;return D.some({boxes:Xr(l,e,r,t,l),start:e,finish:c})}return((e,t,n)=>ss(as,e,t,n))(e,t).shared.bind((c=>kt(c,"table",n).bind((n=>{const c=pt(t,"td,th",o(n)),d=c.length>0?c[c.length-1]:t,m=pt(e,"td,th",o(n)),h=m.length>0?m[m.length-1]:e;return D.some({boxes:Xr(n,e,r,t,l),start:h,finish:d})}))))}))))},us=(e,t)=>{const n=ft(e,t);return n.length>0?D.some(n):D.none()},ds=(e,t,n)=>xt(e,t).bind((t=>xt(e,n).bind((e=>ls(is,[t,e]).map((table=>({first:t,last:e,table:table}))))))),ms=(e,t,n,o,r)=>((e,t)=>U(e,(e=>Se(e,t))))(e,r).bind((e=>Yr(e,t,n).bind((e=>((e,t)=>vt(e,"table").bind((table=>xt(table,t).bind((t=>cs(t,e).bind((e=>e.boxes.map((t=>({boxes:t,start:e.start,finish:e.finish}))))))))))(e,o))))),gs=(e,t)=>us(e,t),ps=(e,t,n)=>ds(e,t,n).bind((t=>{const n=t=>Ae(e,t),o="thead,tfoot,tbody,table",r=vt(t.first,o,n),l=vt(t.last,o,n);return r.bind((e=>l.bind((n=>Ae(e,n)?((table,e,t)=>{const n=Qr(table);return Kr(n,e,t)})(t.table,t.first,t.last):D.none()))))})),hs=k,fs=e=>{const t=(e,t)=>ve(e,t).exists((span=>parseInt(span,10)>1));return e.length>0&&K(e,(e=>t(e,"rowspan")||t(e,"colspan")))?D.some(e):D.none()},bs=(table,e,t)=>e.length<=1?D.none():ps(table,t.firstSelectedSelector,t.lastSelectedSelector).map((t=>({bounds:t,cells:e}))),ys="data-mce-selected",vs="td["+ys+"],th["+ys+"]",ws="["+ys+"]",xs="data-mce-first-selected",ks="td["+xs+"],th["+xs+"]",Cs="data-mce-last-selected",Ss="td["+Cs+"],th["+Cs+"]",Ts=ws,_s={selected:ys,selectedSelector:vs,firstSelected:xs,firstSelectedSelector:ks,lastSelected:Cs,lastSelectedSelector:Ss},As=(e,table,t)=>({element:t,mergable:bs(table,e,_s),unmergable:fs(e),selection:hs(e)}),Os=e=>(t,n)=>{const o=ae(t),r="col"===o||"colgroup"===o?table(element=t).bind((table=>gs(table,_s.firstSelectedSelector))).fold(x(element),(e=>e[0])):t;var element;return kt(r,e,n)},Ds=Os("th,td,caption"),Es=Os("th,td"),Ns=e=>{return t=e.model.table.getSelectedCells(),I(t,Ce.fromDom);var t},Rs=(e,t)=>{e.on("BeforeGetContent",(t=>{const n=n=>{t.preventDefault(),(e=>table(e[0]).map((table=>{const e=yr(table,Ts);return zr(e),[e]})))(n).each((n=>{t.content="text"===t.format?(e=>I(e,(element=>element.dom.innerText)).join(""))(n):((e,t)=>I(t,(t=>e.selection.serializer.serialize(t.dom,{}))).join(""))(e,n)}))};if(!0===t.selection){const t=(e=>j(Ns(e),(e=>Se(e,_s.selectedSelector))))(e);t.length>=1&&n(t)}})),e.on("BeforeSetContent",(n=>{if(!0===n.selection&&!0===n.paste){const o=Ns(e);head(o).each((o=>{table(o).each((table=>{const r=j(((html,e)=>{const div=(e||document).createElement("div");return div.innerHTML=html,Ie(Ce.fromDom(div))})(n.content),(content=>"meta"!==ae(content))),l=pe("table");if(1===r.length&&l(r[0])){n.preventDefault();const l=Ce.fromDom(e.getDoc()),c=Lr(l),d=((element,e,t)=>({element:element,clipboard:e,generators:t}))(o,r[0],c);t.pasteCells(table,d).each((()=>{e.focus()}))}}))}))}}))},Ms=(element,e)=>({element:element,offset:e}),Fs=(e,element,t)=>e.property().isText(element)&&0===e.property().getText(element).trim().length||e.property().isComment(element)?t(element).bind((n=>Fs(e,n,t).orThunk((()=>D.some(n))))):D.none(),Ps=(e,element)=>{if(e.property().isText(element))return e.property().getText(element).length;return e.property().children(element).length},Is=(e,element)=>{const t=Fs(e,element,e.query().prevSibling).getOr(element);if(e.property().isText(t))return Ms(t,Ps(e,t));const n=e.property().children(t);return n.length>0?Is(e,n[n.length-1]):Ms(t,Ps(e,t))},Ls=Is,Bs=ts(),js=(main,e)=>{if(!Ut(main)){const t=(e=>Vo(e).bind((e=>Po(e,["fixed","relative","empty"]))))(main);t.each((t=>{const n=t.value/2;Yo(main,n,t.unit),Yo(e,n,t.unit)}))}},zs=e=>I(e,x(0)),$s=(e,t,n,o,r)=>r(e.slice(0,t)).concat(o).concat(r(e.slice(n))),Us=e=>(t,n,o,r)=>{if(e(o)){const e=Math.max(r,t[n]-Math.abs(o)),l=Math.abs(e-t[n]);return o>=0?l:-l}return o},Ws=Us((e=>e<0)),Hs=Us(O),qs=()=>{const e=(e,t,n,o)=>{const r=(100+n)/100,l=Math.max(o,(e[t]+n)/r);return I(e,((e,n)=>(n===t?l:e/r)-e))},t=(t,n,o,r,l,c)=>c?e(t,n,r,l):((e,t,n,o,r)=>{const l=Ws(e,t,o,r);return $s(e,t,n+1,[l,0],zs)})(t,n,o,r,l);return{resizeTable:(e,t)=>e(t),clampTableDelta:Ws,calcLeftEdgeDeltas:t,calcMiddleDeltas:(e,n,o,r,l,c,d)=>t(e,o,r,l,c,d),calcRightEdgeDeltas:(t,n,o,r,l,c)=>{if(c)return e(t,o,r,l);{const e=Ws(t,o,r,l);return zs(t.slice(0,o)).concat([e])}},calcRedestributedWidths:(e,t,n,o)=>{if(o){const o=(t+n)/t,r=I(e,(e=>e/o));return{delta:100*o-100,newSizes:r}}return{delta:n,newSizes:e}}}},Vs=()=>{const e=(e,t,n,o,r)=>{const l=Hs(e,o>=0?n:t,o,r);return $s(e,t,n+1,[l,-l],zs)};return{resizeTable:(e,t,n)=>{n&&e(t)},clampTableDelta:(e,t,n,o,r)=>{if(r){if(n>=0)return n;{const t=$(e,((a,b)=>a+b-o),0);return Math.max(-t,n)}}return Ws(e,t,n,o)},calcLeftEdgeDeltas:e,calcMiddleDeltas:(t,n,o,r,l,c)=>e(t,o,r,l,c),calcRightEdgeDeltas:(e,t,n,o,r,l)=>{if(l)return zs(e);{const t=o/e.length;return I(e,x(t))}},calcRedestributedWidths:(e,t,n,o)=>({delta:0,newSizes:e})}},Ks=table=>ro.fromTable(table).grid,Zs=pe("th"),Gs=e=>K(e,(e=>Zs(e.element))),Ys=(e,t)=>e&&t?"sectionCells":e?"section":"cells",Js=e=>{const t="thead"===e.section,n=Ct(Xs(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||n?{type:"header",subType:Ys(t,n)}:{type:"body"}},Xs=e=>{const t=j(e,(e=>Zs(e.element)));return 0===t.length?D.some("td"):t.length===e.length?D.some("th"):D.none()},Qs=(e,t,n)=>tt(n(e.element,t),!0,e.isLocked),ea=(e,section)=>e.section!==section?nt(e.element,e.cells,section,e.isNew):e,section=()=>({transformRow:ea,transformCell:(e,t,n)=>{const o=n(e.element,t),r="td"!==ae(o)?((e,t)=>{const n=Je(e,t);je(e,n);const o=Ie(e);return He(n,o),Ve(e),n})(o,"td"):o;return tt(r,e.isNew,e.isLocked)}}),ta=()=>({transformRow:ea,transformCell:Qs}),na=()=>({transformRow:(e,section)=>ea(e,"thead"===section?"tbody":section),transformCell:Qs}),oa=(table,e)=>{const t=(e=>J(e.all,(e=>{const t=Js(e);return"header"===t.type?D.from(t.subType):D.none()})))(ro.fromTable(table)).getOr(e);switch(t){case"section":return section();case"sectionCells":return ta();case"cells":return na()}},ra=section,sa=ta,aa=na,la=()=>({transformRow:k,transformCell:Qs}),ia=e=>kt(e,"[contenteditable]"),ca=(element,e=!1)=>ut(element)?element.dom.isContentEditable:ia(element).fold(x(e),(e=>"true"===ua(e))),ua=element=>element.dom.contentEditable,da=(element,e,t,n)=>{t===n?we(element,e):fe(element,e,t)},ma=(table,e,element)=>{Y(ht(table,e)).fold((()=>ze(table,element)),(e=>je(e,element)))},ga=(table,e)=>{const t=[],n=[],o=e=>I(e,(e=>{e.isNew&&t.push(e.element);const tr=e.element;return qe(tr),L(e.cells,(e=>{e.isNew&&n.push(e.element),da(e.element,"colspan",e.colspan,1),da(e.element,"rowspan",e.rowspan,1),$e(tr,e.element)})),tr})),r=e=>V(e,(e=>I(e.cells,(col=>(da(col.element,"span",col.colspan,1),col.element))))),l=(e,t)=>{const section=((table,e)=>{const section=wt(table,e).getOrThunk((()=>{const t=Ce.fromTag(e,Ee(table).dom);return"thead"===e?ma(table,"caption,colgroup",t):"colgroup"===e?ma(table,"caption",t):$e(table,t),t}));return qe(section),section})(table,t),n=("colgroup"===t?r:o)(e);He(section,n)},c=(e,t)=>{e.length>0?l(e,t):(e=>{wt(table,e).each(Ve)})(t)},d=[],m=[],h=[],f=[];return L(e,(e=>{switch(e.section){case"thead":d.push(e);break;case"tbody":m.push(e);break;case"tfoot":h.push(e);break;case"colgroup":f.push(e)}})),c(f,"colgroup"),c(d,"thead"),c(m,"tbody"),c(h,"tfoot"),{newRows:t,newCells:n}},pa=(e,t)=>{if(0===e.length)return 0;const n=e[0];return W(e,(e=>!t(n.element,e.element))).getOr(e.length)},ha=(e,t,n,o)=>{const r=((e,t)=>e[t])(e,t),l="colgroup"===r.section,c=pa(r.cells.slice(n),o),d=l?1:pa(((e,t)=>I(e,(e=>Kn(e,t))))(e.slice(t),n),o);return{colspan:c,rowspan:d}},fa=(e,t)=>{const n=I(e,(e=>I(e.cells,A)));return I(e,((o,r)=>{const details=V(o.cells,((o,l)=>{if(!1===n[r][l]){const h=ha(e,r,l,t);return((e,t,o,r)=>{for(let l=e;l<e+o;l++)for(let e=t;e<t+r;e++)n[l][e]=!0})(r,l,h.rowspan,h.colspan),[(element=o.element,c=h.rowspan,d=h.colspan,m=o.isNew,{element:element,rowspan:c,colspan:d,isNew:m})]}return[];var element,c,d,m}));return((element,e,section,t)=>({element:element,cells:e,section:section,isNew:t}))(o.element,details,o.section,o.isNew)}))},ba=(e,t,n)=>{const o=[];L(e.colgroups,(colgroup=>{const r=[];for(let o=0;o<e.grid.columns;o++){const element=ro.getColumnAt(e,o).map((e=>tt(e.element,n,!1))).getOrThunk((()=>tt(t.colGap(),!0,!1)));r.push(element)}o.push(nt(colgroup.element,r,"colgroup",n))}));for(let r=0;r<e.grid.rows;r++){const l=[];for(let o=0;o<e.grid.columns;o++){const element=ro.getAt(e,r,o).map((e=>tt(e.element,n,e.isLocked))).getOrThunk((()=>tt(t.gap(),!0,!1)));l.push(element)}const c=e.all[r],d=nt(c.element,l,c.section,n);o.push(d)}return o},ya=e=>fa(e,Ae),va=(e,element)=>J(e.all,(e=>U(e.cells,(e=>Ae(element,e.element))))),wa=(e,t,n)=>{const details=I(t.selection,(t=>Gt(t).bind((t=>va(e,t))).filter(n))),o=St(details);return Tt(o.length>0,o)},xa=(e,t,n,o,r)=>(table,l,c,d)=>{const m=ro.fromTable(table),h=D.from(null==d?void 0:d.section).getOrThunk(la);return t(m,l).map((t=>{const n=((e,t)=>ba(e,t,!1))(m,c),o=e(n,t,Ae,r(c),h),l=eo(o.grid);return{info:t,grid:ya(o.grid),cursor:o.cursor,lockedColumns:l}})).bind((e=>{const t=ga(table,e.grid),r=D.from(null==d?void 0:d.sizing).getOrThunk((()=>mr(table))),l=D.from(null==d?void 0:d.resize).getOrThunk(Vs);return n(table,e.grid,e.info,{sizing:r,resize:l,section:h}),o(table),we(table,Xn),e.lockedColumns.length>0&&fe(table,Xn,e.lockedColumns.join(",")),D.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))},ka=(e,t)=>wa(e,t,O).map((e=>({cells:e,generators:t.generators,clipboard:t.clipboard}))),Ca=(e,t)=>wa(e,t,O),Sa=(e,t)=>wa(e,t,(e=>!e.isLocked)),Ta=(e,t)=>K(t,(t=>((e,t)=>va(e,t).exists((e=>!e.isLocked)))(e,t))),_a=(e,t,n,o)=>{const r=Yn(e).rows;let l=!0;for(let i=0;i<r.length;i++)for(let e=0;e<Gn(r[0]);e++){const c=r[i],d=Kn(c,e),m=n(d.element,t);m&&!l?qn(c,e,tt(o(),!0,d.isLocked)):m&&(l=!1)}return e},Aa=(e,t,n,o)=>{const r=Yn(e).rows;if(t>0&&t<r.length){const e=((e,t)=>$(e,((e,n)=>F(e,(e=>t(e.element,n.element)))?e:e.concat([n])),[]))(r[t-1].cells,n);L(e,(e=>{let l=D.none();for(let i=t;i<r.length;i++)for(let t=0;t<Gn(r[0]);t++){const c=r[i],d=Kn(c,t);n(d.element,e.element)&&(l.isNone()&&(l=D.some(o())),l.each((sub=>{qn(c,t,tt(sub,!0,d.isLocked))})))}}))}return e},Oa=e=>{const t=t=>t(e),n=x(e),o=()=>output,output={tag:!0,inner:e,fold:(t,n)=>n(e),isValue:O,isError:A,map:t=>Ea.value(t(e)),mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:t=>{t(e)},toOptional:()=>D.some(e)};return output},Da=e=>{const t=()=>output,output={tag:!1,inner:e,fold:(t,n)=>t(e),isValue:A,isError:O,map:t,mapError:t=>Ea.error(t(e)),bind:t,exists:A,forall:O,getOr:k,or:k,getOrThunk:_,orThunk:_,getOrDie:(n=String(e),()=>{throw new Error(n)}),each:w,toOptional:D.none};var n;return output},Ea={value:Oa,error:Da,fromOption:(e,t)=>e.fold((()=>Da(t)),Oa)},Na=(e,t)=>({rowDelta:0,colDelta:Gn(e[0])-Gn(t[0])}),Ra=(e,t)=>({rowDelta:e.length-t.length,colDelta:0}),Ma=(e,t,n,o)=>{const r="colgroup"===t.section?n.col:n.cell;return P(e,(e=>tt(r(),!0,o(e))))},Fa=(e,t,n,o)=>{const r=e[e.length-1];return e.concat(P(t,(()=>{const e="colgroup"===r.section?n.colgroup:n.row,t=Jn(r,e,k),l=Ma(t.cells.length,t,n,(e=>se(o,e.toString())));return Vn(t,l)})))},Pa=(e,t,n,o)=>I(e,(e=>{const r=Ma(t,e,n,A);return Wn(e,o,r)})),Ia=(e,t,n)=>{const o=t.colDelta<0?Pa:k,r=t.rowDelta<0?Fa:k,l=eo(e),c=Gn(e[0]),d=F(l,(e=>e===c-1)),m=o(e,Math.abs(t.colDelta),n,d?c-1:c),h=eo(m);return r(m,Math.abs(t.rowDelta),n,Z(h,O))},La=(e,t,col,n)=>{const o=S(n,Kn(e[t],col).element),r=e[t];return e.length>1&&Gn(r)>1&&(col>0&&o(Zn(r,col-1))||col<r.cells.length-1&&o(Zn(r,col+1))||t>0&&o(Zn(e[t-1],col))||t<e.length-1&&o(Zn(e[t+1],col)))},Ba=(e,t,n)=>j(n,(n=>n>=e.column&&n<=Gn(t[0])+e.column)),ja=(e,t,n,o,r)=>{const l=eo(t),c=((e,t,n)=>{const o=Gn(t[0]),r=Yn(t).cols.length+e.row,l=P(o-e.column,(t=>t+e.column)),c=U(l,(e=>K(n,(col=>col!==e)))).getOr(o-1);return{row:r,column:c}})(e,t,l),d=Yn(n).rows,m=Ba(c,d,l),h=((e,t,n)=>{if(e.row>=t.length||e.column>Gn(t[0]))return Ea.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);const o=t.slice(e.row),r=o[0].cells.slice(e.column),l=Gn(n[0]),c=n.length;return Ea.value({rowDelta:o.length-c,colDelta:r.length-l})})(c,t,d);return h.map((e=>{const n={...e,colDelta:e.colDelta-m.length},l=Ia(t,n,o),h=eo(l),f=Ba(c,d,h);return((e,t,n,o,r,l)=>{const c=e.row,d=e.column,m=c+n.length,h=d+Gn(n[0])+l.length,f=Z(l,O);for(let e=c;e<m;e++){let l=0;for(let m=d;m<h;m++){if(f[m]){l++;continue}La(t,e,m,r)&&_a(t,Zn(t[e],m),r,o.cell);const h=m-d-l,y=Kn(n[e-c],h),v=y.element,w=o.replace(v);qn(t[e],m,tt(w,!0,y.isLocked))}}return t})(c,l,d,o,r,f)}))},za=(e,t,n,o,r)=>{((e,t,n,o)=>{t>0&&t<e[0].cells.length&&L(e,(e=>{const r=e.cells[t-1];let l=0;const c=o();for(;e.cells.length>t+l&&n(r.element,e.cells[t+l].element);)qn(e,t+l,tt(c,!0,e.cells[t+l].isLocked)),l++}))})(t,e,r,o.cell);const l=Ra(n,t),c=Ia(n,l,o),d=Ra(t,c),m=Ia(t,d,o);return I(m,((t,i)=>Wn(t,e,c[i].cells)))},$a=(e,t,n,o,r)=>{Aa(t,e,r,o.cell);const l=eo(t),c=Na(t,n),d={...c,colDelta:c.colDelta-l.length},m=Ia(t,d,o),{cols:h,rows:f}=Yn(m),y=eo(m),v=Na(n,t),w={...v,colDelta:v.colDelta+y.length},x=((e,t,n)=>I(e,(e=>$(n,((n,o)=>{const r=Ma(1,e,t,O)[0];return Hn(n,o,r)}),e))))(n,o,y),k=Ia(x,w,o);return[...h,...f.slice(0,e),...k,...f.slice(e,f.length)]},Ua=(e,t,n,o,r)=>{const{rows:l,cols:c}=Yn(e),d=l.slice(0,t),m=l.slice(t),h=((e,t,n,o)=>Jn(e,(e=>o(e,n)),t))(l[n],((e,n)=>t>0&&t<l.length&&o(Zn(l[t-1],n),Zn(l[t],n))?Kn(l[t],n):tt(r(e.element,o),!0,e.isLocked)),o,r);return[...c,...d,h,...m]},Wa=(e,t,n,o,r)=>I(e,(e=>{const l=t>0&&t<Gn(e)&&o(Zn(e,t-1),Zn(e,t)),sub=((e,t,section,n,o,r,l)=>{if("colgroup"!==section&&n)return Kn(e,t);{const t=Kn(e,o);return tt(l(t.element,r),!0,!1)}})(e,t,e.section,l,n,o,r);return Hn(e,t,sub)})),Ha=(e,t,n,o)=>((e,t,n,o)=>void 0!==Zn(e[t],n)&&t>0&&o(Zn(e[t-1],n),Zn(e[t],n)))(e,t,n,o)||((e,t,n)=>t>0&&n(Zn(e,t-1),Zn(e,t)))(e[t],n,o),qa=(e,t,n,o)=>{const r=e=>(e=>"row"===e?Wt(t):Ut(t))(e)?`${e}group`:e;if(e)return Zs(t)?r(n):null;if(o&&Zs(t)){return r("row"===n?"col":"row")}return null},Va=(e,t,n)=>tt(n(e.element,t),!0,e.isLocked),Ka=(e,t,n,o,r,l,c)=>I(e,((e,d)=>((e,t)=>{const n=e.cells,o=I(n,t);return nt(e.element,o,e.section,e.isNew)})(e,((e,m)=>{if((e=>F(t,(t=>n(e.element,t.element))))(e)){const t=c(e,d,m)?r(e,n,o):e;return l(t,d,m).each((e=>{var element,n;element=t.element,n={scope:D.from(e)},ee(n,((e,t)=>{e.fold((()=>{we(element,t)}),(e=>{he(element.dom,t,e)}))}))})),t}return e})))),Za=(e,t,n)=>V(e,((o,i)=>Ha(e,i,t,n)?[]:[Kn(o,t)])),Ga=(e,t,n,o,r)=>{const l=Yn(e).rows,c=V(t,(e=>Za(l,e,o))),d=I(l,(e=>Gs(e.cells))),m=((e,t)=>K(t,k)&&Gs(e)?O:(e,n,o)=>!("th"===ae(e.element)&&t[n]))(c,d),h=((e,t)=>(n,o)=>D.some(qa(e,n.element,"row",t[o])))(n,d);return Ka(e,c,o,r,Va,h,m)},Ya=(e,t,section,n,o,r,l)=>{const{cols:c,rows:d}=Yn(e),m=d[t[0]],h=V(t,(e=>((e,t,n)=>{const o=e[t];return V(o.cells,((o,i)=>Ha(e,t,i,n)?[]:[o]))})(d,e,o))),f=I(m.cells,((e,t)=>Gs(Za(d,t,o)))),y=[...d];L(t,(e=>{y[e]=l.transformRow(d[e],section)}));const v=[...c,...y],w=((e,t)=>K(t,k)&&Gs(e.cells)?O:(e,n,o)=>!("th"===ae(e.element)&&t[o]))(m,f),x=((e,t)=>(n,o,r)=>D.some(qa(e,n.element,"col",t[r])))(n,f);return Ka(v,h,o,r,l.transformCell,x,w)},Ja=(e,details,t,n)=>{const o=Yn(e).rows,r=I(details,(e=>Kn(o[e.row],e.column)));return Ka(e,r,t,n,Va,D.none,O)},Xa=e=>{if(!c(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return L(e,((o,r)=>{const l=X(o);if(1!==l.length)throw new Error("one and only one name per case");const d=l[0],m=o[d];if(void 0!==n[d])throw new Error("duplicate key detected:"+d);if("cata"===d)throw new Error("cannot have a case named cata (sorry)");if(!c(m))throw new Error("case arguments must be an array");t.push(d),n[d]=(...n)=>{const o=n.length;if(o!==m.length)throw new Error("Wrong number of arguments to case "+d+". Expected "+m.length+" ("+m+"), got "+o);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[r].apply(null,n)},match:e=>{const o=X(e);if(t.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+o.join(","));if(!K(t,(e=>M(o,e))))throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+t.join(", "));return e[d].apply(null,n)},log:label=>{console.log(label,{constructors:t,constructor:d,params:n})}}}})),n},Qa={...Xa([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},el=(input,e,t,n,o)=>{const r=input.slice(0),l=((input,e)=>0===input.length?Qa.none():1===input.length?Qa.only(0):0===e?Qa.left(0,1):e===input.length-1?Qa.right(e-1,e):e>0&&e<input.length-1?Qa.middle(e-1,e,e+1):Qa.none())(input,e),c=x(I(r,x(0)));return l.fold(c,(e=>n.singleColumnWidth(r[e],t)),((e,l)=>o.calcLeftEdgeDeltas(r,e,l,t,n.minCellWidth(),n.isRelative)),((e,l,c)=>o.calcMiddleDeltas(r,e,l,c,t,n.minCellWidth(),n.isRelative)),((e,l)=>o.calcRightEdgeDeltas(r,e,l,t,n.minCellWidth(),n.isRelative)))},tl=(e,t,n)=>{let o=0;for(let i=e;i<t;i++)o+=void 0!==n[i]?n[i]:0;return o},nl=(e,t)=>{const n=ro.justCells(e);return I(n,(e=>{const n=tl(e.row,e.row+e.rowspan,t);return{element:e.element,height:n,rowspan:e.rowspan}}))},rl=(e,t)=>ro.hasColumns(e)?((e,t)=>{const n=ro.justColumns(e);return I(n,((e,n)=>({element:e.element,width:t[n],colspan:e.colspan})))})(e,t):((e,t)=>{const n=ro.justCells(e);return I(n,(e=>{const n=tl(e.column,e.column+e.colspan,t);return{element:e.element,width:n,colspan:e.colspan}}))})(e,t),sl=(e,t,n)=>{const o=rl(e,t);L(o,(e=>{n.setElementWidth(e.element,e.width)}))},al=(table,e,t,n,o)=>{const r=ro.fromTable(table),l=o.getCellDelta(e),c=o.getWidths(r,o),d=t===r.grid.columns-1,m=n.clampTableDelta(c,t,l,o.minCellWidth(),d),h=el(c,t,m,o,n),f=I(h,((e,i)=>e+c[i]));sl(r,f,o),n.resizeTable(o.adjustTableWidth,m,d)},ll=(table,e,t,n)=>{const o=ro.fromTable(table),r=((e,table,t)=>lr(e,table,t,Go,(e=>e.getOrThunk(Vt))))(o,table,n),l=I(r,((n,i)=>t===i?Math.max(e+n,Vt()):n)),c=nl(o,l),d=((e,t)=>I(e.all,((e,i)=>({element:e.element,height:t[i]}))))(o,l);L(d,(e=>{Uo(e.element,e.height)})),L(c,(e=>{Uo(e.element,e.height)}));const m=z(l,((b,a)=>b+a),0);Uo(table,m)},il=details=>$(details,((e,t)=>F(e,(e=>e.column===t.column))?e:e.concat([t])),[]).sort(((e,t)=>e.column-t.column)),cl=pe("col"),ml=pe("colgroup"),gl=element=>"tr"===ae(element)||ml(element),pl=element=>({element:element,colspan:zt(element,"colspan",1),rowspan:zt(element,"rowspan",1)}),hl=e=>ve(e,"scope").map((e=>e.substr(0,3))),fl=(e,t=pl)=>{const n=element=>{if(gl(element))return ml((data={element:element}).element)?e.colgroup(data):e.row(data);{const n=element,r=(data=>cl(data.element)?e.col(data):e.cell(data))(t(n));return o=D.some({item:n,replacement:r}),r}var data};let o=D.none();return{getOrInit:(element,e)=>o.fold((()=>n(element)),(p=>e(element,p.item)?p.replacement:n(element)))}},bl=e=>t=>{const n=[],o=element=>{const o="td"===e?{scope:null}:{},r=t.replace(element,e,o);return n.push({item:element,sub:r}),r};return{replaceOrInit:(element,e)=>{if(gl(element)||cl(element))return element;{const t=element;return((element,e)=>U(n,(t=>e(t.item,element))))(t,e).fold((()=>o(t)),(p=>e(element,p.item)?p.sub:o(t)))}}}},yl=e=>({unmerge:t=>{const n=hl(t);return n.each((e=>fe(t,"scope",e))),()=>{const o=e.cell({element:t,colspan:1,rowspan:1});return jt(o,"width"),jt(t,"width"),n.each((e=>fe(o,"scope",e))),o}},merge:e=>(jt(e[0],"width"),(()=>{const t=St(I(e,hl));if(0===t.length)return D.none();{const e=t[0],n=["row","col"];return F(t,(t=>t!==e&&M(n,t)))?D.none():D.from(e)}})().fold((()=>we(e[0],"scope")),(t=>fe(e[0],"scope",t+"group"))),x(e[0]))}),vl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],wl=ts(),xl=element=>((e,t)=>{const n=e.property().name(t);return M(vl,n)})(wl,element),kl=element=>((e,t)=>{const n=e.property().name(t);return M(["ol","ul"],n)})(wl,element),Cl=element=>((e,t)=>M(["br","img","hr","input"],e.property().name(t)))(wl,element),Sl=e=>{const t=pe("br"),n=e=>Ar(e).bind((n=>{const o=Pe(n).map((e=>!!xl(e)||!!Cl(e)&&"img"!==ae(e))).getOr(!1);return Re(n).map((r=>!0===o||(e=>"li"===ae(e)||yt(e,kl).isSome())(r)||t(n)||xl(r)&&!Ae(e,r)?[]:[Ce.fromTag("br")]))})).getOr([]),o=(()=>{const content=V(e,(e=>{const o=Ie(e);return(e=>K(e,(e=>t(e)||de(e)&&0===wr(e).trim().length)))(o)?[]:o.concat(n(e))}));return 0===content.length?[Ce.fromTag("br")]:content})();qe(e[0]),He(e[0],o)},Tl=e=>ca(e,!0),_l=table=>{0===Yt(table).length&&Ve(table)},Al=(e,cursor)=>({grid:e,cursor:cursor}),Ol=(e,t,n)=>{var o,r;const l=Yn(e).rows;return D.from(null===(r=null===(o=l[t])||void 0===o?void 0:o.cells[n])||void 0===r?void 0:r.element).filter(Tl).orThunk((()=>(e=>J(e,(e=>J(e.cells,(e=>{const t=e.element;return Tt(Tl(t),t)})))))(l)))},Dl=(e,t,n)=>{const o=Ol(e,t,n);return Al(e,o)},El=details=>$(details,((e,t)=>F(e,(e=>e.row===t.row))?e:e.concat([t])),[]).sort(((e,t)=>e.row-t.row)),Nl=(section,e)=>(t,details,n,o,r)=>{const l=El(details),c=I(l,(e=>e.row)),d=Ya(t,c,section,e,n,o.replaceOrInit,r);return Dl(d,details[0].row,details[0].column)},Rl=Nl("thead",!0),Ml=Nl("tbody",!1),Fl=Nl("tfoot",!1),Pl=(e,t,n)=>{const o=((e,section)=>en(e,(()=>section)))(e,n.section),r=ro.generate(o);return ba(r,t,!0)},Il=(table,e,details,t)=>((e,t,n,o)=>{const r=ro.generate(t),l=o.getWidths(r,o);sl(r,l,o)})(0,e,0,t.sizing),Ll=(table,e,details,t)=>((e,t,details,n,o)=>{const r=ro.generate(t),l=n.getWidths(r,n),c=n.pixelWidth(),{newSizes:d,delta:m}=o.calcRedestributedWidths(l,c,details.pixelDelta,n.isRelative);sl(r,d,n),n.adjustTableWidth(m)})(0,e,details,t.sizing,t.resize),Bl=(e,details)=>F(details,(e=>0===e.column&&e.isLocked)),jl=(e,details)=>F(details,(t=>t.column+t.colspan>=e.grid.columns&&t.isLocked)),zl=(e,details)=>{const t=so(e),n=il(details);return $(n,((e,n)=>e+t[n.column].map(zn).getOr(0)),0)},$l=e=>(t,n)=>Ca(t,n).filter((details=>!(e?Bl:jl)(t,details))).map((details=>({details:details,pixelDelta:zl(t,details)}))),Ul=e=>(t,n)=>ka(t,n).filter((details=>!(e?Bl:jl)(t,details.cells))),Wl=bl("th"),Hl=bl("td"),ql=xa(((e,details,t,n)=>{const o=details[0].row,r=El(details),l=z(r,((e,r)=>({grid:Ua(e.grid,o,r.row+e.delta,t,n.getOrInit),delta:e.delta+1})),{grid:e,delta:0}).grid;return Dl(l,o,details[0].column)}),Ca,w,w,fl),Vl=xa(((e,details,t,n)=>{const o=El(details),r=o[o.length-1],l=r.row+r.rowspan,c=z(o,((e,o)=>Ua(e,l,o.row,t,n.getOrInit)),e);return Dl(c,l,details[0].column)}),Ca,w,w,fl),Kl=xa(((e,t,n,o)=>{const details=t.details,r=il(details),l=r[0].column,c=z(r,((e,col)=>({grid:Wa(e.grid,l,col.column+e.delta,n,o.getOrInit),delta:e.delta+1})),{grid:e,delta:0}).grid;return Dl(c,details[0].row,l)}),$l(!0),Ll,w,fl),Zl=xa(((e,t,n,o)=>{const details=t.details,r=details[details.length-1],l=r.column+r.colspan,c=il(details),d=z(c,((e,col)=>Wa(e,l,col.column,n,o.getOrInit)),e);return Dl(d,details[0].row,l)}),$l(!1),Ll,w,fl),Gl=xa(((e,t,n,o)=>{const r=il(t.details),l=((e,t)=>V(e,(e=>{const n=e.cells,o=z(t,((e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e),n);return o.length>0?[nt(e.element,o,e.section,e.isNew)]:[]})))(e,I(r,(e=>e.column))),c=l.length>0?l[0].cells.length-1:0;return Dl(l,r[0].row,Math.min(r[0].column,c))}),((e,t)=>Sa(e,t).map((details=>({details:details,pixelDelta:-zl(e,details)})))),Ll,_l,fl),Yl=xa(((e,details,t,n)=>{const o=El(details),r=((e,t,n)=>{const{rows:o,cols:r}=Yn(e);return[...r,...o.slice(0,t),...o.slice(n+1)]})(e,o[0].row,o[o.length-1].row),l=r.length>0?r.length-1:0;return Dl(r,Math.min(details[0].row,l),details[0].column)}),Ca,w,_l,fl),Jl=xa(((e,details,t,n)=>{const o=il(details),r=I(o,(e=>e.column)),l=Ga(e,r,!0,t,n.replaceOrInit);return Dl(l,details[0].row,details[0].column)}),Sa,w,w,Wl),Xl=xa(((e,details,t,n)=>{const o=il(details),r=I(o,(e=>e.column)),l=Ga(e,r,!1,t,n.replaceOrInit);return Dl(l,details[0].row,details[0].column)}),Sa,w,w,Hl),Ql=xa(Rl,Sa,w,w,Wl),ei=xa(Ml,Sa,w,w,Hl),ti=xa(Fl,Sa,w,w,Hl),ni=xa(((e,details,t,n)=>{const o=Ja(e,details,t,n.replaceOrInit);return Dl(o,details[0].row,details[0].column)}),Sa,w,w,Wl),oi=xa(((e,details,t,n)=>{const o=Ja(e,details,t,n.replaceOrInit);return Dl(o,details[0].row,details[0].column)}),Sa,w,w,Hl),ri=xa(((e,t,n,o)=>{const r=t.cells;Sl(r);const l=((e,t,n,o)=>{const r=Yn(e).rows;if(0===r.length)return e;for(let i=t.startRow;i<=t.finishRow;i++)for(let e=t.startCol;e<=t.finishCol;e++){const t=r[i],n=Kn(t,e).isLocked;qn(t,e,tt(o(),!1,n))}return e})(e,t.bounds,0,o.merge(r));return Al(l,D.from(r[0]))}),((e,t)=>((e,t)=>t.mergable)(0,t).filter((t=>Ta(e,t.cells)))),Il,w,yl),si=xa(((e,t,n,o)=>{const r=z(t,((b,e)=>_a(b,e,n,o.unmerge(e))),e);return Al(r,D.from(t[0]))}),((e,t)=>((e,t)=>t.unmergable)(0,t).filter((t=>Ta(e,t)))),Il,w,yl),ai=xa(((e,t,n,o)=>{const r=((table,e)=>{const t=ro.fromTable(table);return ba(t,e,!0)})(t.clipboard,t.generators),l=((e,t)=>({row:e,column:t}))(t.row,t.column);return ja(l,e,r,t.generators,n).fold((()=>Al(e,D.some(t.element))),(e=>Dl(e,t.row,t.column)))}),((e,t)=>Gt(t.element).bind((n=>va(e,n).map((details=>({...details,generators:t.generators,clipboard:t.clipboard})))))),Il,w,fl),ii=xa(((e,t,n,o)=>{const r=Yn(e).rows,l=t.cells[0].column,c=r[t.cells[0].row],d=Pl(t.clipboard,t.generators,c),m=za(l,e,d,t.generators,n);return Dl(m,t.cells[0].row,t.cells[0].column)}),Ul(!0),w,w,fl),ci=xa(((e,t,n,o)=>{const r=Yn(e).rows,l=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,c=r[t.cells[0].row],d=Pl(t.clipboard,t.generators,c),m=za(l,e,d,t.generators,n);return Dl(m,t.cells[0].row,t.cells[0].column)}),Ul(!1),w,w,fl),ui=xa(((e,t,n,o)=>{const r=Yn(e).rows,l=t.cells[0].row,c=r[l],d=Pl(t.clipboard,t.generators,c),m=$a(l,e,d,t.generators,n);return Dl(m,t.cells[0].row,t.cells[0].column)}),ka,w,w,fl),di=xa(((e,t,n,o)=>{const r=Yn(e).rows,l=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,c=r[t.cells[0].row],d=Pl(t.clipboard,t.generators,c),m=$a(l,e,d,t.generators,n);return Dl(m,t.cells[0].row,t.cells[0].column)}),ka,w,w,fl),mi=(table,e)=>{const t=ro.fromTable(table);return Ca(t,e).bind((e=>{const n=e[e.length-1],o=e[0].column,r=n.column+n.colspan,l=H(I(t.all,(e=>j(e.cells,(e=>e.column>=o&&e.column<r)))));return Xs(l)})).getOr("")},gi=(table,e)=>{const t=ro.fromTable(table);return Ca(t,e).bind(Xs).getOr("")},pi=(table,e)=>{const t=ro.fromTable(table);return Ca(t,e).bind((e=>{const n=e[e.length-1],o=e[0].row,r=n.row+n.rowspan;return(e=>{const t=I(e,(e=>Js(e).type)),n=M(t,"header"),o=M(t,"footer");if(n||o){const e=M(t,"body");return!n||e||o?n||e||!o?D.none():D.some("footer"):D.some("header")}return D.some("body")})(t.all.slice(o,r))})).getOr("")},hi=(e,t)=>e.dispatch("NewRow",{node:t}),fi=(e,t)=>e.dispatch("NewCell",{node:t}),bi=(e,table,data)=>{e.dispatch("TableModified",{...data,table:table})},yi={structure:!1,style:!0},vi={structure:!0,style:!1},wi={structure:!0,style:!0},option=e=>t=>t.options.get(e),xi="100%",ki=e=>{var t;const n=e.dom,o=null!==(t=n.getParent(e.selection.getStart(),n.isBlock))&&void 0!==t?t:e.getBody();return $n(Ce.fromDom(o))+"px"},Ci=e=>D.from(e.options.get("table_clone_elements")),Si=option("table_header_type"),Ti=option("table_column_resizing"),_i=e=>"preservetable"===Ti(e),Ai=e=>"resizetable"===Ti(e),Oi=option("table_sizing_mode"),Di=e=>"relative"===Oi(e),Ei=e=>"fixed"===Oi(e),Ni=e=>"responsive"===Oi(e),Ri=option("table_resize_bars"),Mi=option("table_style_by_css"),Fi=e=>{const t=e.options,n=t.get("table_default_attributes");return t.isSet("table_default_attributes")?n:((e,t)=>Ni(e)||Mi(e)?t:Ei(e)?{...t,width:ki(e)}:{...t,width:xi})(e,n)},Pi=e=>{const t=e.options,n=t.get("table_default_styles");return t.isSet("table_default_styles")?n:((e,t)=>Ni(e)||!Mi(e)?t:Ei(e)?{...t,width:ki(e)}:{...t,width:xi})(e,n)},Ii=option("table_use_colgroups"),Li=(e,table)=>Di(e)?pr(table):Ei(e)?gr(table):mr(table),Bi=(e,t,n)=>{const o=e=>"table"===ae(Br(e)),r=Ci(e),l=Ai(e)?w:js,c=table=>{switch(Si(e)){case"section":return ra();case"sectionCells":return sa();case"cells":return aa();default:return oa(table,"section")}},d=(table,t)=>t.cursor.fold((()=>{const t=Yt(table);return head(t).filter(ut).map((t=>{n.clearSelectedCells(table.dom);const o=e.dom.createRng();return o.selectNode(t.dom),e.selection.setRng(o),fe(t,"data-mce-selected","1"),o}))}),(t=>{const o=Ls(Bs,t);const r=e.dom.createRng();return r.setStart(o.element.dom,o.offset),r.setEnd(o.element.dom,o.offset),e.selection.setRng(r),n.clearSelectedCells(table.dom),D.some(r)})),m=(n,o,l,m)=>(table,h,f=!1)=>{zr(table);const y=Ce.fromDom(e.getDoc()),v=Ir(l,y,r),w={sizing:Li(e,table),resize:Ai(e)?qs():Vs(),section:c(table)};return o(table)?n(table,h,v,w).bind((n=>{t.refresh(table.dom),L(n.newRows,(t=>{hi(e,t.dom)})),L(n.newCells,(t=>{fi(e,t.dom)}));const o=d(table,n);return ut(table)&&(zr(table),f||bi(e,table.dom,m)),o.map((e=>({rng:e,effect:m})))})):D.none()},h=m(Yl,(table=>!o(e)||Ks(table).rows>1),w,vi),f=m(Gl,(table=>!o(e)||Ks(table).columns>1),w,vi);return{deleteRow:h,deleteColumn:f,insertRowsBefore:m(ql,O,w,vi),insertRowsAfter:m(Vl,O,w,vi),insertColumnsBefore:m(Kl,O,l,vi),insertColumnsAfter:m(Zl,O,l,vi),mergeCells:m(ri,O,w,vi),unmergeCells:m(si,O,w,vi),pasteColsBefore:m(ii,O,w,vi),pasteColsAfter:m(ci,O,w,vi),pasteRowsBefore:m(ui,O,w,vi),pasteRowsAfter:m(di,O,w,vi),pasteCells:m(ai,O,w,wi),makeCellsHeader:m(ni,O,w,vi),unmakeCellsHeader:m(oi,O,w,vi),makeColumnsHeader:m(Jl,O,w,vi),unmakeColumnsHeader:m(Xl,O,w,vi),makeRowsHeader:m(Ql,O,w,vi),makeRowsBody:m(ei,O,w,vi),makeRowsFooter:m(ti,O,w,vi),getTableRowType:pi,getTableCellType:gi,getTableColType:mi}},ji=(element,e,t)=>{const n=zt(element,e,1);1===t||n<=1?we(element,e):fe(element,e,Math.min(t,n))},zi=(e,t)=>n=>{const o=n.column+n.colspan-1,r=n.column;return o>=e&&r<t},$i=(table,e)=>{const t=ro.fromTable(table);return Sa(t,e).map((e=>{const n=e[e.length-1],o=e[0].column,r=n.column+n.colspan,l=((e,t,n)=>{if(ro.hasColumns(e)){const o=j(ro.justColumns(e),zi(t,n)),r=I(o,(e=>{const o=Ye(e.element);return ji(o,"span",n-t),o})),l=Ce.fromTag("colgroup");return He(l,r),[l]}return[]})(t,o,r),c=((e,t,n)=>I(e.all,(e=>{const o=j(e.cells,zi(t,n)),r=I(o,(e=>{const o=Ye(e.element);return ji(o,"colspan",n-t),o})),l=Ce.fromTag("tr");return He(l,r),l})))(t,o,r);return[...l,...c]}))},Ui=(table,e,t)=>{const n=ro.fromTable(table);return Ca(n,e).bind((e=>{const o=ba(n,t,!1),r=Yn(o).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),l=V(r,(e=>{const t=j(e.cells,(e=>!e.isLocked));return t.length>0?[{...e,cells:t}]:[]})),c=ya(l);return Tt(c.length>0,c)})).map((e=>(e=>I(e,(e=>{const tr=Ge(e.element);return L(e.cells,(e=>{const t=Ye(e.element);da(t,"colspan",e.colspan,1),da(t,"rowspan",e.rowspan,1),$e(tr,t)})),tr})))(e)))},Wi=Xa([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Hi=(e,t,n)=>{const o=n.substring(0,n.length-e.length),r=parseFloat(o);return o===r.toString()?t(r):Wi.invalid(n)},qi={...Wi,from:e=>Dt(e,"%")?Hi("%",Wi.percent,e):Dt(e,"px")?Hi("px",Wi.pixels,e):Wi.invalid(e)},Vi=(e,t,n)=>e.fold((()=>t),(e=>((e,t,n)=>{const o=n/t;return I(e,(e=>qi.from(e).fold((()=>e),(e=>e*o+"px"),(e=>e/100*n+"px"))))})(t,n,e)),(e=>((e,t)=>I(e,(e=>qi.from(e).fold((()=>e),(e=>e/t*100+"%"),(e=>e+"%")))))(t,n))),Ki=(e,t,n)=>{const o=qi.from(n),r=K(e,(s=>"0px"===s))?((e,t)=>{const n=e.fold((()=>x("")),(e=>x(e/t+"px")),(()=>x(100/t+"%")));return P(t,n)})(o,e.length):Vi(o,e,t);return Yi(r)},Zi=(e,t)=>0===e.length?t:z(e,((e,t)=>qi.from(t).fold(x(0),k,k)+e),0),Gi=(e,t)=>qi.from(e).fold(x(e),(e=>e+t+"px"),(e=>e+t+"%")),Yi=e=>{if(0===e.length)return e;const t=z(e,((e,t)=>{const n=qi.from(t).fold((()=>({value:t,remainder:0})),(e=>((e,t)=>{const n=Math.floor(e);return{value:n+t,remainder:e-n}})(e,"px")),(e=>({value:e+"%",remainder:0})));return{output:[n.value].concat(e.output),remainder:e.remainder+n.remainder}}),{output:[],remainder:0}),n=t.output;return n.slice(0,n.length-1).concat([Gi(n[n.length-1],Math.round(t.remainder))])},Ji=qi.from,Xi=e=>Ji(e).fold(x("px"),x("px"),x("%")),Qi=(table,e,t)=>{const n=ro.fromTable(table),o=n.all,r=ro.justCells(n),l=ro.justColumns(n);e.each((e=>{const t=Xi(e),o=jn(table),c=((e,table)=>rr(e,table,er,sr))(n,table),d=Ki(c,o,e);ro.hasColumns(n)?((e,t,n)=>{L(t,((t,o)=>{const r=Zi([e[o]],qt());Ft(t.element,"width",r+n)}))})(d,l,t):((e,t,n)=>{L(t,(t=>{const o=e.slice(t.column,t.colspan+t.column),r=Zi(o,qt());Ft(t.element,"width",r+n)}))})(d,r,t),Ft(table,"width",e)})),t.each((e=>{const t=Xi(e),l=go(table),c=((e,table,t)=>lr(e,table,t,nr,sr))(n,table,No);((e,t,n,o)=>{L(n,(t=>{const n=e.slice(t.row,t.rowspan+t.row),r=Zi(n,Vt());Ft(t.element,"height",r+o)})),L(t,((t,i)=>{Ft(t.element,"height",e[i])}))})(Ki(c,l,e),o,r,t),Ft(table,"height",e)}))},ec=table=>Vo(table).exists((e=>Io.test(e))),tc=table=>Vo(table).exists((e=>Lo.test(e))),nc=table=>Vo(table).isNone(),oc=element=>{we(element,"width")},rc=table=>{const e=Jo(table);Qi(table,D.some(e),D.none()),oc(table)},sc=table=>{const e=(table=>jn(table)+"px")(table);Qi(table,D.some(e),D.none()),oc(table)},ac=table=>{jt(table,"width");const e=Jt(table),t=e.length>0?e:Yt(table);L(t,(e=>{jt(e,"width"),oc(e)})),oc(table)},lc={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},ic=e=>{const t=Ce.fromTag("colgroup");return P(e,(()=>$e(t,Ce.fromTag("col")))),t},cc=(e,t,n,o)=>P(e,(e=>((e,t,n,o)=>{const tr=Ce.fromTag("tr");for(let r=0;r<e;r++){const td=o<t||r<n?Ce.fromTag("th"):Ce.fromTag("td");r<n&&fe(td,"scope","row"),o<t&&fe(td,"scope","col"),$e(td,Ce.fromTag("br")),$e(tr,td)}return tr})(t,n,o,e))),uc=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},dc=(e,t,n,o,l)=>{const c=Pi(e),d={styles:c,attributes:Fi(e),colGroups:Ii(e)};return e.undoManager.ignore((()=>{const table=((e,t,n,o,r,l=lc)=>{const table=Ce.fromTag("table"),c="cells"!==r;Pt(table,l.styles),be(table,l.attributes),l.colGroups&&$e(table,ic(t));const d=Math.min(e,n);if(c&&n>0){const thead=Ce.fromTag("thead");$e(table,thead);const e=cc(n,t,"sectionCells"===r?d:0,o);He(thead,e)}const tbody=Ce.fromTag("tbody");$e(table,tbody);const m=cc(c?e-d:e,t,c?0:n,o);return He(tbody,m),table})(n,t,l,o,Si(e),d);fe(table,"data-mce-id","__mce");const html=(element=>{const e=Ce.fromTag("div"),t=Ce.fromDom(element.dom.cloneNode(!0));return $e(e,t),(element=>element.dom.innerHTML)(e)})(table);e.insertContent(html),e.addVisual()})),xt(Br(e),'table[data-mce-id="__mce"]').map((table=>(Ei(e)?sc(table):Ni(e)?ac(table):(Di(e)||(e=>r(e)&&-1!==e.indexOf("%"))(c.width))&&rc(table),zr(table),we(table,"data-mce-id"),((e,table)=>{L(ft(table,"tr"),(t=>{hi(e,t.dom),L(ft(t,"th,td"),(t=>{fi(e,t.dom)}))}))})(e,table),((e,t)=>{xt(t,"td,th").each(S(uc,e))})(e,table),table.dom))).getOrNull()};var mc=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const gc="x-tinymce/dom-table-",pc=gc+"rows",hc=gc+"columns",fc=e=>{const t=mc.FakeClipboardItem(e);mc.write([t])},bc=e=>{var t;const n=null!==(t=mc.read())&&void 0!==t?t:[];return J(n,(t=>D.from(t.getType(e))))},yc=e=>{bc(e).isSome()&&mc.clear()},vc=e=>{e.fold(xc,(e=>fc({[pc]:e})))},wc=()=>bc(pc),xc=()=>yc(pc),kc=e=>{e.fold(Sc,(e=>fc({[hc]:e})))},Cc=()=>bc(hc),Sc=()=>yc(hc),Tc=e=>Ds($r(e),jr(e)),_c=(e,t)=>{const n=jr(e),o=e=>table(e,n),c=t=>(e=>Es($r(e),jr(e)))(e).bind((e=>o(e).map((table=>t(table,e))))),d=t=>{e.focus()},m=(t,n=!1)=>c(((table,o)=>{const r=As(Ns(e),table,o);t(table,r,n).each(d)})),h=()=>c(((table,t)=>{const n=As(Ns(e),table,t),o=Ir(w,Ce.fromDom(e.getDoc()),D.none());return Ui(table,n,o)})),f=()=>c(((table,t)=>{const n=As(Ns(e),table,t);return $i(table,n)})),y=(t,n)=>n().each((n=>{const o=I(n,(e=>Ye(e)));c(((table,n)=>{const r=Lr(Ce.fromDom(e.getDoc())),l=((e,t,n,o)=>({selection:hs(e),clipboard:n,generators:o}))(Ns(e),0,o,r);t(table,l).each(d)}))})),x=e=>(t,n)=>((e,t)=>se(e,t)?D.from(e[t]):D.none())(n,"type").each((t=>{m(e(t),n.no_events)}));ee({mceTableSplitCells:()=>m(t.unmergeCells),mceTableMergeCells:()=>m(t.mergeCells),mceTableInsertRowBefore:()=>m(t.insertRowsBefore),mceTableInsertRowAfter:()=>m(t.insertRowsAfter),mceTableInsertColBefore:()=>m(t.insertColumnsBefore),mceTableInsertColAfter:()=>m(t.insertColumnsAfter),mceTableDeleteCol:()=>m(t.deleteColumn),mceTableDeleteRow:()=>m(t.deleteRow),mceTableCutCol:()=>f().each((e=>{kc(e),m(t.deleteColumn)})),mceTableCutRow:()=>h().each((e=>{vc(e),m(t.deleteRow)})),mceTableCopyCol:()=>f().each((e=>kc(e))),mceTableCopyRow:()=>h().each((e=>vc(e))),mceTablePasteColBefore:()=>y(t.pasteColsBefore,Cc),mceTablePasteColAfter:()=>y(t.pasteColsAfter,Cc),mceTablePasteRowBefore:()=>y(t.pasteRowsBefore,wc),mceTablePasteRowAfter:()=>y(t.pasteRowsAfter,wc),mceTableDelete:()=>Tc(e).each((t=>{table(t,n).filter(T(n)).each((table=>{const cursor=Ce.fromText("");if(je(table,cursor),Ve(table),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{const t=e.dom.createRng();t.setStart(cursor.dom,0),t.setEnd(cursor.dom,0),e.selection.setRng(t),e.nodeChanged()}}))})),mceTableCellToggleClass:(t,n)=>{c((table=>{const t=Ns(e),o=K(t,(t=>e.formatter.match("tablecellclass",{value:n},t.dom))),r=o?e.formatter.remove:e.formatter.apply;L(t,(e=>r("tablecellclass",{value:n},e.dom))),bi(e,table.dom,yi)}))},mceTableToggleClass:(t,n)=>{c((table=>{e.formatter.toggle("tableclass",{value:n},table.dom),bi(e,table.dom,yi)}))},mceTableToggleCaption:()=>{Tc(e).each((t=>{table(t,n).each((table=>{wt(table,"caption").fold((()=>{const caption=Ce.fromTag("caption");$e(caption,Ce.fromText("Caption")),((e,element,t)=>{Le(e,t).fold((()=>{$e(e,element)}),(e=>{Be(e,element)}))})(table,caption,0),e.selection.setCursorLocation(caption.dom,0)}),(caption=>{pe("caption")(t)&&_e("td",table).each((td=>e.selection.setCursorLocation(td.dom,0))),Ve(caption)})),bi(e,table.dom,vi)}))}))},mceTableSizingMode:(t,o)=>(t=>Tc(e).each((o=>{Ni(e)||Ei(e)||Di(e)||table(o,n).each((table=>{"relative"!==t||ec(table)?"fixed"!==t||tc(table)?"responsive"!==t||nc(table)||ac(table):sc(table):rc(table),zr(table),bi(e,table.dom,vi)}))})))(o),mceTableCellType:x((e=>"th"===e?t.makeCellsHeader:t.unmakeCellsHeader)),mceTableColType:x((e=>"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader)),mceTableRowType:x((e=>{switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}}))},((t,n)=>e.addCommand(n,t))),e.addCommand("mceInsertTable",((t,n)=>{((e,t,n,o={})=>{const r=e=>v(e)&&e>0;if(r(t)&&r(n)){const r=o.headerRows||0,l=o.headerColumns||0;return dc(e,n,t,l,r)}console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table.")})(e,n.rows,n.columns,n.options)})),e.addCommand("mceTableApplyCellStyle",((t,n)=>{const c=style=>"tablecell"+style.toLowerCase().replace("-","");if(!l(n))return;const d=Ns(e);if(0===d.length)return;const m=ne(n,((t,style)=>e.formatter.has(c(style))&&r(t)));(e=>{for(const t in e)if(Q.call(e,t))return!1;return!0})(m)||(ee(m,((t,style)=>{const n=c(style);L(d,(o=>{""===t?e.formatter.remove(n,{value:null},o.dom,!0):e.formatter.apply(n,{value:t},o.dom)}))})),o(d[0]).each((table=>bi(e,table.dom,yi))))}))},Ac=Xa([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Oc={before:Ac.before,on:Ac.on,after:Ac.after,cata:(e,t,n,o)=>e.fold(t,n,o),getStart:e=>e.fold(k,k,k)},Dc=(e,t)=>({selection:e,kill:t}),Ec=(e,element)=>{const t=e.document.createRange();return t.selectNode(element.dom),t},Nc=(e,element)=>{const t=e.document.createRange();return Rc(t,element),t},Rc=(e,element)=>e.selectNodeContents(element.dom),Mc=(e,t,n)=>{const o=e.document.createRange();var r;return r=o,t.fold((e=>{r.setStartBefore(e.dom)}),((e,t)=>{r.setStart(e.dom,t)}),(e=>{r.setStartAfter(e.dom)})),((e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,n)=>{e.setEnd(t.dom,n)}),(t=>{e.setEndAfter(t.dom)}))})(o,n),o},Fc=(e,t,n,o,r)=>{const l=e.document.createRange();return l.setStart(t.dom,n),l.setEnd(o.dom,r),l},Pc=rect=>({left:rect.left,top:rect.top,right:rect.right,bottom:rect.bottom,width:rect.width,height:rect.height}),Ic=Xa([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Lc=(e,t,n)=>t(Ce.fromDom(n.startContainer),n.startOffset,Ce.fromDom(n.endContainer),n.endOffset),Bc=(e,t)=>{const n=((e,t)=>t.match({domRange:e=>({ltr:x(e),rtl:D.none}),relative:(t,n)=>({ltr:on((()=>Mc(e,t,n))),rtl:on((()=>D.some(Mc(e,n,t))))}),exact:(t,n,o,r)=>({ltr:on((()=>Fc(e,t,n,o,r))),rtl:on((()=>D.some(Fc(e,o,r,t,n))))})}))(e,t);return((e,t)=>{const n=t.ltr();if(n.collapsed)return t.rtl().filter((e=>!1===e.collapsed)).map((e=>Ic.rtl(Ce.fromDom(e.endContainer),e.endOffset,Ce.fromDom(e.startContainer),e.startOffset))).getOrThunk((()=>Lc(0,Ic.ltr,n)));return Lc(0,Ic.ltr,n)})(0,n)},jc=(e,t)=>Bc(e,t).match({ltr:(t,n,o,r)=>{const l=e.document.createRange();return l.setStart(t.dom,n),l.setEnd(o.dom,r),l},rtl:(t,n,o,r)=>{const l=e.document.createRange();return l.setStart(o.dom,r),l.setEnd(t.dom,n),l}});Ic.ltr,Ic.rtl;const zc=(e,t,n,o)=>({start:e,soffset:t,finish:n,foffset:o}),$c=(e,t,n,o)=>({start:Oc.on(e,t),finish:Oc.on(n,o)}),Uc=(e,t)=>{const n=jc(e,t);return zc(Ce.fromDom(n.startContainer),n.startOffset,Ce.fromDom(n.endContainer),n.endOffset)},Wc=$c,Hc=(e,t,n,o,r)=>Ae(n,o)?D.none():cs(n,o,t).bind((t=>{const o=t.boxes.getOr([]);return o.length>1?(r(e,o,t.start,t.finish),D.some(Dc(D.some(Wc(n,0,n,Cr(n))),!0))):D.none()})),qc=(e,t)=>({item:e,mode:t}),Vc=(e,t,n,o=Kc)=>e.property().parent(t).map((p=>qc(p,o))),Kc=(e,t,n,o=Zc)=>n.sibling(e,t).map((p=>qc(p,o))),Zc=(e,t,n,o=Zc)=>{const r=e.property().children(t);return n.first(r).map((e=>qc(e,o)))},Gc=[{current:Vc,next:Kc,fallback:D.none()},{current:Kc,next:Zc,fallback:D.some(Vc)},{current:Zc,next:Zc,fallback:D.some(Kc)}],Yc=(e,t,n,o,r=Gc)=>U(r,(e=>e.current===n)).bind((n=>n.current(e,t,o,n.next).orThunk((()=>n.fallback.bind((n=>Yc(e,t,n,o))))))),Jc=()=>({sibling:(e,t)=>e.query().prevSibling(t),first:e=>e.length>0?D.some(e[e.length-1]):D.none()}),Xc=()=>({sibling:(e,t)=>e.query().nextSibling(t),first:e=>e.length>0?D.some(e[0]):D.none()}),Qc=(e,t,n,o,r,l)=>Yc(e,t,o,r).bind((t=>l(t.item)?D.none():n(t.item)?D.some(t.item):Qc(e,t.item,n,t.mode,r,l))),eu=e=>element=>0===e.property().children(element).length,tu=(e,t,n,o)=>Qc(e,t,n,Kc,Jc(),o),nu=(e,t,n,o)=>Qc(e,t,n,Kc,Xc(),o),ou=ts(),ru=(element,e)=>((e,t,n)=>tu(e,t,eu(e),n))(ou,element,e),su=(element,e)=>((e,t,n)=>nu(e,t,eu(e),n))(ou,element,e),au=Xa([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),lu=e=>kt(e,"tr"),iu={...au,verify:(e,t,n,o,r,l,c)=>kt(o,"td,th",c).bind((n=>kt(t,"td,th",c).map((t=>Ae(n,t)?Ae(o,n)&&Cr(n)===r?l(t):au.none("in same cell"):ls(lu,[n,t]).fold((()=>((e,t,n)=>{const o=e.getRect(t),r=e.getRect(n);return r.right>o.left&&r.left<o.right})(e,t,n)?au.success():l(t)),(e=>l(t))))))).getOr(au.none("default")),cata:(e,t,n,o,r)=>e.fold(t,n,o,r)},cu=(e,element)=>W(e,S(Ae,element)),uu=pe("br"),du=(e,t,n)=>t(e,n).bind((e=>de(e)&&0===wr(e).trim().length?du(e,t,n):D.some(e))),mu=(e,element,t,n)=>((element,e)=>Le(element,e).filter(uu).orThunk((()=>Le(element,e-1).filter(uu))))(element,t).bind((br=>n.traverse(br).fold((()=>du(br,n.gather,e).map(n.relative)),(e=>(element=>Re(element).bind((e=>{const t=Ie(e);return cu(t,element).map((n=>((e,t,element,n)=>({parent:e,children:t,element:element,index:n}))(e,t,element,n)))})))(e).map((e=>Oc.on(e.parent,e.index))))))),gu=(e,element,t,n)=>{const o=uu(element)?((e,element,t)=>t.traverse(element).orThunk((()=>du(element,t.gather,e))).map(t.relative))(e,element,n):mu(e,element,t,n);return o.map((e=>({start:e,finish:e})))},pu=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),hu=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),fu=(e,t,n)=>({left:e.left+t,top:e.top+n,right:e.right+t,bottom:e.bottom+n}),bu=rect=>({left:rect.left,top:rect.top,right:rect.right,bottom:rect.bottom}),yu=(e,element)=>D.some(e.getRect(element)),vu=(e,element,t)=>ue(element)?yu(e,element).map(bu):de(element)?((e,element,t)=>t>=0&&t<Cr(element)?e.getRangedRect(element,t,element,t+1):t>0?e.getRangedRect(element,t-1,element,t):D.none())(e,element,t).map(bu):D.none(),wu=(e,element)=>ue(element)?yu(e,element).map(bu):de(element)?e.getRangedRect(element,0,element,Cr(element)).map(bu):D.none(),xu=Xa([{none:[]},{retry:["caret"]}]),ku=(e,element,t)=>{return(n=element,o=xl,bt(((s,e)=>e(s)),yt,n,o,r)).fold(A,(n=>wu(e,n).exists((e=>((e,t)=>e.left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right)(t,e)))));var n,o,r},Cu={point:e=>e.bottom,adjuster:(e,element,t,n,o)=>{const r=pu(o,5);return Math.abs(t.bottom-n.bottom)<1||t.top>o.bottom?xu.retry(r):t.top===o.bottom?xu.retry(pu(o,1)):ku(e,element,o)?xu.retry(fu(r,5,0)):xu.none()},move:pu,gather:su},Su=(e,t,n,o,r)=>0===r?D.some(o):((e,t,n)=>e.elementFromPoint(t,n).filter((e=>"table"===ae(e))).isSome())(e,o.left,t.point(o))?((e,t,n,o,r)=>Su(e,t,n,t.move(o,5),r))(e,t,n,o,r-1):e.situsFromPoint(o.left,t.point(o)).bind((l=>l.start.fold(D.none,(element=>wu(e,element).bind((l=>t.adjuster(e,element,l,n,o).fold(D.none,(o=>Su(e,t,n,o,r-1))))).orThunk((()=>D.some(o)))),D.none))),Tu=(e,t,n)=>{const o=e.move(n,5),r=Su(t,e,n,o,100).getOr(o);return((e,t,n)=>e.point(t)>n.getInnerHeight()?D.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?D.some(-e.point(t)):D.none())(e,r,t).fold((()=>t.situsFromPoint(r.left,e.point(r))),(n=>(t.scrollBy(0,n),t.situsFromPoint(r.left,e.point(r)-n))))},_u={tryUp:S(Tu,{point:e=>e.top,adjuster:(e,element,t,n,o)=>{const r=hu(o,5);return Math.abs(t.top-n.top)<1||t.bottom<o.top?xu.retry(r):t.bottom===o.top?xu.retry(hu(o,1)):ku(e,element,o)?xu.retry(fu(r,5,0)):xu.none()},move:hu,gather:ru}),tryDown:S(Tu,Cu),getJumpSize:x(5)},Au=(e,t,n)=>e.getSelection().bind((o=>gu(t,o.finish,o.foffset,n).fold((()=>D.some(Ms(o.finish,o.foffset))),(r=>{const l=e.fromSitus(r);return(e=>iu.cata(e,(e=>D.none()),(()=>D.none()),(e=>D.some(Ms(e,0))),(e=>D.some(Ms(e,Cr(e))))))(iu.verify(e,o.finish,o.foffset,l.finish,l.foffset,n.failure,t))})))),Ou=(e,t,element,n,o,r)=>0===r?D.none():Nu(e,t,element,n,o).bind((l=>{const c=e.fromSitus(l),d=iu.verify(e,element,n,c.finish,c.foffset,o.failure,t);return iu.cata(d,(()=>D.none()),(()=>D.some(l)),(l=>Ae(element,l)&&0===n?Du(e,element,n,hu,o):Ou(e,t,l,0,o,r-1)),(l=>Ae(element,l)&&n===Cr(l)?Du(e,element,n,pu,o):Ou(e,t,l,Cr(l),o,r-1)))})),Du=(e,element,t,n,o)=>vu(e,element,t).bind((t=>Eu(e,o,n(t,_u.getJumpSize())))),Eu=(e,t,n)=>{const o=Mn().browser;return o.isChromium()||o.isSafari()||o.isFirefox()?t.retry(e,n):D.none()},Nu=(e,t,element,n,o)=>vu(e,element,n).bind((t=>Eu(e,o,t))),Ru=(e,table)=>{return yt(e,(e=>Re(e).exists((p=>Ae(p,table)))),t).isSome();var t},Mu=(e,t,n,o,r)=>kt(o,"td,th",t).bind((o=>kt(o,"table",t).bind((table=>Ru(r,table)?((e,t,n)=>Au(e,t,n).bind((o=>Ou(e,t,o.element,o.offset,n,20).map(e.fromSitus))))(e,t,n).bind((e=>kt(e.finish,"td,th",t).map((t=>({start:o,finish:t,range:e}))))):D.none())))),Fu=(e,t,n,o,r,l)=>l(o,t).orThunk((()=>Mu(e,t,n,o,r).map((e=>{const t=e.range;return Dc(D.some(Wc(t.start,t.soffset,t.finish,t.foffset)),!0)})))),Pu=(e,t)=>kt(e,"tr",t).bind((e=>kt(e,"table",t).bind((table=>{const n=ft(table,"tr");return Ae(e,n[0])?((element,e,t)=>tu(ou,element,e,t))(table,(element=>Ar(element).isSome()),t).map((e=>{const t=Cr(e);return Dc(D.some(Wc(e,t,e,t)),!0)})):D.none()})))),Iu=(e,t)=>kt(e,"tr",t).bind((e=>kt(e,"table",t).bind((table=>{const n=ft(table,"tr");return Ae(e,n[n.length-1])?((element,e,t)=>nu(ou,element,e,t))(table,(element=>_r(element).isSome()),t).map((e=>Dc(D.some(Wc(e,0,e,0)),!0))):D.none()})))),select=(e,t,n,o,r,l,c)=>Mu(e,n,o,r,l).bind((e=>Hc(t,n,e.start,e.finish,c))),Lu=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Bu=()=>{const e=(e=>{const t=Lu(D.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(D.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:s=>{n(),t.set(D.some(s))}}})(w);return{...e,on:t=>e.get().each(t)}},ju=(e,t)=>kt(e,"td,th",t),zu={traverse:Pe,gather:su,relative:Oc.before,retry:_u.tryDown,failure:iu.failedDown},$u={traverse:Fe,gather:ru,relative:Oc.before,retry:_u.tryUp,failure:iu.failedUp},Uu=e=>t=>t===e,Wu=Uu(38),Hu=Uu(40),qu=e=>e>=37&&e<=40,Vu={isBackward:Uu(37),isForward:Uu(39)},Ku={isBackward:Uu(39),isForward:Uu(37)},Zu=Xa([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Gu={domRange:Zu.domRange,relative:Zu.relative,exact:Zu.exact,exactFromRange:e=>Zu.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(e=>e.match({domRange:e=>Ce.fromDom(e.startContainer),relative:(e,t)=>Oc.getStart(e),exact:(e,t,n,o)=>e}))(e);return element=t,Ce.fromDom(Ne(element).dom.defaultView);var element},range:zc},Yu=(e,t,n)=>{var o,r;return D.from(null===(r=(o=e.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(o,t,n)).bind((t=>{if(null===t.offsetNode)return D.none();const n=e.dom.createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),D.some(n)}))},Ju=(e,t,n)=>{var o,r;return D.from(null===(r=(o=e.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(o,t,n))},Xu=document.caretPositionFromPoint?Yu:document.caretRangeFromPoint?Ju:D.none,Qu=(element,e)=>{const t=ae(element);return"input"===t?Oc.after(element):M(["br","img"],t)?0===e?Oc.before(element):Oc.after(element):Oc.on(element,e)},ed=(e,t,n,o)=>{const r=((e,t,n,o)=>{const r=Ee(e).dom.createRange();return r.setStart(e.dom,t),r.setEnd(n.dom,o),r})(e,t,n,o),l=Ae(e,n)&&t===o;return r.collapsed&&!l},nd=e=>D.from(e.getSelection()),od=(e,t)=>{nd(e).each((e=>{e.removeAllRanges(),e.addRange(t)}))},rd=(e,t,n,o,r)=>{const l=Fc(e,t,n,o,r);od(e,l)},sd=(e,t)=>Bc(e,t).match({ltr:(t,n,o,r)=>{rd(e,t,n,o,r)},rtl:(t,n,o,r)=>{nd(e).each((l=>{if(l.setBaseAndExtent)l.setBaseAndExtent(t.dom,n,o.dom,r);else if(l.extend)try{((e,t,n,o,r,l)=>{t.collapse(n.dom,o),t.extend(r.dom,l)})(0,l,t,n,o,r)}catch(l){rd(e,o,r,t,n)}else rd(e,o,r,t,n)}))}}),ad=(e,t,n,o,r)=>{const l=((e,t,n,o)=>{const r=Qu(e,t),l=Qu(n,o);return Gu.relative(r,l)})(t,n,o,r);sd(e,l)},ld=(e,t,n)=>{const o=((e,t)=>{const n=e.fold(Oc.before,Qu,Oc.after),o=t.fold(Oc.before,Qu,Oc.after);return Gu.relative(n,o)})(t,n);sd(e,o)},id=e=>{if(e.rangeCount>0){const t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return D.some(zc(Ce.fromDom(t.startContainer),t.startOffset,Ce.fromDom(n.endContainer),n.endOffset))}return D.none()},cd=e=>{if(null===e.anchorNode||null===e.focusNode)return id(e);{const t=Ce.fromDom(e.anchorNode),n=Ce.fromDom(e.focusNode);return ed(t,e.anchorOffset,n,e.focusOffset)?D.some(zc(t,e.anchorOffset,n,e.focusOffset)):id(e)}},ud=(e,element,t=!0)=>{const n=(t?Nc:Ec)(e,element);od(e,n)},md=e=>(e=>nd(e).filter((e=>e.rangeCount>0)).bind(cd))(e).map((e=>Gu.exact(e.start,e.soffset,e.finish,e.foffset))),gd=(e,t)=>(e=>{const t=e.getClientRects(),rect=t.length>0?t[0]:e.getBoundingClientRect();return rect.width>0||rect.height>0?D.some(rect).map(Pc):D.none()})(jc(e,t)),pd=(e,t,n)=>((e,t,n)=>{const o=Ce.fromDom(e.document);return Xu(o,t,n).map((e=>zc(Ce.fromDom(e.startContainer),e.startOffset,Ce.fromDom(e.endContainer),e.endOffset)))})(e,t,n),hd=e=>({elementFromPoint:(t,n)=>Ce.fromPoint(Ce.fromDom(e.document),t,n),getRect:element=>element.dom.getBoundingClientRect(),getRangedRect:(t,n,o,r)=>{const l=Gu.exact(t,n,o,r);return gd(e,l)},getSelection:()=>md(e).map((t=>Uc(e,t))),fromSitus:t=>{const n=Gu.relative(t.start,t.finish);return Uc(e,n)},situsFromPoint:(t,n)=>pd(e,t,n).map((e=>$c(e.start,e.soffset,e.finish,e.foffset))),clearSelection:()=>{(e=>{nd(e).each((e=>e.removeAllRanges()))})(e)},collapseSelection:(t=!1)=>{md(e).each((n=>n.fold((e=>e.collapse(t)),((n,o)=>{const r=t?n:o;ld(e,r,r)}),((n,o,r,l)=>{const c=t?n:r,d=t?o:l;ad(e,c,d,c,d)}))))},setSelection:t=>{ad(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:(t,n)=>{ld(e,t,n)},selectNode:element=>{ud(e,element,!1)},selectContents:element=>{ud(e,element)},getInnerHeight:()=>e.innerHeight,getScrollY:()=>(e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return bo(n,o)})(Ce.fromDom(e.document)).top,scrollBy:(t,n)=>{((e,t,n)=>{const o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollBy(e,t)})(t,n,Ce.fromDom(e.document))}}),fd=(e,t)=>({rows:e,cols:t}),bd=(e,t,n,o)=>{const r=((e,t,n,o)=>{const cursor=Bu(),r=cursor.clear,l=r=>{cursor.on((l=>{o.clearBeforeUpdate(t),ju(r.target,n).each((c=>{cs(l,c,n).each((n=>{const l=n.boxes.getOr([]);if(1===l.length){const n=l[0],c="false"===ua(n),d=Ct(ia(r.target),n,Ae);c&&d&&(o.selectRange(t,l,n,n),e.selectContents(n))}else l.length>1&&(o.selectRange(t,l,n.start,n.finish),e.selectContents(c))}))}))}))};return{clearstate:r,mousedown:e=>{o.clear(t),ju(e.target,n).each(cursor.set)},mouseover:e=>{l(e)},mouseup:e=>{l(e),r()}}})(hd(e),t,n,o);return{clearstate:r.clearstate,mousedown:r.mousedown,mouseover:r.mouseover,mouseup:r.mouseup}},yd=(e,t,n,o)=>{const r=hd(e),l=()=>(o.clear(t),D.none());return{keydown:(e,c,d,m,h,f)=>{const y=e.raw,v=y.which,w=!0===y.shiftKey,x=us(t,o.selectedSelector).fold((()=>(qu(v)&&!w&&o.clearBeforeUpdate(t),Hu(v)&&w?S(select,r,t,n,zu,m,c,o.selectRange):Wu(v)&&w?S(select,r,t,n,$u,m,c,o.selectRange):Hu(v)?S(Fu,r,n,zu,m,c,Iu):Wu(v)?S(Fu,r,n,$u,m,c,Pu):D.none)),(e=>{const n=n=>()=>{const l=J(n,(n=>((e,t,n,o,r)=>ms(o,e,t,r.firstSelectedSelector,r.lastSelectedSelector).map((e=>(r.clearBeforeUpdate(n),r.selectRange(n,e.boxes,e.start,e.finish),e.boxes))))(n.rows,n.cols,t,e,o)));return l.fold((()=>ds(t,o.firstSelectedSelector,o.lastSelectedSelector).map((e=>{const n=Hu(v)||f.isForward(v)?Oc.after:Oc.before;return r.setRelativeSelection(Oc.on(e.first,0),n(e.table)),o.clear(t),Dc(D.none(),!0)}))),(e=>D.some(Dc(D.none(),!0))))};return Hu(v)&&w?n([fd(1,0)]):Wu(v)&&w?n([fd(-1,0)]):f.isBackward(v)&&w?n([fd(0,-1),fd(-1,0)]):f.isForward(v)&&w?n([fd(0,1),fd(1,0)]):qu(v)&&!w?l:D.none}));return x()},keyup:(e,r,l,c,d)=>us(t,o.selectedSelector).fold((()=>{const m=e.raw,h=m.which;return!0===m.shiftKey&&qu(h)?((e,t,n,o,r,l,c)=>Ae(n,r)&&o===l?D.none():kt(n,"td,th",t).bind((s=>kt(r,"td,th",t).bind((n=>Hc(e,t,s,n,c))))))(t,n,r,l,c,d,o.selectRange):D.none()}),D.none)}},vd=(element,e)=>{const t=ye(element,e);return void 0===t||""===t?[]:t.split(" ")},wd=element=>void 0!==element.dom.classList,xd=(element,e)=>((element,e,t)=>{const n=vd(element,e).concat([t]);return fe(element,e,n.join(" ")),!0})(element,"class",e),kd=(element,e)=>{wd(element)?element.dom.classList.add(e):xd(element,e)},Cd=(element,e)=>wd(element)&&element.dom.classList.contains(e),Sd=(e,t,n)=>{const o=element=>{we(element,e.selected),we(element,e.firstSelected),we(element,e.lastSelected)},r=element=>{fe(element,e.selected,"1")},l=e=>{c(e),n()},c=t=>{const n=ft(t,`${e.selectedSelector},${e.firstSelectedSelector},${e.lastSelectedSelector}`);L(n,o)};return{clearBeforeUpdate:c,clear:l,selectRange:(n,o,c,d)=>{l(n),L(o,r),fe(c,e.firstSelected,"1"),fe(d,e.lastSelected,"1"),t(o,c,d)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},Td=()=>({tag:"none"}),_d=e=>({tag:"multiple",elements:e}),Ad=element=>({tag:"single",element:element}),Od=(table,e,t)=>{const n=ro.fromTable(table);return Ca(n,e).map((e=>{const o=ba(n,t,!1),{rows:r}=Yn(o),l=((e,t)=>{const n=e.slice(0,t[t.length-1].row+1),o=ya(n);return V(o,(e=>{const n=e.cells.slice(0,t[t.length-1].column+1);return I(n,(e=>e.element))}))})(r,e),c=((e,t)=>{const n=e.slice(t[0].row+t[0].rowspan-1,e.length),o=ya(n);return V(o,(e=>{const n=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return I(n,(e=>e.element))}))})(r,e);return{upOrLeftCells:l,downOrRightCells:c}}))},Dd=e=>{const t=Ce.fromDom((e=>{if(st()&&f(e.target)){const t=Ce.fromDom(e.target);if(ue(t)&&ct(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return head(t)}}return D.from(e.target)})(e).getOr(e.target)),n=()=>e.stopPropagation(),o=()=>e.preventDefault(),r=(l=o,c=n,(...e)=>l(c.apply(null,e)));var l,c;return((e,t,n,o,r,l,c)=>({target:e,x:t,y:n,stop:o,prevent:r,kill:l,raw:c}))(t,e.clientX,e.clientY,n,o,r,e)},Ed=(element,e,filter,t,n)=>{const o=((filter,e)=>t=>{filter(t)&&e(Dd(t))})(filter,t);return element.dom.addEventListener(e,o,n),{unbind:S(Nd,element,e,o,n)}},Nd=(element,e,t,n)=>{element.dom.removeEventListener(e,t,n)},filter=O,Rd=(element,e,t)=>((element,e,filter,t)=>Ed(element,e,filter,t,!1))(element,e,filter,t),Md=Dd,Fd=e=>!Cd(Ce.fromDom(e.target),"ephox-snooker-resizer-bar"),Pd=(e,t)=>{const n=((e,t,n)=>({get:()=>gs(e(),n).fold((()=>t().fold(Td,Ad)),_d)}))((()=>Ce.fromDom(e.getBody())),(()=>Es($r(e),jr(e))),_s.selectedSelector),o=Sd(_s,((t,n,o)=>{table(n).each((table=>{const r=Ci(e),l=Ir(w,Ce.fromDom(e.getDoc()),r),c=Ns(e),d=Od(table,{selection:c},l);((e,t,n,o,r)=>{e.dispatch("TableSelectionChange",{cells:t,start:n,finish:o,otherCells:r})})(e,t,n,o,d)}))}),(()=>(e=>{e.dispatch("TableSelectionClear")})(e)));e.on("init",(n=>{const r=e.getWin(),body=Br(e),l=jr(e),c=bd(r,body,l,o),d=yd(r,body,l,o),m=((e,t,n,o)=>{const r=hd(e);return(e,l)=>{o.clearBeforeUpdate(t),cs(e,l,n).each((e=>{const n=e.boxes.getOr([]);o.selectRange(t,n,e.start,e.finish),r.selectContents(l),r.collapseSelection()}))}})(r,body,l,o);e.on("TableSelectorChange",(e=>m(e.start,e.finish)));const h=(t,n)=>{(e=>!0===e.raw.shiftKey)(t)&&(n.kill&&t.kill(),n.selection.each((t=>{const n=Gu.relative(t.start,t.finish),o=jc(r,n);e.selection.setRng(o)})))},f=e=>0===e.button,y=(()=>{const e=Lu(Ce.fromDom(body)),t=Lu(0);return{touchEnd:n=>{const o=Ce.fromDom(n.target);if(pe("td")(o)||pe("th")(o)){const r=e.get(),l=t.get();Ae(r,o)&&n.timeStamp-l<300&&(n.preventDefault(),m(o,o))}e.set(o),t.set(n.timeStamp)}}})();e.on("dragstart",(e=>{c.clearstate()})),e.on("mousedown",(e=>{f(e)&&Fd(e)&&c.mousedown(Md(e))})),e.on("mouseover",(e=>{var t;void 0!==(t=e).buttons&&0==(1&t.buttons)||!Fd(e)||c.mouseover(Md(e))})),e.on("mouseup",(e=>{f(e)&&Fd(e)&&c.mouseup(Md(e))})),e.on("touchend",y.touchEnd),e.on("keyup",(t=>{const n=Md(t);if(n.raw.shiftKey&&qu(n.raw.which)){const t=e.selection.getRng(),o=Ce.fromDom(t.startContainer),r=Ce.fromDom(t.endContainer);d.keyup(n,o,t.startOffset,r,t.endOffset).each((e=>{h(n,e)}))}})),e.on("keydown",(n=>{const o=Md(n);t.hide();const r=e.selection.getRng(),l=Ce.fromDom(r.startContainer),c=Ce.fromDom(r.endContainer),m=co(Vu,Ku)(Ce.fromDom(e.selection.getStart()));d.keydown(o,l,r.startOffset,c,r.endOffset,m).each((e=>{h(o,e)})),t.show()})),e.on("NodeChange",(()=>{const t=e.selection,n=Ce.fromDom(t.getStart()),r=Ce.fromDom(t.getEnd());ls(table,[n,r]).fold((()=>o.clear(body)),w)}))})),e.on("PreInit",(()=>{e.serializer.addTempAttr(_s.firstSelected),e.serializer.addTempAttr(_s.lastSelected)}));return{getSelectedCells:()=>((e,t,n,o)=>{switch(e.tag){case"none":return t();case"single":return o(e.element);case"multiple":return n(e.elements)}})(n.get(),x([]),(e=>I(e,(e=>e.dom))),(e=>[e.dom])),clearSelectedCells:e=>o.clear(Ce.fromDom(e))}},Id=e=>{let t=[];return{bind:e=>{if(void 0===e)throw new Error("Event bind error: undefined handler");t.push(e)},unbind:e=>{t=j(t,(t=>t!==e))},trigger:(...n)=>{const o={};L(e,((e,i)=>{o[e]=n[i]})),L(t,(e=>{e(o)}))}}},Ld=e=>({registry:map(e,(e=>({bind:e.bind,unbind:e.unbind}))),trigger:map(e,(e=>e.trigger))}),Bd=e=>e.slice(0).sort(),jd=(e,t,n)=>{if(0===t.length)throw new Error("You must specify at least one required field.");return((label,e)=>{if(!c(e))throw new Error("The "+label+" fields must be an array. Was: "+e+".");L(e,(a=>{if(!r(a))throw new Error("The value "+a+" in the "+label+" fields was not a string.")}))})("required",t),(e=>{const t=Bd(e);U(t,((s,i)=>i<t.length-1&&s===t[i+1])).each((e=>{throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}))})(t),o=>{const r=X(o);K(t,(e=>M(r,e)))||((e,t)=>{throw new Error("All required keys ("+Bd(e).join(", ")+") were not specified. Specified keys were: "+Bd(t).join(", ")+".")})(t,r),e(t,r);const l=j(t,(e=>!n.validate(o[e],e)));return l.length>0&&((e,t)=>{throw new Error("All values need to be of type: "+t+". Keys ("+Bd(e).join(", ")+") were not.")})(l,n.label),o}},zd=(e,t)=>{const n=j(t,(t=>!M(e,t)));n.length>0&&(e=>{throw new Error("Unsupported keys for object: "+Bd(e).join(", "))})(n)},$d=e=>((e,t)=>jd(e,t,{validate:y,label:"function"}))(zd,e),Ud=$d(["compare","extract","mutate","sink"]),Wd=$d(["element","start","stop","destroy"]),Hd=$d(["forceDrop","drop","move","delayDrop"]),qd=()=>{let e=D.none();const t=Ld({move:Id(["info"])});return{onEvent:(n,o)=>{o.extract(n).each((data=>{const n=((t,n)=>{const o=e.map((e=>t.compare(e,n)));return e=D.some(n),o})(o,data);n.each((e=>{t.trigger.move(e)}))}))},reset:()=>{e=D.none()},events:t.registry}},Vd=()=>{const e=(()=>{const e=Ld({move:Id(["info"])});return{onEvent:w,reset:w,events:e.registry}})(),t=qd();let n=e;return{on:()=>{n.reset(),n=t},off:()=>{n.reset(),n=e},isOn:()=>n===t,onEvent:(e,t)=>{n.onEvent(e,t)},events:t.events}},Kd=(e,t,n)=>{let o=!1;const r=Ld({start:Id([]),stop:Id([])}),l=Vd(),c=()=>{f.stop(),l.isOn()&&(l.off(),r.trigger.stop())},m=((e,t)=>{let n=null;const o=()=>{d(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout((()=>{n=null,e.apply(null,r)}),t)}}})(c,200);l.events.move.bind((n=>{t.mutate(e,n.info)}));const h=e=>(...t)=>{o&&e.apply(null,t)},f=t.sink(Hd({forceDrop:c,drop:h(c),move:h((e=>{m.cancel(),l.onEvent(e,t)})),delayDrop:h(m.throttle)}),n);return{element:f.element,go:e=>{f.start(e),l.on(),r.trigger.start()},on:()=>{o=!0},off:()=>{o=!1},destroy:()=>{f.destroy()},events:r.registry}},Zd=e=>{const t=e.replace(/\./g,"-");return{resolve:e=>t+"-"+e}},Gd=Zd("ephox-dragster").resolve;var Yd=Ud({compare:(e,t)=>bo(t.left-e.left,t.top-e.top),extract:e=>D.some(bo(e.x,e.y)),sink:(e,t)=>{const n=(e=>{const t={layerClass:Gd("blocker"),...e},div=Ce.fromTag("div");return fe(div,"role","presentation"),Pt(div,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),kd(div,Gd("blocker")),kd(div,t.layerClass),{element:x(div),destroy:()=>{Ve(div)}}})(t),o=Rd(n.element(),"mousedown",e.forceDrop),r=Rd(n.element(),"mouseup",e.drop),l=Rd(n.element(),"mousemove",e.move),c=Rd(n.element(),"mouseout",e.delayDrop);return Wd({element:n.element,start:e=>{$e(e,n.element())},stop:()=>{Ve(n.element())},destroy:()=>{n.destroy(),r.unbind(),l.unbind(),c.unbind(),o.unbind()}})},mutate:(e,t)=>{e.mutate(t.left,t.top)}});const Jd=Zd("ephox-snooker").resolve,Xd=()=>{const e=Ld({drag:Id(["xDelta","yDelta","target"])});let t=D.none();const n=(()=>{const e=Ld({drag:Id(["xDelta","yDelta"])});return{mutate:(t,n)=>{e.trigger.drag(t,n)},events:e.registry}})();n.events.drag.bind((n=>{t.each((t=>{e.trigger.drag(n.xDelta,n.yDelta,t)}))}));return{assign:e=>{t=D.some(e)},get:()=>t,mutate:n.mutate,events:e.registry}},Qd=Jd("resizer-bar"),tm=Jd("resizer-rows"),nm=Jd("resizer-cols"),om=e=>{const t=ft(e.parent(),"."+Qd);L(t,Ve)},rm=(e,t,n)=>{const o=e.origin();L(t,(t=>{t.each((t=>{const r=n(o,t);kd(r,Qd),$e(e.parent(),r)}))}))},sm=(e,t,n,o)=>{rm(e,t,((e,t)=>{const r=((e,t,n,o,r)=>{const l=Ce.fromTag("div");return Pt(l,{position:"absolute",left:t-o/2+"px",top:n+"px",height:r+"px",width:o+"px"}),be(l,{"data-column":e,role:"presentation"}),l})(t.col,t.x-e.left,n.top-e.top,7,o);return kd(r,nm),r}))},am=(e,t,n,o)=>{rm(e,t,((e,t)=>{const r=((e,t,n,o,r)=>{const l=Ce.fromTag("div");return Pt(l,{position:"absolute",left:t+"px",top:n-r/2+"px",height:r+"px",width:o+"px"}),be(l,{"data-row":e,role:"presentation"}),l})(t.row,n.left-e.left,t.y-e.top,o,7);return kd(r,tm),r}))},lm=(e,t,table,n,o)=>{const r=vo(table),l=t.isResizable,c=n.length>0?No.positions(n,table):[],d=c.length>0?((e,t)=>V(e.all,((e,i)=>t(e.element)?[i]:[])))(e,l):[],m=j(c,((e,i)=>F(d,(e=>i===e))));am(t,m,r,zn(table));const h=o.length>0?Mo.positions(o,table):[],f=h.length>0?((e,t)=>{const n=[];return P(e.grid.columns,(o=>{const r=ro.getColumnAt(e,o).map((col=>col.element));r.forall(t)&&n.push(o)})),j(n,(n=>{const o=ro.filterItems(e,(e=>e.column===n));return K(o,(e=>t(e.element)))}))})(e,l):[],y=j(h,((e,i)=>F(f,(e=>i===e))));sm(t,y,r,po(table))},im=(e,table)=>{if(om(e),e.isResizable(table)){const t=ro.fromTable(table),n=lo(t),o=so(t);lm(t,e,table,n,o)}},cm=(e,t)=>{const n=ft(e.parent(),"."+Qd);L(n,t)},um=e=>{cm(e,(e=>{Ft(e,"display","none")}))},dm=e=>{cm(e,(e=>{Ft(e,"display","block")}))},mm=Jd("resizer-bar-dragging"),gm=e=>{const t=Xd(),n=((e,t={})=>{var n;const o=null!==(n=t.mode)&&void 0!==n?n:Yd;return Kd(e,o,t)})(t,{});let o=D.none();const r=(element,e)=>D.from(ye(element,e));t.events.drag.bind((e=>{r(e.target,"data-row").each((t=>{const n=Ht(e.target,"top");Ft(e.target,"top",n+e.yDelta+"px")})),r(e.target,"data-column").each((t=>{const n=Ht(e.target,"left");Ft(e.target,"left",n+e.xDelta+"px")}))}));const l=(e,t)=>Ht(e,t)-zt(e,"data-initial-"+t,0);n.events.stop.bind((()=>{t.get().each((t=>{o.each((table=>{r(t,"data-row").each((e=>{const n=l(t,"top");we(t,"data-initial-top"),f.trigger.adjustHeight(table,n,parseInt(e,10))})),r(t,"data-column").each((e=>{const n=l(t,"left");we(t,"data-initial-left"),f.trigger.adjustWidth(table,n,parseInt(e,10))})),im(e,table)}))}))}));const c=(o,r)=>{f.trigger.startAdjust(),t.assign(o),fe(o,"data-initial-"+r,Ht(o,r)),kd(o,mm),Ft(o,"opacity","0.2"),n.go(e.parent())},d=Rd(e.parent(),"mousedown",(e=>{var element;element=e.target,Cd(element,tm)&&c(e.target,"top"),(element=>Cd(element,nm))(e.target)&&c(e.target,"left")})),m=t=>Ae(t,e.view()),h=Rd(e.view(),"mouseover",(t=>{var n;(n=t.target,kt(n,"table",m).filter(ca)).fold((()=>{ut(t.target)&&om(e)}),(table=>{o=D.some(table),im(e,table)}))})),f=Ld({adjustHeight:Id(["table","delta","row"]),adjustWidth:Id(["table","delta","column"]),startAdjust:Id([])});return{destroy:()=>{d.unbind(),h.unbind(),n.destroy(),om(e)},refresh:t=>{im(e,t)},on:n.on,off:n.off,hideBars:S(um,e),showBars:S(dm,e),events:f.registry}},pm=(e,t,n)=>{const o=No,r=Mo,l=gm(e),c=Ld({beforeResize:Id(["table","type"]),afterResize:Id(["table","type"]),startDrag:Id([])});return l.events.adjustHeight.bind((e=>{const table=e.table;c.trigger.beforeResize(table,"row");const t=o.delta(e.delta,table);ll(table,t,e.row,o),c.trigger.afterResize(table,"row")})),l.events.startAdjust.bind((e=>{c.trigger.startDrag()})),l.events.adjustWidth.bind((e=>{const table=e.table;c.trigger.beforeResize(table,"col");const o=r.delta(e.delta,table),l=n(table);al(table,o,e.column,t,l),c.trigger.afterResize(table,"col")})),{on:l.on,off:l.off,refreshBars:l.refresh,hideBars:l.hideBars,showBars:l.showBars,destroy:l.destroy,events:c.registry}},hm=(element,e)=>{const t=me(element)?(element=>Ce.fromDom(Ne(element).dom.documentElement))(element):element;return{parent:x(t),view:x(element),origin:x(bo(0,0)),isResizable:e}},fm=(e,t,n)=>({parent:x(t),view:x(e),origin:x(bo(0,0)),isResizable:n}),bm=()=>{const e=Ce.fromTag("div");return Pt(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),$e(mt(Ce.fromDom(document)),e),e},ym=e=>f(e)&&"TABLE"===e.nodeName,vm="bar-",wm=e=>"false"!==ye(e,"data-mce-resize"),xm=e=>{const t=Bu(),n=Bu(),o=Bu();let r,l;const c=table=>Li(e,table),d=()=>_i(e)?Vs():qs(),m=(table,t,n)=>{const o=Dt(t,"e");if(""===l&&rc(table),n!==r&&""!==l){Ft(table,"width",l);const t=d(),m=c(table),col=_i(e)||o?(table=>Ks(table).columns)(table)-1:0;al(table,n-r,col,t,m)}else if((e=>/^(\d+(\.\d+)?)%$/.test(e))(l)){const e=parseFloat(l.replace("%",""));Ft(table,"width",n*e/r+"%")}(e=>/^(\d+(\.\d+)?)px$/.test(e))(l)&&(table=>{const e=ro.fromTable(table);ro.hasColumns(e)||L(Yt(table),(e=>{const t=It(e,"width");Ft(e,"width",t),we(e,"width")}))})(table)},h=()=>{n.on((e=>{e.destroy()})),o.on((t=>{((e,t)=>{e.inline&&Ve(t.parent())})(e,t)}))};e.on("init",(()=>{const r=((e,t)=>e.inline?fm(Ce.fromDom(e.getBody()),bm(),t):hm(Ce.fromDom(e.getDoc()),t))(e,wm);if(o.set(r),(e=>{const t=e.options.get("object_resizing");return M(t.split(","),"table")})(e)&&Ri(e)){const o=d(),l=pm(r,o,c);l.on(),l.events.startDrag.bind((n=>{t.set(e.selection.getRng())})),l.events.beforeResize.bind((t=>{const n=t.table.dom;((e,t,n,o,r)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:o,origin:r})})(e,n,Ur(n),Wr(n),vm+t.type)})),l.events.afterResize.bind((n=>{const table=n.table,o=table.dom;zr(table),t.on((t=>{e.selection.setRng(t),e.focus()})),((e,t,n,o,r)=>{e.dispatch("ObjectResized",{target:t,width:n,height:o,origin:r})})(e,o,Ur(o),Wr(o),vm+n.type),e.undoManager.add()})),n.set(l)}})),e.on("ObjectResizeStart",(t=>{const n=t.target;if(ym(n)){const table=Ce.fromDom(n);L(e.dom.select(".mce-clonedresizable"),(t=>{e.dom.addClass(t,"mce-"+Ti(e)+"-columns")})),!tc(table)&&Ei(e)?sc(table):!ec(table)&&Di(e)&&rc(table),nc(table)&&Ot(t.origin,vm)&&rc(table),r=t.width,l=Ni(e)?"":((e,t)=>{const n=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width");return D.from(n).filter(Nt)})(e,n).getOr("")}})),e.on("ObjectResized",(t=>{const n=t.target;if(ym(n)){const table=Ce.fromDom(n),o=t.origin;Ot(o,"corner-")&&m(table,o,t.width),zr(table),bi(e,table.dom,yi)}})),e.on("SwitchMode",(()=>{n.on((t=>{e.mode.isReadOnly()?t.hideBars():t.showBars()}))})),e.on("remove",(()=>{h()}));return{refresh:table=>{n.on((e=>e.refreshBars(Ce.fromDom(table))))},hide:()=>{n.on((e=>e.hideBars()))},show:()=>{n.on((e=>e.showBars()))}}},km=e=>{(e=>{const t=e.options.register;t("table_clone_elements",{processor:"string[]"}),t("table_use_colgroups",{processor:"boolean",default:!0}),t("table_header_type",{processor:e=>{const t=M(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),t("table_sizing_mode",{processor:"string",default:"auto"}),t("table_default_attributes",{processor:"object",default:{border:"1"}}),t("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),t("table_column_resizing",{processor:e=>{const t=M(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),t("table_resize_bars",{processor:"boolean",default:!0}),t("table_style_by_css",{processor:"boolean",default:!0})})(e);const t=xm(e),n=Pd(e,t),o=Bi(e,t,n);return _c(e,o),((e,t)=>{const n=jr(e),o=t=>Es($r(e)).bind((o=>table(o,n).map((table=>{const n=As(Ns(e),table,o);return t(table,n)})))).getOr("");ee({mceTableRowType:()=>o(t.getTableRowType),mceTableCellType:()=>o(t.getTableCellType),mceTableColType:()=>o(t.getTableColType)},((t,n)=>e.addQueryValueHandler(n,t)))})(e,o),Rs(e,o),{getSelectedCells:n.getSelectedCells,clearSelectedCells:n.clearSelectedCells}},Cm=e=>({table:km(e)});e.add("dom",Cm)}()},674:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=Object.getPrototypeOf,n=(e,t,n)=>{var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},o=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&n(e,String,((e,t)=>t.isPrototypeOf(e)))?"string":t})(t)===e,r=e=>t=>typeof t===e,l=o("string"),c=o("object"),d=e=>((e,o)=>c(e)&&n(e,o,((e,n)=>t(e)===n)))(e,Object),m=o("array"),h=(f=null,a=>f===a);var f;const y=r("boolean"),v=a=>!(a=>null==a)(a),w=r("function"),x=r("number"),k=()=>{};class C{constructor(e,t){this.tag=e,this.value=t}static some(e){return new C(!0,e)}static none(){return C.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?C.some(e(this.value)):C.none()}bind(e){return this.tag?e(this.value):C.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:C.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return v(e)?C.some(e):C.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}C.singletonNone=new C(!1);const S=Object.keys,T=Object.hasOwnProperty,_=(e,t,n,o)=>{((e,t)=>{const n=S(e);for(let o=0,r=n.length;o<r;o++){const i=n[o];t(e[i],i)}})(e,((e,i)=>{(t(e,i)?n:o)(e,i)}))},A=(e,t)=>T.call(e,t),O=Array.prototype.push,D=e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!m(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);O.apply(t,e[i])}return t},head=e=>((e,i)=>i>=0&&i<e.length?C.some(e[i]):C.none())(e,0);"undefined"!=typeof window?window:Function("return this;")();const E=(element,e,t)=>{((e,t,n)=>{if(!(l(n)||y(n)||x(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(element.dom,e,t)},N=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},R={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return N(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return N(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return N(t)},fromDom:N,fromPoint:(e,t,n)=>C.from(e.dom.elementFromPoint(t,n)).map(N)};var M=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),F=tinymce.util.Tools.resolve("tinymce.util.URI");const P=s=>s.length>0,option=e=>t=>t.options.get(e),I=e=>{const t=e.options.register;t("image_dimensions",{processor:"boolean",default:!0}),t("image_advtab",{processor:"boolean",default:!1}),t("image_uploadtab",{processor:"boolean",default:!0}),t("image_prepend_url",{processor:"string",default:""}),t("image_class_list",{processor:"object[]"}),t("image_description",{processor:"boolean",default:!0}),t("image_title",{processor:"boolean",default:!1}),t("image_caption",{processor:"boolean",default:!1}),t("image_list",{processor:e=>{const t=!1===e||l(e)||((e,t)=>{if(m(e)){for(let i=0,n=e.length;i<n;++i)if(!t(e[i]))return!1;return!0}return!1})(e,c)||w(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},L=option("image_dimensions"),B=option("image_advtab"),j=option("image_uploadtab"),z=option("image_prepend_url"),$=option("image_class_list"),U=option("image_description"),W=option("image_title"),H=option("image_caption"),V=option("image_list"),K=option("a11y_advanced_options"),Z=option("automatic_uploads"),G=(e,t)=>Math.max(parseInt(e,10),parseInt(t,10)),Y=e=>(e&&(e=e.replace(/px$/,"")),e),J=e=>(e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e),X=e=>"IMG"===e.nodeName&&(e.hasAttribute("data-mce-object")||e.hasAttribute("data-mce-placeholder")),Q=(e,t)=>{const n=e.options.get;return F.isDomSafe(t,"img",{allow_html_data_urls:n("allow_html_data_urls"),allow_script_urls:n("allow_script_urls"),allow_svg_data_urls:n("allow_svg_data_urls")})},ee=M.DOM,te=image=>image.style.marginLeft&&image.style.marginRight&&image.style.marginLeft===image.style.marginRight?Y(image.style.marginLeft):"",ne=image=>image.style.marginTop&&image.style.marginBottom&&image.style.marginTop===image.style.marginBottom?Y(image.style.marginTop):"",oe=image=>image.style.borderWidth?Y(image.style.borderWidth):"",re=(image,e)=>{var t;return image.hasAttribute(e)&&null!==(t=image.getAttribute(e))&&void 0!==t?t:""},se=image=>null!==image.parentNode&&"FIGURE"===image.parentNode.nodeName,ae=(image,e,t)=>{""===t||null===t?image.removeAttribute(e):image.setAttribute(e,t)},le=image=>{se(image)?(image=>{const e=image.parentNode;v(e)&&(ee.insertAfter(image,e),ee.remove(e))})(image):(image=>{const e=ee.create("figure",{class:"image"});ee.insertAfter(e,image),e.appendChild(image),e.appendChild(ee.create("figcaption",{contentEditable:"true"},"Caption")),e.contentEditable="false"})(image)},ie=(image,e)=>{const t=image.getAttribute("style"),n=e(null!==t?t:"");n.length>0?(image.setAttribute("style",n),image.setAttribute("data-mce-style",n)):image.removeAttribute("style")},ce=(e,t)=>(image,e,n)=>{const o=image.style;o[e]?(o[e]=J(n),ie(image,t)):ae(image,e,n)},ue=(image,e)=>image.style[e]?Y(image.style[e]):re(image,e),de=(image,e)=>{const t=J(e);image.style.marginLeft=t,image.style.marginRight=t},me=(image,e)=>{const t=J(e);image.style.marginTop=t,image.style.marginBottom=t},ge=(image,e)=>{const t=J(e);image.style.borderWidth=t},pe=(image,e)=>{image.style.borderStyle=e},he=image=>{var e;return null!==(e=image.style.borderStyle)&&void 0!==e?e:""},fe=e=>v(e)&&"FIGURE"===e.nodeName,be=image=>0===ee.getAttrib(image,"alt").length&&"presentation"===ee.getAttrib(image,"role"),ye=image=>be(image)?"":re(image,"alt"),ve=(e,data)=>{var t;const image=document.createElement("img");return ae(image,"style",data.style),(te(image)||""!==data.hspace)&&de(image,data.hspace),(ne(image)||""!==data.vspace)&&me(image,data.vspace),(oe(image)||""!==data.border)&&ge(image,data.border),(he(image)||""!==data.borderStyle)&&pe(image,data.borderStyle),e(null!==(t=image.getAttribute("style"))&&void 0!==t?t:"")},we=(e,image)=>({src:re(image,"src"),alt:ye(image),title:re(image,"title"),width:ue(image,"width"),height:ue(image,"height"),class:re(image,"class"),style:e(re(image,"style")),caption:se(image),hspace:te(image),vspace:ne(image),border:oe(image),borderStyle:he(image),isDecorative:be(image)}),xe=(image,e,t,n,o)=>{t[n]!==e[n]&&o(image,n,String(t[n]))},ke=(image,e,t)=>{if(t){ee.setAttrib(image,"role","presentation");const e=R.fromDom(image);E(e,"alt","")}else{if(h(e)){const e=R.fromDom(image);n="alt",e.dom.removeAttribute(n)}else{const t=R.fromDom(image);E(t,"alt",e)}"presentation"===ee.getAttrib(image,"role")&&ee.setAttrib(image,"role","")}var n},Ce=(e,t)=>(image,n,o)=>{e(image,o),ie(image,t)},Se=(e,t,image)=>{const n=we(e,image);xe(image,n,t,"caption",((image,e,t)=>le(image))),xe(image,n,t,"src",ae),xe(image,n,t,"title",ae),xe(image,n,t,"width",ce(0,e)),xe(image,n,t,"height",ce(0,e)),xe(image,n,t,"class",ae),xe(image,n,t,"style",Ce(((image,e)=>ae(image,"style",e)),e)),xe(image,n,t,"hspace",Ce(de,e)),xe(image,n,t,"vspace",Ce(me,e)),xe(image,n,t,"border",Ce(ge,e)),xe(image,n,t,"borderStyle",Ce(pe,e)),((image,e,t)=>{t.alt===e.alt&&t.isDecorative===e.isDecorative||ke(image,t.alt,t.isDecorative)})(image,n,t)},Te=(e,t)=>{const n=(e=>{if(e.margin){const t=String(e.margin).split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e})(e.dom.styles.parse(t)),o=e.dom.styles.parse(e.dom.styles.serialize(n));return e.dom.styles.serialize(o)},_e=e=>{const t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||X(t))?null:t},Ae=(e,figure)=>{var t;const n=e.dom,o=((e,t)=>{const n={};var o;return _(e,t,(o=n,(e,i)=>{o[i]=e}),k),n})(e.schema.getTextBlockElements(),((t,n)=>!e.schema.isValidChild(n,"figure"))),r=n.getParent(figure.parentNode,(e=>{return t=o,n=e.nodeName,A(t,n)&&void 0!==t[n]&&null!==t[n];var t,n}),e.getBody());return r&&null!==(t=n.split(r,figure))&&void 0!==t?t:figure},Oe=(e,data)=>{const t=((e,data)=>{const image=document.createElement("img");if(Se(e,{...data,caption:!1},image),ke(image,data.alt,data.isDecorative),data.caption){const figure=ee.create("figure",{class:"image"});return figure.appendChild(image),figure.appendChild(ee.create("figcaption",{contentEditable:"true"},"Caption")),figure.contentEditable="false",figure}return image})((t=>Te(e,t)),data);e.dom.setAttrib(t,"data-mce-id","__mcenew"),e.focus(),e.selection.setContent(t.outerHTML);const n=e.dom.select('*[data-mce-id="__mcenew"]')[0];if(e.dom.setAttrib(n,"data-mce-id",null),fe(n)){const figure=Ae(e,n);e.selection.select(figure)}else e.selection.select(n)},De=(e,data)=>{const image=_e(e);if(image)if(Se((t=>Te(e,t)),data,image),((e,image)=>{e.dom.setAttrib(image,"src",image.getAttribute("src"))})(e,image),fe(image.parentNode)){const figure=image.parentNode;Ae(e,figure),e.selection.select(image.parentNode)}else e.selection.select(image),((e,data,t)=>{const n=()=>{t.onload=t.onerror=null,e.selection&&(e.selection.select(t),e.nodeChanged())};t.onload=()=>{data.width||data.height||!L(e)||e.dom.setAttribs(t,{width:String(t.clientWidth),height:String(t.clientHeight)}),n()},t.onerror=n})(e,data,image)},Ee=(e,t)=>{const image=_e(e);if(image){const data={...we((t=>Te(e,t)),image),...t},n=((e,data)=>{const t=data.src;return{...data,src:Q(e,t)?t:""}})(e,data);data.src?De(e,n):((e,image)=>{if(image){const t=e.dom.is(image.parentNode,"figure.image")?image.parentNode:image;e.dom.remove(t),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}})(e,image)}else t.src&&Oe(e,{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1,...t})},Ne=(Re=(e,t)=>d(e)&&d(t)?Ne(e,t):t,(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const e in o)A(o,e)&&(t[e]=Re(t[e],o[e]))}return t});var Re,Me=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Fe=tinymce.util.Tools.resolve("tinymce.util.Tools");const Pe=e=>l(e.value)?e.value:"",Ie=(e,t)=>{const n=[];return Fe.each(e,(e=>{const text=(e=>l(e.text)?e.text:l(e.title)?e.title:"")(e);if(void 0!==e.menu){const o=Ie(e.menu,t);n.push({text:text,items:o})}else{const o=t(e);n.push({text:text,value:o})}})),n},Le=(e=Pe)=>t=>t?C.from(t).map((t=>Ie(t,e))):C.none(),Be=(e,t)=>((e,t)=>{for(let i=0;i<e.length;i++){const n=t(e[i],i);if(n.isSome())return n}return C.none()})(e,(e=>(e=>A(e,"items"))(e)?Be(e.items,t):e.value===t?C.some(e):C.none())),je=Le,ze=e=>Le(Pe)(e),$e=(e,t)=>e.bind((e=>Be(e,t))),Ue=e=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}),We=e=>{const t=je((t=>e.convertURL(t.value||t.url||"","src"))),n=new Promise((n=>{((e,t)=>{const n=V(e);l(n)?fetch(n).then((e=>{e.ok&&e.json().then(t)})):w(n)?n(t):t(n)})(e,(e=>{n(t(e).map((e=>D([[{text:"None",value:""}],e]))))}))})),o=ze($(e)),r=B(e),c=j(e),d=(e=>P(e.options.get("images_upload_url")))(e),m=(e=>v(e.options.get("images_upload_handler")))(e),image=(e=>{const image=_e(e);return image?we((t=>Te(e,t)),image):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}})(e),h=U(e),f=W(e),y=L(e),x=H(e),k=K(e),S=Z(e),T=C.some(z(e)).filter((e=>l(e)&&e.length>0));return n.then((e=>({image:image,imageList:e,classList:o,hasAdvTab:r,hasUploadTab:c,hasUploadUrl:d,hasUploadHandler:m,hasDescription:h,hasImageTitle:f,hasDimensions:y,hasImageCaption:x,prependURL:T,hasAccessibilityOptions:k,automaticUploads:S})))},He=e=>{const t=e.imageList.map((e=>({name:"images",type:"listbox",label:"Image list",items:e}))),n={name:"alt",type:"input",label:"Alternative description",enabled:!(e.hasAccessibilityOptions&&e.image.isDecorative)},o=e.classList.map((e=>({name:"classes",type:"listbox",label:"Class",items:e})));return D([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],t.toArray(),e.hasAccessibilityOptions&&e.hasDescription?[{type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]}]:[],e.hasDescription?[n]:[],e.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],e.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[{...(r=e.classList.isSome()&&e.hasImageCaption,r?{type:"grid",columns:2}:{type:"panel"}),items:D([o.toArray(),e.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])}]]);var r},qe=e=>({title:"General",name:"general",items:He(e)}),Ve=He,Ke=e=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}),Ze=image=>({src:{value:image.src,meta:{}},images:image.src,alt:image.alt,title:image.title,dimensions:{width:image.width,height:image.height},classes:image.class,caption:image.caption,style:image.style,vspace:image.vspace,border:image.border,hspace:image.hspace,borderstyle:image.borderStyle,fileinput:[],isDecorative:image.isDecorative}),Ge=(data,e)=>({src:data.src.value,alt:null!==data.alt&&0!==data.alt.length||!e?data.alt:null,title:data.title,width:data.dimensions.width,height:data.dimensions.height,class:data.classes,style:data.style,caption:data.caption,hspace:data.hspace,vspace:data.vspace,border:data.border,borderStyle:data.borderstyle,isDecorative:data.isDecorative}),Ye=(e,t)=>{const data=t.getData();((e,t)=>/^(?:[a-zA-Z]+:)?\/\//.test(t)?C.none():e.prependURL.bind((e=>t.substring(0,e.length)!==e?C.some(e+t):C.none())))(e,data.src.value).each((e=>{t.setData({src:{value:e,meta:data.src.meta}})}))},Je=(e,t)=>{const data=t.getData(),meta=data.src.meta;if(void 0!==meta){const n=Ne({},data);((e,data,meta)=>{e.hasDescription&&l(meta.alt)&&(data.alt=meta.alt),e.hasAccessibilityOptions&&(data.isDecorative=meta.isDecorative||data.isDecorative||!1),e.hasImageTitle&&l(meta.title)&&(data.title=meta.title),e.hasDimensions&&(l(meta.width)&&(data.dimensions.width=meta.width),l(meta.height)&&(data.dimensions.height=meta.height)),l(meta.class)&&$e(e.classList,meta.class).each((e=>{data.classes=e.value})),e.hasImageCaption&&y(meta.caption)&&(data.caption=meta.caption),e.hasAdvTab&&(l(meta.style)&&(data.style=meta.style),l(meta.vspace)&&(data.vspace=meta.vspace),l(meta.border)&&(data.border=meta.border),l(meta.hspace)&&(data.hspace=meta.hspace),l(meta.borderstyle)&&(data.borderstyle=meta.borderstyle))})(e,n,meta),t.setData(n)}},Xe=(e,t,n,o)=>{Ye(t,o),Je(t,o),((e,t,n,o)=>{const data=o.getData(),r=data.src.value,meta=data.src.meta||{};meta.width||meta.height||!t.hasDimensions||(P(r)?e.imageSize(r).then((e=>{n.open&&o.setData({dimensions:e})})).catch((e=>console.error(e))):o.setData({dimensions:{width:"",height:""}}))})(e,t,n,o),((e,t,n)=>{const data=n.getData(),image=$e(e.imageList,data.src.value);t.prevImage=image,n.setData({images:image.map((e=>e.value)).getOr("")})})(t,n,o)},Qe=(e,t,n,o)=>{const data=o.getData();o.block("Uploading image"),head(data.fileinput).fold((()=>{o.unblock()}),(r=>{const l=URL.createObjectURL(r),c=()=>{o.unblock(),URL.revokeObjectURL(l)},d=r=>{o.setData({src:{value:r,meta:{}}}),o.showTab("general"),Xe(e,t,n,o)};var m;(m=r,new Promise(((e,t)=>{const n=new FileReader;n.onload=()=>{e(n.result)},n.onerror=()=>{var e;t(null===(e=n.error)||void 0===e?void 0:e.message)},n.readAsDataURL(m)}))).then((n=>{const m=e.createBlobCache(r,l,n);t.automaticUploads?e.uploadImage(m).then((e=>{d(e.url),c()})).catch((t=>{c(),e.alertErr(t)})):(e.addToBlobCache(m),d(m.blobUri()),o.unblock())}))}))},et=(e,t,n)=>(o,r)=>{"src"===r.name?Xe(e,t,n,o):"images"===r.name?((e,t,n,o)=>{const data=o.getData(),image=$e(t.imageList,data.images);image.each((img=>{const e=""===data.alt||n.prevImage.map((image=>image.text===data.alt)).getOr(!1);e?""===img.value?o.setData({src:img,alt:n.prevAlt}):o.setData({src:img,alt:img.text}):o.setData({src:img})})),n.prevImage=image,Xe(e,t,n,o)})(e,t,n,o):"alt"===r.name?n.prevAlt=o.getData().alt:"fileinput"===r.name?Qe(e,t,n,o):"isDecorative"===r.name&&o.setEnabled("alt",!o.getData().isDecorative)},tt=e=>()=>{e.open=!1},nt=e=>{if(e.hasAdvTab||e.hasUploadUrl||e.hasUploadHandler){return{type:"tabpanel",tabs:D([[qe(e)],e.hasAdvTab?[Ue(e)]:[],e.hasUploadTab&&(e.hasUploadUrl||e.hasUploadHandler)?[Ke(e)]:[]])}}return{type:"panel",items:Ve(e)}},ot=(e,t,n)=>o=>{const data=Ne(Ze(t.image),o.getData()),r={...data,style:ve(n.normalizeCss,Ge(data,!1))};e.execCommand("mceUpdateImage",!1,Ge(r,t.hasAccessibilityOptions)),e.editorUpload.uploadImagesAuto(),o.close()},st=e=>t=>Q(e,t)?(e=>new Promise((t=>{const img=document.createElement("img"),n=e=>{img.onload=img.onerror=null,img.parentNode&&img.parentNode.removeChild(img),t(e)};img.onload=()=>{const e={width:G(img.width,img.clientWidth),height:G(img.height,img.clientHeight)};n(Promise.resolve(e))},img.onerror=()=>{n(Promise.reject(`Failed to get image dimensions for: ${e}`))};const style=img.style;style.visibility="hidden",style.position="fixed",style.bottom=style.left="0px",style.width=style.height="auto",document.body.appendChild(img),img.src=e})))(e.documentBaseURI.toAbsolute(t)).then((e=>({width:String(e.width),height:String(e.height)}))):Promise.resolve({width:"",height:""}),at=e=>(t,n,o)=>{var r;return e.editorUpload.blobCache.create({blob:t,blobUri:n,name:null===(r=t.name)||void 0===r?void 0:r.replace(/\.[^\.]+$/,""),filename:t.name,base64:o.split(",")[1]})},lt=e=>t=>{e.editorUpload.blobCache.add(t)},it=e=>t=>{e.windowManager.alert(t)},ct=e=>t=>Te(e,t),ut=e=>t=>e.dom.parseStyle(t),mt=e=>(t,n)=>e.dom.serializeStyle(t,n),gt=e=>t=>Me(e).upload([t],!1).then((e=>{var t;return 0===e.length?Promise.reject("Failed to upload image"):!1===e[0].status?Promise.reject(null===(t=e[0].error)||void 0===t?void 0:t.message):e[0]})),pt=e=>{const t={imageSize:st(e),addToBlobCache:lt(e),createBlobCache:at(e),alertErr:it(e),normalizeCss:ct(e),parseStyle:ut(e),serializeStyle:mt(e),uploadImage:gt(e)};return{open:()=>{We(e).then((n=>{const o=(e=>({prevImage:$e(e.imageList,e.image.src),prevAlt:e.image.alt,open:!0}))(n);return{title:"Insert/Edit Image",size:"normal",body:nt(n),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ze(n.image),onSubmit:ot(e,n,t),onChange:et(t,n,o),onClose:tt(o)}})).then(e.windowManager.open)}}},ht=e=>{const t=e.attr("class");return v(t)&&/\bimage\b/.test(t)},ft=e=>t=>{let i=t.length;const n=t=>{t.attr("contenteditable",e?"true":null)};for(;i--;){const o=t[i];ht(o)&&(o.attr("contenteditable",e?"false":null),Fe.each(o.getAll("figcaption"),n))}};e.add("image",(e=>{I(e),(e=>{e.on("PreInit",(()=>{e.parser.addNodeFilter("figure",ft(!0)),e.serializer.addNodeFilter("figure",ft(!1))}))})(e),(e=>{e.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:pt(e).open,onSetup:t=>(t.setActive(v(_e(e))),e.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",t.setActive).unbind)}),e.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:pt(e).open}),e.ui.registry.addContextMenu("image",{update:element=>fe(element)||"IMG"===element.nodeName&&!X(element)?["image"]:[]})})(e),(e=>{e.addCommand("mceImage",pt(e).open),e.addCommand("mceUpdateImage",((t,data)=>{e.undoManager.transact((()=>Ee(e,data)))}))})(e)}))}()},675:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,n=t("string"),o=t("object"),r=t("array"),l=a=>!(a=>null==a)(a);class c{constructor(e,t){this.tag=e,this.value=t}static some(e){return new c(!0,e)}static none(){return c.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?c.some(e(this.value)):c.none()}bind(e){return this.tag?e(this.value):c.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:c.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return l(e)?c.some(e):c.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}c.singletonNone=new c(!1);const d=Array.prototype.push,m=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},h=e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!r(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);d.apply(t,e[i])}return t},f=Object.keys,y=Object.hasOwnProperty,v=(e,t)=>w(e,t)?c.from(e[t]):c.none(),w=(e,t)=>y.call(e,t),option=e=>t=>t.options.get(e),x=option("audio_template_callback"),k=option("video_template_callback"),C=option("iframe_template_callback"),S=option("media_live_embeds"),T=option("media_filter_html"),_=option("media_url_resolver"),A=option("media_alt_source"),O=option("media_poster"),D=option("media_dimensions");var E=tinymce.util.Tools.resolve("tinymce.util.Tools"),N=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),R=tinymce.util.Tools.resolve("tinymce.html.DomParser");const M=N.DOM,F=e=>e.replace(/px$/,""),P=e=>{const style=e.attr("style"),t=style?M.parseStyle(style):{};return{type:"ephox-embed-iri",source:e.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:v(t,"max-width").map(F).getOr(""),height:v(t,"max-height").map(F).getOr("")}},I=(html,e)=>{let data={};for(let t=R({validate:!1,forced_root_block:!1},e).parse(html);t;t=t.walk())if(1===t.type){const e=t.name;if(t.attr("data-ephox-embed-iri")){data=P(t);break}data.source||"param"!==e||(data.source=t.attr("movie")),"iframe"!==e&&"object"!==e&&"embed"!==e&&"video"!==e&&"audio"!==e||(data.type||(data.type=e),data=E.extend(t.attributes.map,data)),"script"===e&&(data={type:"script",source:t.attr("src")}),"source"===e&&(data.source?data.altsource||(data.altsource=t.attr("src")):data.source=t.attr("src")),"img"!==e||data.poster||(data.poster=t.attr("src"))}return data.source=data.source||data.src||"",data.altsource=data.altsource||"",data.poster=data.poster||"",data},L=e=>{var t;const n=null!==(t=e.toLowerCase().split(".").pop())&&void 0!==t?t:"";return v({mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},n).getOr("")};var B=tinymce.util.Tools.resolve("tinymce.html.Node"),j=tinymce.util.Tools.resolve("tinymce.html.Serializer");const z=(e,t={})=>R({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...t},e),$=N.DOM,U=e=>/^[0-9.]+$/.test(e)?e+"px":e,W=(data,e)=>{const style=e.attr("style"),t=style?$.parseStyle(style):{};l(data.width)&&(t["max-width"]=U(data.width)),l(data.height)&&(t["max-height"]=U(data.height)),e.attr("style",$.serializeStyle(t))},H=["source","altsource"],V=(html,data,e,t)=>{let n=0,o=0;const r=z(t);r.addNodeFilter("source",(e=>n=e.length));const l=r.parse(html);for(let t=l;t;t=t.walk())if(1===t.type){const r=t.name;if(t.attr("data-ephox-embed-iri")){W(data,t);break}switch(r){case"video":case"object":case"embed":case"img":case"iframe":void 0!==data.height&&void 0!==data.width&&(t.attr("width",data.width),t.attr("height",data.height))}if(e)switch(r){case"video":t.attr("poster",data.poster),t.attr("src",null);for(let e=n;e<2;e++)if(data[H[e]]){const source=new B("source",1);source.attr("src",data[H[e]]),source.attr("type",data[H[e]+"mime"]||null),t.append(source)}break;case"iframe":t.attr("src",data.source);break;case"object":const e=t.getAll("img").length>0;if(data.poster&&!e){t.attr("src",data.poster);const img=new B("img",1);img.attr("src",data.poster),img.attr("width",data.width),img.attr("height",data.height),t.append(img)}break;case"source":if(o<2&&(t.attr("src",data[H[o]]),t.attr("type",data[H[o]+"mime"]||null),!data[H[o]])){t.remove();continue}o++;break;case"img":data.poster||t.remove()}}return j({},t).serialize(l)},K=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],Z=(pattern,e)=>{const t=(e=>{const t=e.match(/^(https?:\/\/|www\.)(.+)$/i);return t&&t.length>1?"www."===t[1]?"https://":t[1]:"https://"})(e),n=pattern.regex.exec(e);let o=t+pattern.url;if(l(n))for(let i=0;i<n.length;i++)o=o.replace("$"+i,(()=>n[i]?n[i]:""));return o.replace(/\?$/,"")},G=(e,t)=>{var n;const data=E.extend({},t);if(!data.source&&(E.extend(data,I(null!==(n=data.embed)&&void 0!==n?n:"",e.schema)),!data.source))return"";data.altsource||(data.altsource=""),data.poster||(data.poster=""),data.source=e.convertURL(data.source,"source"),data.altsource=e.convertURL(data.altsource,"source"),data.sourcemime=L(data.source),data.altsourcemime=L(data.altsource),data.poster=e.convertURL(data.poster,"poster");const pattern=(e=>{const t=K.filter((pattern=>pattern.regex.test(e)));return t.length>0?E.extend({},t[0],{url:Z(t[0],e)}):null})(data.source);if(pattern&&(data.source=pattern.url,data.type=pattern.type,data.allowfullscreen=pattern.allowFullscreen,data.width=data.width||String(pattern.w),data.height=data.height||String(pattern.h)),data.embed)return V(data.embed,data,!0,e.schema);{const t=x(e),n=k(e),o=C(e);return data.width=data.width||"300",data.height=data.height||"150",E.each(data,((t,n)=>{data[n]=e.dom.encode(""+t)})),"iframe"===data.type?((data,e)=>{if(e)return e(data);{const e=data.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+data.source+'" width="'+data.width+'" height="'+data.height+'"'+e+"></iframe>"}})(data,o):"application/x-shockwave-flash"===data.sourcemime?(data=>{let html='<object data="'+data.source+'" width="'+data.width+'" height="'+data.height+'" type="application/x-shockwave-flash">';return data.poster&&(html+='<img src="'+data.poster+'" width="'+data.width+'" height="'+data.height+'" />'),html+="</object>",html})(data):-1!==data.sourcemime.indexOf("audio")?((data,e)=>e?e(data):'<audio controls="controls" src="'+data.source+'">'+(data.altsource?'\n<source src="'+data.altsource+'"'+(data.altsourcemime?' type="'+data.altsourcemime+'"':"")+" />\n":"")+"</audio>")(data,t):"script"===data.type?(data=>'<script src="'+data.source+'"><\/script>')(data):((data,e)=>e?e(data):'<video width="'+data.width+'" height="'+data.height+'"'+(data.poster?' poster="'+data.poster+'"':"")+' controls="controls">\n<source src="'+data.source+'"'+(data.sourcemime?' type="'+data.sourcemime+'"':"")+" />\n"+(data.altsource?'<source src="'+data.altsource+'"'+(data.altsourcemime?' type="'+data.altsourcemime+'"':"")+" />\n":"")+"</video>")(data,n)}},Y=element=>element.hasAttribute("data-mce-object")||element.hasAttribute("data-ephox-embed-iri"),J={},X=e=>data=>G(e,data),Q=(e,data)=>{const t=_(e);return t?((data,e,t)=>new Promise(((n,o)=>{const r=t=>(t.html&&(J[data.source]=t),n({url:data.source,html:t.html?t.html:e(data)}));J[data.source]?r(J[data.source]):t({url:data.source},r,o)})))(data,X(e),t):((data,e)=>Promise.resolve({html:e(data),url:data.source}))(data,X(e))},ee=(data,e)=>{const t={};return v(data,"dimensions").each((n=>{m(["width","height"],(o=>{v(e,o).orThunk((()=>v(n,o))).each((e=>t[o]=e))}))})),t},te=(data,e)=>{const t=e&&"dimensions"!==e?((e,data)=>v(data,e).bind((e=>v(e,"meta"))))(e,data).getOr({}):{},n=((data,e,t)=>n=>{const r=()=>v(data,n),l=()=>v(e,n),d=e=>v(e,"value").bind((e=>e.length>0?c.some(e):c.none()));return{[n]:(n===t?r().bind((e=>o(e)?d(e).orThunk(l):l().orThunk((()=>c.from(e))))):l().orThunk((()=>r().bind((e=>o(e)?d(e):c.from(e)))))).getOr("")}})(data,t,e);return{...n("source"),...n("altsource"),...n("poster"),...n("embed"),...ee(data,t)}},ne=data=>{const e={...data,source:{value:v(data,"source").getOr("")},altsource:{value:v(data,"altsource").getOr("")},poster:{value:v(data,"poster").getOr("")}};return m(["width","height"],(t=>{v(data,t).each((n=>{const o=e.dimensions||{};o[t]=n,e.dimensions=o}))})),e},oe=e=>t=>{const n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})},re=(e,t)=>o=>{if(n(o.url)&&o.url.trim().length>0){const html=o.html,n={...I(html,t.schema),source:o.url,embed:html};e.setData(ne(n))}},se=(e,html)=>{const t=e.dom.select("*[data-mce-object]");e.insertContent(html),((e,t)=>{const n=e.dom.select("*[data-mce-object]");for(let i=0;i<t.length;i++)for(let e=n.length-1;e>=0;e--)t[i]===n[e]&&n.splice(e,1);e.selection.select(n[0])})(e,t),e.nodeChanged()},ae=(e,t,n)=>{var o,r;t.embed=V(null!==(o=t.embed)&&void 0!==o?o:"",t,!1,n.schema),t.embed&&(e.source===t.source||(r=t.source,w(J,r)))?se(n,t.embed):Q(n,t).then((e=>{se(n,e.html)})).catch(oe(n))},le=e=>{const t=(e=>{const element=e.selection.getNode(),t=Y(element)?e.serializer.serialize(element,{selection:!0}):"";return{embed:t,...I(t,e.schema)}})(e),n=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})(t),o=ne(t),r=D(e)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],l={title:"General",name:"general",items:h([[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],r])},c={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},d=[];A(e)&&d.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),O(e)&&d.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const m={title:"Advanced",name:"advanced",items:d},f=[l,c];d.length>0&&f.push(m);const body={type:"tabpanel",tabs:f},y=e.windowManager.open({title:"Insert/Edit Media",size:"normal",body:body,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{const o=te(t.getData());ae(n.get(),o,e),t.close()},onChange:(t,o)=>{switch(o.name){case"source":((t,n)=>{const o=te(n.getData(),"source");t.source!==o.source&&(re(y,e)({url:o.source,html:""}),Q(e,o).then(re(y,e)).catch(oe(e)))})(n.get(),t);break;case"embed":(t=>{var n;const data=te(t.getData()),o=I(null!==(n=data.embed)&&void 0!==n?n:"",e.schema);t.setData(ne(o))})(t);break;case"dimensions":case"altsource":case"poster":((t,n)=>{const data=te(t.getData(),n),embed=G(e,data);t.setData(ne({...data,embed:embed}))})(t,o.name)}n.set(te(t.getData()))},initialData:o})};var ie=tinymce.util.Tools.resolve("tinymce.Env");const ce=e=>{const t=e.name;return"iframe"===t||"video"===t||"audio"===t},ue=(e,t,n,o=null)=>{const r=e.attr(n);return l(r)?r:w(t,n)?null:o},de=(e,t,n)=>{const o="img"===t.name||"video"===e.name,r=o?"300":null,l="audio"===e.name?"30":"150",c=o?l:null;t.attr({width:ue(e,n,"width",r),height:ue(e,n,"height",c)})},me=(e,t)=>{const n=t.name,o=new B("img",1);return pe(e,t,o),de(t,o,{}),o.attr({style:t.attr("style"),src:ie.transparentSrc,"data-mce-object":n,class:"mce-object mce-object-"+n}),o},ge=(e,t)=>{var n;const o=t.name,r=new B("span",1);r.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":o,class:"mce-preview-object mce-object-"+o}),pe(e,t,r);const c=e.dom.parseStyle(null!==(n=t.attr("style"))&&void 0!==n?n:""),d=new B(o,1);if(de(t,d,c),d.attr({src:t.attr("src"),style:t.attr("style"),class:t.attr("class")}),"iframe"===o)d.attr({allowfullscreen:t.attr("allowfullscreen"),frameborder:"0"});else{m(["controls","crossorigin","currentTime","loop","muted","poster","preload"],(e=>{d.attr(e,t.attr(e))}));const n=r.attr("data-mce-html");l(n)&&((e,t,n,html)=>{const o=z(e.schema).parse(html,{context:t});for(;o.firstChild;)n.append(o.firstChild)})(e,o,d,unescape(n))}const h=new B("span",1);return h.attr("class","mce-shim"),r.append(d),r.append(h),r},pe=(e,t,n)=>{var o;const r=null!==(o=t.attributes)&&void 0!==o?o:[];let l=r.length;for(;l--;){const t=r[l].name;let o=r[l].value;"width"===t||"height"===t||"style"===t||((e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t)(t,"data-mce-",0)||("data"!==t&&"src"!==t||(o=e.convertURL(o,t)),n.attr("data-mce-p-"+t,o))}const c=j({inner:!0},e.schema),d=new B("div",1);m(t.children(),(e=>d.append(e)));const h=c.serialize(d);h&&(n.attr("data-mce-html",escape(h)),n.empty())},he=e=>{const t=e.attr("class");return n(t)&&/\btiny-pageembed\b/.test(t)},fe=e=>{let t=e;for(;t=t.parent;)if(t.attr("data-ephox-embed-iri")||he(t))return!0;return!1},be=(e,t,html)=>{const n=T(e);return z(e.schema,{validate:n}).parse(html,{context:t})},ye=e=>{e.on("PreInit",(()=>{const{schema:t,serializer:n,parser:o}=e,r=t.getBoolAttrs();m("webkitallowfullscreen mozallowfullscreen".split(" "),(e=>{r[e]={}})),((e,t)=>{const n=f(e);for(let o=0,r=n.length;o<r;o++){const i=n[o];t(e[i],i)}})({embed:["wmode"]},((e,n)=>{const o=t.getElementRule(n);o&&m(e,(e=>{o.attributes[e]={},o.attributesOrder.push(e)}))})),o.addNodeFilter("iframe,video,audio,object,embed,script",(e=>t=>{let n,i=t.length;for(;i--;)n=t[i],n.parent&&(n.parent.attr("data-mce-object")||(ce(n)&&S(e)?fe(n)||n.replace(ge(e,n)):fe(n)||n.replace(me(e,n))))})(e)),n.addAttributeFilter("data-mce-object",((t,n)=>{var o;let i=t.length;for(;i--;){const r=t[i];if(!r.parent)continue;const l=r.attr(n),c=new B(l,1);if("audio"!==l&&"script"!==l){const e=r.attr("class");e&&-1!==e.indexOf("mce-preview-object")&&r.firstChild?c.attr({width:r.firstChild.attr("width"),height:r.firstChild.attr("height")}):c.attr({width:r.attr("width"),height:r.attr("height")})}c.attr({style:r.attr("style")});const d=null!==(o=r.attributes)&&void 0!==o?o:[];let h=d.length;for(;h--;){const e=d[h].name;0===e.indexOf("data-mce-p-")&&c.attr(e.substr(11),d[h].value)}"script"===l&&c.attr("type","text/javascript");const f=r.attr("data-mce-html");if(f){const t=be(e,l,unescape(f));m(t.children(),(e=>c.append(e)))}r.replace(c)}}))})),e.on("SetContent",(()=>{const t=e.dom;m(t.select("span.mce-preview-object"),(e=>{0===t.select("span.mce-shim",e).length&&t.add(e,"span",{class:"mce-shim"})}))}))};e.add("media",(e=>((e=>{const t=e.options.register;t("audio_template_callback",{processor:"function"}),t("video_template_callback",{processor:"function"}),t("iframe_template_callback",{processor:"function"}),t("media_live_embeds",{processor:"boolean",default:!0}),t("media_filter_html",{processor:"boolean",default:!0}),t("media_url_resolver",{processor:"function"}),t("media_alt_source",{processor:"boolean",default:!0}),t("media_poster",{processor:"boolean",default:!0}),t("media_dimensions",{processor:"boolean",default:!0})})(e),(e=>{e.addCommand("mceMedia",(()=>{le(e)}))})(e),(e=>{const t=()=>e.execCommand("mceMedia");e.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:t,onSetup:t=>{const n=e.selection;return t.setActive(Y(n.getNode())),n.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",t.setActive).unbind}}),e.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:t})})(e),(e=>{e.on("ResolveName",(e=>{let t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}))})(e),ye(e),(e=>{e.on("click keyup touchend",(()=>{const t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")})),e.on("ObjectSelected",(e=>{"script"===e.target.getAttribute("data-mce-object")&&e.preventDefault()})),e.on("ObjectResized",(t=>{const n=t.target;if(n.getAttribute("data-mce-object")){let html=n.getAttribute("data-mce-html");html&&(html=unescape(html),n.setAttribute("data-mce-html",escape(V(html,{width:String(t.width),height:String(t.height)},!1,e.schema))))}}))})(e),(e=>({showDialog:()=>{le(e)}}))(e))))}()},676:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,n=e=>t=>typeof t===e,o=t("string"),r=t("array"),l=n("boolean"),c=(d=void 0,a=>d===a);var d;const m=a=>!(a=>null==a)(a),h=n("function"),f=n("number"),y=()=>{},v=e=>()=>e,w=e=>e,x=(a,b)=>a===b;function k(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const C=e=>{e()},S=v(!1),T=v(!0);class _{constructor(e,t){this.tag=e,this.value=t}static some(e){return new _(!0,e)}static none(){return _.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?_.some(e(this.value)):_.none()}bind(e){return this.tag?e(this.value):_.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:_.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return m(e)?_.some(e):_.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}_.singletonNone=new _(!1);const A=Object.keys,O=Object.hasOwnProperty,D=(e,t)=>{const n=A(e);for(let o=0,r=n.length;o<r;o++){const i=n[o];t(e[i],i)}},E=(e,t)=>{const n={};var o;return((e,t,n,o)=>{D(e,((e,i)=>{(t(e,i)?n:o)(e,i)}))})(e,t,(o=n,(e,i)=>{o[i]=e}),y),n},N=e=>((e,t)=>{const n=[];return D(e,((e,o)=>{n.push(t(e,o))})),n})(e,w),R=e=>A(e).length,M=(e,t)=>F(e,t)?_.from(e[t]):_.none(),F=(e,t)=>O.call(e,t),P=(e,t)=>F(e,t)&&void 0!==e[t]&&null!==e[t],I=Array.prototype.indexOf,L=Array.prototype.push,B=(e,t)=>((e,t)=>I.call(e,t))(e,t)>-1,j=(e,t)=>{for(let i=0,n=e.length;i<n;i++){if(t(e[i],i))return!0}return!1},z=(e,t)=>{const n=[];for(let i=0;i<e;i++)n.push(t(i));return n},map=(e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o},$=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},filter=(e,t)=>{const n=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];t(o,i)&&n.push(o)}return n},U=(e,t,n)=>($(e,((e,i)=>{n=t(n,e,i)})),n),W=(e,t)=>((e,t,n)=>{for(let i=0,o=e.length;i<o;i++){const o=e[i];if(t(o,i))return _.some(o);if(n(o,i))break}return _.none()})(e,t,S),H=(e,t)=>(e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!r(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);L.apply(t,e[i])}return t})(map(e,t)),V=(e,t)=>{for(let i=0,n=e.length;i<n;++i){if(!0!==t(e[i],i))return!1}return!0},K=(e,i)=>i>=0&&i<e.length?_.some(e[i]):_.none(),Z=(e,t)=>{for(let i=0;i<e.length;i++){const n=t(e[i],i);if(n.isSome())return n}return _.none()},G=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Y={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return G(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return G(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return G(t)},fromDom:G,fromPoint:(e,t,n)=>_.from(e.dom.elementFromPoint(t,n)).map(G)};"undefined"!=typeof window?window:Function("return this;")();const J=element=>element.dom.nodeName.toLowerCase(),X=element=>element.dom.nodeType,Q=e=>element=>X(element)===e,ee=element=>8===X(element)||"#comment"===J(element),te=Q(1),ne=Q(3),oe=Q(9),re=Q(11),se=e=>t=>te(t)&&J(t)===e,ae=(element,e)=>{const t=element.dom;if(1!==t.nodeType)return!1;{const n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},le=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,ie=(e,t)=>e.dom===t.dom,ce=ae,ue=e=>{return oe(e)?e:(element=e,Y.fromDom(element.dom.ownerDocument));var element},de=element=>_.from(element.dom.parentNode).map(Y.fromDom),me=(element,e)=>{const t=h(e)?e:S;let n=element.dom;const o=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,p=Y.fromDom(e);if(o.push(p),!0===t(p))break;n=e}return o},ge=element=>_.from(element.dom.previousSibling).map(Y.fromDom),pe=element=>_.from(element.dom.nextSibling).map(Y.fromDom),he=element=>map(element.dom.childNodes,Y.fromDom),fe=element=>((element,e)=>{const t=element.dom.childNodes;return _.from(t[e]).map(Y.fromDom)})(element,0),be=h(Element.prototype.attachShadow)&&h(Node.prototype.getRootNode)?e=>Y.fromDom(e.dom.getRootNode()):ue,ye=e=>{const t=be(e);return re(n=t)&&m(n.dom.host)?_.some(t):_.none();var n},ve=e=>Y.fromDom(e.dom.host),we=element=>{const e=ne(element)?element.dom.parentNode:element.dom;if(null==e||null===e.ownerDocument)return!1;const t=e.ownerDocument;return ye(Y.fromDom(e)).fold((()=>t.body.contains(e)),(n=we,o=ve,a=>n(o(a))));var n,o},xe=(e,t)=>{let n=[];return $(he(e),(e=>{t(e)&&(n=n.concat([e])),n=n.concat(xe(e,t))})),n},ke=(e,t)=>((e,t)=>filter(he(e),t))(e,(e=>ae(e,t))),Ce=(e,t)=>((e,t)=>{const base=void 0===t?document:t.dom;return le(base)?[]:map(base.querySelectorAll(e),Y.fromDom)})(t,e);const Se=(e,t,n)=>{let element=e.dom;const o=h(n)?n:S;for(;element.parentNode;){element=element.parentNode;const e=Y.fromDom(element);if(t(e))return _.some(e);if(o(e))break}return _.none()},Te=(e,t,n)=>Se(e,(e=>ae(e,t)),n),_e=(e,t)=>((e,t)=>W(e.dom.childNodes,(e=>t(Y.fromDom(e)))).map(Y.fromDom))(e,(e=>ae(e,t))),Ae=(e,t)=>((e,t)=>{const base=void 0===t?document:t.dom;return le(base)?_.none():_.from(base.querySelector(e)).map(Y.fromDom)})(t,e),Oe=(e,t,n)=>((e,t,n,a,o)=>e(n,a)?_.some(n):h(o)&&o(n)?_.none():t(n,a,o))(((element,e)=>ae(element,e)),Te,e,t,n),De=(e,t,n)=>{if(!(o(n)||l(n)||f(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Ee=(element,e,t)=>{De(element.dom,e,t)},Ne=(element,e)=>{const t=element.dom.getAttribute(e);return null===t?void 0:t},Re=(element,e)=>_.from(Ne(element,e)),Me=(element,e)=>{element.dom.removeAttribute(e)},Fe=(e,t,n=x)=>e.exists((e=>n(e,t))),Pe=(e,t,n)=>e.isSome()&&t.isSome()?_.some(n(e.getOrDie(),t.getOrDie())):_.none(),Ie=(e,t)=>((e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t)(e,t,0),Le=(Be=/^\s+|\s+$/g,s=>s.replace(Be,""));var Be;const je=s=>s.length>0,ze=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?_.none():_.some(n)},$e=e=>void 0!==e.style&&h(e.style.getPropertyValue),Ue=(element,e,t)=>{((e,t,n)=>{if(!o(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);$e(e)&&e.style.setProperty(t,n)})(element.dom,e,t)},We=(element,e)=>{const t=element.dom,n=window.getComputedStyle(t).getPropertyValue(e);return""!==n||we(element)?n:He(t,e)},He=(e,t)=>$e(e)?e.style.getPropertyValue(t):"",qe=(element,e)=>{const t=element.dom,n=He(t,e);return _.from(n).filter((e=>e.length>0))},Ve=(element,e)=>{((e,t)=>{$e(e)&&e.style.removeProperty(t)})(element.dom,e),Fe(Re(element,"style").map(Le),"")&&Me(element,"style")},Ke=(e,t,n=0)=>Re(e,t).map((e=>parseInt(e,10))).getOr(n),Ze=(e,t)=>Ge(e,t,T),Ge=(e,t,n)=>H(he(e),(e=>ae(e,t)?n(e)?[e]:[]:Ge(e,t,n))),Ye=["tfoot","thead","tbody","colgroup"],Je=(element,e,t)=>({element:element,rowspan:e,colspan:t}),Xe=(element,e,section)=>({element:element,cells:e,section:section}),Qe=(element,e)=>((e,element,t=S)=>t(element)?_.none():B(e,J(element))?_.some(element):Te(element,e.join(","),(e=>ae(e,"table")||t(e))))(["td","th"],element,e),table=(element,e)=>Oe(element,"table",e),et=e=>Ze(e,"tr"),tt=e=>table(e).fold(v([]),(table=>ke(table,"colgroup"))),nt=(e,t)=>map(e,(e=>{if("colgroup"===J(e)){const t=map((e=>ae(e,"colgroup")?ke(e,"col"):H(tt(e),(e=>ke(e,"col"))))(e),(e=>{const t=Ke(e,"span",1);return Je(e,1,t)}));return Xe(e,t,"colgroup")}{const n=map((e=>Ze(e,"th,td"))(e),(e=>{const t=Ke(e,"rowspan",1),n=Ke(e,"colspan",1);return Je(e,t,n)}));return Xe(e,n,t(e))}})),ot=e=>de(e).map((e=>{const t=J(e);return(e=>B(Ye,e))(t)?t:"tbody"})).getOr("tbody"),st=table=>Re(table,"data-snooker-locked-cols").bind((e=>_.from(e.match(/\d+/g)))).map((e=>((e,t)=>{const n={};for(let i=0,o=e.length;i<o;i++){const o=e[i];n[String(o)]=t(o,i)}return n})(e,T))),at=(e,t)=>e+","+t,lt=(e,t)=>{const n=H(e.all,(e=>e.cells));return filter(n,t)},it=e=>{const t={},n=[];var o;const r=(o=e,K(o,0)).map((e=>e.element)).bind(table).bind(st).getOr({});let l=0,c=0,d=0;const{pass:m,fail:h}=((e,t)=>{const n=[],o=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];(t(r,i)?n:o).push(r)}return{pass:n,fail:o}})(e,(e=>"colgroup"===e.section));$(h,(e=>{const o=[];$(e.cells,(e=>{let n=0;for(;void 0!==t[at(d,n)];)n++;const l=P(r,n.toString()),m=((element,e,t,n,o,r)=>({element:element,rowspan:e,colspan:t,row:n,column:o,isLocked:r}))(e.element,e.rowspan,e.colspan,d,n,l);for(let o=0;o<e.colspan;o++)for(let r=0;r<e.rowspan;r++){const e=n+o,l=at(d+r,e);t[l]=m,c=Math.max(c,e+1)}o.push(m)})),l++,n.push(Xe(e.element,o,e.section)),d++}));const{columns:f,colgroups:y}=(e=>K(e,e.length-1))(m).map((e=>{const t=(e=>{const t={};let n=0;return $(e.cells,(e=>{const o=e.colspan;z(o,(r=>{const l=n+r;t[l]=((element,e,t)=>({element:element,colspan:e,column:t}))(e.element,o,l)})),n+=o})),t})(e),n=((element,e)=>({element:element,columns:e}))(e.element,N(t));return{colgroups:[n],columns:t}})).getOrThunk((()=>({colgroups:[],columns:{}}))),v=((e,t)=>({rows:e,columns:t}))(l,c);return{grid:v,access:t,all:n,columns:f,colgroups:y}},ct=table=>{const e=(table=>{const e=et(table),t=[...tt(table),...e];return nt(t,ot)})(table);return it(e)},ut=(e,t,n)=>_.from(e.access[at(t,n)]),mt=(e,t,n)=>{const o=lt(e,(e=>n(t,e.element)));return o.length>0?_.some(o[0]):_.none()},gt=e=>H(e.all,(e=>e.cells)),pt=(e,t)=>_.from(e.columns[t]);var ht=tinymce.util.Tools.resolve("tinymce.util.Tools");const ft=(e,t,n)=>{const o=e.select("td,th",t);let r;for(let i=0;i<o.length;i++){const t=e.getStyle(o[i],n);if(c(r)&&(r=t),r!==t)return""}return r},bt=(e,t,n)=>{ht.each("left center right".split(" "),(o=>{o!==n&&e.formatter.remove("align"+o,{},t)})),n&&e.formatter.apply("align"+n,{},t)},yt=(e,table,data)=>{e.dispatch("TableModified",{...data,table:table})},vt=(e,t)=>(e=>{const t=parseFloat(e);return isNaN(t)?_.none():_.some(t)})(e).getOr(t),wt=(element,e,t)=>vt(We(element,e),t),xt=(element,e)=>{const t=element.dom,n=t.getBoundingClientRect().width||t.offsetWidth;return"border-box"===e?n:((element,e,t,n)=>e-wt(element,`padding-${t}`,0)-wt(element,`padding-${n}`,0)-wt(element,`border-${t}-width`,0)-wt(element,`border-${n}-width`,0))(element,n,"left","right")},kt=element=>xt(element,"content-box");var Ct=tinymce.util.Tools.resolve("tinymce.Env");const St=z(5,(i=>{const e=`${i+1}px`;return{title:e,value:e}})),Tt=map(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],(e=>({title:e,value:e.toLowerCase()}))),_t="100%",At=e=>{var t;const n=e.dom,o=null!==(t=n.getParent(e.selection.getStart(),n.isBlock))&&void 0!==t?t:e.getBody();return kt(Y.fromDom(o))+"px"},option=e=>t=>t.options.get(e),Ot=option("table_sizing_mode"),Dt=option("table_border_widths"),Et=option("table_border_styles"),Nt=option("table_cell_advtab"),Rt=option("table_row_advtab"),Mt=option("table_advtab"),Ft=option("table_appearance_options"),Pt=option("table_grid"),It=option("table_style_by_css"),Lt=option("table_cell_class_list"),Bt=option("table_row_class_list"),jt=option("table_class_list"),zt=option("table_toolbar"),$t=option("table_background_color_map"),Ut=option("table_border_color_map"),Wt=e=>"fixed"===Ot(e),Ht=e=>"responsive"===Ot(e),qt=e=>{const t=e.options,n=t.get("table_default_styles");return t.isSet("table_default_styles")?n:((e,t)=>Ht(e)||!It(e)?t:Wt(e)?{...t,width:At(e)}:{...t,width:_t})(e,n)},Vt=e=>{const t=e.options,n=t.get("table_default_attributes");return t.isSet("table_default_attributes")?n:((e,t)=>Ht(e)||It(e)?t:Wt(e)?{...t,width:At(e)}:{...t,width:_t})(e,n)},Kt=e=>element=>ie(element,(e=>Y.fromDom(e.getBody()))(e)),Zt=e=>/^\d+(\.\d+)?$/.test(e)?e+"px":e,Gt=e=>Y.fromDom(e.selection.getStart()),Yt=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Jt=(e,t,n)=>{const o=mt(e,t,ie),r=mt(e,n,ie);return o.bind((e=>r.map((t=>{return n=e,o=t,r=Math.min(n.row,o.row),l=Math.min(n.column,o.column),c=Math.max(n.row+n.rowspan-1,o.row+o.rowspan-1),d=Math.max(n.column+n.colspan-1,o.column+o.colspan-1),{startRow:r,startCol:l,finishRow:c,finishCol:d};var n,o,r,l,c,d}))))},Xt=(e,t,n)=>Jt(e,t,n).bind((t=>((e,t)=>{let n=!0;const o=k(Yt,t);for(let i=t.startRow;i<=t.finishRow;i++)for(let r=t.startCol;r<=t.finishCol;r++)n=n&&ut(e,i,r).exists(o);return n?_.some(t):_.none()})(e,t))),Qt=ct,en=(marker,element)=>{de(marker).each((e=>{e.dom.insertBefore(element.dom,marker.dom)}))},tn=(marker,element)=>{pe(marker).fold((()=>{de(marker).each((e=>{on(e,element)}))}),(e=>{en(e,element)}))},nn=(e,element)=>{fe(e).fold((()=>{on(e,element)}),(t=>{e.dom.insertBefore(element.dom,t.dom)}))},on=(e,element)=>{e.dom.appendChild(element.dom)},rn=(element,e)=>{en(element,e),on(e,element)},sn=(marker,e)=>{$(e,((t,i)=>{const n=0===i?marker:e[i-1];tn(n,t)}))},an=(e,t)=>{$(t,(t=>{on(e,t)}))},ln=element=>{const e=element.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},cn=e=>{const t=he(e);t.length>0&&sn(e,t),ln(e)},un=((e,t)=>{const n=element=>e(element)?_.from(element.dom.nodeValue):_.none();return{get:element=>{if(!e(element))throw new Error("Can only get "+t+" value of a "+t+" node");return n(element).getOr("")},getOption:n,set:(element,n)=>{if(!e(element))throw new Error("Can only set raw "+t+" value of a "+t+" node");element.dom.nodeValue=n}}})(ne,"text"),dn=element=>un.get(element),mn=(element,e)=>un.set(element,e);var gn=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const pn=(e,t,head,n)=>{const o=t(e,head);return r=(b,a)=>{const n=t(e,a);return hn(e,b,n)},l=o,((e,t)=>{for(let i=e.length-1;i>=0;i--)t(e[i],i)})(n,((e,i)=>{l=r(l,e,i)})),l;var r,l},hn=(e,t,n)=>t.bind((s=>n.filter(k(e.eq,s)))),fn=(e,t,n)=>n.length>0?((e,t,n,o)=>o(e,t,n[0],n.slice(1)))(e,t,n,pn):_.none(),bn={up:v({selector:Te,closest:Oe,predicate:Se,all:me}),down:v({selector:Ce,predicate:xe}),styles:v({get:We,getRaw:qe,set:Ue,remove:Ve}),attrs:v({get:Ne,set:Ee,remove:Me,copyTo:(source,e)=>{((element,e)=>{const t=element.dom;D(e,((e,n)=>{De(t,n,e)}))})(e,U(source.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}))}}),insert:v({before:en,after:tn,afterAll:sn,append:on,appendAll:an,prepend:nn,wrap:rn}),remove:v({unwrap:cn,remove:ln}),create:v({nu:Y.fromTag,clone:element=>Y.fromDom(element.dom.cloneNode(!1)),text:Y.fromText}),query:v({comparePosition:(element,e)=>element.dom.compareDocumentPosition(e.dom),prevSibling:ge,nextSibling:pe}),property:v({children:he,name:J,parent:de,document:element=>ue(element).dom,isText:ne,isComment:ee,isElement:te,isSpecial:element=>{const e=J(element);return B(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],e)},getLanguage:element=>te(element)?Re(element,"lang"):_.none(),getText:dn,setText:mn,isBoundary:element=>!!te(element)&&("body"===J(element)||B(gn,J(element))),isEmptyTag:element=>!!te(element)&&B(["br","img","hr","input"],J(element)),isNonEditable:element=>te(element)&&"false"===Ne(element,"contenteditable")}),eq:ie,is:ce},yn=e=>Te(e,"table"),vn=(e,t,n)=>Ae(e,t).bind((t=>Ae(e,n).bind((e=>{return(n=yn,o=[t,e],fn(bn,((e,element)=>n(element)),o)).map((table=>({first:t,last:e,table:table})));var n,o})))),wn=(e,t)=>((e,t)=>{const n=Ce(e,t);return n.length>0?_.some(n):_.none()})(e,t),xn=(e,t,n)=>vn(e,t,n).bind((t=>{const n=t=>ie(e,t),o="thead,tfoot,tbody,table",r=Te(t.first,o,n),l=Te(t.last,o,n);return r.bind((e=>l.bind((n=>ie(e,n)?((table,e,t)=>{const n=Qt(table);return Xt(n,e,t)})(t.table,t.first,t.last):_.none()))))})),kn=e=>map(e,Y.fromDom),Cn="data-mce-selected",Sn="data-mce-first-selected",Tn="data-mce-last-selected",_n={selected:Cn,selectedSelector:"td["+Cn+"],th["+Cn+"]",firstSelected:Sn,firstSelectedSelector:"td["+Sn+"],th["+Sn+"]",lastSelected:Tn,lastSelectedSelector:"td["+Tn+"],th["+Tn+"]"},An=e=>(t,n)=>{const o=J(t),r="col"===o||"colgroup"===o?table(element=t).bind((table=>wn(table,_n.firstSelectedSelector))).fold(v(element),(e=>e[0])):t;var element;return Oe(r,e,n)},On=An("th,td,caption"),Dn=An("th,td"),En=e=>kn(e.model.table.getSelectedCells()),Nn=(e,t)=>{const n=Dn(e),o=n.bind((e=>table(e))).map((table=>et(table)));return Pe(n,o,((e,n)=>filter(n,(n=>j(kn(n.dom.cells),(n=>"1"===Ne(n,t)||ie(n,e))))))).getOr([])},Rn=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Mn=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Fn=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Pn=e=>{return(t=e,n="#",Ie(t,n)?((e,t)=>e.substring(t))(t,n.length):t).toUpperCase();var t,n},In=e=>(e=>Mn.test(e)||Fn.test(e))(e)?_.some({value:Pn(e)}):_.none(),Ln=component=>{const e=component.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},Bn=e=>(e=>({value:e}))(Ln(e.red)+Ln(e.green)+Ln(e.blue)),jn=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,zn=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,$n=(e,t,n,o)=>({red:e,green:t,blue:n,alpha:o}),Un=(e,t,n,o)=>{const r=parseInt(e,10),g=parseInt(t,10),b=parseInt(n,10),a=parseFloat(o);return $n(r,g,b,a)},Wn=e=>{if("transparent"===e)return _.some($n(0,0,0,0));const t=jn.exec(e);if(null!==t)return _.some(Un(t[1],t[2],t[3],"1"));const n=zn.exec(e);return null!==n?_.some(Un(n[1],n[2],n[3],n[4])):_.none()},Hn=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},qn=()=>(e=>{const t=Hn(_.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(_.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:s=>{n(),t.set(_.some(s))}}})((s=>s.unbind())),Vn=(e,t,n)=>o=>{const r=qn(),l=!je(n);const c=()=>{const c=En(e),d=o=>e.formatter.match(t,{value:n},o.dom,l);l?(o.setActive(!j(c,d)),r.set(e.formatter.formatChanged(t,(e=>o.setActive(!e)),!0))):(o.setActive(V(c,d)),r.set(e.formatter.formatChanged(t,o.setActive,!1,{value:n})))};return e.initialized?c():e.on("init",c),r.clear},Kn=e=>P(e,"menu"),Zn=e=>map(e,(e=>{const text=e.text||e.title||"";return Kn(e)?{text:text,items:Zn(e.menu)}:{text:text,value:e.value}})),Gn=(e,t,n,o)=>map(t,(t=>{const text=t.text||t.title;return Kn(t)?{type:"nestedmenuitem",text:text,getSubmenuItems:()=>Gn(e,t.menu,n,o)}:{text:text,type:"togglemenuitem",onAction:()=>o(t.value),onSetup:Vn(e,n,t.value)}})),Yn=(e,style)=>t=>{e.execCommand("mceTableApplyCellStyle",!1,{[style]:t})},Jn=e=>H(e,(e=>Kn(e)?[{...e,menu:Jn(e.menu)}]:je(e.value)?[e]:[])),Xn=(e,t,n,o)=>r=>r(Gn(e,t,n,o)),Qn=(e,t,style)=>{const n=map(t,(e=>{return{text:e.title,value:"#"+(t=e.value,In(t).orThunk((()=>Wn(t).map(Bn))).getOrThunk((()=>{const canvas=document.createElement("canvas");canvas.height=1,canvas.width=1;const e=canvas.getContext("2d");e.clearRect(0,0,canvas.width,canvas.height),e.fillStyle="#FFFFFF",e.fillStyle=t,e.fillRect(0,0,1,1);const n=e.getImageData(0,0,1,1).data,o=n[0],g=n[1],b=n[2],a=n[3];return Bn($n(o,g,b,a))}))).value,type:"choiceitem"};var t}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:n.length>0?n:void 0,allowCustomColors:!1},onAction:data=>{const t="remove"===data.value?"":data.value;e.execCommand("mceTableApplyCellStyle",!1,{[style]:t})}}]},eo=e=>()=>{const t="header"===e.queryCommandValue("mceTableRowType")?"body":"header";e.execCommand("mceTableRowType",!1,{type:t})},to=e=>()=>{const t="th"===e.queryCommandValue("mceTableColType")?"td":"th";e.execCommand("mceTableColType",!1,{type:t})},no=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Rn}],oo=e=>no.concat((e=>{const t=Zn(Lt(e));return t.length>0?_.some({name:"class",type:"listbox",label:"Class",items:t}):_.none()})(e).toArray()),ro=(e,t)=>{const n=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Zn(Et(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(n):n}},so=(e,element)=>{const t=e.dom;return{setAttrib:(e,n)=>{t.setAttrib(element,e,n)},setStyle:(e,n)=>{t.setStyle(element,e,n)},setFormat:(t,n)=>{""===n?e.formatter.remove(t,{value:null},element,!0):e.formatter.apply(t,{value:n},element)}}},ao=se("th"),lo=(e,t)=>e&&t?"sectionCells":e?"section":"cells",io=e=>{const t=filter(e,(e=>ao(e.element)));return 0===t.length?_.some("td"):t.length===e.length?_.some("th"):_.none()},co=e=>{const t=map(e,(e=>(e=>{const t="thead"===e.section,n=Fe(io(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||n?{type:"header",subType:lo(t,n)}:{type:"body"}})(e).type)),n=B(t,"header"),o=B(t,"footer");if(n||o){const e=B(t,"body");return!n||e||o?n||e||!o?_.none():_.some("footer"):_.some("header")}return _.some("body")},uo=(e,element)=>Z(e.all,(e=>W(e.cells,(e=>ie(element,e.element))))),mo=(e,t,n)=>{const o=(e=>{const t=[],n=e=>{t.push(e)};for(let i=0;i<e.length;i++)e[i].each(n);return t})(map(t.selection,(t=>Qe(t).bind((t=>uo(e,t))).filter(n))));return b=o.length>0,a=o,b?_.some(a):_.none();var b,a},go=(e,t)=>mo(e,t,T),po=(e,t)=>V(t,(t=>((e,t)=>uo(e,t).exists((e=>!e.isLocked)))(e,t))),ho=(e,t)=>((e,t)=>t.mergable)(0,t).filter((t=>po(e,t.cells))),fo=(e,t)=>((e,t)=>t.unmergable)(0,t).filter((t=>po(e,t))),bo=e=>{if(!r(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return $(e,((o,l)=>{const c=A(o);if(1!==c.length)throw new Error("one and only one name per case");const d=c[0],m=o[d];if(void 0!==n[d])throw new Error("duplicate key detected:"+d);if("cata"===d)throw new Error("cannot have a case named cata (sorry)");if(!r(m))throw new Error("case arguments must be an array");t.push(d),n[d]=(...n)=>{const o=n.length;if(o!==m.length)throw new Error("Wrong number of arguments to case "+d+". Expected "+m.length+" ("+m+"), got "+o);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[l].apply(null,n)},match:e=>{const o=A(e);if(t.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+o.join(","));if(!V(t,(e=>B(o,e))))throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+t.join(", "));return e[d].apply(null,n)},log:label=>{console.log(label,{constructors:t,constructor:d,params:n})}}}})),n},yo=(bo([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),(table,e)=>{const t=ct(table);return go(t,e).bind((e=>{const n=e[e.length-1],o=e[0].row,r=n.row+n.rowspan,l=t.all.slice(o,r);return co(l)})).getOr("")}),vo=e=>{return Ie(e,"rgb")?Wn(t=e).map(Bn).map((e=>"#"+e.value)).getOr(t):e;var t},wo=e=>{const element=Y.fromDom(e);return{borderwidth:qe(element,"border-width").getOr(""),borderstyle:qe(element,"border-style").getOr(""),bordercolor:qe(element,"border-color").map(vo).getOr(""),backgroundcolor:qe(element,"background-color").map(vo).getOr("")}},xo=data=>{const e=data[0],t=data.slice(1);return $(t,(t=>{$(A(e),(n=>{D(t,((t,o)=>{const r=e[n];""!==r&&n===o&&r!==t&&(e[n]="")}))}))})),e},ko=(e,t,n,o)=>W(e,(e=>!c(n.formatter.matchNode(o,t+e)))).getOr(""),Co=k(ko,["left","center","right"],"align"),So=k(ko,["top","middle","bottom"],"valign"),To=e=>table(Y.fromDom(e)).map((table=>{const t={selection:kn(e.cells)};return yo(table,t)})).getOr(""),_o=(table,e)=>{const t=ct(table),n=gt(t),o=filter(n,(t=>j(e,(e=>ie(t.element,e)))));return map(o,(e=>({element:e.element.dom,column:pt(t,e.column).map((col=>col.element.dom))})))},Ao=(e,t,data,n)=>{const o=1===t.length;$(t,(t=>{const r=t.element,l=o?T:n,c=so(e,r);((e,t,data,n)=>{n("scope")&&e.setAttrib("scope",data.scope),n("class")&&e.setAttrib("class",data.class),n("height")&&e.setStyle("height",Zt(data.height)),n("width")&&t.setStyle("width",Zt(data.width))})(c,t.column.map((col=>so(e,col))).getOr(c),data,l),Nt(e)&&((e,data,t)=>{t("backgroundcolor")&&e.setFormat("tablecellbackgroundcolor",data.backgroundcolor),t("bordercolor")&&e.setFormat("tablecellbordercolor",data.bordercolor),t("borderstyle")&&e.setFormat("tablecellborderstyle",data.borderstyle),t("borderwidth")&&e.setFormat("tablecellborderwidth",Zt(data.borderwidth))})(c,data,l),n("halign")&&bt(e,r,data.halign),n("valign")&&((e,t,n)=>{ht.each("top middle bottom".split(" "),(o=>{o!==n&&e.formatter.remove("valign"+o,{},t)})),n&&e.formatter.apply("valign"+n,{},t)})(e,r,data.valign)}))},Oo=(e,t,n,o)=>{const data=o.getData();o.close(),e.undoManager.transact((()=>{((e,t,n,data)=>{const o=E(data,((e,t)=>n[t]!==e));R(o)>0&&t.length>=1&&table(t[0]).each((table=>{const n=_o(table,t),r=R(E(o,((e,t)=>"scope"!==t&&"celltype"!==t)))>0,l=F(o,"celltype");(r||F(o,"scope"))&&Ao(e,n,data,k(F,o)),l&&((e,data)=>{e.execCommand("mceTableCellType",!1,{type:data.celltype,no_events:!0})})(e,data),yt(e,table.dom,{structure:l,style:r})}))})(e,t,n,data),e.focus()}))},Do=(e,t)=>{const n=table(t[0]).map((table=>map(_o(table,t),(t=>((e,t,n,o)=>{const r=e.dom,l=(element,style)=>r.getStyle(element,style)||r.getAttrib(element,style);return{width:l(o.getOr(t),"width"),height:l(t,"height"),scope:r.getAttrib(t,"scope"),celltype:(c=t,c.nodeName.toLowerCase()),class:r.getAttrib(t,"class",""),halign:Co(e,t),valign:So(e,t),...n?wo(t):{}};var c})(e,t.element,Nt(e),t.column)))));return xo(n.getOrDie())},Eo=e=>{const t=En(e);if(0===t.length)return;const data=Do(e,t),n={type:"tabpanel",tabs:[{title:"General",name:"general",items:oo(e)},ro(e,"cell")]},o={type:"panel",items:[{type:"grid",columns:2,items:oo(e)}]};e.windowManager.open({title:"Cell Properties",size:"normal",body:Nt(e)?n:o,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:data,onSubmit:k(Oo,e,t,data)})},No=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Ro=e=>No.concat((e=>{const t=Zn(Bt(e));return t.length>0?_.some({name:"class",type:"listbox",label:"Class",items:t}):_.none()})(e).toArray()),Mo=(e,t,data,n)=>{const o=1===t.length?T:n;$(t,(t=>{const r=so(e,t);((e,data,t)=>{t("class")&&e.setAttrib("class",data.class),t("height")&&e.setStyle("height",Zt(data.height))})(r,data,o),Rt(e)&&((e,data,t)=>{t("backgroundcolor")&&e.setStyle("background-color",data.backgroundcolor),t("bordercolor")&&e.setStyle("border-color",data.bordercolor),t("borderstyle")&&e.setStyle("border-style",data.borderstyle)})(r,data,o),n("align")&&bt(e,t,data.align)}))},Fo=(e,t,n,o)=>{const data=o.getData();o.close(),e.undoManager.transact((()=>{((e,t,n,data)=>{const o=E(data,((e,t)=>n[t]!==e));if(R(o)>0){const n=F(o,"type"),r=!n||R(o)>1;r&&Mo(e,t,data,k(F,o)),n&&((e,data)=>{e.execCommand("mceTableRowType",!1,{type:data.type,no_events:!0})})(e,data),table(Y.fromDom(t[0])).each((table=>yt(e,table.dom,{structure:n,style:r})))}})(e,t,n,data),e.focus()}))},Po=e=>{const t=Nn(Gt(e),_n.selected);if(0===t.length)return;const n=map(t,(t=>((e,t,n)=>{const o=e.dom;return{height:o.getStyle(t,"height")||o.getAttrib(t,"height"),class:o.getAttrib(t,"class",""),type:To(t),align:Co(e,t),...n?wo(t):{}}})(e,t.dom,Rt(e)))),data=xo(n),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ro(e)},ro(e,"row")]},r={type:"panel",items:[{type:"grid",columns:2,items:Ro(e)}]};e.windowManager.open({title:"Row Properties",size:"normal",body:Rt(e)?o:r,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:data,onSubmit:k(Fo,e,map(t,(e=>e.dom)),data)})},Io=(e,t,n)=>{const o=n?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],r=Ft(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],l=t.length>0?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return o.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(r).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(l)},Lo=(e,t,n,r)=>{if("TD"===t.tagName||"TH"===t.tagName)o(n)&&m(r)?e.setStyle(t,n,r):e.setStyles(t,n);else if(t.children)for(let i=0;i<t.children.length;i++)Lo(e,t.children[i],n,r)},Bo=(e,t,n,o)=>{const r=e.dom,data=o.getData(),l=E(data,((e,t)=>n[t]!==e));o.close(),""===data.class&&delete data.class,e.undoManager.transact((()=>{if(!t){const n=ze(data.cols).getOr(1),o=ze(data.rows).getOr(1);e.execCommand("mceInsertTable",!1,{rows:o,columns:n}),t=Dn(Gt(e),Kt(e)).bind((t=>table(t,Kt(e)))).map((table=>table.dom)).getOrDie()}if(R(l)>0){((e,t,data)=>{const n=e.dom,o={},r={};if(c(data.class)||(o.class=data.class),r.height=Zt(data.height),It(e)?r.width=Zt(data.width):n.getAttrib(t,"width")&&(o.width=(e=>e?e.replace(/px$/,""):"")(data.width)),It(e)?(r["border-width"]=Zt(data.border),r["border-spacing"]=Zt(data.cellspacing)):(o.border=data.border,o.cellpadding=data.cellpadding,o.cellspacing=data.cellspacing),It(e)&&t.children)for(let i=0;i<t.children.length;i++)Lo(n,t.children[i],{"border-width":Zt(data.border),padding:Zt(data.cellpadding)}),Mt(e)&&Lo(n,t.children[i],{"border-color":data.bordercolor});if(Mt(e)){const e=data;r["background-color"]=e.backgroundcolor,r["border-color"]=e.bordercolor,r["border-style"]=e.borderstyle}o.style=n.serializeStyle({...qt(e),...r}),n.setAttribs(t,{...Vt(e),...o})})(e,t,data);const n=r.select("caption",t)[0];(n&&!data.caption||!n&&data.caption)&&e.execCommand("mceTableToggleCaption"),bt(e,t,data.align)}if(e.focus(),e.addVisual(),R(l)>0){const n=F(l,"caption"),o=!n||R(l)>1;yt(e,t,{structure:n,style:o})}}))},jo=(e,t)=>{const n=e.dom;let o,data=((e,t)=>{const style=qt(e),n=Vt(e),o=t?{borderstyle:M(style,"border-style").getOr(""),bordercolor:vo(M(style,"border-color").getOr("")),backgroundcolor:vo(M(style,"background-color").getOr(""))}:{};return{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:"",...style,...n,...o,...(()=>{const t=style["border-width"];return It(e)&&t?{border:t}:M(n,"border").fold((()=>({})),(e=>({border:e})))})(),...{...M(style,"border-spacing").or(M(n,"cellspacing")).fold((()=>({})),(e=>({cellspacing:e}))),...M(style,"border-padding").or(M(n,"cellpadding")).fold((()=>({})),(e=>({cellpadding:e})))}}})(e,Mt(e));t?(data.cols="1",data.rows="1",Mt(e)&&(data.borderstyle="",data.bordercolor="",data.backgroundcolor="")):(o=n.getParent(e.selection.getStart(),"table",e.getBody()),o?data=((e,t,n)=>{const o=e.dom,r=It(e)?o.getStyle(t,"border-spacing")||o.getAttrib(t,"cellspacing"):o.getAttrib(t,"cellspacing")||o.getStyle(t,"border-spacing"),l=It(e)?ft(o,t,"padding")||o.getAttrib(t,"cellpadding"):o.getAttrib(t,"cellpadding")||ft(o,t,"padding");return{width:o.getStyle(t,"width")||o.getAttrib(t,"width"),height:o.getStyle(t,"height")||o.getAttrib(t,"height"),cellspacing:null!=r?r:"",cellpadding:null!=l?l:"",border:((t,n)=>{const o=qe(Y.fromDom(n),"border-width");return It(e)&&o.isSome()?o.getOr(""):t.getAttrib(n,"border")||ft(e.dom,n,"border-width")||ft(e.dom,n,"border")||""})(o,t),caption:!!o.select("caption",t)[0],class:o.getAttrib(t,"class",""),align:Co(e,t),...n?wo(t):{}}})(e,o,Mt(e)):Mt(e)&&(data.borderstyle="",data.bordercolor="",data.backgroundcolor=""));const r=Zn(jt(e));r.length>0&&data.class&&(data.class=data.class.replace(/\s*mce\-item\-table\s*/g,""));const l={type:"grid",columns:2,items:Io(e,r,t)},c=Mt(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[l]},ro(e,"table")]}:{type:"panel",items:[l]};e.windowManager.open({title:"Table Properties",size:"normal",body:c,onSubmit:k(Bo,e,o,data),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:data})},zo=w,$o=e=>{const t=(e,t)=>Re(e,t).exists((span=>parseInt(span,10)>1));return e.length>0&&V(e,(e=>t(e,"rowspan")||t(e,"colspan")))?_.some(e):_.none()},Uo=(table,e,t)=>e.length<=1?_.none():xn(table,t.firstSelectedSelector,t.lastSelectedSelector).map((t=>({bounds:t,cells:e}))),Wo=e=>{const t=Hn(_.none()),n=Hn([]);let o=_.none();const r=se("caption"),l=e=>o.forall((details=>!details[e])),c=()=>On((e=>Y.fromDom(e.selection.getEnd()))(e),Kt(e)),d=()=>On(Gt(e),Kt(e)).bind((t=>{return n=Pe(table(t),c().bind(table),((n,o)=>ie(n,o)?r(t)?_.some((e=>({element:e,mergable:_.none(),unmergable:_.none(),selection:[e]}))(t)):_.some(((e,table,t)=>({element:t,mergable:Uo(table,e,_n),unmergable:$o(e),selection:zo(e)}))(En(e),n,t)):_.none())),n.bind(w);var n})),m=e=>table(e.element).map((table=>{const t=ct(table),n=go(t,e).getOr([]),o=U(n,((e,n)=>(n.isLocked&&(e.onAny=!0,0===n.column?e.onFirst=!0:n.column+n.colspan>=t.grid.columns&&(e.onLast=!0)),e)),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:ho(t,e).isSome(),unmergeable:fo(t,e).isSome(),locked:o}})),h=()=>{t.set((e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)})(d)()),o=t.get().bind(m),$(n.get(),C)},f=e=>(e(),n.set(n.get().concat([e])),()=>{n.set(filter(n.get(),(t=>t!==e)))}),y=(e,n)=>f((()=>t.get().fold((()=>{e.setEnabled(!1)}),(t=>{e.setEnabled(!n(t))})))),v=(e,n,o)=>f((()=>t.get().fold((()=>{e.setEnabled(!1),e.setActive(!1)}),(t=>{e.setEnabled(!n(t)),e.setActive(o(t))})))),x=e=>o.exists((details=>details.locked[e])),k=(t,n)=>o=>v(o,(e=>r(e.element)),(()=>e.queryCommandValue(t)===n)),T=k("mceTableRowType","header"),A=k("mceTableColType","th");return e.on("NodeChange ExecCommand TableSelectorChange",h),{onSetupTable:e=>y(e,(e=>!1)),onSetupCellOrRow:e=>y(e,(e=>r(e.element))),onSetupColumn:e=>t=>y(t,(t=>r(t.element)||x(e))),onSetupPasteable:e=>t=>y(t,(t=>r(t.element)||e().isNone())),onSetupPasteableColumn:(e,t)=>n=>y(n,(n=>r(n.element)||e().isNone()||x(t))),onSetupMergeable:e=>y(e,(e=>l("mergeable"))),onSetupUnmergeable:e=>y(e,(e=>l("unmergeable"))),resetTargets:h,onSetupTableWithCaption:t=>v(t,S,(t=>table(t.element,Kt(e)).exists((table=>_e(table,"caption").isSome())))),onSetupTableRowHeaders:T,onSetupTableColumnHeaders:A,targets:t.get}};var Ho=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const qo="x-tinymce/dom-table-",Vo=qo+"rows",Ko=qo+"columns",Zo=e=>{var t;const n=null!==(t=Ho.read())&&void 0!==t?t:[];return Z(n,(t=>_.from(t.getType(e))))},Go=()=>Zo(Vo),Yo=()=>Zo(Ko),Jo=e=>{const t=Wo(e);(e=>{const t=e.options.register;t("table_border_widths",{processor:"object[]",default:St}),t("table_border_styles",{processor:"object[]",default:Tt}),t("table_cell_advtab",{processor:"boolean",default:!0}),t("table_row_advtab",{processor:"boolean",default:!0}),t("table_advtab",{processor:"boolean",default:!0}),t("table_appearance_options",{processor:"boolean",default:!0}),t("table_grid",{processor:"boolean",default:!Ct.deviceType.isTouch()}),t("table_cell_class_list",{processor:"object[]",default:[]}),t("table_row_class_list",{processor:"object[]",default:[]}),t("table_class_list",{processor:"object[]",default:[]}),t("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),t("table_background_color_map",{processor:"object[]",default:[]}),t("table_border_color_map",{processor:"object[]",default:[]})})(e),(e=>{D({mceTableProps:k(jo,e,!1),mceTableRowProps:k(Po,e),mceTableCellProps:k(Eo,e)},((t,n)=>e.addCommand(n,(()=>t())))),e.addCommand("mceInsertTableDialog",(t=>{jo(e,!0)}))})(e),((e,t)=>{const n=t=>()=>e.execCommand(t),o=(t,o)=>!!e.queryCommandSupported(o.command)&&(e.ui.registry.addMenuItem(t,{...o,onAction:h(o.onAction)?o.onAction:n(o.command)}),!0),r=(t,o)=>{e.queryCommandSupported(o.command)&&e.ui.registry.addToggleMenuItem(t,{...o,onAction:h(o.onAction)?o.onAction:n(o.command)})},l=data=>{e.execCommand("mceInsertTable",!1,{rows:data.numRows,columns:data.numColumns})},c=[o("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:t.onSetupCellOrRow}),o("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:t.onSetupCellOrRow}),o("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:t.onSetupCellOrRow}),o("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:t.onSetupCellOrRow}),o("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:t.onSetupCellOrRow}),o("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:t.onSetupCellOrRow}),o("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:t.onSetupPasteable(Go)}),o("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:t.onSetupPasteable(Go)})],d=[o("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:t.onSetupColumn("onFirst")}),o("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:t.onSetupColumn("onLast")}),o("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:t.onSetupColumn("onAny")}),o("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:t.onSetupColumn("onAny")}),o("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:t.onSetupColumn("onAny")}),o("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:t.onSetupPasteableColumn(Yo,"onFirst")}),o("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:t.onSetupPasteableColumn(Yo,"onLast")})],m=[o("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:t.onSetupCellOrRow}),o("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:t.onSetupMergeable}),o("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:t.onSetupUnmergeable})];Pt(e)?e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:l}]}):e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:n("mceInsertTableDialog")}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:n("mceInsertTableDialog")}),o("tableprops",{text:"Table properties",onSetup:t.onSetupTable,command:"mceTableProps"}),o("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,command:"mceTableDelete"}),B(c,!0)&&e.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:v("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),B(d,!0)&&e.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:v("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),B(m,!0)&&e.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:v("tablecellprops tablemergecells tablesplitcells")}),e.ui.registry.addContextMenu("table",{update:()=>(t.resetTargets(),t.targets().fold(v(""),(e=>"caption"===J(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable")))});const f=Jn(jt(e));0!==f.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Gn(e,f,"tableclass",(t=>e.execCommand("mceTableToggleClass",!1,t))),onSetup:t.onSetupTable});const y=Jn(Lt(e));0!==y.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Gn(e,y,"tablecellclass",(t=>e.execCommand("mceTableCellToggleClass",!1,t))),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Gn(e,Rn,"tablecellverticalalign",Yn(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Gn(e,Dt(e),"tablecellborderwidth",Yn(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Gn(e,Et(e),"tablecellborderstyle",Yn(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Qn(e,$t(e),"background-color"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Qn(e,Ut(e),"border-color"),onSetup:t.onSetupCellOrRow})),r("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),r("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:eo(e),onSetup:t.onSetupTableRowHeaders}),r("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:to(e),onSetup:t.onSetupTableRowHeaders})})(e,t),((e,t)=>{e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:e=>e("inserttable | cell row column | advtablesort | tableprops deletetable")});const n=t=>()=>e.execCommand(t),o=(t,o)=>{e.queryCommandSupported(o.command)&&e.ui.registry.addButton(t,{...o,onAction:h(o.onAction)?o.onAction:n(o.command)})},r=(t,o)=>{e.queryCommandSupported(o.command)&&e.ui.registry.addToggleButton(t,{...o,onAction:h(o.onAction)?o.onAction:n(o.command)})};o("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:t.onSetupTable}),o("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:t.onSetupTable}),o("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),o("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:t.onSetupMergeable}),o("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),o("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),o("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),o("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),o("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),o("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),o("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),o("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),o("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:t.onSetupCellOrRow}),o("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:t.onSetupCellOrRow}),o("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:t.onSetupPasteable(Go)}),o("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:t.onSetupPasteable(Go)}),o("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:t.onSetupColumn("onAny")}),o("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:t.onSetupColumn("onAny")}),o("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:t.onSetupPasteableColumn(Yo,"onFirst")}),o("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:t.onSetupPasteableColumn(Yo,"onLast")}),o("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table"});const l=Jn(jt(e));0!==l.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Xn(e,l,"tableclass",(t=>e.execCommand("mceTableToggleClass",!1,t))),onSetup:t.onSetupTable});const c=Jn(Lt(e));0!==c.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Xn(e,c,"tablecellclass",(t=>e.execCommand("mceTableCellToggleClass",!1,t))),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Xn(e,Rn,"tablecellverticalalign",Yn(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Xn(e,Dt(e),"tablecellborderwidth",Yn(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Xn(e,Et(e),"tablecellborderstyle",Yn(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:t=>t(Qn(e,$t(e),"background-color")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:t=>t(Qn(e,Ut(e),"border-color")),onSetup:t.onSetupCellOrRow})),r("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),r("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:eo(e),onSetup:t.onSetupTableRowHeaders}),r("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:to(e),onSetup:t.onSetupTableColumnHeaders})})(e,t),(e=>{const t=table=>e.dom.is(table,"table")&&e.getBody().contains(table),n=zt(e);n.length>0&&e.ui.registry.addContextToolbar("table",{predicate:t,items:n,scope:"node",position:"node"})})(e)};e.add("table",Jo)}()},677:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,n=e=>t=>typeof t===e,o=t("string"),r=t("object"),l=t("array"),c=n("boolean"),d=a=>!(a=>null==a)(a),m=n("function"),h=n("number"),f=()=>{},y=(a,b)=>a===b,v=e=>t=>!e(t),w=(x=!1,()=>x);var x;class k{constructor(e,t){this.tag=e,this.value=t}static some(e){return new k(!0,e)}static none(){return k.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?k.some(e(this.value)):k.none()}bind(e){return this.tag?e(this.value):k.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:k.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return d(e)?k.some(e):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const C=Array.prototype.slice,S=Array.prototype.indexOf,T=Array.prototype.push,_=(e,t)=>{return n=e,o=t,S.call(n,o)>-1;var n,o},A=(e,t)=>{for(let i=0,n=e.length;i<n;i++){if(t(e[i],i))return!0}return!1},map=(e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o},O=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},D=(e,t)=>{const n=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];t(o,i)&&n.push(o)}return n},E=(e,t,n)=>(O(e,((e,i)=>{n=t(n,e,i)})),n),N=(e,t,n)=>{for(let i=0,o=e.length;i<o;i++){const o=e[i];if(t(o,i))return k.some(o);if(n(o,i))break}return k.none()},R=(e,t)=>N(e,t,w),M=(e,t)=>(e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!l(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);T.apply(t,e[i])}return t})(map(e,t)),F=e=>{const t=C.call(e,0);return t.reverse(),t},P=(e,i)=>i>=0&&i<e.length?k.some(e[i]):k.none(),head=e=>P(e,0),I=e=>P(e,e.length-1),L=(e,t)=>{const n=[],o=m(t)?e=>A(n,(i=>t(i,e))):e=>_(n,e);for(let i=0,t=e.length;i<t;i++){const t=e[i];o(t)||n.push(t)}return n},B=(e,t,n=y)=>e.exists((e=>n(e,t))),j=(e,t,n)=>e.isSome()&&t.isSome()?k.some(n(e.getOrDie(),t.getOrDie())):k.none(),z=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},$={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return z(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return z(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return z(t)},fromDom:z,fromPoint:(e,t,n)=>k.from(e.dom.elementFromPoint(t,n)).map(z)},U=(e,t)=>e.dom===t.dom,W=(element,e)=>{const t=element.dom;if(1!==t.nodeType)return!1;{const n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}};"undefined"!=typeof window?window:Function("return this;")();const H=element=>element.dom.nodeName.toLowerCase(),V=(K=1,element=>(element=>element.dom.nodeType)(element)===K);var K;const Z=e=>t=>V(t)&&H(t)===e,G=element=>k.from(element.dom.parentNode).map($.fromDom),Y=element=>map(element.dom.childNodes,$.fromDom),J=(element,e)=>{const t=element.dom.childNodes;return k.from(t[e]).map($.fromDom)},X=element=>J(element,0),Q=element=>J(element,element.dom.childNodes.length-1),ee=(e,t,n)=>{let element=e.dom;const o=m(n)?n:w;for(;element.parentNode;){element=element.parentNode;const e=$.fromDom(element);if(t(e))return k.some(e);if(o(e))break}return k.none()},te=(e,t,n)=>((e,t,n,a,o)=>e(n,a)?k.some(n):m(o)&&o(n)?k.none():t(n,a,o))(((s,e)=>e(s)),ee,e,t,n),ne=(marker,element)=>{G(marker).each((e=>{e.dom.insertBefore(element.dom,marker.dom)}))},oe=(marker,element)=>{const e=(element=>k.from(element.dom.nextSibling).map($.fromDom))(marker);e.fold((()=>{G(marker).each((e=>{re(e,element)}))}),(e=>{ne(e,element)}))},re=(e,element)=>{e.dom.appendChild(element.dom)},se=(e,t)=>{O(t,(t=>{re(e,t)}))},ae=element=>{element.dom.textContent="",O(Y(element),(e=>{le(e)}))},le=element=>{const e=element.dom;null!==e.parentNode&&e.parentNode.removeChild(e)};var ie=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ce=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ue=tinymce.util.Tools.resolve("tinymce.util.VK");const de=e=>map(e,$.fromDom),me=Object.keys,ge=(e,t)=>{const n=me(e);for(let o=0,r=n.length;o<r;o++){const i=n[o];t(e[i],i)}},filter=(e,t)=>{const n={};var o;return((e,t,n,o)=>{ge(e,((e,i)=>{(t(e,i)?n:o)(e,i)}))})(e,t,(o=n,(e,i)=>{o[i]=e}),f),n},pe=(element,e)=>{const t=element.dom;ge(e,((e,n)=>{((e,t,n)=>{if(!(o(n)||c(n)||h(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(t,n,e)}))},he=element=>E(element.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),fe=e=>((e,t)=>$.fromDom(e.dom.cloneNode(t)))(e,!0),be=(e,t)=>{const n=((e,t)=>{const n=$.fromTag(t),o=he(e);return pe(n,o),n})(e,t);oe(e,n);const o=Y(e);return se(n,o),le(e),n};var ye=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ve=tinymce.util.Tools.resolve("tinymce.util.Tools");const we=e=>t=>d(t)&&t.nodeName.toLowerCase()===e,xe=e=>t=>d(t)&&e.test(t.nodeName),ke=e=>d(e)&&3===e.nodeType,Ce=e=>d(e)&&1===e.nodeType,Se=xe(/^(OL|UL|DL)$/),Te=xe(/^(OL|UL)$/),_e=we("ol"),Ae=xe(/^(LI|DT|DD)$/),Oe=xe(/^(DT|DD)$/),De=xe(/^(TH|TD)$/),Ee=we("br"),Ne=(e,t)=>d(t)&&t.nodeName in e.schema.getTextBlockElements(),Re=(e,t)=>d(e)&&e.nodeName in t,Me=(e,t,n)=>{const o=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&o},Fe=(e,t)=>e.isChildOf(t,e.getRoot()),option=e=>t=>t.options.get(e),Pe=option("lists_indent_on_tab"),Ie=option("forced_root_block"),Le=option("forced_root_block_attrs"),Be=(e,t)=>{const n=e.dom,o=e.schema.getBlockElements(),r=n.createFragment(),l=Ie(e),c=Le(e);let d,m,h=!1;for(m=n.create(l,c),Re(t.firstChild,o)||r.appendChild(m);d=t.firstChild;){const e=d.nodeName;h||"SPAN"===e&&"bookmark"===d.getAttribute("data-mce-type")||(h=!0),Re(d,o)?(r.appendChild(d),m=null):(m||(m=n.create(l,c),r.appendChild(m)),m.appendChild(d))}return!h&&m&&m.appendChild(n.create("br",{"data-mce-bogus":"1"})),r},je=ye.DOM,ze=(e,t,li)=>{const n=je.select('span[data-mce-type="bookmark"]',t),o=Be(e,li),r=je.createRng();r.setStartAfter(li),r.setEndAfter(t);const l=r.extractContents();for(let t=l.firstChild;t;t=t.firstChild)if("LI"===t.nodeName&&e.dom.isEmpty(t)){je.remove(t);break}e.dom.isEmpty(l)||je.insertAfter(l,t),je.insertAfter(o,t);const c=li.parentElement;c&&Me(e.dom,c)&&(e=>{const t=e.parentNode;t&&ve.each(n,(e=>{t.insertBefore(e,li.parentNode)})),je.remove(e)})(c),je.remove(li),Me(e.dom,t)&&je.remove(t)},$e=Z("dd"),Ue=Z("dt"),We=(e,t)=>{var element;$e(t)?be(t,"dt"):Ue(t)&&(element=t,k.from(element.dom.parentElement).map($.fromDom)).each((dl=>ze(e,dl.dom,t.dom)))},He=e=>{Ue(e)&&be(e,"dd")},qe=(e,t)=>{if(ke(e))return{container:e,offset:t};const n=ie.getNode(e,t);return ke(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&ke(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&ke(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},Ve=e=>{const t=e.cloneRange(),n=qe(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);const o=qe(e.endContainer,e.endOffset);return t.setEnd(o.container,o.offset),t},Ke=["OL","UL","DL"],Ze=Ke.join(","),Ge=(e,t)=>{const n=t||e.selection.getStart(!0);return e.dom.getParent(n,Ze,Qe(e,n))},Ye=e=>{const t=Ge(e),n=e.selection.getSelectedBlocks();return((e,t)=>d(e)&&1===t.length&&t[0]===e)(t,n)?(e=>D(e.querySelectorAll(Ze),Se))(t):D(n,(e=>Se(e)&&t!==e))},Je=e=>{const t=e.selection.getSelectedBlocks();return D(((e,t)=>{const n=ve.map(t,(t=>e.dom.getParent(t,"li,dd,dt",Qe(e,t))||t));return L(n)})(e,t),Ae)},Xe=(e,t)=>{const n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},Qe=(e,t)=>{const n=e.dom.getParents(t,e.dom.isBlock),o=R(n,(t=>{return n=e.schema,!Se(o=t)&&!Ae(o)&&A(Ke,(e=>n.isValidChild(o.nodeName,e)));var n,o}));return o.getOr(e.getBody())},et=(e,t)=>{const n=e.dom.getParents(t,"ol,ul",Qe(e,t));return I(n)},tt=e=>{const t=(e=>{const t=et(e,e.selection.getStart()),n=D(e.selection.getSelectedBlocks(),Te);return t.toArray().concat(n)})(e);return nt(e,t)},nt=(e,t)=>{const n=map(t,(t=>et(e,t).getOr(t)));return L(n)},ot=e=>/\btox\-/.test(e.className),st=(e,t)=>N(e,Se,De).exists((e=>e.nodeName===t&&!ot(e))),at=(e,element)=>null!==element&&"false"===e.dom.getContentEditableParent(element),lt=(e,element)=>{const t=e.dom.getParent(element,"ol,ul,dl");return at(e,t)},it=(e,t)=>{const n=e.selection.getNode();return t({parents:e.dom.getParents(n),element:n}),e.on("NodeChange",t),()=>e.off("NodeChange",t)},ct=(e,t,element)=>e.dispatch("ListMutation",{action:t,element:element}),ut=(mt=/^\s+|\s+$/g,s=>s.replace(mt,""));var mt;const gt=(e,t,n)=>{if(!o(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);(e=>void 0!==e.style&&m(e.style.getPropertyValue))(e)&&e.style.setProperty(t,n)},pt=(element,e,t)=>{const n=element.dom;gt(n,e,t)},ht=(e,t)=>{re(e.item,t.list)},ft=(e,t)=>{const n={list:$.fromTag(t,e),item:$.fromTag("li",e)};return re(n.list,n.item),n},bt=(e,t,n)=>{const o=t.slice(0,n.depth);return I(o).each((t=>{const o=((e,t,content)=>{const n=$.fromTag("li",e);return pe(n,t),se(n,content),n})(e,n.itemAttributes,n.content);((e,t)=>{re(e.list,t),e.item=t})(t,o),((e,t)=>{H(e.list)!==t.listType&&(e.list=be(e.list,t.listType)),pe(e.list,t.listAttributes)})(t,n)})),o},yt=(e,t,n)=>{const o=((e,t,n)=>{const o=[];for(let i=0;i<n;i++)o.push(ft(e,t.listType));return o})(e,n,n.depth-t.length);var r;return(e=>{for(let i=1;i<e.length;i++)ht(e[i-1],e[i])})(o),((e,t)=>{for(let i=0;i<e.length-1;i++)pt(e[i].item,"list-style-type","none");I(e).each((e=>{pe(e.list,t.listAttributes),pe(e.item,t.itemAttributes),se(e.item,t.content)}))})(o,n),r=o,j(I(t),head(r),ht),t.concat(o)},vt=e=>W(e,"OL,UL"),wt=e=>X(e).exists(vt),xt=e=>e.depth>0,kt=e=>e.isSelected,Ct=li=>{const e=Y(li),content=Q(li).exists(vt)?e.slice(0,-1):e;return map(content,fe)},St=e=>(O(e,((t,i)=>{((e,t)=>{const n=e[t].depth,o=e=>e.depth===n&&!e.dirty,r=e=>e.depth<n;return N(F(e.slice(0,t)),o,r).orThunk((()=>N(e.slice(t+1),o,r)))})(e,i).fold((()=>{t.dirty&&(e=>{e.listAttributes=filter(e.listAttributes,((e,t)=>"start"!==t))})(t)}),(e=>{return source=e,(n=t).listType=source.listType,void(n.listAttributes={...source.listAttributes});var n,source}))})),e),Tt=(e,t,n,o)=>X(o).filter(vt).fold((()=>{t.each((e=>{U(e.start,o)&&n.set(!0)}));const r=((li,e,t)=>G(li).filter(V).map((n=>({depth:e,dirty:!1,isSelected:t,content:Ct(li),itemAttributes:he(li),listAttributes:he(n),listType:H(n)}))))(o,e,n.get());t.each((e=>{U(e.end,o)&&n.set(!1)}));const l=Q(o).filter(vt).map((o=>_t(e,t,n,o))).getOr([]);return r.toArray().concat(l)}),(o=>_t(e,t,n,o))),_t=(e,t,n,o)=>M(Y(o),(element=>(vt(element)?_t:Tt)(e+1,t,n,element))),At=(e,t)=>{const n=St(t);return map(n,(t=>{const content=((e,t)=>{const n=(t||document).createDocumentFragment();return O(e,(element=>{n.appendChild(element.dom)})),$.fromDom(n)})(t.content);return $.fromDom(Be(e,content.dom))}))},Ot=(e,t)=>{const n=St(t);return((e,t)=>{const n=E(t,((t,n)=>n.depth>t.length?yt(e,t,n):bt(e,t,n)),[]);return head(n).map((e=>e.list))})(e.contentDocument,n).toArray()},Dt=(e,t,n)=>{const o=((e,t)=>{const n=(e=>{let t=!1;return{get:()=>t,set:e=>{t=e}}})();return map(e,(e=>({sourceList:e,entries:_t(0,t,n,e)})))})(t,(e=>{const t=map(Je(e),$.fromDom);return j(R(t,v(wt)),R(F(t),v(wt)),((e,t)=>({start:e,end:t})))})(e));O(o,(t=>{((e,t)=>{O(D(e,kt),(e=>((e,t)=>{switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0})(t,e)))})(t.entries,n);const o=((e,t)=>M(((e,t)=>{if(0===e.length)return[];{let n=t(e[0]);const o=[];let r=[];for(let i=0,l=e.length;i<l;i++){const l=e[i],c=t(l);c!==n&&(o.push(r),r=[]),n=c,r.push(l)}return 0!==r.length&&o.push(r),o}})(t,xt),(t=>head(t).exists(xt)?Ot(e,t):At(e,t))))(e,t.entries);var marker;O(o,(t=>{ct(e,"Indent"===n?"IndentList":"OutdentList",t.dom)})),marker=t.sourceList,O(o,(e=>{ne(marker,e)})),le(t.sourceList)}))},Et=(e,t)=>{const n=de(tt(e)),o=de((e=>D(Je(e),Oe))(e));let r=!1;if(n.length||o.length){const l=e.selection.getBookmark();Dt(e,n,t),((e,t,n)=>{O(n,"Indent"===t?He:t=>We(e,t))})(e,t,o),e.selection.moveToBookmark(l),e.selection.setRng(Ve(e.selection.getRng())),e.nodeChanged(),r=!0}return r},Nt=(e,t)=>!(e=>{const t=Ge(e);return at(e,t)})(e)&&Et(e,t),Rt=e=>Nt(e,"Indent"),Mt=e=>Nt(e,"Outdent"),Ft=e=>Nt(e,"Flatten");var Pt=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const It=ye.DOM,Lt=e=>{const t={},n=n=>{let o=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if(Ce(o)){const e=It.create("span",{"data-mce-type":"bookmark"});o.hasChildNodes()?(r=Math.min(r,o.childNodes.length-1),n?o.insertBefore(e,o.childNodes[r]):It.insertAfter(e,o.childNodes[r])):o.appendChild(e),o=e,r=0}t[n?"startContainer":"endContainer"]=o,t[n?"startOffset":"endOffset"]=r};return n(!0),e.collapsed||n(),t},Bt=e=>{const t=t=>{let n=e[t?"startContainer":"endContainer"],o=e[t?"startOffset":"endOffset"];if(n){if(Ce(n)&&n.parentNode){const e=n;o=(e=>{var t;let n=null===(t=e.parentNode)||void 0===t?void 0:t.firstChild,o=0;for(;n;){if(n===e)return o;Ce(n)&&"bookmark"===n.getAttribute("data-mce-type")||o++,n=n.nextSibling}return-1})(n),n=n.parentNode,It.remove(e),!n.hasChildNodes()&&It.isBlock(n)&&n.appendChild(It.create("br"))}e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=o}};t(!0),t();const n=It.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),Ve(n)},jt=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},zt=(e,t)=>{ve.each(t,((t,n)=>{e.setAttribute(n,t)}))},$t=(e,t,n)=>{((e,t,n)=>{const o=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",o)})(e,t,n),((e,t,n)=>{zt(t,n["list-attributes"]),ve.each(e.select("li",t),(li=>{zt(li,n["list-item-attributes"])}))})(e,t,n)},Ut=(e,t,n,o)=>{let r=t[n?"startContainer":"endContainer"];const l=t[n?"startOffset":"endOffset"];for(Ce(r)&&(r=r.childNodes[Math.min(l,r.childNodes.length-1)]||r),!n&&Ee(r.nextSibling)&&(r=r.nextSibling);r.parentNode!==o;){const t=r.parentNode;if(Ne(e,r))return r;if(/^(TD|TH)$/.test(t.nodeName))return r;r=t}return r},Wt=(e,t,n)=>{const o=e.selection.getRng();let r="LI";const l=Qe(e,e.selection.getStart(!0)),c=e.dom;if("false"===c.getContentEditable(e.selection.getNode()))return;"DL"===(t=t.toUpperCase())&&(r="DT");const d=Lt(o),m=((e,t,n)=>{const o=[],r=e.dom,l=Ut(e,t,!0,n),c=Ut(e,t,!1,n);let d;const m=[];for(let e=l;e&&(m.push(e),e!==c);e=e.nextSibling);return ve.each(m,(t=>{var l;if(Ne(e,t))return o.push(t),void(d=null);if(r.isBlock(t)||Ee(t))return Ee(t)&&r.remove(t),void(d=null);const c=t.nextSibling;Pt.isBookmarkNode(t)&&(Se(c)||Ne(e,c)||!c&&t.parentNode===n)?d=null:(d||(d=r.create("p"),null===(l=t.parentNode)||void 0===l||l.insertBefore(d,t),o.push(d)),d.appendChild(t))})),o})(e,o,l);ve.each(m,(o=>{let l;const d=o.previousSibling,m=o.parentNode;Ae(m)||(d&&Se(d)&&d.nodeName===t&&((e,t,n)=>{const o=e.getStyle(t,"list-style-type");let r=n?n["list-style-type"]:"";return r=null===r?"":r,o===r})(c,d,n)?(l=d,o=c.rename(o,r),d.appendChild(o)):(l=c.create(t),m.insertBefore(l,o),l.appendChild(o),o=c.rename(o,r)),((e,element,t)=>{ve.each(t,(style=>e.setStyle(element,style,"")))})(c,o,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),$t(c,l,n),qt(e.dom,l))})),e.selection.setRng(Bt(d))},Ht=(e,t,n)=>{return((e,t)=>Se(e)&&e.nodeName===(null==t?void 0:t.nodeName))(t,n)&&((e,t,n)=>e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0))(e,t,n)&&(o=n,t.className===o.className);var o},qt=(e,t)=>{let n,o=t.nextSibling;if(Ht(e,t,o)){const r=o;for(;n=r.firstChild;)t.appendChild(n);e.remove(r)}if(o=t.previousSibling,Ht(e,t,o)){const r=o;for(;n=r.lastChild;)t.insertBefore(n,t.firstChild);e.remove(r)}},Vt=(e,t,n,o,r)=>{const l=Se(t);if(l&&t.nodeName===o&&!Kt(r))Ft(e);else{Wt(e,o,r);const c=Lt(e.selection.getRng()),d=l?[t,...n]:n;ve.each(d,(t=>{((e,t,n,o)=>{if(t.nodeName!==n){const r=e.dom.rename(t,n);$t(e.dom,r,o),ct(e,jt(n),r)}else $t(e.dom,t,o),ct(e,jt(n),t)})(e,t,o,r)})),e.selection.setRng(Bt(c))}},Kt=e=>"list-style-type"in e,Zt=(e,t,n)=>{const o=Ge(e);if(lt(e,o))return;const l=Ye(e),c=r(n)?n:{};l.length>0?Vt(e,o,l,t,c):((e,t,n,o)=>{if(t!==e.getBody())if(t)if(t.nodeName!==n||Kt(o)||ot(t)){const r=Lt(e.selection.getRng());$t(e.dom,t,o);const l=e.dom.rename(t,n);qt(e.dom,l),e.selection.setRng(Bt(r)),Wt(e,n,o),ct(e,jt(n),l)}else Ft(e);else Wt(e,n,o),ct(e,jt(n),t)})(e,o,t,c)},Gt=ye.DOM,Yt=(e,element)=>{const t=ve.grep(e.select("ol,ul",element));ve.each(t,(t=>{((e,t)=>{const n=t.parentElement;if(n&&"LI"===n.nodeName&&n.firstChild===t){const o=n.previousSibling;o&&"LI"===o.nodeName?(o.appendChild(t),Me(e,n)&&Gt.remove(n)):Gt.setStyle(n,"listStyleType","none")}if(Se(n)){const e=n.previousSibling;e&&"LI"===e.nodeName&&e.appendChild(t)}})(e,t)}))},Jt=(e,t,n,o)=>{let r=t.startContainer;const l=t.startOffset;if(ke(r)&&(n?l<r.data.length:l>0))return r;const c=e.schema.getNonEmptyElements();Ce(r)&&(r=ie.getNode(r,l));const d=new ce(r,o);n&&((e,t)=>!!Ee(t)&&e.isBlock(t.nextSibling)&&!Ee(t.previousSibling))(e.dom,r)&&d.next();const m=n?d.next.bind(d):d.prev2.bind(d);for(;r=m();){if("LI"===r.nodeName&&!r.hasChildNodes())return r;if(c[r.nodeName])return r;if(ke(r)&&r.data.length>0)return r}return null},Xt=(e,t)=>{const n=t.childNodes;return 1===n.length&&!Se(n[0])&&e.isBlock(n[0])},Qt=(e,t,n)=>{let o;const r=Xt(e,n)?n.firstChild:n;if(((e,t)=>{Xt(e,t)&&e.remove(t.firstChild,!0)})(e,t),!Me(e,t,!0))for(;o=t.firstChild;)r.appendChild(o)},en=(e,t,n)=>{let o;const ul=t.parentNode;if(!Fe(e,t)||!Fe(e,n))return;Se(n.lastChild)&&(o=n.lastChild),ul===n.lastChild&&Ee(ul.previousSibling)&&e.remove(ul.previousSibling);const r=n.lastChild;r&&Ee(r)&&t.hasChildNodes()&&e.remove(r),Me(e,n,!0)&&ae($.fromDom(n)),Qt(e,t,n),o&&n.appendChild(o);const l=((e,t)=>{const n=e.dom,o=t.dom;return n!==o&&n.contains(o)})($.fromDom(n),$.fromDom(t))?e.getParents(t,Se,n):[];e.remove(t),O(l,(t=>{Me(e,t)&&t!==e.getRoot()&&e.remove(t)}))},tn=(e,t,n,o)=>{const r=e.dom;if(r.isEmpty(o))((e,t,n)=>{ae($.fromDom(n)),en(e.dom,t,n),e.selection.setCursorLocation(n,0)})(e,n,o);else{const l=Lt(t);en(r,n,o),e.selection.setRng(Bt(l))}},nn=(e,t)=>{const n=e.dom,o=e.selection,r=o.getStart(),l=Xe(e,r),li=n.getParent(o.getStart(),"LI",l);if(li){const ul=li.parentElement;if(ul===e.getBody()&&Me(n,ul))return!0;const r=Ve(o.getRng()),c=n.getParent(Jt(e,r,t,l),"LI",l);if(c&&c!==li)return e.undoManager.transact((()=>{var n,o;t?tn(e,r,c,li):(null===(o=(n=li).parentNode)||void 0===o?void 0:o.firstChild)===n?Mt(e):((e,t,n,o)=>{const r=Lt(t);en(e.dom,n,o);const l=Bt(r);e.selection.setRng(l)})(e,r,li,c)})),!0;if(!c&&!t&&0===r.startOffset&&0===r.endOffset)return e.undoManager.transact((()=>{Ft(e)})),!0}return!1},on=(e,t)=>{const n=e.dom,o=e.selection.getStart(),r=Xe(e,o),l=n.getParent(o,n.isBlock,r);if(l&&n.isEmpty(l)){const o=Ve(e.selection.getRng()),c=n.getParent(Jt(e,o,t,r),"LI",r);if(c){const d=element=>_(["td","th","caption"],H(element)),m=e=>e.dom===r;return!!((e,t,n=y)=>j(e,t,n).getOr(e.isNone()&&t.isNone()))(te($.fromDom(c),d,m),te($.fromDom(o.startContainer),d,m),U)&&(e.undoManager.transact((()=>{((e,t,n)=>{const o=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),o&&e.isEmpty(o)&&e.remove(o)})(n,l,r),qt(n,c.parentNode),e.selection.select(c,!0),e.selection.collapse(t)})),!0)}}return!1},rn=e=>{const t=e.selection.getStart(),n=Xe(e,t);return e.dom.getParent(t,"LI,DT,DD",n)||Je(e).length>0},sn=(e,t)=>{const n=e.selection;return!lt(e,n.getNode())&&(n.isCollapsed()?((e,t)=>nn(e,t)||on(e,t))(e,t):(e=>!!rn(e)&&(e.undoManager.transact((()=>{e.execCommand("Delete"),Yt(e.dom,e.getBody())})),!0))(e))},an=e=>{const t=F(ut(e).split("")),n=map(t,((e,i)=>{const t=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,i)*t}));return E(n,((e,t)=>e+t),0)},ln=e=>{if(--e<0)return"";{const t=e%26,n=Math.floor(e/26);return ln(n)+String.fromCharCode("A".charCodeAt(0)+t)}},cn=e=>{const t=parseInt(e.start,10);return B(e.listStyleType,"upper-alpha")?ln(t):B(e.listStyleType,"lower-alpha")?ln(t).toLowerCase():e.start},un=e=>{const t=Ge(e);_e(t)&&!lt(e,t)&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:cn({start:e.dom.getAttrib(t,"start","1"),listStyleType:k.from(e.dom.getStyle(t,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{(e=>{switch((e=>/^[0-9]+$/.test(e)?2:/^[A-Z]+$/.test(e)?0:(e=>/^[a-z]+$/.test(e))(e)?1:e.length>0?4:3)(e)){case 2:return k.some({listStyleType:k.none(),start:e});case 0:return k.some({listStyleType:k.some("upper-alpha"),start:an(e).toString()});case 1:return k.some({listStyleType:k.some("lower-alpha"),start:an(e).toString()});case 3:return k.some({listStyleType:k.none(),start:""});case 4:return k.none()}})(t.getData().start).each((t=>{e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})})),t.close()}})},dn=(e,t)=>()=>{const n=Ge(e);return d(n)&&n.nodeName===t},mn=e=>{e.addCommand("mceListProps",(()=>{un(e)}))},gn=e=>{e.on("BeforeExecCommand",(t=>{const n=t.command.toLowerCase();"indent"===n?Rt(e):"outdent"===n&&Mt(e)})),e.addCommand("InsertUnorderedList",((t,n)=>{Zt(e,"UL",n)})),e.addCommand("InsertOrderedList",((t,n)=>{Zt(e,"OL",n)})),e.addCommand("InsertDefinitionList",((t,n)=>{Zt(e,"DL",n)})),e.addCommand("RemoveList",(()=>{Ft(e)})),mn(e),e.addCommand("mceListUpdate",((t,n)=>{r(n)&&((e,t)=>{const n=Ge(e);null===n||lt(e,n)||e.undoManager.transact((()=>{r(t.styles)&&e.dom.setStyles(n,t.styles),r(t.attrs)&&ge(t.attrs,((t,o)=>e.dom.setAttrib(n,o,t)))}))})(e,n)})),e.addQueryStateHandler("InsertUnorderedList",dn(e,"UL")),e.addQueryStateHandler("InsertOrderedList",dn(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",dn(e,"DL"))},pn=e=>{Pe(e)&&(e=>{e.on("keydown",(t=>{t.keyCode!==ue.TAB||ue.metaKeyPressed(t)||e.undoManager.transact((()=>{(t.shiftKey?Mt(e):Rt(e))&&t.preventDefault()}))}))})(e),(e=>{e.on("ExecCommand",(t=>{const n=t.command.toLowerCase();"delete"!==n&&"forwarddelete"!==n||!rn(e)||Yt(e.dom,e.getBody())})),e.on("keydown",(t=>{t.keyCode===ue.BACKSPACE?sn(e,!1)&&t.preventDefault():t.keyCode===ue.DELETE&&sn(e,!0)&&t.preventDefault()}))})(e)},hn=(e,t)=>n=>it(e,(o=>{n.setActive(st(o.parents,t)),n.setEnabled(!lt(e,o.element))})),fn=(e,t)=>n=>it(e,(o=>n.setEnabled(st(o.parents,t)&&!lt(e,o.element))));e.add("lists",(e=>((e=>{(0,e.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0})})(e),e.hasPlugin("rtc",!0)?mn(e):(pn(e),gn(e)),(e=>{const t=t=>()=>e.execCommand(t);e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:hn(e,"OL")}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:hn(e,"UL")}))})(e),(e=>{const t={text:"List properties...",icon:"ordered-list",onAction:()=>e.execCommand("mceListProps"),onSetup:fn(e,"OL")};e.ui.registry.addMenuItem("listprops",t),e.ui.registry.addContextMenu("lists",{update:t=>{const n=Ge(e,t);return _e(n)?["listprops"]:[]}})})(e),(e=>({backspaceDelete:t=>{sn(e,t)}}))(e))))}()},678:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=(e,t,n)=>{const o="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(o,!1,!1===n?null:{"list-style-type":n})},option=e=>t=>t.options.get(e),n=option("advlist_number_styles"),o=option("advlist_bullet_styles"),r=a=>null==a,l=a=>!r(a);var c=tinymce.util.Tools.resolve("tinymce.util.Tools");class d{constructor(e,t){this.tag=e,this.value=t}static some(e){return new d(!0,e)}static none(){return d.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?d.some(e(this.value)):d.none()}bind(e){return this.tag?e(this.value):d.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:d.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return l(e)?d.some(e):d.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}d.singletonNone=new d(!1);const m=e=>l(e)&&/^(TH|TD)$/.test(e.nodeName),h=e=>r(e)||"default"===e?"":e,f=(e,t,n)=>{const o=((e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n]))return n;return-1})(t.parents,m),r=-1!==o?t.parents.slice(0,o):t.parents,d=c.grep(r,(e=>t=>l(t)&&/^(OL|UL|DL)$/.test(t.nodeName)&&((e,t)=>e.dom.isChildOf(t,e.getBody()))(e,t))(e));return d.length>0&&d[0].nodeName===n},y=(e,t)=>n=>{const o=o=>{n.setActive(f(e,o,t)),n.setEnabled(!((e,element)=>{const t=e.dom.getParent(element,"ol,ul,dl");return((e,element)=>null!==element&&"false"===e.dom.getContentEditableParent(element))(e,t)})(e,o.element))};return e.on("NodeChange",o),()=>e.off("NodeChange",o)},v=(e,n,o,r,l,m)=>{e.ui.registry.addSplitButton(n,{tooltip:o,icon:"OL"===l?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:e=>{e(c.map(m,(e=>{const t="OL"===l?"num":"bull",n="disc"===e||"decimal"===e?"default":e,o=h(e),r=(e=>e.replace(/\-/g," ").replace(/\b\w/g,(e=>e.toUpperCase())))(e);return{type:"choiceitem",value:o,icon:"list-"+t+"-"+n,text:r}})))},onAction:()=>e.execCommand(r),onItemAction:(n,o)=>{t(e,l,o)},select:t=>{const n=(e=>{const t=e.dom.getParent(e.selection.getNode(),"ol,ul"),style=e.dom.getStyle(t,"listStyleType");return d.from(style)})(e);return n.map((e=>t===e)).getOr(!1)},onSetup:y(e,l)})},w=(e,n,o,r,l,c)=>{c.length>1?v(e,n,o,r,l,c):((e,n,o,r,l,c)=>{e.ui.registry.addToggleButton(n,{active:!1,tooltip:o,icon:"OL"===l?"ordered-list":"unordered-list",onSetup:y(e,l),onAction:()=>e.queryCommandState(r)||""===c?e.execCommand(r):t(e,l,c)})})(e,n,o,r,l,h(c[0]))};e.add("advlist",(e=>{e.hasPlugin("lists")?((e=>{const t=e.options.register;t("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),t("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})})(e),(e=>{w(e,"numlist","Numbered list","InsertOrderedList","OL",n(e)),w(e,"bullist","Bullet list","InsertUnorderedList","UL",o(e))})(e),(e=>{e.addCommand("ApplyUnorderedListStyle",((n,o)=>{t(e,"UL",o["list-style-type"])})),e.addCommand("ApplyOrderedListStyle",((n,o)=>{t(e,"OL",o["list-style-type"])}))})(e)):console.error("Please use the Lists plugin together with the Advanced List plugin.")}))}()},679:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,n=e=>t=>typeof t===e,o=t("string"),r=t("object"),l=t("array"),c=(d=null,a=>d===a);var d;const m=n("boolean"),h=a=>!(a=>null==a)(a),f=n("function"),y=(e,t)=>{if(l(e)){for(let i=0,n=e.length;i<n;++i)if(!t(e[i]))return!1;return!0}return!1},v=()=>{},w=(a,b)=>a===b;class x{constructor(e,t){this.tag=e,this.value=t}static some(e){return new x(!0,e)}static none(){return x.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?x.some(e(this.value)):x.none()}bind(e){return this.tag?e(this.value):x.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:x.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return h(e)?x.some(e):x.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}x.singletonNone=new x(!1);const k=Array.prototype.indexOf,C=Array.prototype.push,S=(e,t)=>((e,t)=>k.call(e,t))(e,t)>-1,T=e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!l(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);C.apply(t,e[i])}return t},_=(e,t)=>T(((e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o})(e,t)),A=(e,t)=>{for(let i=0;i<e.length;i++){const n=t(e[i],i);if(n.isSome())return n}return x.none()},O=(e,t,n=w)=>e.exists((e=>n(e,t))),D=e=>{const t=[],n=e=>{t.push(e)};for(let i=0;i<e.length;i++)e[i].each(n);return t},E=(b,a)=>b?x.some(a):x.none(),option=e=>t=>t.options.get(e),N=option("link_assume_external_targets"),R=option("link_context_toolbar"),M=option("link_list"),F=option("link_default_target"),P=option("link_default_protocol"),I=option("link_target_list"),L=option("link_rel_list"),B=option("link_class_list"),j=option("link_title"),z=option("allow_unsafe_link_target"),$=option("link_quicklink");var U=tinymce.util.Tools.resolve("tinymce.util.Tools");const W=e=>o(e.value)?e.value:"",H=(e,t)=>{const n=[];return U.each(e,(e=>{const text=(e=>o(e.text)?e.text:o(e.title)?e.title:"")(e);if(void 0!==e.menu){const o=H(e.menu,t);n.push({text:text,items:o})}else{const o=t(e);n.push({text:text,value:o})}})),n},V=(e=W)=>t=>x.from(t).map((t=>H(t,e))),K={sanitize:e=>V(W)(e),sanitizeWith:V,createUi:(e,label)=>t=>({name:e,type:"listbox",label:label,items:t}),getValue:W},Z=Object.keys,G=Object.hasOwnProperty,Y=(e,t,n,o)=>{((e,t)=>{const n=Z(e);for(let o=0,r=n.length;o<r;o++){const i=n[o];t(e[i],i)}})(e,((e,i)=>{(t(e,i)?n:o)(e,i)}))},J=(e,t)=>G.call(e,t);var X=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Q=tinymce.util.Tools.resolve("tinymce.util.URI");const ee=e=>h(e)&&"a"===e.nodeName.toLowerCase(),te=e=>ee(e)&&!!re(e),ne=(e,t)=>{if(e.collapsed)return[];{const n=e.cloneContents(),o=n.firstChild,r=new X(o,n),l=[];let c=o;do{t(c)&&l.push(c)}while(c=r.next());return l}},oe=e=>/^\w+:/i.test(e),re=e=>{var t,n;return null!==(n=null!==(t=e.getAttribute("data-mce-href"))&&void 0!==t?t:e.getAttribute("href"))&&void 0!==n?n:""},se=(e,t)=>{const n=["noopener"],o=e?e.split(/\s+/):[],r=e=>e.filter((e=>-1===U.inArray(n,e))),l=t?(e=>(e=r(e)).length>0?e.concat(n):n)(o):r(o);return l.length>0?(e=>U.trim(e.sort().join(" ")))(l):""},ae=(e,t)=>(t=t||e.selection.getNode(),de(t)?x.from(e.dom.select("a[href]",t)[0]):x.from(e.dom.getParent(t,"a[href]"))),le=(e,t)=>ae(e,t).isSome(),ie=(e,t)=>(text=>text.replace(/\uFEFF/g,""))(t.fold((()=>e.getContent({format:"text"})),(e=>e.innerText||e.textContent||""))),ce=e=>U.grep(e,te).length>0,ue=e=>{const t=e.schema.getTextInlineElements(),n=e=>1===e.nodeType&&!ee(e)&&!J(t,e.nodeName.toLowerCase());if(ae(e).exists((e=>e.hasAttribute("data-mce-block"))))return!1;const o=e.selection.getRng();if(o.collapsed)return!0;return 0===ne(o,n).length},de=e=>h(e)&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className),me=(e,t)=>{const n={...t};if(0===L(e).length&&!z(e)){const e=se(n.rel,"_blank"===n.target);n.rel=e||null}return x.from(n.target).isNone()&&!1===I(e)&&(n.target=F(e)),n.href=((e,t)=>"http"!==t&&"https"!==t||oe(e)?e:t+"://"+e)(n.href,N(e)),n},ge=(e,t,data)=>{const n=e.selection.getNode(),o=ae(e,n),r=me(e,(data=>{return e=["title","rel","class","target"],t=(e,t)=>(data[t].each((n=>{e[t]=n.length>0?n:null})),e),n={href:data.href},((e,t)=>{for(let i=0,n=e.length;i<n;i++)t(e[i],i)})(e,((e,i)=>{n=t(n,e,i)})),n;var e,t,n})(data));e.undoManager.transact((()=>{data.href===t.href&&t.attach(),o.fold((()=>{((e,t,text,n)=>{const o=e.dom;de(t)?be(o,t,n):text.fold((()=>{e.execCommand("mceInsertLink",!1,n)}),(text=>{e.insertContent(o.createHTML("a",n,o.encode(text)))}))})(e,n,data.text,r)}),(t=>{e.focus(),((e,t,text,n)=>{text.each((text=>{J(t,"innerText")?t.innerText=text:t.textContent=text})),e.dom.setAttribs(t,n),e.selection.select(t)})(e,t,data.text,r)}))}))},pe=data=>{const{class:e,href:t,rel:n,target:o,text:text,title:title}=data;return((e,t)=>{const n={};var o;return Y(e,t,(o=n,(e,i)=>{o[i]=e}),v),n})({class:e.getOrNull(),href:t,rel:n.getOrNull(),target:o.getOrNull(),text:text.getOrNull(),title:title.getOrNull()},((e,t)=>!1===c(e)))},link=(e,t,data)=>{const n=((e,data)=>{const t=e.options.get,n={allow_html_data_urls:t("allow_html_data_urls"),allow_script_urls:t("allow_script_urls"),allow_svg_data_urls:t("allow_svg_data_urls")},o=data.href;return{...data,href:Q.isDomSafe(o,"a",n)?o:""}})(e,data);e.hasPlugin("rtc",!0)?e.execCommand("createlink",!1,pe(n)):ge(e,t,n)},he=e=>{e.hasPlugin("rtc",!0)?e.execCommand("unlink"):(e=>{e.undoManager.transact((()=>{const t=e.selection.getNode();de(t)?fe(e,t):(e=>{const t=e.dom,n=e.selection,o=n.getBookmark(),r=n.getRng().cloneRange(),l=t.getParent(r.startContainer,"a[href]",e.getBody()),c=t.getParent(r.endContainer,"a[href]",e.getBody());l&&r.setStartBefore(l),c&&r.setEndAfter(c),n.setRng(r),e.execCommand("unlink"),n.moveToBookmark(o)})(e),e.focus()}))})(e)},fe=(e,t)=>{var n;const img=e.dom.select("img",t)[0];if(img){const a=e.dom.getParents(img,"a[href]",t)[0];a&&(null===(n=a.parentNode)||void 0===n||n.insertBefore(img,a),e.dom.remove(a))}},be=(e,t,n)=>{var o;const img=e.select("img",t)[0];if(img){const a=e.create("a",n);null===(o=img.parentNode)||void 0===o||o.insertBefore(a,img),a.appendChild(img)}},ye=e=>{return J(t=e,n="items")&&void 0!==t[n]&&null!==t[n];var t,n},ve=(e,t)=>A(t,(t=>ye(t)?ve(e,t.items):E(t.value===e,t))),we=(e,t,n,data)=>{const o=data[t],r=e.length>0;return void 0!==o?ve(o,n).map((i=>({url:{value:i.value,meta:{text:r?e:i.text,attach:v}},text:r?e:i.text}))):x.none()},xe=(e,t)=>{const n={text:e.text,title:e.title},o=data=>{const text=(e=data.url,E(n.text.length<=0,x.from(null===(t=e.meta)||void 0===t?void 0:t.text).getOr(e.value)));var e,t;const title=(e=>{var t;return E(n.title.length<=0,x.from(null===(t=e.meta)||void 0===t?void 0:t.title).getOr(""))})(data.url);return text.isSome()||title.isSome()?x.some({...text.map((text=>({text:text}))).getOr({}),...title.map((title=>({title:title}))).getOr({})}):x.none()},r=(data,e)=>{const o=(r=t,l=e,"link"===l?r.link:"anchor"===l?r.anchor:x.none()).getOr([]);var r,l;return we(n.text,e,o,data)};return{onChange:(e,t)=>{const l=t.name;return"url"===l?o(e()):S(["anchor","link"],l)?r(e(),l):"text"===l||"title"===l?(n[l]=e()[l],x.none()):x.none()}}};var ke=tinymce.util.Tools.resolve("tinymce.util.Delay");const Ce=data=>{const e=data.href;return e.indexOf("@")>0&&-1===e.indexOf("/")&&-1===e.indexOf("mailto:")?x.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:t=>({...t,href:"mailto:"+e})}):x.none()},Se=(e,t)=>data=>{const n=data.href;return 1===e&&!oe(n)||0===e&&/^\s*www(\.|\d\.)/i.test(n)?x.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${t}:// prefix?`,preprocess:e=>({...e,href:t+"://"+n})}):x.none()},Te=(e,data)=>A([Ce,Se(N(e),P(e))],(e=>e(data))).fold((()=>Promise.resolve(data)),(t=>new Promise((n=>{((e,t,n)=>{const o=e.selection.getRng();ke.setEditorTimeout(e,(()=>{e.windowManager.confirm(t,(t=>{e.selection.setRng(o),n(t)}))}))})(e,t.message,(e=>{n(e?t.preprocess(data):data)}))})))),_e=e=>{const t=e.dom.select("a:not([href])"),n=_(t,(e=>{const t=e.name||e.id;return t?[{text:t,value:"#"+t}]:[]}));return n.length>0?x.some([{text:"None",value:""}].concat(n)):x.none()},Ae=e=>{const t=B(e);return t.length>0?K.sanitize(t):x.none()},Oe=text=>{try{return x.some(JSON.parse(text))}catch(e){return x.none()}},De=e=>{const t=t=>e.convertURL(t.value||t.url||"","href"),n=M(e);return new Promise((e=>{o(n)?fetch(n).then((e=>e.ok?e.text().then(Oe):Promise.reject())).then(e,(()=>e(x.none()))):f(n)?n((output=>e(x.some(output)))):e(x.from(n))})).then((e=>e.bind(K.sanitizeWith(t)).map((e=>{if(e.length>0){return[{text:"None",value:""}].concat(e)}return e}))))},Ee=(e,t)=>{const n=L(e);if(n.length>0){const o=O(t,"_blank"),r=e=>se(K.getValue(e),o);return(!1===z(e)?K.sanitizeWith(r):K.sanitize)(n)}return x.none()},Ne=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Re=e=>{const t=I(e);return l(t)?K.sanitize(t).orThunk((()=>x.some(Ne))):!1===t?x.none():x.some(Ne)},Me=(e,t,n)=>{const o=e.getAttrib(t,n);return null!==o&&o.length>0?x.some(o):x.none()},Fe=(e,t)=>De(e).then((n=>{const o=((e,t)=>{const n=e.dom,text=ue(e)?x.some(ie(e.selection,t)):x.none(),o=t.bind((e=>x.from(n.getAttrib(e,"href")))),r=t.bind((e=>x.from(n.getAttrib(e,"target")))),l=t.bind((e=>Me(n,e,"rel"))),c=t.bind((e=>Me(n,e,"class")));return{url:o,text:text,title:t.bind((e=>Me(n,e,"title"))),target:r,rel:l,linkClass:c}})(e,t);return{anchor:o,catalogs:{targets:Re(e),rels:Ee(e,o.target),classes:Ae(e),anchor:_e(e),link:n},optNode:t,flags:{titleEnabled:j(e)}}})),Pe=e=>{const data=(e=>{const t=ae(e);return Fe(e,t)})(e);data.then((t=>{const n=((e,t)=>n=>{const data=n.getData();if(!data.url.value)return he(e),void n.close();const o=e=>x.from(data[e]).filter((n=>!O(t.anchor[e],n))),r={href:data.url.value,text:o("text"),target:o("target"),rel:o("rel"),class:o("linkClass"),title:o("title")},l={href:data.url.value,attach:void 0!==data.url.meta&&data.url.meta.attach?data.url.meta.attach:v};Te(e,r).then((t=>{link(e,l,t)})),n.close()})(e,t);return((e,t,n)=>{const o=e.anchor.text.map((()=>({name:"text",type:"input",label:"Text to display"}))).toArray(),r=e.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],l=((e,t)=>{const n=e.anchor,o=n.url.getOr("");return{url:{value:o,meta:{original:{value:o}}},text:n.text.getOr(""),title:n.title.getOr(""),anchor:o,link:o,rel:n.rel.getOr(""),target:n.target.or(t).getOr(""),linkClass:n.linkClass.getOr("")}})(e,x.from(F(n))),c=e.catalogs,d=xe(l,c);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:T([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],o,r,D([c.anchor.map(K.createUi("anchor","Anchors")),c.rels.map(K.createUi("rel","Rel")),c.targets.map(K.createUi("target","Open link in...")),c.link.map(K.createUi("link","Link list")),c.classes.map(K.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:l,onChange:(e,{name:t})=>{d.onChange(e.getData,{name:t}).each((t=>{e.setData(t)}))},onSubmit:t}})(t,n,e)})).then((t=>{e.windowManager.open(t)}))};var Ie=tinymce.util.Tools.resolve("tinymce.util.VK");const Le=e=>{const link=document.createElement("a");link.target="_blank",link.href=e,link.rel="noreferrer noopener";const t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),((link,e)=>{document.body.appendChild(link),link.dispatchEvent(e),document.body.removeChild(link)})(link,t)},Be=(e,t)=>e.dom.getParent(t,"a[href]"),je=e=>Be(e,e.selection.getStart()),ze=(e,a)=>{if(a){const t=re(a);if(/^#/.test(t)){const n=e.dom.select(t);n.length&&e.selection.scrollIntoView(n[0],!0)}else Le(a.href)}},$e=e=>()=>{e.execCommand("mceLink",!1,{dialog:!0})},Ue=e=>()=>{ze(e,je(e))},We=(e,t)=>(e.on("NodeChange",t),()=>e.off("NodeChange",t)),He=e=>t=>{const n=()=>t.setActive(!e.mode.isReadOnly()&&le(e,e.selection.getNode()));return n(),We(e,n)},qe=e=>t=>{const n=()=>t.setEnabled(le(e,e.selection.getNode()));return n(),We(e,n)},Ve=e=>t=>{const n=t=>{return ce(t)||(n=e.selection.getRng(),ne(n,te).length>0);var n},o=e.dom.getParents(e.selection.getStart());return t.setEnabled(n(o)),We(e,(e=>t.setEnabled(n(e.parents))))},Ke=e=>{const t=t=>{const n=e.selection.getNode();return t.setEnabled(le(e,n)),v};e.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:He(e)},label:"Link",predicate:t=>R(e)&&le(e,t),initValue:()=>{return ae(e).fold((t="",()=>t),re);var t},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:t=>{const n=e.selection.getNode();return t.setActive(le(e,n)),He(e)(t)},onAction:t=>{const n=t.getValue(),text=(t=>{const n=ae(e),o=ue(e);if(n.isNone()&&o){const text=ie(e.selection,n);return x.some(text.length>0?text:t)}return x.none()})(n);link(e,{href:n,attach:v},{href:n,text:text,title:x.none(),rel:x.none(),target:x.none(),class:x.none()}),(e=>{e.selection.collapse(!1)})(e),t.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:t,onAction:t=>{he(e),t.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:t,onAction:t=>{Ue(e)(),t.hide()}}]})};e.add("link",(e=>{(e=>{const t=e.options.register;t("link_assume_external_targets",{processor:e=>{const t=o(e)||m(e);return t?!0===e?{value:1,valid:t}:"http"===e||"https"===e?{value:e,valid:t}:{value:0,valid:t}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),t("link_context_toolbar",{processor:"boolean",default:!1}),t("link_list",{processor:e=>o(e)||f(e)||y(e,r)}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"}),t("link_target_list",{processor:e=>m(e)||y(e,r),default:!0}),t("link_rel_list",{processor:"object[]",default:[]}),t("link_class_list",{processor:"object[]",default:[]}),t("link_title",{processor:"boolean",default:!0}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("link_quicklink",{processor:"boolean",default:!1})})(e),(e=>{e.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:$e(e),onSetup:He(e)}),e.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Ue(e),onSetup:qe(e)}),e.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>he(e),onSetup:Ve(e)})})(e),(e=>{e.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Ue(e),onSetup:qe(e)}),e.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:$e(e)}),e.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>he(e),onSetup:Ve(e)})})(e),(e=>{e.ui.registry.addContextMenu("link",{update:element=>ce(e.dom.getParents(element,"a"))?"link unlink openlink":"link"})})(e),Ke(e),(e=>{e.on("click",(t=>{const link=Be(e,t.target);link&&Ie.metaKeyPressed(t)&&(t.preventDefault(),ze(e,link))})),e.on("keydown",(t=>{if(!t.isDefaultPrevented()&&13===t.keyCode&&(e=>!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey)(t)){const link=je(e);link&&(t.preventDefault(),ze(e,link))}}))})(e),(e=>{e.addCommand("mceLink",((t,n)=>{!0!==(null==n?void 0:n.dialog)&&$(e)?e.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"}):Pe(e)}))})(e),(e=>{e.addShortcut("Meta+K","",(()=>{e.execCommand("mceLink")}))})(e)}))}()},680:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const option=e=>t=>t.options.get(e),t=option("autolink_pattern"),n=option("link_default_target"),o=option("link_default_protocol"),r=option("allow_unsafe_link_target"),l=(c="string",e=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,(r=String).prototype.isPrototypeOf(n)||(null===(l=o.constructor)||void 0===l?void 0:l.name)===r.name)?"string":t;var n,o,r,l})(e)===c);var c;const d=(m=void 0,a=>m===a);var m;const h=a=>!(a=>null==a)(a),f=Object.hasOwnProperty,y=e=>"\ufeff"===e;var v=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const w=e=>3===e.nodeType,x=e=>/^[(\[{ \u00a0]$/.test(e),k=(text,e,t)=>{for(let i=e-1;i>=0;i--){const e=text.charAt(i);if(!y(e)&&t(e))return i}return-1},C=(e,n)=>{var r;const l=e.schema.getVoidElements(),c=t(e),{dom:m,selection:h}=e;if(null!==m.getParent(h.getNode(),"a[href]"))return null;const y=h.getRng(),C=v(m,(e=>{return m.isBlock(e)||(t=l,n=e.nodeName.toLowerCase(),f.call(t,n))||"false"===m.getContentEditable(e);var t,n})),{container:S,offset:T}=((e,t)=>{let n=e,o=t;for(;1===n.nodeType&&n.childNodes[o];)n=n.childNodes[o],o=w(n)?n.data.length:n.childNodes.length;return{container:n,offset:o}})(y.endContainer,y.endOffset),_=null!==(r=m.getParent(S,m.isBlock))&&void 0!==r?r:m.getRoot(),A=C.backwards(S,T+n,((e,t)=>{const text=e.data,n=k(text,t,(o=x,e=>!o(e)));var o,r;return-1===n||(r=text[n],/[?!,.;:]/.test(r))?n:n+1}),_);if(!A)return null;let O=A.container;const D=C.backwards(A.container,A.offset,((e,t)=>{O=e;const n=k(e.data,t,x);return-1===n?n:n+1}),_),E=m.createRng();D?E.setStart(D.container,D.offset):E.setStart(O,0),E.setEnd(A.container,A.offset);const N=E.toString().replace(/\uFEFF/g,"").match(c);if(N){let t=N[0];if(((e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t)(t,"www.",0)){t=o(e)+"://"+t}else((e,t,n=0,o)=>{const r=e.indexOf(t,n);return-1!==r&&(!!d(o)||r+t.length<=o)})(t,"@")&&!(e=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(e))(t)&&(t="mailto:"+t);return{rng:E,url:t}}return null},S=(e,t)=>{const{dom:o,selection:c}=e,{rng:d,url:m}=t,h=c.getBookmark();c.setRng(d);const f="createlink",y={command:f,ui:!1,value:m};if(!e.dispatch("BeforeExecCommand",y).isDefaultPrevented()){e.getDoc().execCommand(f,!1,m),e.dispatch("ExecCommand",y);const t=n(e);if(l(t)){const n=c.getNode();o.setAttrib(n,"target",t),"_blank"!==t||r(e)||o.setAttrib(n,"rel","noopener")}}c.moveToBookmark(h),e.nodeChanged()},T=e=>{const t=C(e,-1);h(t)&&S(e,t)},_=T,A=e=>{e.on("keydown",(t=>{13!==t.keyCode||t.isDefaultPrevented()||(e=>{const t=C(e,0);h(t)&&S(e,t)})(e)})),e.on("keyup",(t=>{32===t.keyCode?T(e):(48===t.keyCode&&t.shiftKey||221===t.keyCode)&&_(e)}))};e.add("autolink",(e=>{(e=>{const t=e.options.register;t("autolink_pattern",{processor:"regexp",default:new RegExp("^"+/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g.source+"$","i")}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"})})(e),A(e)}))}()},681:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=(e,t)=>{const n=((e,t)=>e.dispatch("insertCustomChar",{chr:t}))(e,t).chr;e.execCommand("mceInsertContent",!1,n)},n=e=>a=>e===a,o=(r="array",e=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,(r=String).prototype.isPrototypeOf(n)||(null===(l=o.constructor)||void 0===l?void 0:l.name)===r.name)?"string":t;var n,o,r,l})(e)===r);var r;const l=n(null),c=n(void 0),d=(e=>t=>typeof t===e)("function"),m=(h=!1,()=>h);var h;class f{constructor(e,t){this.tag=e,this.value=t}static some(e){return new f(!0,e)}static none(){return f.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?f.some(e(this.value)):f.none()}bind(e){return this.tag?e(this.value):f.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:f.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(a=>null==a)(e)?f.none():f.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}f.singletonNone=new f(!1);const y=Array.prototype.push,map=(e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o},v=(e,t)=>((e,t,n)=>{for(let i=0,o=e.length;i<o;i++){const o=e[i];if(t(o,i))return f.some(o);if(n(o,i))break}return f.none()})(e,t,m),w=(e,t)=>(e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!o(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);y.apply(t,e[i])}return t})(map(e,t));var x=tinymce.util.Tools.resolve("tinymce.util.Tools");const option=e=>t=>t.options.get(e),k=option("charmap"),C=option("charmap_append"),S=x.isArray,T="User Defined",_=e=>{return S(e)?(t=e,x.grep(t,(e=>S(e)&&2===e.length))):"function"==typeof e?e():[];var t},A=e=>{const t=((e,t)=>{const n=k(e);n&&(t=[{name:T,characters:_(n)}]);const o=C(e);if(o){const e=x.grep(t,(e=>e.name===T));return e.length?(e[0].characters=[...e[0].characters,..._(o)],t):t.concat({name:T,characters:_(o)})}return t})(e,[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}]);return t.length>1?[{name:"All",characters:w(t,(g=>g.characters))}].concat(t):t},O=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},D=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return-1!==r&&(!!c(o)||r+t.length<=o)},E=String.fromCodePoint,N=(e,pattern)=>{const t=[],n=pattern.toLowerCase();return((e,t)=>{for(let i=0,n=e.length;i<n;i++)t(e[i],i)})(e.characters,(g=>{((e,t,n)=>!!D(E(e).toLowerCase(),n)||D(t.toLowerCase(),n)||D(t.toLowerCase().replace(/\s+/g,""),n))(g[0],g[1],n)&&t.push(g)})),map(t,(e=>({text:e[1],value:E(e[0]),icon:E(e[0])})))},R="pattern",M=(e,n)=>{const o=()=>[{label:"Search",type:"input",name:R},{type:"collection",name:"results"}],r=1===n.length?O(T):O("All"),c=((e,t)=>{let n=null;const o=()=>{l(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout((()=>{n=null,e.apply(null,r)}),t)}}})((e=>{const pattern=e.getData().pattern;((e,pattern)=>{v(n,(e=>e.name===r.get())).each((t=>{const n=N(t,pattern);e.setData({results:n})}))})(e,pattern)}),40),d={title:"Special Character",size:"normal",body:1===n.length?{type:"panel",items:o()}:{type:"tabpanel",tabs:map(n,(e=>({title:e.name,name:e.name,items:o()})))},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{pattern:"",results:N(n[0],"")},onAction:(n,details)=>{"results"===details.name&&(t(e,details.value),n.close())},onTabChange:(e,details)=>{r.set(details.newTabName),c.throttle(e)},onChange:(e,t)=>{t.name===R&&c.throttle(e)}};e.windowManager.open(d).focus(R)};e.add("charmap",(e=>{(e=>{const t=e.options.register,n=e=>d(e)||o(e);t("charmap",{processor:n}),t("charmap_append",{processor:n})})(e);const n=A(e);return((e,t)=>{e.addCommand("mceShowCharmap",(()=>{M(e,t)}))})(e,n),(e=>{const t=()=>e.execCommand("mceShowCharmap");e.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:t}),e.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:t})})(e),((e,t)=>{e.ui.registry.addAutocompleter("charmap",{trigger:":",columns:"auto",minChars:2,fetch:(pattern,e)=>new Promise(((e,n)=>{e(N(t,pattern))})),onAction:(t,n,o)=>{e.selection.setRng(n),e.insertContent(o),t.hide()}})})(e,n[0]),(e=>({getCharMap:()=>A(e),insertChar:n=>{t(e,n)}}))(e)}))}()},682:function(e,t){!function(){"use strict";const e=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var t=tinymce.util.Tools.resolve("tinymce.PluginManager");const n=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,o=e=>t=>typeof t===e,r=n("string"),l=n("array"),c=o("boolean"),d=o("number"),m=()=>{},h=e=>()=>e,f=h(!0),y=h("[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]");class v{constructor(e,t){this.tag=e,this.value=t}static some(e){return new v(!0,e)}static none(){return v.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?v.some(e(this.value)):v.none()}bind(e){return this.tag?e(this.value):v.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:v.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(a=>null==a)(e)?v.none():v.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}v.singletonNone=new v(!1);const w=y;var x=tinymce.util.Tools.resolve("tinymce.Env"),k=tinymce.util.Tools.resolve("tinymce.util.Tools");const C=Array.prototype.slice,S=Array.prototype.push,map=(e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o},T=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},_=(e,t)=>{for(let i=e.length-1;i>=0;i--){t(e[i],i)}},A=(e,t)=>(e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!l(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);S.apply(t,e[i])}return t})(map(e,t)),O=Object.hasOwnProperty,D=(e,t)=>O.call(e,t);"undefined"!=typeof window?window:Function("return this;")();const E=(N=3,element=>(element=>element.dom.nodeType)(element)===N);var N;const R=(element,e,t)=>{((e,t,n)=>{if(!(r(n)||c(n)||d(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(element.dom,e,t)},M=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},F={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return M(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return M(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return M(t)},fromDom:M,fromPoint:(e,t,n)=>v.from(e.dom.elementFromPoint(t,n)).map(M)},P=(element,e)=>({element:element,offset:e}),I=(element,e)=>{const t=(element=>map(element.dom.childNodes,F.fromDom))(element);return t.length>0&&e<t.length?P(t[e],0):P(element,e)},L=(marker,element)=>{const e=(element=>v.from(element.dom.parentNode).map(F.fromDom))(marker);e.each((e=>{e.dom.insertBefore(element.dom,marker.dom)}))},B=(element,e)=>{L(element,e),((e,element)=>{e.dom.appendChild(element.dom)})(e,element)},j=((e,t)=>{const n=element=>e(element)?v.from(element.dom.nodeValue):v.none();return{get:element=>{if(!e(element))throw new Error("Can only get "+t+" value of a "+t+" node");return n(element).getOr("")},getOption:n,set:(element,n)=>{if(!e(element))throw new Error("Can only set raw "+t+" value of a "+t+" node");element.dom.nodeValue=n}}})(E,"text"),z=element=>j.get(element),$=(e,t)=>((e,t)=>{const base=void 0===t?document:t.dom;return 1!==(n=base).nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount?[]:map(base.querySelectorAll(e),F.fromDom);var n})(t,e);var U=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const W=(e,t)=>e.isBlock(t)||D(e.schema.getVoidElements(),t.nodeName),H=(e,t)=>"false"===e.getContentEditable(t),V=(e,t)=>!e.isBlock(t)&&D(e.schema.getWhitespaceElements(),t.nodeName),K=(e,t)=>I(F.fromDom(e),t),Z=(e,t,n,o,r,l=!0)=>{let c=l?t(!1):n;for(;c;){const n=H(e,c);if(n||V(e,c)){if(n?o.cef(c):o.boundary(c))break;c=t(!0)}else{if(W(e,c)){if(o.boundary(c))break}else 3===c.nodeType&&o.text(c);if(c===r)break;c=t(!1)}}},G=(e,section,t,n,o)=>{var r;if(((e,t)=>W(e,t)||H(e,t)||V(e,t)||((e,t)=>"true"===e.getContentEditable(t)&&t.parentNode&&"false"===e.getContentEditableParent(t.parentNode))(e,t))(e,t))return;const l=null!==(r=e.getParent(n,e.isBlock))&&void 0!==r?r:e.getRoot(),c=new U(t,l),d=o?c.next.bind(c):c.prev.bind(c);Z(e,d,t,{boundary:f,cef:f,text:e=>{o?section.fOffset+=e.length:section.sOffset+=e.length,section.elements.push(F.fromDom(e))}})},Y=(e,t,n,o,r,l=!0)=>{const c=new U(n,t),d=[];let m={sOffset:0,fOffset:0,elements:[]};G(e,m,n,t,!1);const h=()=>(m.elements.length>0&&(d.push(m),m={sOffset:0,fOffset:0,elements:[]}),!1);return Z(e,c.next.bind(c),n,{boundary:h,cef:e=>(h(),r&&d.push(...r.cef(e)),!1),text:e=>{m.elements.push(F.fromDom(e)),r&&r.text(e,m)}},o,l),o&&G(e,m,o,t,!0),h(),d},J=(e,t)=>{const n=K(t.startContainer,t.startOffset),o=n.element.dom,r=K(t.endContainer,t.endOffset),l=r.element.dom;return Y(e,t.commonAncestorContainer,o,l,{text:(e,section)=>{e===l?section.fOffset+=e.length-r.offset:e===o&&(section.sOffset+=n.offset)},cef:t=>((e,t)=>{const n=C.call(e,0);return n.sort(t),n})(A($(F.fromDom(t),"*[contenteditable=true]"),(t=>{const n=t.dom;return Y(e,n,n)})),((a,b)=>((a,b)=>((a,b,e)=>0!=(a.compareDocumentPosition(b)&e))(a,b,Node.DOCUMENT_POSITION_PRECEDING))(a.elements[0].dom,b.elements[0].dom)?1:-1))},!1)},X=(e,t)=>t.collapsed?[]:J(e,t),Q=(e,t)=>{const n=e.createRng();return n.selectNode(t),X(e,n)},ee=(e,t)=>{const n=(o=e,r=(e,element)=>{const content=z(element),n=e.last,o=n+content.length,r=A(t,((e,t)=>e.start<o&&e.finish>n?[{element:element,start:Math.max(n,e.start)-n,finish:Math.min(o,e.finish)-n,matchId:t}]:[]));return{results:e.results.concat(r),last:o}},l={results:[],last:0},T(o,((e,i)=>{l=r(l,e,i)})),l).results;var o,r,l;return((e,t)=>{if(0===e.length)return[];{let n=t(e[0]);const o=[];let r=[];for(let i=0,l=e.length;i<l;i++){const l=e[i],c=t(l);c!==n&&(o.push(r),r=[]),n=c,r.push(l)}return 0!==r.length&&o.push(r),o}})(n,(e=>e.matchId))},te=(pattern,e)=>A(e,(section=>{const e=section.elements,content=map(e,z).join(""),t=((text,pattern,e=0,t=text.length)=>{const n=pattern.regex;n.lastIndex=e;const o=[];let r;for(;r=n.exec(text);){const e=r[pattern.matchIndex],l=r.index+r[0].indexOf(e),c=l+e.length;if(c>t)break;o.push({start:l,finish:c}),n.lastIndex=c}return o})(content,pattern,section.sOffset,content.length-section.fOffset);return ee(e,t)})),mark=(e,t)=>{_(e,((e,n)=>{_(e,(e=>{const o=F.fromDom(t.cloneNode(!1));R(o,"data-mce-index",n);const r=e.element.dom;if(r.length===e.finish&&0===e.start)B(e.element,o);else{r.length!==e.finish&&r.splitText(e.finish);const t=r.splitText(e.start);B(F.fromDom(t),o)}}))}))},ne=(e,pattern,t,n)=>{const o=t.getBookmark(),r=e.select("td[data-mce-selected],th[data-mce-selected]"),l=r.length>0?((e,t)=>A(t,(t=>Q(e,t))))(e,r):X(e,t.getRng()),c=te(pattern,l);return mark(c,n),t.moveToBookmark(o),c.length},oe=e=>e.getAttribute("data-mce-index"),re=(e,t,pattern,n)=>{const marker=e.dom.create("span",{"data-mce-bogus":1});marker.className="mce-match-marker";const o=e.getBody();return pe(e,t,!1),n?ne(e.dom,pattern,e.selection,marker):((e,pattern,t,n)=>{const o=Q(e,t),r=te(pattern,o);return mark(r,n),r.length})(e.dom,pattern,o,marker)},se=e=>{var t;const n=e.parentNode;e.firstChild&&n.insertBefore(e.firstChild,e),null===(t=e.parentNode)||void 0===t||t.removeChild(e)},ae=(e,t)=>{const n=[],o=k.toArray(e.getBody().getElementsByTagName("span"));if(o.length)for(let i=0;i<o.length;i++){const e=oe(o[i]);null!==e&&e.length&&(e===t.toString()&&n.push(o[i]))}return n},le=(e,t,n)=>{const o=t.get();let r=o.index;const l=e.dom;n?r+1===o.count?r=0:r++:r-1==-1?r=o.count-1:r--,l.removeClass(ae(e,o.index),"mce-match-marker-selected");const c=ae(e,r);return c.length?(l.addClass(ae(e,r),"mce-match-marker-selected"),e.selection.scrollIntoView(c[0]),r):-1},ie=(e,t)=>{const n=t.parentNode;e.remove(t),n&&e.isEmpty(n)&&e.remove(n)},ce=(e,t,text,n,o,r)=>{const l=e.selection,c=((text,e)=>{const t="("+text.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return e?`(?:^|\\s|${w()})`+t+`(?=$|\\s|${w()})`:t})(text,o),d=l.isForward(),pattern={regex:new RegExp(c,n?"g":"gi"),matchIndex:1},m=re(e,t,pattern,r);if(x.browser.isSafari()&&l.setRng(l.getRng(),d),m){const l=le(e,t,!0);t.set({index:l,count:m,text:text,matchCase:n,wholeWord:o,inSelection:r})}return m},ue=(e,t)=>{const n=le(e,t,!0);t.set({...t.get(),index:n})},de=(e,t)=>{const n=le(e,t,!1);t.set({...t.get(),index:n})},me=e=>{const t=oe(e);return null!==t&&t.length>0},ge=(e,t,text,n,o)=>{const r=t.get(),l=r.index;let c,d=l;n=!1!==n;const m=e.getBody(),h=k.grep(k.toArray(m.getElementsByTagName("span")),me);for(let i=0;i<h.length;i++){const t=oe(h[i]);let m=c=parseInt(t,10);if(o||m===r.index){for(text.length?(h[i].innerText=text,se(h[i])):ie(e.dom,h[i]);h[++i];){if(m=parseInt(oe(h[i]),10),m!==c){i--;break}ie(e.dom,h[i])}n&&d--}else c>l&&h[i].setAttribute("data-mce-index",String(c-1))}return t.set({...r,count:o?0:r.count-1,index:d}),n?ue(e,t):de(e,t),!o&&t.get().count>0},pe=(e,t,n)=>{let o,r;const l=t.get(),c=k.toArray(e.getBody().getElementsByTagName("span"));for(let i=0;i<c.length;i++){const e=oe(c[i]);null!==e&&e.length&&(e===l.index.toString()&&(o||(o=c[i].firstChild),r=c[i].firstChild),se(c[i]))}if(t.set({...l,index:-1,count:0,text:""}),o&&r){const t=e.dom.createRng();return t.setStart(o,0),t.setEnd(r,r.data.length),!1!==n&&e.selection.setRng(t),t}},he=()=>{const t=(t=>{const n=e(v.none()),o=()=>n.get().each(t);return{clear:()=>{o(),n.set(v.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:s=>{o(),n.set(v.some(s))}}})(m);return{...t,on:e=>t.get().each(e)}},fe=(e,t)=>{const n=he();e.undoManager.add();const o=k.trim(e.selection.getContent({format:"text"})),r=e=>{e.setEnabled("next",((e,t)=>t.get().count>1)(0,t)),e.setEnabled("prev",((e,t)=>t.get().count>1)(0,t))},l=(e,t)=>{T(["replace","replaceall","prev","next"],(n=>e.setEnabled(n,!t)))},c=(e,t)=>{x.browser.isSafari()&&x.deviceType.isTouch()&&("find"===t||"replace"===t||"replaceall"===t)&&e.focus(t)},d=n=>{pe(e,t,!1),l(n,!0),r(n)},m=n=>{const data=n.getData(),o=t.get();if(data.findtext.length){if(o.text===data.findtext&&o.matchCase===data.matchcase&&o.wholeWord===data.wholewords)ue(e,t);else{const o=ce(e,t,data.findtext,data.matchcase,data.wholewords,data.inselection);o<=0&&(t=>{e.windowManager.alert("Could not find the specified string.",(()=>{t.focus("findtext")}))})(n),l(n,0===o)}r(n)}else d(n)},h=t.get(),f={title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:{findtext:o,replacetext:"",wholewords:h.wholeWord,matchcase:h.matchCase,inselection:h.inSelection},onChange:(e,details)=>{"findtext"===details.name&&t.get().count>0&&d(e)},onAction:(n,details)=>{const data=n.getData();switch(details.name){case"find":m(n);break;case"replace":ge(e,t,data.replacetext)?r(n):d(n);break;case"replaceall":ge(e,t,data.replacetext,!0,!0),d(n);break;case"prev":de(e,t),r(n);break;case"next":ue(e,t),r(n);break;case"matchcase":case"wholewords":case"inselection":(e=>{const data=e.getData(),n=t.get();t.set({...n,matchCase:data.matchcase,wholeWord:data.wholewords,inSelection:data.inselection})})(n),d(n)}c(n,details.name)},onSubmit:e=>{m(e),c(e,"find")},onClose:()=>{e.focus(),pe(e,t),e.undoManager.add()}};n.set(e.windowManager.open(f,{inline:"toolbar"}))},be=(e,t)=>()=>{fe(e,t)};t.add("searchreplace",(t=>{const n=e({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return((e,t)=>{e.addCommand("SearchReplace",(()=>{fe(e,t)}))})(t,n),((e,t)=>{e.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:be(e,t),icon:"search"}),e.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:be(e,t),icon:"search"}),e.shortcuts.add("Meta+F","",be(e,t))})(t,n),((e,t)=>({done:n=>pe(e,t,n),find:(text,n,o,r=!1)=>ce(e,t,text,n,o,r),next:()=>ue(e,t),prev:()=>de(e,t),replace:(text,n,o)=>ge(e,t,text,n,o)}))(t,n)}))}()},683:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=(e,t,n)=>{e.dom.toggleClass(e.getBody(),"mce-visualblocks"),n.set(!n.get()),((e,t)=>{e.dispatch("VisualBlocks",{state:t})})(e,n.get())},n=(o="visualblocks_default_state",e=>e.options.get(o));var o;const r=(e,t)=>n=>{n.setActive(t.get());const o=e=>n.setActive(e.state);return e.on("VisualBlocks",o),()=>e.off("VisualBlocks",o)};e.add("visualblocks",((e,o)=>{(e=>{(0,e.options.register)("visualblocks_default_state",{processor:"boolean",default:!1})})(e);const l=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})(!1);((e,n,o)=>{e.addCommand("mceVisualBlocks",(()=>{t(e,0,o)}))})(e,0,l),((e,t)=>{const n=()=>e.execCommand("mceVisualBlocks");e.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:n,onSetup:r(e,t)}),e.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:n,onSetup:r(e,t)})})(e,l),((e,o,r)=>{e.on("PreviewFormats AfterPreviewFormats",(t=>{r.get()&&e.dom.toggleClass(e.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)})),e.on("init",(()=>{n(e)&&t(e,0,r)}))})(e,0,l)}))}()},684:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");e.add("code",(e=>((e=>{e.addCommand("mceCodeEditor",(()=>{(e=>{const t=(e=>e.getContent({source_view:!0}))(e);e.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:t},onSubmit:t=>{((e,html)=>{e.focus(),e.undoManager.transact((()=>{e.setContent(html)})),e.selection.setCursorLocation(),e.nodeChanged()})(e,t.getData().code),t.close()}})})(e)}))})(e),(e=>{const t=()=>e.execCommand("mceCodeEditor");e.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:t}),e.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:t})})(e),{})))}()},685:function(e,t){!function(){"use strict";const e=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var t=tinymce.util.Tools.resolve("tinymce.PluginManager");const n=e=>({isFullscreen:()=>null!==e.get()}),o=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,r=e=>t=>typeof t===e,l=e=>a=>e===a,c=o("string"),d=o("array"),m=l(null),h=r("boolean"),f=l(void 0),y=a=>!(a=>null==a)(a),v=r("function"),w=r("number"),x=()=>{},k=e=>()=>e;function C(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const S=k(!1),T=k(!0);class _{constructor(e,t){this.tag=e,this.value=t}static some(e){return new _(!0,e)}static none(){return _.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?_.some(e(this.value)):_.none()}bind(e){return this.tag?e(this.value):_.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:_.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return y(e)?_.some(e):_.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}_.singletonNone=new _(!1);const A=t=>{const n=e(_.none()),o=()=>n.get().each(t);return{clear:()=>{o(),n.set(_.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:s=>{o(),n.set(_.some(s))}}},O=()=>A((s=>s.unbind())),D=Array.prototype.push,map=(e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o},E=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},N=(e,t)=>{const n=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];t(o,i)&&n.push(o)}return n},R=(e,t)=>((e,t,n)=>{for(let i=0,o=e.length;i<o;i++){const o=e[i];if(t(o,i))return _.some(o);if(n(o,i))break}return _.none()})(e,t,S),M=(e,t)=>(e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!d(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);D.apply(t,e[i])}return t})(map(e,t)),head=e=>((e,i)=>i>=0&&i<e.length?_.some(e[i]):_.none())(e,0),F=Object.keys,P=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return-1!==r&&(!!f(o)||r+t.length<=o)},I=e=>void 0!==e.style&&v(e.style.getPropertyValue),L=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},B={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return L(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return L(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return L(t)},fromDom:L,fromPoint:(e,t,n)=>_.from(e.dom.elementFromPoint(t,n)).map(L)};"undefined"!=typeof window?window:Function("return this;")();const j=e=>element=>(element=>element.dom.nodeType)(element)===e,z=j(1),$=j(3),U=j(9),W=j(11),H=(element,e)=>{const t=element.dom;if(1!==t.nodeType)return!1;{const n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},V=element=>B.fromDom(element.dom.ownerDocument),K=element=>(element=>_.from(element.dom.parentNode).map(B.fromDom))(element).map(Z).map((e=>N(e,(e=>{return t=e,!(element.dom===t.dom);var t})))).getOr([]),Z=element=>map(element.dom.childNodes,B.fromDom),G=v(Element.prototype.attachShadow)&&v(Node.prototype.getRootNode),Y=k(G),J=G?e=>B.fromDom(e.dom.getRootNode()):e=>U(e)?e:V(e),X=e=>{const t=J(e);return W(n=t)&&y(n.dom.host)?_.some(t):_.none();var n},Q=e=>B.fromDom(e.dom.host),ee=element=>y(element.dom.shadowRoot),te=element=>{const e=$(element)?element.dom.parentNode:element.dom;if(null==e||null===e.ownerDocument)return!1;const t=e.ownerDocument;return X(B.fromDom(e)).fold((()=>t.body.contains(e)),(n=te,o=Q,a=>n(o(a))));var n,o},ne=(element,e,t)=>{((e,t,n)=>{if(!(c(n)||h(n)||w(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(element.dom,e,t)},oe=(element,e)=>{const t=element.dom.getAttribute(e);return null===t?void 0:t},re=(element,e)=>{element.dom.removeAttribute(e)},se=(element,e)=>{const t=element.dom;((e,t)=>{const n=F(e);for(let o=0,r=n.length;o<r;o++){const i=n[o];t(e[i],i)}})(e,((e,n)=>{((e,t,n)=>{if(!c(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);I(e)&&e.style.setProperty(t,n)})(t,n,e)}))},ae=(e,t)=>I(e)?e.style.getPropertyValue(t):"",le=e=>{const t=B.fromDom((e=>{if(Y()&&y(e.target)){const t=B.fromDom(e.target);if(z(t)&&ee(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return head(t)}}return _.from(e.target)})(e).getOr(e.target)),n=()=>e.stopPropagation(),o=()=>e.preventDefault(),r=(l=o,c=n,(...e)=>l(c.apply(null,e)));var l,c;return((e,t,n,o,r,l,c)=>({target:e,x:t,y:n,stop:o,prevent:r,kill:l,raw:c}))(t,e.clientX,e.clientY,n,o,r,e)},ie=(element,e,filter,t,n)=>{const o=((filter,e)=>t=>{filter(t)&&e(le(t))})(filter,t);return element.dom.addEventListener(e,o,n),{unbind:C(ce,element,e,o,n)}},ce=(element,e,t,n)=>{element.dom.removeEventListener(e,t,n)},filter=T,ue=(element,e,t)=>((element,e,filter,t)=>ie(element,e,filter,t,!1))(element,e,filter,t),de=()=>me(0,0),me=(e,t)=>({major:e,minor:t}),ge={nu:me,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?de():((e,t)=>{const n=((e,s)=>{for(let i=0;i<e.length;i++){const t=e[i];if(t.test(s))return t}})(e,t);if(!n)return{major:0,minor:0};const o=i=>Number(t.replace(n,"$"+i));return me(o(1),o(2))})(e,n)},unknown:de},pe=(e,t)=>((e,t)=>{for(let i=0;i<e.length;i++){const n=t(e[i],i);if(n.isSome())return n}return _.none()})(t.brands,(t=>{const n=t.brand.toLowerCase();return R(e,(e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:ge.nu(parseInt(t.version,10),0)})))})),he=(e,t)=>{const n=String(t).toLowerCase();return R(e,(e=>e.search(n)))},fe=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,be=e=>t=>P(t,e),ye=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>P(e,"edge/")&&P(e,"chrome")&&P(e,"safari")&&P(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,fe],search:e=>P(e,"chrome")&&!P(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>P(e,"msie")||P(e,"trident")},{name:"Opera",versionRegexes:[fe,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:be("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:be("firefox")},{name:"Safari",versionRegexes:[fe,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(P(e,"safari")||P(e,"mobile/"))&&P(e,"applewebkit")}],ve=[{name:"Windows",search:be("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>P(e,"iphone")||P(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:be("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:be("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:be("linux"),versionRegexes:[]},{name:"Solaris",search:be("sunos"),versionRegexes:[]},{name:"FreeBSD",search:be("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:be("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],we={browsers:k(ye),oses:k(ve)},xe="Edge",ke="Chromium",Ce="Opera",Se="Firefox",Te="Safari",_e=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isEdge:o(xe),isChromium:o(ke),isIE:o("IE"),isOpera:o(Ce),isFirefox:o(Se),isSafari:o(Te)}},Ae={unknown:()=>_e({current:void 0,version:ge.unknown()}),nu:_e,edge:k(xe),chromium:k(ke),ie:k("IE"),opera:k(Ce),firefox:k(Se),safari:k(Te)},Oe="Windows",De="Android",Ee="Linux",Ne="macOS",Re="Solaris",Me="FreeBSD",Fe="ChromeOS",Pe=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isWindows:o(Oe),isiOS:o("iOS"),isAndroid:o(De),isMacOS:o(Ne),isLinux:o(Ee),isSolaris:o(Re),isFreeBSD:o(Me),isChromeOS:o(Fe)}},Ie={unknown:()=>Pe({current:void 0,version:ge.unknown()}),nu:Pe,windows:k(Oe),ios:k("iOS"),android:k(De),linux:k(Ee),macos:k(Ne),solaris:k(Re),freebsd:k(Me),chromeos:k(Fe)},Le=(e,t,n)=>{const o=we.browsers(),r=we.oses(),l=t.bind((e=>pe(o,e))).orThunk((()=>((e,t)=>he(e,t).map((e=>{const n=ge.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(o,e))).fold(Ae.unknown,Ae.nu),c=((e,t)=>he(e,t).map((e=>{const n=ge.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(r,e).fold(Ie.unknown,Ie.nu),d=((e,t,n,o)=>{const r=e.isiOS()&&!0===/ipad/i.test(n),l=e.isiOS()&&!r,c=e.isiOS()||e.isAndroid(),d=c||o("(pointer:coarse)"),m=r||!l&&c&&o("(min-device-width:768px)"),h=l||c&&!m,f=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),y=!h&&!m&&!f;return{isiPad:k(r),isiPhone:k(l),isTablet:k(m),isPhone:k(h),isTouch:k(d),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:k(f),isDesktop:k(y)}})(c,l,e,n);return{browser:l,os:c,deviceType:d}},Be=e=>window.matchMedia(e).matches;let je=(e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)})((()=>Le(navigator.userAgent,_.from(navigator.userAgentData),Be)));const ze=(e,t)=>({left:e,top:t,translate:(n,o)=>ze(e+n,t+o)}),$e=ze,Ue=e=>{const t=void 0===e?window:e;return je().browser.isFirefox()?_.none():_.from(t.visualViewport)},We=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),He=e=>{const t=void 0===e?window:e,n=t.document,o=(e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return $e(n,o)})(B.fromDom(n));return Ue(t).fold((()=>{const html=t.document.documentElement,e=html.clientWidth,n=html.clientHeight;return We(o.left,o.top,e,n)}),(e=>We(Math.max(e.pageLeft,o.left),Math.max(e.pageTop,o.top),e.width,e.height)))},qe=(e,t,n)=>Ue(n).map((n=>{const o=e=>t(le(e));return n.addEventListener(e,o),{unbind:()=>n.removeEventListener(e,o)}})).getOrThunk((()=>({unbind:x})));var Ve=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ke=tinymce.util.Tools.resolve("tinymce.Env");const Ze=(e,t)=>{e.dispatch("FullscreenStateChanged",{state:t}),e.dispatch("ResizeEditor")},Ge=(Ye="fullscreen_native",e=>e.options.get(Ye));var Ye;const Je=e=>{const t=B.fromDom(e.getElement());return X(t).map(Q).getOrThunk((()=>(e=>{const b=e.dom.body;if(null==b)throw new Error("Body is not available yet");return B.fromDom(b)})(V(t))))},Xe=e=>{return e.dom===(void 0!==(t=V(e).dom).fullscreenElement?t.fullscreenElement:void 0!==t.msFullscreenElement?t.msFullscreenElement:void 0!==t.webkitFullscreenElement?t.webkitFullscreenElement:null);var t},Qe=(e,t,n)=>N(((element,e)=>{const t=v(e)?e:S;let n=element.dom;const o=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,p=B.fromDom(e);if(o.push(p),!0===t(p))break;n=e}return o})(e,n),t),et=e=>((e,t)=>{const base=void 0===t?document:t.dom;return 1!==(n=base).nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount?[]:map(base.querySelectorAll(e),B.fromDom);var n})(e),tt=(e,t,n)=>Qe(e,(e=>H(e,t)),n),nt=(e,t)=>((e,t)=>N(K(e),t))(e,(e=>H(e,t))),ot="data-ephox-mobile-fullscreen-style",st="position:absolute!important;",at="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",lt=Ke.os.isAndroid(),it=e=>{const t=((element,e)=>{const t=element.dom,n=window.getComputedStyle(t).getPropertyValue(e);return""!==n||te(element)?n:ae(t,e)})(e,"background-color");return void 0!==t&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;"},ct=Ve.DOM,ut=Ue().fold((()=>({bind:x,unbind:x})),(e=>{const t=(()=>{const e=A(x);return{...e,on:t=>e.get().each(t)}})(),n=O(),o=O(),r=((e,t)=>{let n=null;return{cancel:()=>{m(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{m(n)&&(n=setTimeout((()=>{n=null,e.apply(null,o)}),t))}}})((()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame((()=>{t.on((t=>se(t,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"})))}))}),50);return{bind:element=>{t.set(element),r.throttle(),n.set(qe("resize",r.throttle)),o.set(qe("scroll",r.throttle))},unbind:()=>{t.on((()=>{n.clear(),o.clear()})),t.clear()}}})),mt=(e,t)=>{const body=document.body,n=document.documentElement,o=e.getContainer(),r=B.fromDom(o),l=Je(e),c=t.get(),d=B.fromDom(e.getBody()),m=Ke.deviceType.isTouch(),h=o.style,iframe=e.iframeElement,f=null==iframe?void 0:iframe.style,y=e=>{e(body,"tox-fullscreen"),e(n,"tox-fullscreen"),e(o,"tox-fullscreen"),X(r).map((e=>Q(e).dom)).each((t=>{e(t,"tox-fullscreen"),e(t,"tox-shadowhost")}))},v=()=>{m&&(e=>{const t=et("["+ot+"]");E(t,(element=>{const t=oe(element,ot);t&&"no-styles"!==t?se(element,e.parseStyle(t)):re(element,"style"),re(element,ot)}))})(e.dom),y(ct.removeClass),ut.unbind(),_.from(t.get()).each((e=>e.fullscreenChangeHandler.unbind()))};if(c)c.fullscreenChangeHandler.unbind(),Ge(e)&&Xe(l)&&(e=>{const t=e.dom;t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()})(V(l)),f.width=c.iframeWidth,f.height=c.iframeHeight,h.width=c.containerWidth,h.height=c.containerHeight,h.top=c.containerTop,h.left=c.containerLeft,v(),w=c.scrollPos,window.scrollTo(w.x,w.y),t.set(null),Ze(e,!1),e.off("remove",v);else{const n=ue(V(l),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",(n=>{Ge(e)&&(Xe(l)||null===t.get()||mt(e,t))})),o={scrollPos:He(window),containerWidth:h.width,containerHeight:h.height,containerTop:h.top,containerLeft:h.left,iframeWidth:f.width,iframeHeight:f.height,fullscreenChangeHandler:n};m&&((e,t,n)=>{const o=t=>element=>{const n=oe(element,"style"),o=void 0===n?"no-styles":n.trim();o!==t&&(ne(element,ot,o),se(element,e.parseStyle(t)))},r=tt(t,"*"),l=M(r,(element=>nt(element,"*:not(.tox-silver-sink)"))),c=it(n);E(l,o("display:none!important;")),E(r,o(st+at+c)),o((!0===lt?"":st)+at+c)(t)})(e.dom,r,d),f.width=f.height="100%",h.width=h.height="",y(ct.addClass),ut.bind(r),e.on("remove",v),t.set(o),Ge(e)&&(e=>{const t=e.dom;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()})(l),Ze(e,!0)}var w},gt=(e,t)=>n=>{n.setActive(null!==t.get());const o=e=>n.setActive(e.state);return e.on("FullscreenStateChanged",o),()=>e.off("FullscreenStateChanged",o)};t.add("fullscreen",(t=>{const o=e(null);return t.inline||((e=>{(0,e.options.register)("fullscreen_native",{processor:"boolean",default:!1})})(t),((e,t)=>{e.addCommand("mceFullScreen",(()=>{mt(e,t)}))})(t,o),((e,t)=>{const n=()=>e.execCommand("mceFullScreen");e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:n,onSetup:gt(e,t)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:n,onSetup:gt(e,t)})})(t,o),t.addShortcut("Meta+Shift+F","","mceFullScreen")),n(o)}))}()},686:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=tinymce.util.Tools.resolve("tinymce.util.Tools");const option=e=>t=>t.options.get(e),o=option("content_style"),r=option("content_css_cors"),l=option("body_class"),c=option("body_id"),d=e=>{const content=(e=>{var d;let m="";const h=e.dom.encode,f=null!==(d=o(e))&&void 0!==d?d:"";m+='<base href="'+h(e.documentBaseURI.getURI())+'">';const y=r(e)?' crossorigin="anonymous"':"";n.each(e.contentCSS,(t=>{m+='<link type="text/css" rel="stylesheet" href="'+h(e.documentBaseURI.toAbsolute(t))+'"'+y+">"})),f&&(m+='<style type="text/css">'+f+"</style>");const v=c(e),w=l(e),x='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(t.os.isMacOS()||t.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",k=e.getBody().dir,C=k?' dir="'+h(k)+'"':"";return"<!DOCTYPE html><html><head>"+m+'</head><body id="'+h(v)+'" class="mce-content-body '+h(w)+'"'+C+">"+e.getContent()+x+"</body></html>"})(e);e.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:content}}).focus("close")};e.add("preview",(e=>{(e=>{e.addCommand("mcePreview",(()=>{d(e)}))})(e),(e=>{const t=()=>e.execCommand("mcePreview");e.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:t}),e.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:t})})(e)}))}()},687:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),n=tinymce.util.Tools.resolve("tinymce.util.Tools");const o=(r="allow_html_in_named_anchor",e=>e.options.get(r));var r;const l="a:not([href])",c=e=>!e,d=e=>e.getAttribute("id")||e.getAttribute("name")||"",m=e=>(e=>"a"===e.nodeName.toLowerCase())(e)&&!e.getAttribute("href")&&""!==d(e),h=e=>{const o=e.dom;t(o).walk(e.selection.getRng(),(e=>{n.each(e,(e=>{var t;m(t=e)&&!t.firstChild&&o.remove(e,!1)}))}))},f=e=>e.dom.getParent(e.selection.getStart(),l),y=(e,t)=>{const n=f(e);n?((e,t,n)=>{n.removeAttribute("name"),n.id=t,e.addVisual(),e.undoManager.add()})(e,t,n):((e,t)=>{e.undoManager.transact((()=>{o(e)||e.selection.collapse(!0),e.selection.isCollapsed()?e.insertContent(e.dom.createHTML("a",{id:t})):(h(e),e.formatter.remove("namedAnchor",void 0,void 0,!0),e.formatter.apply("namedAnchor",{value:t}),e.addVisual())}))})(e,t),e.focus()},v=e=>{const t=(e=>{const t=f(e);return t?d(t):""})(e);e.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:t},onSubmit:t=>{((e,t)=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(t)?(y(e,t),!0):(e.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1))(e,t.getData().id)&&t.close()}})},w=e=>(e=>c(e.attr("href"))&&!c(e.attr("id")||e.attr("name")))(e)&&!e.firstChild,x=e=>t=>{for(let i=0;i<t.length;i++){const n=t[i];w(n)&&n.attr("contenteditable",e)}};e.add("anchor",(e=>{(e=>{(0,e.options.register)("allow_html_in_named_anchor",{processor:"boolean",default:!1})})(e),(e=>{e.on("PreInit",(()=>{e.parser.addNodeFilter("a",x("false")),e.serializer.addNodeFilter("a",x(null))}))})(e),(e=>{e.addCommand("mceAnchor",(()=>{v(e)}))})(e),(e=>{const t=()=>e.execCommand("mceAnchor");e.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:t,onSetup:t=>e.selection.selectorChangedWithUnbind("a:not([href])",t.setActive).unbind}),e.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:t})})(e),e.on("PreInit",(()=>{(e=>{e.formatter.register("namedAnchor",{inline:"a",selector:l,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(e,t,n)=>m(e)})})(e)}))}))}()},688:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const option=e=>t=>t.options.get(e),t=option("insertdatetime_dateformat"),n=option("insertdatetime_timeformat"),o=option("insertdatetime_formats"),r=option("insertdatetime_element"),l="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),c="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),d="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),m="January February March April May June July August September October November December".split(" "),h=(e,t)=>{if((e=""+e).length<t)for(let i=0;i<t-e.length;i++)e="0"+e;return e},f=(e,t,n=new Date)=>t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",h(n.getMonth()+1,2))).replace("%d",h(n.getDate(),2))).replace("%H",""+h(n.getHours(),2))).replace("%M",""+h(n.getMinutes(),2))).replace("%S",""+h(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(m[n.getMonth()]))).replace("%b",""+e.translate(d[n.getMonth()]))).replace("%A",""+e.translate(c[n.getDay()]))).replace("%a",""+e.translate(l[n.getDay()]))).replace("%%","%"),y=(e,t)=>{if(r(e)){const n=f(e,t);let o;o=/%[HMSIp]/.test(t)?f(e,"%Y-%m-%dT%H:%M"):f(e,"%Y-%m-%d");const r=e.dom.getParent(e.selection.getStart(),"time");r?((e,t,n,o)=>{const r=e.dom.create("time",{datetime:n},o);e.dom.replace(r,t),e.selection.select(r,!0),e.selection.collapse(!1)})(e,r,o,n):e.insertContent('<time datetime="'+o+'">'+n+"</time>")}else e.insertContent(f(e,t))};var v=tinymce.util.Tools.resolve("tinymce.util.Tools");const w=e=>{const t=o(e),r=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})((e=>{const t=o(e);return t.length>0?t[0]:n(e)})(e)),l=t=>e.execCommand("mceInsertDate",!1,t);e.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:e=>e===r.get(),fetch:n=>{n(v.map(t,(t=>({type:"choiceitem",text:f(e,t),value:t}))))},onAction:e=>{l(r.get())},onItemAction:(e,t)=>{r.set(t),l(t)}});const c=e=>()=>{r.set(e),l(e)};e.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>v.map(t,(t=>({type:"menuitem",text:f(e,t),onAction:c(t)})))})};e.add("insertdatetime",(e=>{(e=>{const t=e.options.register;t("insertdatetime_dateformat",{processor:"string",default:e.translate("%Y-%m-%d")}),t("insertdatetime_timeformat",{processor:"string",default:e.translate("%H:%M:%S")}),t("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),t("insertdatetime_element",{processor:"boolean",default:!1})})(e),(e=>{e.addCommand("mceInsertDate",((n,o)=>{y(e,null!=o?o:t(e))})),e.addCommand("mceInsertTime",((t,o)=>{y(e,null!=o?o:n(e))}))})(e),w(e)}))}()},689:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let t=0;const n=e=>{const time=(new Date).getTime(),n=Math.floor(1e9*Math.random());return t++,e+"_"+n+t+String(time)},option=e=>t=>t.options.get(e),o=option("help_tabs"),r=option("forced_plugins"),l=(c="string",e=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,(r=String).prototype.isPrototypeOf(n)||(null===(l=o.constructor)||void 0===l?void 0:l.name)===r.name)?"string":t;var n,o,r,l})(e)===c);var c;const d=(m=void 0,a=>m===a);var m;const h=(e=>t=>typeof t===e)("function"),f=(y=!1,()=>y);var y;class v{constructor(e,t){this.tag=e,this.value=t}static some(e){return new v(!0,e)}static none(){return v.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?v.some(e(this.value)):v.none()}bind(e){return this.tag?e(this.value):v.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:v.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(a=>null==a)(e)?v.none():v.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}v.singletonNone=new v(!1);const w=Array.prototype.slice,x=Array.prototype.indexOf,k=(e,t)=>((e,t)=>x.call(e,t))(e,t)>-1,map=(e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o},filter=(e,t)=>{const n=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];t(o,i)&&n.push(o)}return n},C=(e,t)=>((e,t,n)=>{for(let i=0,o=e.length;i<o;i++){const o=e[i];if(t(o,i))return v.some(o);if(n(o,i))break}return v.none()})(e,t,f),S=(e,t)=>{const n=w.call(e,0);return n.sort(t),n},T=Object.keys,_=Object.hasOwnProperty,A=(e,t)=>_.call(e,t);var O=tinymce.util.Tools.resolve("tinymce.Env");const D=source=>{const e=O.os.isMacOS()||O.os.isiOS(),t=e?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl ",access:"Shift + Alt "},n=source.split("+"),o=map(n,(e=>{const n=e.toLowerCase().trim();return A(t,n)?t[n]:e}));return e?o.join("").replace(/\s/,""):o.join("+")},E=[{shortcuts:["Meta + B"],action:"Bold"},{shortcuts:["Meta + I"],action:"Italic"},{shortcuts:["Meta + U"],action:"Underline"},{shortcuts:["Meta + A"],action:"Select all"},{shortcuts:["Meta + Y","Meta + Shift + Z"],action:"Redo"},{shortcuts:["Meta + Z"],action:"Undo"},{shortcuts:["Access + 1"],action:"Heading 1"},{shortcuts:["Access + 2"],action:"Heading 2"},{shortcuts:["Access + 3"],action:"Heading 3"},{shortcuts:["Access + 4"],action:"Heading 4"},{shortcuts:["Access + 5"],action:"Heading 5"},{shortcuts:["Access + 6"],action:"Heading 6"},{shortcuts:["Access + 7"],action:"Paragraph"},{shortcuts:["Access + 8"],action:"Div"},{shortcuts:["Access + 9"],action:"Address"},{shortcuts:["Alt + 0"],action:"Open help dialog"},{shortcuts:["Alt + F9"],action:"Focus to menubar"},{shortcuts:["Alt + F10"],action:"Focus to toolbar"},{shortcuts:["Alt + F11"],action:"Focus to element path"},{shortcuts:["Ctrl + F9"],action:"Focus to contextual toolbar"},{shortcuts:["Shift + Enter"],action:"Open popup menu for split buttons"},{shortcuts:["Meta + K"],action:"Insert link (if link plugin activated)"},{shortcuts:["Meta + S"],action:"Save (if save plugin activated)"},{shortcuts:["Meta + F"],action:"Find (if searchreplace plugin activated)"},{shortcuts:["Meta + Shift + F"],action:"Switch to or from fullscreen mode"}],N=()=>({name:"shortcuts",title:"Handy Shortcuts",items:[{type:"table",header:["Action","Shortcut"],cells:map(E,(e=>{const t=map(e.shortcuts,D).join(" or ");return[e.action,t]}))}]});var R=tinymce.util.Tools.resolve("tinymce.util.I18n");const M=map([{key:"advlist",name:"Advanced List"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"image",name:"Image"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"pagebreak",name:"Page Break"},{key:"preview",name:"Preview"},{key:"quickbars",name:"Quick Toolbars"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"table",name:"Table"},{key:"template",name:"Template"},{key:"textcolor",name:"Text Color"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"},{key:"a11ychecker",name:"Accessibility Checker",type:"premium"},{key:"advcode",name:"Advanced Code Editor",type:"premium"},{key:"advtable",name:"Advanced Tables",type:"premium"},{key:"casechange",name:"Case Change",type:"premium"},{key:"checklist",name:"Checklist",type:"premium"},{key:"editimage",name:"Enhanced Image Editing",type:"premium"},{key:"footnotes",name:"Footnotes",type:"premium"},{key:"typography",name:"Advanced Typography",type:"premium"},{key:"mediaembed",name:"Enhanced Media Embed",type:"premium",slug:"introduction-to-mediaembed"},{key:"export",name:"Export",type:"premium"},{key:"formatpainter",name:"Format Painter",type:"premium"},{key:"inlinecss",name:"Inline CSS",type:"premium"},{key:"linkchecker",name:"Link Checker",type:"premium"},{key:"mentions",name:"Mentions",type:"premium"},{key:"mergetags",name:"Merge Tags",type:"premium"},{key:"pageembed",name:"Page Embed",type:"premium"},{key:"permanentpen",name:"Permanent Pen",type:"premium"},{key:"powerpaste",name:"PowerPaste",type:"premium",slug:"introduction-to-powerpaste"},{key:"rtc",name:"Real-Time Collaboration",type:"premium",slug:"rtc-introduction"},{key:"tinymcespellchecker",name:"Spell Checker Pro",type:"premium",slug:"introduction-to-tiny-spellchecker"},{key:"autocorrect",name:"Spelling Autocorrect",type:"premium"},{key:"tableofcontents",name:"Table of Contents",type:"premium"},{key:"tinycomments",name:"Tiny Comments",type:"premium",slug:"introduction-to-tiny-comments"},{key:"tinydrive",name:"Tiny Drive",type:"premium",slug:"tinydrive-introduction"}],(e=>({...e,type:e.type||"opensource",slug:e.slug||e.key}))),F=e=>{const t=p=>`<a href="${p.url}" target="_blank" rel="noopener">${p.name}</a>`,n=(e,n)=>C(M,(e=>e.key===n)).fold((()=>((e,n)=>{const o=e.plugins[n].getMetadata;if(h(o)){const e=o();return{name:e.name,html:t(e)}}return{name:n,html:n}})(e,n)),(e=>{const n="premium"===e.type?`${e.name}*`:e.name;return{name:n,html:t({name:n,url:`https://www.tiny.cloud/docs/tinymce/6/${e.slug}/`})}})),o=e=>{const t=(e=>{const t=T(e.plugins),n=r(e);return d(n)?t:filter(t,(e=>!k(n,e)))})(e),o=S(map(t,(t=>n(e,t))),((e,t)=>e.name.localeCompare(t.name))),l=map(o,(e=>"<li>"+e.html+"</li>")),c=l.length,m=l.join("");return"<p><b>"+R.translate(["Plugins installed ({0}):",c])+"</b></p><ul>"+m+"</ul>"},l={type:"htmlpanel",presets:"document",html:[(e=>null==e?"":'<div data-mce-tabstop="1" tabindex="-1">'+o(e)+"</div>")(e),(()=>{const e=filter(M,(({type:e})=>"premium"===e)),t=S(map(e,(p=>p.name)),((e,t)=>e.localeCompare(t))),n=map(t,(e=>`<li>${e}</li>`)).join("");return'<div data-mce-tabstop="1" tabindex="-1"><p><b>'+R.translate("Premium plugins:")+"</b></p><ul>"+n+'<li class="tox-help__more-link" "><a href="https://www.tiny.cloud/pricing/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" rel="noopener" target="_blank">'+R.translate("Learn more...")+"</a></li></ul></div>"})()].join("")};return{name:"plugins",title:"Plugins",items:[l]}};var P=tinymce.util.Tools.resolve("tinymce.EditorManager");const I=(e,t)=>{const r=N(),nav={name:"keyboardnav",title:"Keyboard Navigation",items:[{type:"htmlpanel",presets:"document",html:"<h1>Editor UI keyboard navigation</h1>\n\n<h2>Activating keyboard navigation</h2>\n\n<p>The sections of the outer UI of the editor - the menubar, toolbar, sidebar and footer - are all keyboard navigable. As such, there are multiple ways to activate keyboard navigation:</p>\n<ul>\n  <li>Focus the menubar: Alt + F9 (Windows) or &#x2325;F9 (MacOS)</li>\n  <li>Focus the toolbar: Alt + F10 (Windows) or &#x2325;F10 (MacOS)</li>\n  <li>Focus the footer: Alt + F11 (Windows) or &#x2325;F11 (MacOS)</li>\n</ul>\n\n<p>Focusing the menubar or toolbar will start keyboard navigation at the first item in the menubar or toolbar, which will be highlighted with a gray background. Focusing the footer will start keyboard navigation at the first item in the element path, which will be highlighted with an underline. </p>\n\n<h2>Moving between UI sections</h2>\n\n<p>When keyboard navigation is active, pressing tab will move the focus to the next major section of the UI, where applicable. These sections are:</p>\n<ul>\n  <li>the menubar</li>\n  <li>each group of the toolbar </li>\n  <li>the sidebar</li>\n  <li>the element path in the footer </li>\n  <li>the wordcount toggle button in the footer </li>\n  <li>the branding link in the footer </li>\n  <li>the editor resize handle in the footer</li>\n</ul>\n\n<p>Pressing shift + tab will move backwards through the same sections, except when moving from the footer to the toolbar. Focusing the element path then pressing shift + tab will move focus to the first toolbar group, not the last.</p>\n\n<h2>Moving within UI sections</h2>\n\n<p>Keyboard navigation within UI sections can usually be achieved using the left and right arrow keys. This includes:</p>\n<ul>\n  <li>moving between menus in the menubar</li>\n  <li>moving between buttons in a toolbar group</li>\n  <li>moving between items in the element path</li>\n</ul>\n\n<p>In all these UI sections, keyboard navigation will cycle within the section. For example, focusing the last button in a toolbar group then pressing right arrow will move focus to the first item in the same toolbar group. </p>\n\n<h1>Executing buttons</h1>\n\n<p>To execute a button, navigate the selection to the desired button and hit space or enter.</p>\n\n<h1>Opening, navigating and closing menus</h1>\n\n<p>When focusing a menubar button or a toolbar button with a menu, pressing space, enter or down arrow will open the menu. When the menu opens the first item will be selected. To move up or down the menu, press the up or down arrow key respectively. This is the same for submenus, which can also be opened and closed using the left and right arrow keys.</p>\n\n<p>To close any active menu, hit the escape key. When a menu is closed the selection will be restored to its previous selection. This also works for closing submenus.</p>\n\n<h1>Context toolbars and menus</h1>\n\n<p>To focus an open context toolbar such as the table context toolbar, press Ctrl + F9 (Windows) or &#x2303;F9 (MacOS).</p>\n\n<p>Context toolbar navigation is the same as toolbar navigation, and context menu navigation is the same as standard menu navigation.</p>\n\n<h1>Dialog navigation</h1>\n\n<p>There are two types of dialog UIs in TinyMCE: tabbed dialogs and non-tabbed dialogs.</p>\n\n<p>When a non-tabbed dialog is opened, the first interactive component in the dialog will be focused. Users can navigate between interactive components by pressing tab. This includes any footer buttons. Navigation will cycle back to the first dialog component if tab is pressed while focusing the last component in the dialog. Pressing shift + tab will navigate backwards.</p>\n\n<p>When a tabbed dialog is opened, the first button in the tab menu is focused. Pressing tab will navigate to the first interactive component in that tab, and will cycle through the tab’s components, the footer buttons, then back to the tab button. To switch to another tab, focus the tab button for the current tab, then use the arrow keys to cycle through the tab buttons.</p>"}]},c=F(e),d=(()=>{var e,t;const n='<a href="https://www.tiny.cloud/docs/tinymce/6/changelog/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" rel="noopener" target="_blank">TinyMCE '+(e=P.majorVersion,t=P.minorVersion,(0===e.indexOf("@")?"X.X.X":e+"."+t)+"</a>");return{name:"versions",title:"Version",items:[{type:"htmlpanel",html:"<p>"+R.translate(["You are using {0}",n])+"</p>",presets:"document"}]}})(),m={[r.name]:r,[nav.name]:nav,[c.name]:c,[d.name]:d,...t.get()};return v.from(o(e)).fold((()=>(e=>{const t=T(e),n=t.indexOf("versions");return-1!==n&&(t.splice(n,1),t.push("versions")),{tabs:e,names:t}})(m)),(e=>((e,t)=>{const o={},r=map(e,(e=>{var r;if(l(e))return A(t,e)&&(o[e]=t[e]),e;{const t=null!==(r=e.name)&&void 0!==r?r:n("tab-name");return o[t]=e,t}}));return{tabs:o,names:r}})(e,m)))},L=(e,t)=>()=>{const{tabs:n,names:o}=I(e,t),body={type:"tabpanel",tabs:(e=>{const t=[],n=e=>{t.push(e)};for(let i=0;i<e.length;i++)e[i].each(n);return t})(map(o,(e=>{return A(t=n,o=e)?v.from(t[o]):v.none();var t,o})))};e.windowManager.open({title:"Help",size:"medium",body:body,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{}})};e.add("help",(e=>{const t=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})({}),o=(e=>({addTab:t=>{var o;const r=null!==(o=t.name)&&void 0!==o?o:n("tab-name"),l=e.get();l[r]=t,e.set(l)}}))(t);(e=>{(0,e.options.register)("help_tabs",{processor:"array"})})(e);const r=L(e,t);return((e,t)=>{e.ui.registry.addButton("help",{icon:"help",tooltip:"Help",onAction:t}),e.ui.registry.addMenuItem("help",{text:"Help",icon:"help",shortcut:"Alt+0",onAction:t})})(e,r),((e,t)=>{e.addCommand("mceHelp",t)})(e,r),e.shortcuts.add("Alt+0","Open help dialog","mceHelp"),o}))}()},690:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,n=t("string"),o=t("object"),r=t("array"),l=(c="function",e=>typeof e===c);var c,d=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),m=tinymce.util.Tools.resolve("tinymce.EditorManager"),h=tinymce.util.Tools.resolve("tinymce.Env"),f=tinymce.util.Tools.resolve("tinymce.util.Tools");const option=e=>t=>t.options.get(e),y=option("importcss_merge_classes"),v=option("importcss_exclusive"),w=option("importcss_selector_converter"),x=option("importcss_selector_filter"),k=option("importcss_groups"),C=option("importcss_append"),S=option("importcss_file_filter"),T=option("skin"),_=option("skin_url"),A=Array.prototype.push,O=(e,t)=>(e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!r(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);A.apply(t,e[i])}return t})(((e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o})(e,t)),D=/^\.(?:ephox|tiny-pageembed|mce)(?:[.-]+\w+)+$/,E=filter=>n(filter)?e=>-1!==e.indexOf(filter):filter instanceof RegExp?e=>filter.test(e):filter,N=(e,t,o)=>{const r=[],l={},c=(t,l)=>{let d,y=t.href;if(y=(e=>{const t=h.cacheSuffix;return n(e)&&(e=e.replace("?"+t,"").replace("&"+t,"")),e})(y),y&&(!o||o(y,l))&&!((e,t)=>{const n=T(e);if(n){const o=_(e),r=o?e.documentBaseURI.toAbsolute(o):m.baseURL+"/skins/ui/"+n,l=m.baseURL+"/skins/content/";return t===r+"/content"+(e.inline?".inline":"")+".min.css"||-1!==t.indexOf(l)}return!1})(e,y)){f.each(t.imports,(e=>{c(e,!0)}));try{d=t.cssRules||t.rules}catch(e){}f.each(d,(e=>{e.styleSheet?c(e.styleSheet,!0):(e=>e.selectorText)(e)&&f.each(e.selectorText.split(","),(e=>{r.push(f.trim(e))}))}))}};f.each(e.contentCSS,(e=>{l[e]=!0})),o||(o=(e,t)=>t||l[e]);try{f.each(t.styleSheets,(e=>{c(e)}))}catch(e){}return r},R=(e,t)=>{let n={};const o=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(!o)return;const r=o[1],l=o[2].substr(1).split(".").join(" "),c=f.makeMap("a,img");return o[1]?(n={title:t},e.schema.getTextBlockElements()[r]?n.block=r:e.schema.getBlockElements()[r]||c[r.toLowerCase()]?n.selector=r:n.inline=r):o[2]&&(n={inline:"span",title:t.substr(1),classes:l}),y(e)?n.classes=l:n.attributes={class:l},n},M=(e,t)=>null===t||v(e),F=e=>{e.on("init",(()=>{const t=(()=>{const e=[],t=[],n={};return{addItemToGroup:(e,o)=>{n[e]?n[e].push(o):(t.push(e),n[e]=[o])},addItem:t=>{e.push(t)},toFormats:()=>O(t,(g=>{const e=n[g];return 0===e.length?[]:[{title:g,items:e}]})).concat(e)}})(),n={},o=E(x(e)),r=(e=>f.map(e,(e=>f.extend({},e,{original:e,selectors:{},filter:E(e.filter)}))))(k(e)),l=(t,o)=>{if(((e,t,n,o)=>!(M(e,n)?t in o:t in n.selectors))(e,t,o,n)){((e,t,n,o)=>{M(e,n)?o[t]=!0:n.selectors[t]=!0})(e,t,o,n);const r=((e,t,n,o)=>{let r;const l=w(e);return r=o&&o.selector_converter?o.selector_converter:l||(()=>R(e,n)),r.call(t,n,o)})(e,e.plugins.importcss,t,o);if(r){const t=r.name||d.DOM.uniqueId();return e.formatter.register(t,r),{title:r.title,format:t}}}return null};f.each(N(e,e.getDoc(),E(S(e))),(e=>{if(!D.test(e)&&(!o||o(e))){const n=((e,t)=>f.grep(e,(e=>!e.filter||e.filter(t))))(r,e);if(n.length>0)f.each(n,(n=>{const o=l(e,n);o&&t.addItemToGroup(n.title,o)}));else{const n=l(e,null);n&&t.addItem(n)}}}));const c=t.toFormats();e.dispatch("addStyleModifications",{items:c,replace:!C(e)})}))};e.add("importcss",(e=>((e=>{const t=e.options.register,r=e=>n(e)||l(e)||o(e);t("importcss_merge_classes",{processor:"boolean",default:!0}),t("importcss_exclusive",{processor:"boolean",default:!0}),t("importcss_selector_converter",{processor:"function"}),t("importcss_selector_filter",{processor:r}),t("importcss_file_filter",{processor:r}),t("importcss_groups",{processor:"object[]"}),t("importcss_append",{processor:"boolean",default:!1})})(e),F(e),(e=>({convertSelectorToFormat:t=>R(e,t)}))(e))))}()},691:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>typeof t===e,n=(e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e)("string"),o=t("boolean"),r=a=>!(a=>null==a)(a),l=t("function"),c=t("number"),d=(m=!1,()=>m);var m;class h{constructor(e,t){this.tag=e,this.value=t}static some(e){return new h(!0,e)}static none(){return h.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?h.some(e(this.value)):h.none()}bind(e){return this.tag?e(this.value):h.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:h.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return r(e)?h.some(e):h.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}h.singletonNone=new h(!1);const f=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},y=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},v={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return y(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return y(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return y(t)},fromDom:y,fromPoint:(e,t,n)=>h.from(e.dom.elementFromPoint(t,n)).map(y)},w=(element,e)=>{const t=element.dom;if(1!==t.nodeType)return!1;{const n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}};"undefined"!=typeof window?window:Function("return this;")();const x=e=>element=>(element=>element.dom.nodeType)(element)===e,k=x(1),C=x(3),S=x(9),T=x(11),_=element=>((e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o})(element.dom.childNodes,v.fromDom),A=(element,e,t)=>{((e,t,r)=>{if(!(n(r)||o(r)||c(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")})(element.dom,e,t)},O=(element,e)=>{element.dom.removeAttribute(e)},D=l(Element.prototype.attachShadow)&&l(Node.prototype.getRootNode)?e=>v.fromDom(e.dom.getRootNode()):e=>{return S(e)?e:(element=e,v.fromDom(element.dom.ownerDocument));var element},E=e=>{const t=D(e);return T(n=t)&&r(n.dom.host)?h.some(t):h.none();var n},N=e=>v.fromDom(e.dom.host),R=element=>{const e=C(element)?element.dom.parentNode:element.dom;if(null==e||null===e.ownerDocument)return!1;const t=e.ownerDocument;return E(v.fromDom(e)).fold((()=>t.body.contains(e)),(n=R,o=N,a=>n(o(a))));var n,o},M=(e,t,n)=>((e,t,n)=>{let element=e.dom;const o=l(n)?n:d;for(;element.parentNode;){element=element.parentNode;const e=v.fromDom(element);if(t(e))return h.some(e);if(o(e))break}return h.none()})(e,(e=>w(e,t)),n),F=(e,t)=>(e=>void 0!==e.style&&l(e.style.getPropertyValue))(e)?e.style.getPropertyValue(t):"",P=element=>"rtl"===((element,e)=>{const t=element.dom,n=window.getComputedStyle(t).getPropertyValue(e);return""!==n||R(element)?n:F(t,e)})(element,"direction")?"rtl":"ltr",I=(e,t)=>((e,t)=>((e,t)=>{const n=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];t(o,i)&&n.push(o)}return n})(_(e),t))(e,(e=>w(e,t))),L=element=>(element=>h.from(element.dom.parentNode).map(v.fromDom))(element).filter(k),B=(j="li",e=>k(e)&&e.dom.nodeName.toLowerCase()===j);var j;const z=(e,t)=>{const n=e.selection.getSelectedBlocks();n.length>0&&(f(n,(e=>{const n=v.fromDom(e),o=B(n),r=((element,e)=>(e?M(element,"ol,ul"):h.some(element)).getOr(element))(n,o);L(r).each((e=>{if(P(e)!==t?A(r,"dir",t):P(r)!==t&&O(r,"dir"),o){const e=I(r,"li[dir]");f(e,(e=>O(e,"dir")))}}))})),e.nodeChanged())},$=(e,t)=>n=>{const o=e=>{const element=v.fromDom(e.element);n.setActive(P(element)===t)};return e.on("NodeChange",o),()=>e.off("NodeChange",o)};e.add("directionality",(e=>{(e=>{e.addCommand("mceDirectionLTR",(()=>{z(e,"ltr")})),e.addCommand("mceDirectionRTL",(()=>{z(e,"rtl")}))})(e),(e=>{e.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>e.execCommand("mceDirectionLTR"),onSetup:$(e,"ltr")}),e.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>e.execCommand("mceDirectionRTL"),onSetup:$(e,"rtl")})})(e)}))}()},692:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>typeof t===e,n=(e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e)("string"),o=(r=null,a=>r===a);var r;const l=t("boolean"),c=t("number");class d{constructor(e,t){this.tag=e,this.value=t}static some(e){return new d(!0,e)}static none(){return d.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?d.some(e(this.value)):d.none()}bind(e){return this.tag?e(this.value):d.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:d.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(a=>null==a)(e)?d.none():d.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}d.singletonNone=new d(!1);const m=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},h=Object.keys,f=(e,t)=>{const n=h(e);for(let o=0,r=n.length;o<r;o++){const i=n[o];t(e[i],i)}};"undefined"!=typeof window?window:Function("return this;")();const y=element=>element.dom.nodeValue,v=(e=>element=>(element=>element.dom.nodeType)(element)===e)(3),w=(element,e,t)=>{((e,t,o)=>{if(!(n(o)||l(o)||c(o)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,o+"")})(element.dom,e,t)},x=(element,e)=>{element.dom.removeAttribute(e)},k=(element,e)=>{const t=((element,e)=>{const t=element.dom.getAttribute(e);return null===t?void 0:t})(element,e);return void 0===t||""===t?[]:t.split(" ")},C=element=>void 0!==element.dom.classList,S=(element,e)=>((element,e,t)=>{const n=k(element,e).concat([t]);return w(element,e,n.join(" ")),!0})(element,"class",e),T=(element,e)=>((element,e,t)=>{const n=((e,t)=>{const n=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];t(o,i)&&n.push(o)}return n})(k(element,e),(e=>e!==t));return n.length>0?w(element,e,n.join(" ")):x(element,e),!1})(element,"class",e),_=element=>{const e=C(element)?element.dom.classList:(element=>k(element,"class"))(element);0===e.length&&x(element,"class")},A=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},O={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return A(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return A(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return A(t)},fromDom:A,fromPoint:(e,t,n)=>d.from(e.dom.elementFromPoint(t,n)).map(A)},D={" ":"nbsp","­":"shy"},E=(e,t)=>{let n="";return f(e,((e,t)=>{n+=t})),new RegExp("["+n+"]",t?"g":"")},N=E(D),R=E(D,!0),M=(e=>{let t="";return f(e,(e=>{t&&(t+=","),t+="span.mce-"+e})),t})(D),F="mce-nbsp",P=e=>'<span data-mce-bogus="1" class="mce-'+D[e]+'">'+e+"</span>",I=e=>{const t=y(e);return v(e)&&n(t)&&N.test(t)},L=(e,t)=>{let n=[];const o=((e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o})(e.dom.childNodes,O.fromDom);return m(o,(e=>{t(e)&&(n=n.concat([e])),n=n.concat(L(e,t))})),n},B=e=>"span"===e.nodeName.toLowerCase()&&e.classList.contains("mce-nbsp-wrap"),j=(e,t)=>{const n=e.dom,o=L(O.fromDom(t),I);m(o,(t=>{var o;const r=t.dom.parentNode;if(B(r))element=O.fromDom(r),l=F,C(element)?element.dom.classList.add(l):S(element,l);else{const r=n.encode(null!==(o=y(t))&&void 0!==o?o:"").replace(R,P),div=n.create("div",{},r);let l;for(;l=div.lastChild;)n.insertAfter(l,t.dom);e.dom.remove(t.dom)}var element,l}))},z=(e,t)=>{const n=e.dom.select(M,t);m(n,(t=>{B(t)?((element,e)=>{C(element)?element.dom.classList.remove(e):T(element,e);_(element)})(O.fromDom(t),F):e.dom.remove(t,!0)}))},$=e=>{const body=e.getBody(),t=e.selection.getBookmark();let n=((e,t)=>{for(;e.parentNode;){if(e.parentNode===t)return t;e=e.parentNode}})(e.selection.getNode(),body);n=void 0!==n?n:body,z(e,n),j(e,n),e.selection.moveToBookmark(t)},U=(e,t)=>{((e,t)=>{e.dispatch("VisualChars",{state:t})})(e,t.get());const body=e.getBody();!0===t.get()?j(e,body):z(e,body)},W=(e,t)=>{e.addCommand("mceVisualChars",(()=>{((e,t)=>{t.set(!t.get());const n=e.selection.getBookmark();U(e,t),e.selection.moveToBookmark(n)})(e,t)}))},H=(V="visualchars_default_state",e=>e.options.get(V));var V;const K=(e,t)=>{const n=((e,t)=>{let n=null;return{cancel:()=>{o(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{o(n)&&(n=setTimeout((()=>{n=null,e.apply(null,r)}),t))}}})((()=>{$(e)}),300);e.on("keydown",(o=>{!0===t.get()&&(13===o.keyCode?$(e):n.throttle())})),e.on("remove",n.cancel)},Z=(e,t)=>n=>{n.setActive(t.get());const o=e=>n.setActive(e.state);return e.on("VisualChars",o),()=>e.off("VisualChars",o)};e.add("visualchars",(e=>{(e=>{(0,e.options.register)("visualchars_default_state",{processor:"boolean",default:!1})})(e);const t=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})(H(e));return W(e,t),((e,t)=>{const n=()=>e.execCommand("mceVisualChars");e.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:n,onSetup:Z(e,t)}),e.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:n,onSetup:Z(e,t)})})(e,t),K(e,t),((e,t)=>{e.on("init",(()=>{U(e,t)}))})(e,t),(e=>({isEnabled:()=>e.get()}))(t)}))}()},693:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,n=t("string"),o=t("object"),r=t("array"),l=(c="function",e=>typeof e===c);var c;const d=(m=!1,()=>m);var m;var h=tinymce.util.Tools.resolve("tinymce.util.Tools");const option=e=>t=>t.options.get(e),f=e=>{const t=e.options.register;t("template_cdate_classes",{processor:"string",default:"cdate"}),t("template_mdate_classes",{processor:"string",default:"mdate"}),t("template_selected_content_classes",{processor:"string",default:"selcontent"}),t("template_preview_replace_values",{processor:"object"}),t("template_replace_values",{processor:"object"}),t("templates",{processor:e=>n(e)||((e,t)=>{if(r(e)){for(let i=0,n=e.length;i<n;++i)if(!t(e[i]))return!1;return!0}return!1})(e,o)||l(e),default:[]}),t("template_cdate_format",{processor:"string",default:e.translate("%Y-%m-%d")}),t("template_mdate_format",{processor:"string",default:e.translate("%Y-%m-%d")})},y=option("template_cdate_classes"),v=option("template_mdate_classes"),w=option("template_selected_content_classes"),x=option("template_preview_replace_values"),k=option("template_replace_values"),C=option("templates"),S=option("template_cdate_format"),T=option("template_mdate_format"),_=option("content_style"),A=option("content_css_cors"),O=option("body_class"),D=(e,t)=>{if((e=""+e).length<t)for(let i=0;i<t-e.length;i++)e="0"+e;return e},E=(e,t,n=new Date)=>{const o="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),r="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),l="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),c="January February March April May June July August September October November December".split(" ");return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",D(n.getMonth()+1,2))).replace("%d",D(n.getDate(),2))).replace("%H",""+D(n.getHours(),2))).replace("%M",""+D(n.getMinutes(),2))).replace("%S",""+D(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(c[n.getMonth()]))).replace("%b",""+e.translate(l[n.getMonth()]))).replace("%A",""+e.translate(r[n.getDay()]))).replace("%a",""+e.translate(o[n.getDay()]))).replace("%%","%")};class N{constructor(e,t){this.tag=e,this.value=t}static some(e){return new N(!0,e)}static none(){return N.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?N.some(e(this.value)):N.none()}bind(e){return this.tag?e(this.value):N.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:N.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(a=>null==a)(e)?N.none():N.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}N.singletonNone=new N(!1);const R=(e,t)=>((e,t,n)=>{for(let i=0,o=e.length;i<o;i++){const o=e[i];if(t(o,i))return N.some(o);if(n(o,i))break}return N.none()})(e,t,d),M=Object.hasOwnProperty,F=(e,t)=>M.call(e,t),P={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},I=html=>html.replace(/["'<>&]/g,(e=>{return(t=P,n=e,F(t,n)?N.from(t[n]):N.none()).getOr(e);var t,n})),L=(e,t,n)=>((e,t)=>{for(let i=0,n=e.length;i<n;i++)if(t(e[i],i))return!0;return!1})(n.split(/\s+/),(n=>e.hasClass(t,n))),B=(html,e)=>(h.each(e,((e,t)=>{l(e)&&(e=e(t)),html=html.replace(new RegExp("\\{\\$"+(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"\\}"),"g"),e)})),html),j=(e,t)=>{const n=e.dom,o=k(e);h.each(n.select("*",t),(e=>{h.each(o,((t,o)=>{n.hasClass(e,o)&&l(t)&&t(e)}))}))},z=(e,t,html)=>{const n=e.dom,o=e.selection.getContent();html=B(html,k(e));let r=n.create("div",{},html);const l=n.select(".mceTmpl",r);l&&l.length>0&&(r=n.create("div"),r.appendChild(l[0].cloneNode(!0))),h.each(n.select("*",r),(t=>{L(n,t,y(e))&&(t.innerHTML=E(e,S(e))),L(n,t,v(e))&&(t.innerHTML=E(e,T(e))),L(n,t,w(e))&&(t.innerHTML=o)})),j(e,r),e.execCommand("mceInsertContent",!1,r.innerHTML),e.addVisual()};var $=tinymce.util.Tools.resolve("tinymce.Env");const U=(e,t)=>{const n=e=>((e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o})(e,(e=>({text:e.text,value:e.text}))),o=(e,t)=>R(e,(e=>e.text===t)),r=t=>{e.windowManager.alert("Could not load the specified template.",(()=>t.focus("template")))},l=e=>e.value.url.fold((()=>Promise.resolve(e.value.content.getOr(""))),(e=>fetch(e).then((e=>e.ok?e.text():Promise.reject())))),c=(e,t)=>(n,c)=>{if("template"===c.name){const c=n.getData().template;o(e,c).each((e=>{n.block("Loading..."),l(e).then((o=>{t(n,e,o)})).catch((()=>{t(n,e,""),n.setEnabled("save",!1),r(n)}))}))}},d=t=>n=>{const data=n.getData();o(t,data.template).each((t=>{l(t).then((t=>{e.execCommand("mceInsertTemplate",!1,t),n.close()})).catch((()=>{n.setEnabled("save",!1),r(n)}))}))};(()=>{if(!t||0===t.length){const t=e.translate("No templates defined.");return e.notificationManager.open({text:t,type:"info"}),N.none()}return N.from(h.map(t,((template,e)=>{const t=e=>void 0!==e.url;return{selected:0===e,text:template.title,value:{url:t(template)?N.from(template.url):N.none(),content:t(template)?N.none():N.from(template.content),description:template.description}}})))})().each((t=>{const o=n(t),m=(e,n)=>({title:"Insert Template",size:"large",body:{type:"panel",items:e},initialData:n,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:d(t),onChange:c(t,f)}),f=(t,template,n)=>{const content=((e,html)=>{var t;if(-1===html.indexOf("<html>")){let n="";const o=null!==(t=_(e))&&void 0!==t?t:"",r=A(e)?' crossorigin="anonymous"':"";h.each(e.contentCSS,(t=>{n+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(t)+'"'+r+">"})),o&&(n+='<style type="text/css">'+o+"</style>");const l=O(e),c=e.dom.encode,d='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+($.os.isMacOS()||$.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",m=e.getBody().dir,f=m?' dir="'+c(m)+'"':"";html='<!DOCTYPE html><html><head><base href="'+c(e.documentBaseURI.getURI())+'">'+n+d+'</head><body class="'+c(l)+'"'+f+">"+html+"</body></html>"}return B(html,x(e))})(e,n),r=[{type:"selectbox",name:"template",label:"Templates",items:o},{type:"htmlpanel",html:`<p aria-live="polite">${I(template.value.description)}</p>`},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1,transparent:!1}],l={template:template.text,preview:content};t.unblock(),t.redial(m(r,l)),t.focus("template")},y=e.windowManager.open(m([],{template:"",preview:""}));y.block("Loading..."),l(t[0]).then((e=>{f(y,t[0],e)})).catch((()=>{f(y,t[0],""),y.setEnabled("save",!1),r(y)}))}))},W=e=>{e.addCommand("mceInsertTemplate",function(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}(z,e)),e.addCommand("mceTemplate",((e,t)=>()=>{const o=C(e);l(o)?o(t):n(o)?fetch(o).then((e=>{e.ok&&e.json().then(t)})):t(o)})(e,(e=>t=>{U(e,t)})(e)))};e.add("template",(e=>{f(e),(e=>{const t=()=>e.execCommand("mceTemplate");e.ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onAction:t}),e.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onAction:t})})(e),W(e),(e=>{e.on("PreProcess",(t=>{const n=e.dom,o=T(e);h.each(n.select("div",t.node),(t=>{n.hasClass(t,"mceTmpl")&&(h.each(n.select("*",t),(t=>{L(n,t,v(e))&&(t.innerHTML=E(e,o))})),j(e,t))}))}))})(e)}))}()},694:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=a=>!(a=>null==a)(a);class n{constructor(e,t){this.tag=e,this.value=t}static some(e){return new n(!0,e)}static none(){return n.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?n.some(e(this.value)):n.none()}bind(e){return this.tag?e(this.value):n.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:n.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return t(e)?n.some(e):n.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}n.singletonNone=new n(!1);const head=e=>((e,i)=>i>=0&&i<e.length?n.some(e[i]):n.none())(e,0);var o=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");const r="undefined"!=typeof window?window:Function("return this;")(),l=function(e,t,n){const o=window.Prism;window.Prism={manual:!0};var r=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,o={},r={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof l?new l(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var o,l;switch(n=n||{},r.util.type(t)){case"Object":if(l=r.util.objId(t),n[l])return n[l];for(var c in o={},n[l]=o,t)t.hasOwnProperty(c)&&(o[c]=e(t[c],n));return o;case"Array":return l=r.util.objId(t),n[l]?n[l]:(o=[],n[l]=o,t.forEach((function(t,i){o[i]=e(t,n)})),o);default:return t}},getLanguage:function(element){for(;element;){var e=t.exec(element.className);if(e)return e[1].toLowerCase();element=element.parentElement}return"none"},setLanguage:function(element,e){element.className=element.className.replace(RegExp(t,"gi"),""),element.classList.add("language-"+e)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(n){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(n.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var i in t)if(t[i].src==e)return t[i]}return null}},isActive:function(element,e,t){for(var n="no-"+e;element;){var o=element.classList;if(o.contains(e))return!0;if(o.contains(n))return!1;element=element.parentElement}return!!t}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(e,t){var n=r.util.clone(r.languages[e]);for(var o in t)n[o]=t[o];return n},insertBefore:function(e,t,n,o){var l=(o=o||r.languages)[e],c={};for(var d in l)if(l.hasOwnProperty(d)){if(d==t)for(var m in n)n.hasOwnProperty(m)&&(c[m]=n[m]);n.hasOwnProperty(d)||(c[d]=l[d])}var h=o[e];return o[e]=c,r.languages.DFS(r.languages,(function(t,n){n===h&&t!=e&&(this[t]=c)})),c},DFS:function e(t,n,o,l){l=l||{};var c=r.util.objId;for(var i in t)if(t.hasOwnProperty(i)){n.call(t,i,t[i],o||i);var d=t[i],m=r.util.type(d);"Object"!==m||l[c(d)]?"Array"!==m||l[c(d)]||(l[c(d)]=!0,e(d,n,i,l)):(l[c(d)]=!0,e(d,n,null,l))}}},plugins:{},highlightAll:function(e,t){r.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var o={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",o),o.elements=Array.prototype.slice.apply(o.container.querySelectorAll(o.selector)),r.hooks.run("before-all-elements-highlight",o);for(var element,i=0;element=o.elements[i++];)r.highlightElement(element,!0===t,o.callback)},highlightElement:function(element,t,n){var o=r.util.getLanguage(element),l=r.languages[o];r.util.setLanguage(element,o);var c=element.parentElement;c&&"pre"===c.nodeName.toLowerCase()&&r.util.setLanguage(c,o);var d={element:element,language:o,grammar:l,code:element.textContent};function m(e){d.highlightedCode=e,r.hooks.run("before-insert",d),d.element.innerHTML=d.highlightedCode,r.hooks.run("after-highlight",d),r.hooks.run("complete",d),n&&n.call(d.element)}if(r.hooks.run("before-sanity-check",d),(c=d.element.parentElement)&&"pre"===c.nodeName.toLowerCase()&&!c.hasAttribute("tabindex")&&c.setAttribute("tabindex","0"),!d.code)return r.hooks.run("complete",d),void(n&&n.call(d.element));if(r.hooks.run("before-highlight",d),d.grammar)if(t&&e.Worker){var h=new Worker(r.filename);h.onmessage=function(e){m(e.data)},h.postMessage(JSON.stringify({language:d.language,code:d.code,immediateClose:!0}))}else m(r.highlight(d.code,d.grammar,d.language));else m(r.util.encode(d.code))},highlight:function(text,e,t){var n={code:text,grammar:e,language:t};if(r.hooks.run("before-tokenize",n),!n.grammar)throw new Error('The language "'+n.language+'" has no grammar.');return n.tokens=r.tokenize(n.code,n.grammar),r.hooks.run("after-tokenize",n),l.stringify(r.util.encode(n.tokens),n.language)},tokenize:function(text,e){var t=e.rest;if(t){for(var n in t)e[n]=t[n];delete e.rest}var o=new m;return h(o,o.head,text),d(text,o,e,o.head,0),function(e){var t=[],n=e.head.next;for(;n!==e.tail;)t.push(n.value),n=n.next;return t}(o)},hooks:{all:{},add:function(e,t){var n=r.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=r.hooks.all[e];if(n&&n.length)for(var o,i=0;o=n[i++];)o(t)}},Token:l};function l(e,content,t,n){this.type=e,this.content=content,this.alias=t,this.length=0|(n||"").length}function c(pattern,e,text,t){pattern.lastIndex=e;var n=pattern.exec(text);if(n&&t&&n[1]){var o=n[1].length;n.index+=o,n[0]=n[0].slice(o)}return n}function d(text,e,t,n,o,m){for(var y in t)if(t.hasOwnProperty(y)&&t[y]){var v=t[y];v=Array.isArray(v)?v:[v];for(var w=0;w<v.length;++w){if(m&&m.cause==y+","+w)return;var x=v[w],k=x.inside,C=!!x.lookbehind,S=!!x.greedy,T=x.alias;if(S&&!x.pattern.global){var _=x.pattern.toString().match(/[imsuy]*$/)[0];x.pattern=RegExp(x.pattern.source,_+"g")}for(var pattern=x.pattern||x,A=n.next,O=o;A!==e.tail&&!(m&&O>=m.reach);O+=A.value.length,A=A.next){var D=A.value;if(e.length>text.length)return;if(!(D instanceof l)){var E,N=1;if(S){if(!(E=c(pattern,O,text,C))||E.index>=text.length)break;var R=E.index,M=E.index+E[0].length,p=O;for(p+=A.value.length;R>=p;)p+=(A=A.next).value.length;if(O=p-=A.value.length,A.value instanceof l)continue;for(var F=A;F!==e.tail&&(p<M||"string"==typeof F.value);F=F.next)N++,p+=F.value.length;N--,D=text.slice(O,p),E.index-=O}else if(!(E=c(pattern,0,D,C)))continue;R=E.index;var P=E[0],I=D.slice(0,R),L=D.slice(R+P.length),B=O+D.length;m&&B>m.reach&&(m.reach=B);var j=A.prev;if(I&&(j=h(e,j,I),O+=I.length),f(e,j,N),A=h(e,j,new l(y,k?r.tokenize(P,k):P,T,P)),L&&h(e,A,L),N>1){var z={cause:y+","+w,reach:B};d(text,e,t,A.prev,O,z),m&&z.reach>m.reach&&(m.reach=z.reach)}}}}}}function m(){var head={value:null,prev:null,next:null},e={value:null,prev:head,next:null};head.next=e,this.head=head,this.tail=e,this.length=0}function h(e,t,n){var o=t.next,r={value:n,prev:t,next:o};return t.next=r,o.prev=r,e.length++,r}function f(e,t,n){for(var o=t.next,i=0;i<n&&o!==e.tail;i++)o=o.next;t.next=o,o.prev=t,e.length-=i}if(e.Prism=r,l.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var s="";return t.forEach((function(t){s+=e(t,n)})),s}var o={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},l=t.alias;l&&(Array.isArray(l)?Array.prototype.push.apply(o.classes,l):o.classes.push(l)),r.hooks.run("wrap",o);var c="";for(var d in o.attributes)c+=" "+d+'="'+(o.attributes[d]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+c+">"+o.content+"</"+o.tag+">"},!e.document)return e.addEventListener?(r.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),o=n.language,code=n.code,l=n.immediateClose;e.postMessage(r.highlight(code,r.languages[o],o)),l&&e.close()}),!1),r):r;var script=r.util.currentScript();function y(){r.manual||r.highlightAll()}if(script&&(r.filename=script.src,script.hasAttribute("data-manual")&&(r.manual=!0)),!r.manual){var v=document.readyState;"loading"===v||"interactive"===v&&script&&script.defer?document.addEventListener("DOMContentLoaded",y):window.requestAnimationFrame?window.requestAnimationFrame(y):window.setTimeout(y,16)}return r}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});return void 0!==t&&t.exports&&(t.exports=r),void 0!==e&&(e.Prism=r),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},function(e){function t(e,t){return"___"+e.toUpperCase()+t+"___"}Object.defineProperties(e.languages["markup-templating"]={},{buildPlaceholders:{value:function(n,o,r,l){if(n.language===o){var c=n.tokenStack=[];n.code=n.code.replace(r,(function(e){if("function"==typeof l&&!l(e))return e;for(var r,i=c.length;-1!==n.code.indexOf(r=t(o,i));)++i;return c[i]=e,r})),n.grammar=e.languages.markup}}},tokenizePlaceholders:{value:function(n,o){if(n.language===o&&n.tokenStack){n.grammar=e.languages[o];var r=0,l=Object.keys(n.tokenStack);!function c(d){for(var i=0;i<d.length&&!(r>=l.length);i++){var m=d[i];if("string"==typeof m||m.content&&"string"==typeof m.content){var h=l[r],f=n.tokenStack[h],s="string"==typeof m?m:m.content,y=t(o,h),v=s.indexOf(y);if(v>-1){++r;var w=s.substring(0,v),x=new e.Token(o,e.tokenize(f,n.grammar),"language-"+o,f),k=s.substring(v+y.length),C=[];w&&C.push.apply(C,c([w])),C.push(x),k&&C.push.apply(C,c([k])),"string"==typeof m?d.splice.apply(d,[i,1].concat(C)):m.content=C}}else m.content&&c(m.content)}return d}(n.tokens)}}}})}(r),r.languages.c=r.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),r.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),r.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},r.languages.c.string],char:r.languages.c.char,comment:r.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:r.languages.c}}}}),r.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete r.languages.c.boolean,function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,(function(){return t.source}));e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,(function(){return t.source}))),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,(function(){return n}))+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])}(r),function(e){function t(pattern,e){return pattern.replace(/<<(\d+)>>/g,(function(t,n){return"(?:"+e[+n]+")"}))}function n(pattern,e,n){return RegExp(t(pattern,e),n||"")}function o(pattern,e){for(var i=0;i<e;i++)pattern=pattern.replace(/<<self>>/g,(function(){return"(?:"+pattern+")"}));return pattern.replace(/<<self>>/g,"[^\\s\\S]")}var r="bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",l="class enum interface record struct",c="add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",d="abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield";function m(e){return"\\b(?:"+e.trim().replace(/ /g,"|")+")\\b"}var h=m(l),f=RegExp(m(r+" "+l+" "+c+" "+d)),y=m(l+" "+c+" "+d),v=m(r+" "+l+" "+d),w=o(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),x=o(/\((?:[^()]|<<self>>)*\)/.source,2),k=/@?\b[A-Za-z_]\w*\b/.source,C=t(/<<0>>(?:\s*<<1>>)?/.source,[k,w]),S=t(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[y,C]),T=/\[\s*(?:,\s*)*\]/.source,_=t(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[S,T]),A=t(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[w,x,T]),O=t(/\(<<0>>+(?:,<<0>>+)+\)/.source,[A]),D=t(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[O,S,T]),E={keyword:f,punctuation:/[<>()?,.:[\]]/},N=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,R=/"(?:\\.|[^\\"\r\n])*"/.source,M=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;e.languages.csharp=e.languages.extend("clike",{string:[{pattern:n(/(^|[^$\\])<<0>>/.source,[M]),lookbehind:!0,greedy:!0},{pattern:n(/(^|[^@$\\])<<0>>/.source,[R]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:n(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[S]),lookbehind:!0,inside:E},{pattern:n(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[k,D]),lookbehind:!0,inside:E},{pattern:n(/(\busing\s+)<<0>>(?=\s*=)/.source,[k]),lookbehind:!0},{pattern:n(/(\b<<0>>\s+)<<1>>/.source,[h,C]),lookbehind:!0,inside:E},{pattern:n(/(\bcatch\s*\(\s*)<<0>>/.source,[S]),lookbehind:!0,inside:E},{pattern:n(/(\bwhere\s+)<<0>>/.source,[k]),lookbehind:!0},{pattern:n(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[_]),lookbehind:!0,inside:E},{pattern:n(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[D,v,k]),inside:E}],keyword:f,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),e.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),e.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:n(/([(,]\s*)<<0>>(?=\s*:)/.source,[k]),lookbehind:!0,alias:"punctuation"}}),e.languages.insertBefore("csharp","class-name",{namespace:{pattern:n(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[k]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:n(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[x]),lookbehind:!0,alias:"class-name",inside:E},"return-type":{pattern:n(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[D,S]),inside:E,alias:"class-name"},"constructor-invocation":{pattern:n(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[D]),lookbehind:!0,inside:E,alias:"class-name"},"generic-method":{pattern:n(/<<0>>\s*<<1>>(?=\s*\()/.source,[k,w]),inside:{function:n(/^<<0>>/.source,[k]),generic:{pattern:RegExp(w),alias:"class-name",inside:E}}},"type-list":{pattern:n(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[h,C,k,D,f.source,x,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:n(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[C,x]),lookbehind:!0,greedy:!0,inside:e.languages.csharp},keyword:f,"class-name":{pattern:RegExp(D),greedy:!0,inside:E},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var F=R+"|"+N,P=t(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[F]),I=o(t(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[P]),2),L=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,B=t(/<<0>>(?:\s*\(<<1>>*\))?/.source,[S,I]);e.languages.insertBefore("csharp","class-name",{attribute:{pattern:n(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[L,B]),lookbehind:!0,greedy:!0,inside:{target:{pattern:n(/^<<0>>(?=\s*:)/.source,[L]),alias:"keyword"},"attribute-arguments":{pattern:n(/\(<<0>>*\)/.source,[I]),inside:e.languages.csharp},"class-name":{pattern:RegExp(S),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var j=/:[^}\r\n]+/.source,z=o(t(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[P]),2),$=t(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[z,j]),U=o(t(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[F]),2),W=t(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[U,j]);function H(t,o){return{interpolation:{pattern:n(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[t]),lookbehind:!0,inside:{"format-string":{pattern:n(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[o,j]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:e.languages.csharp}}},string:/[\s\S]+/}}e.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:n(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[$]),lookbehind:!0,greedy:!0,inside:H($,z)},{pattern:n(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[W]),lookbehind:!0,greedy:!0,inside:H(W,U)}],char:{pattern:RegExp(N),greedy:!0}}),e.languages.dotnet=e.languages.cs=e.languages.csharp}(r),function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(r),function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,n=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,o={pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[o,{pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:o.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+n+/[A-Z]\w*\b/.source),lookbehind:!0,inside:o.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0}}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":o,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+n+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:o.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+n+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:o.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,(function(){return t.source}))),lookbehind:!0,inside:{punctuation:/\./}}})}(r),r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),r.languages.js=r.languages.javascript,r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};o["language-"+t]={pattern:/[\s\S]+/,inside:r.languages[t]};var l={};l[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:o},r.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(e,t){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:r.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,function(e){var t=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,n=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],o=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,r=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,l=/[{}\[\](),:;]/;e.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:t,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:n,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:o,operator:r,punctuation:l};var c={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:e.languages.php},d=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:c}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:c}}];e.languages.insertBefore("php","variable",{string:d,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:t,string:d,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:n,number:o,operator:r,punctuation:l}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),e.hooks.add("before-tokenize",(function(t){if(/<\?/.test(t.code)){e.languages["markup-templating"].buildPlaceholders(t,"php",/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g)}})),e.hooks.add("after-tokenize",(function(t){e.languages["markup-templating"].tokenizePlaceholders(t,"php")}))}(r),r.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},r.languages.python["string-interpolation"].inside.interpolation.inside.rest=r.languages.python,r.languages.py=r.languages.python,function(e){e.languages.ruby=e.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),e.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var t={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:e.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete e.languages.ruby.function;var n="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",o=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;e.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+n+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:t,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:t,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+o),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+o+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),e.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+n),greedy:!0,inside:{interpolation:t,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:t,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:t,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+n),greedy:!0,inside:{interpolation:t,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:t,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete e.languages.ruby.string,e.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),e.languages.rb=e.languages.ruby}(r),window.Prism=o,r}(void 0,void 0),option=e=>t=>t.options.get(e),c=option("codesample_languages"),d=option("codesample_global_prismjs"),m=e=>r.Prism&&d(e)?r.Prism:l,h=e=>t(e)&&"PRE"===e.nodeName&&-1!==e.className.indexOf("language-"),f=e=>{const t=e.selection?e.selection.getNode():null;return h(t)?n.some(t):n.none()},y=e=>{const t=(e=>{const t=c(e);return t||[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}]})(e),r=head(t).fold((l="",()=>l),(e=>e.value));var l;const d=((e,t)=>f(e).fold((()=>t),(e=>{const n=e.className.match(/language-(\w+)/);return n?n[1]:t})))(e,r),h=(e=>f(e).bind((e=>n.from(e.textContent))).getOr(""))(e);e.windowManager.open({title:"Insert/Edit Code Sample",size:"large",body:{type:"panel",items:[{type:"selectbox",name:"language",label:"Language",items:t},{type:"textarea",name:"code",label:"Code view"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{language:d,code:h},onSubmit:t=>{const data=t.getData();((e,t,code)=>{const n=e.dom;e.undoManager.transact((()=>{const r=f(e);return code=o.DOM.encode(code),r.fold((()=>{e.insertContent('<pre id="__new" class="language-'+t+'">'+code+"</pre>");const o=n.select("#__new")[0];n.setAttrib(o,"id",null),e.selection.select(o)}),(o=>{n.setAttrib(o,"class","language-"+t),o.innerHTML=code,m(e).highlightElement(o),e.selection.select(o)}))}))})(e,data.language,data.code),t.close()}})},v=(w=/^\s+|\s+$/g,s=>s.replace(w,""));var w,x=tinymce.util.Tools.resolve("tinymce.util.Tools");e.add("codesample",(e=>{(e=>{const t=e.options.register;t("codesample_languages",{processor:"object[]"}),t("codesample_global_prismjs",{processor:"boolean",default:!1})})(e),(e=>{e.on("PreProcess",(t=>{const n=e.dom,o=n.select("pre[contenteditable=false]",t.node);x.each(x.grep(o,h),(e=>{const code=e.textContent;let t;for(n.setAttrib(e,"class",v(n.getAttrib(e,"class"))),n.setAttrib(e,"contentEditable",null),n.setAttrib(e,"data-mce-highlighted",null);t=e.firstChild;)e.removeChild(t);n.add(e,"code").textContent=code}))})),e.on("SetContent",(()=>{const t=e.dom,n=x.grep(t.select("pre"),(e=>h(e)&&"true"!==t.getAttrib(e,"data-mce-highlighted")));n.length&&e.undoManager.transact((()=>{x.each(n,(n=>{var o;x.each(t.select("br",n),(n=>{t.replace(e.getDoc().createTextNode("\n"),n)})),n.innerHTML=t.encode(null!==(o=n.textContent)&&void 0!==o?o:""),m(e).highlightElement(n),t.setAttrib(n,"data-mce-highlighted",!0),n.className=v(n.className)}))}))})),e.on("PreInit",(()=>{e.parser.addNodeFilter("pre",(e=>{var t;for(let i=0,n=e.length;i<n;i++){const n=e[i];-1!==(null!==(t=n.attr("class"))&&void 0!==t?t:"").indexOf("language-")&&(n.attr("contenteditable","false"),n.attr("data-mce-highlighted","false"))}}))}))})(e),(e=>{const t=()=>e.execCommand("codesample");e.ui.registry.addToggleButton("codesample",{icon:"code-sample",tooltip:"Insert/edit code sample",onAction:t,onSetup:t=>{const n=()=>{t.setActive((e=>{const t=e.selection.getStart();return e.dom.is(t,'pre[class*="language-"]')})(e))};return e.on("NodeChange",n),()=>e.off("NodeChange",n)}}),e.ui.registry.addMenuItem("codesample",{text:"Code sample...",icon:"code-sample",onAction:t})})(e),(e=>{e.addCommand("codesample",(()=>{const t=e.selection.getNode();e.selection.isCollapsed()||h(t)?y(e):e.formatter.toggle("code")}))})(e),e.on("dblclick",(t=>{h(t.target)&&y(e)}))}))}()},695:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env");const option=e=>t=>t.options.get(e),n=option("pagebreak_separator"),o=option("pagebreak_split_block"),r="mce-pagebreak",l=e=>{const html=`<img src="${t.transparentSrc}" class="${r}" data-mce-resize="false" data-mce-placeholder />`;return e?`<p>${html}</p>`:html};e.add("pagebreak",(e=>{(e=>{const t=e.options.register;t("pagebreak_separator",{processor:"string",default:"\x3c!-- pagebreak --\x3e"}),t("pagebreak_split_block",{processor:"boolean",default:!1})})(e),(e=>{e.addCommand("mcePageBreak",(()=>{e.insertContent(l(o(e)))}))})(e),(e=>{const t=()=>e.execCommand("mcePageBreak");e.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:t}),e.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:t})})(e),(e=>{const t=n(e),c=()=>o(e),d=new RegExp(t.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,(a=>"\\"+a)),"gi");e.on("BeforeSetContent",(e=>{e.content=e.content.replace(d,l(c()))})),e.on("PreInit",(()=>{e.serializer.addNodeFilter("img",(n=>{let o,l,i=n.length;for(;i--;)if(o=n[i],l=o.attr("class"),l&&-1!==l.indexOf(r)){const n=o.parent;if(n&&e.schema.getBlockElements()[n.name]&&c()){n.type=3,n.value=t,n.raw=!0,o.remove();continue}o.type=3,o.value=t,o.raw=!0}}))}))})(e),(e=>{e.on("ResolveName",(t=>{"IMG"===t.target.nodeName&&e.dom.hasClass(t.target,r)&&(t.name="pagebreak")}))})(e)}))}()},696:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>typeof t===e,n=t("boolean"),o=t("number"),option=e=>t=>t.options.get(e),r=option("nonbreaking_force_tab"),l=option("nonbreaking_wrap"),c=(e,t)=>{let n="";for(let o=0;o<t;o++)n+=e;return n},d=(e,t)=>{const html=l(e)||e.plugins.visualchars?`<span class="${(e=>!!e.plugins.visualchars&&e.plugins.visualchars.isEnabled())(e)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap"}" contenteditable="false">${c("&nbsp;",t)}</span>`:c("&nbsp;",t);e.undoManager.transact((()=>e.insertContent(html)))};var m=tinymce.util.Tools.resolve("tinymce.util.VK");e.add("nonbreaking",(e=>{(e=>{const t=e.options.register;t("nonbreaking_force_tab",{processor:e=>n(e)?{value:e?3:0,valid:!0}:o(e)?{value:e,valid:!0}:{valid:!1,message:"Must be a boolean or number."},default:!1}),t("nonbreaking_wrap",{processor:"boolean",default:!0})})(e),(e=>{e.addCommand("mceNonBreaking",(()=>{d(e,1)}))})(e),(e=>{const t=()=>e.execCommand("mceNonBreaking");e.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:t}),e.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:t})})(e),(e=>{const t=r(e);t>0&&e.on("keydown",(n=>{if(n.keyCode===m.TAB&&!n.isDefaultPrevented()){if(n.shiftKey)return;n.preventDefault(),n.stopImmediatePropagation(),d(e,t)}}))})(e)}))}()},697:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>a=>e===a,n=t(null),o=t(void 0),r=()=>{},l=(e=>()=>e)(!1);class c{constructor(e,t){this.tag=e,this.value=t}static some(e){return new c(!0,e)}static none(){return c.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?c.some(e(this.value)):c.none()}bind(e){return this.tag?e(this.value):c.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:c.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(a=>null==a)(e)?c.none():c.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}c.singletonNone=new c(!1);const d=(e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o},m=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},h=Object.keys,f=Object.hasOwnProperty,y=(e,t)=>{const n=h(e);for(let o=0,r=n.length;o<r;o++){const i=n[o];t(e[i],i)}},v=(e,t)=>{const n={};return y(e,((e,i)=>{const o=t(e,i);n[o.k]=o.v})),n},w=(e,t)=>f.call(e,t),x=(k=(e,t)=>t,(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const e in o)w(o,e)&&(t[e]=k(t[e],o[e]))}return t});var k;const C=()=>{const e=(e=>{const t=m(c.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(c.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:s=>{n(),t.set(c.some(s))}}})(r);return{...e,on:t=>e.get().each(t)}},S=(e,t,n=0,r)=>{const l=e.indexOf(t,n);return-1!==l&&(!!o(r)||l+t.length<=r)};var T=tinymce.util.Tools.resolve("tinymce.Resource");const option=e=>t=>t.options.get(e),_=option("emoticons_database"),A=option("emoticons_database_url"),O=option("emoticons_database_id"),D=option("emoticons_append"),E=option("emoticons_images_url"),N="All",R={symbols:"Symbols",people:"People",animals_and_nature:"Animals and Nature",food_and_drink:"Food and Drink",activity:"Activity",travel_and_places:"Travel and Places",objects:"Objects",flags:"Flags",user:"User Defined"},M=(e,t)=>w(e,t)?e[t]:t,F=e=>{const t=D(e);return n=e=>({keywords:[],category:"user",...e}),v(t,((e,i)=>({k:i,v:n(e,i)})));var n},P=(e,t,n)=>{const o=C(),r=C(),l=E(e),d=e=>((e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t)(e.char,"<img",0)?e.char.replace(/src="([^"]+)"/,((e,t)=>`src="${l}${t}"`)):e.char;e.on("init",(()=>{T.load(n,t).then((t=>{const n=F(e);(e=>{const t={},n=[];y(e,((e,title)=>{const o={title:title,keywords:e.keywords,char:d(e),category:M(R,e.category)},r=void 0!==t[o.category]?t[o.category]:[];t[o.category]=r.concat([o]),n.push(o)})),o.set(t),r.set(n)})(x(t,n))}),(e=>{console.log(`Failed to load emojis: ${e}`),o.set({}),r.set([])}))}));const m=()=>r.get().getOr([]),f=()=>o.isSet()&&r.isSet();return{listCategories:()=>[N].concat(h(o.get().getOr({}))),hasLoaded:f,waitForLoad:()=>f()?Promise.resolve(!0):new Promise(((e,n)=>{let o=15;const r=setInterval((()=>{f()?(clearInterval(r),e(!0)):(o--,o<0&&(console.log("Could not load emojis from url: "+t),clearInterval(r),n(!1)))}),100)})),listAll:m,listCategory:e=>e===N?m():o.get().bind((t=>c.from(t[e]))).getOr([])}},I=(e,t)=>S(e.title.toLowerCase(),t)||((e,t)=>{for(let i=0,n=e.length;i<n;i++)if(t(e[i],i))return!0;return!1})(e.keywords,(e=>S(e.toLowerCase(),t))),L=(e,pattern,t)=>{const n=[],o=pattern.toLowerCase(),r=t.fold((()=>l),(e=>t=>t>=e));for(let i=0;i<e.length&&(0!==pattern.length&&!I(e[i],o)||(n.push({value:e[i].char,text:e[i].title,icon:e[i].char}),!r(n.length)));i++);return n},B="pattern",j=(e,t)=>{const o={pattern:"",results:L(t.listAll(),"",c.some(300))},r=m(N),l=((e,t)=>{let o=null;const r=()=>{n(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...n)=>{r(),o=setTimeout((()=>{o=null,e.apply(null,n)}),t)}}})((e=>{(e=>{const n=e.getData(),o=r.get(),l=t.listCategory(o),d=L(l,n[B],o===N?c.some(300):c.none());e.setData({results:d})})(e)}),200),h={label:"Search",type:"input",name:B},f={type:"collection",name:"results"},y=()=>({title:"Emojis",size:"normal",body:{type:"tabpanel",tabs:d(t.listCategories(),(e=>({title:e,name:e,items:[h,f]})))},initialData:o,onTabChange:(e,details)=>{r.set(details.newTabName),l.throttle(e)},onChange:l.throttle,onAction:(t,n)=>{"results"===n.name&&(((e,t)=>{e.insertContent(t)})(e,n.value),t.close())},buttons:[{type:"cancel",text:"Close",primary:!0}]}),v=e.windowManager.open(y());v.focus(B),t.hasLoaded()||(v.block("Loading emojis..."),t.waitForLoad().then((()=>{v.redial(y()),l.throttle(v),v.focus(B),v.unblock()})).catch((e=>{v.redial({title:"Emojis",body:{type:"panel",items:[{type:"alertbanner",level:"error",icon:"warning",text:"Could not load emojis"}]},buttons:[{type:"cancel",text:"Close",primary:!0}],initialData:{pattern:"",results:[]}}),v.focus(B),v.unblock()})))};e.add("emoticons",((e,t)=>{((e,t)=>{const n=e.options.register;n("emoticons_database",{processor:"string",default:"emojis"}),n("emoticons_database_url",{processor:"string",default:`${t}/js/${_(e)}${e.suffix}.js`}),n("emoticons_database_id",{processor:"string",default:"tinymce.plugins.emoticons"}),n("emoticons_append",{processor:"object",default:{}}),n("emoticons_images_url",{processor:"string",default:"https://twemoji.maxcdn.com/v/13.0.1/72x72/"})})(e,t);const n=A(e),o=O(e),r=P(e,n,o);((e,t)=>{e.addCommand("mceEmoticons",(()=>j(e,t)))})(e,r),(e=>{const t=()=>e.execCommand("mceEmoticons");e.ui.registry.addButton("emoticons",{tooltip:"Emojis",icon:"emoji",onAction:t}),e.ui.registry.addMenuItem("emoticons",{text:"Emojis...",icon:"emoji",onAction:t})})(e),((e,t)=>{e.ui.registry.addAutocompleter("emoticons",{trigger:":",columns:"auto",minChars:2,fetch:(pattern,e)=>t.waitForLoad().then((()=>{const n=t.listAll();return L(n,pattern,c.some(e))})),onAction:(t,n,o)=>{e.selection.setRng(n),e.insertContent(o),t.hide()}})})(e,r),(e=>{e.on("PreInit",(()=>{e.parser.addAttributeFilter("data-emoticon",(e=>{((e,t)=>{for(let i=0,n=e.length;i<n;i++)t(e[i],i)})(e,(e=>{e.attr("data-mce-resize","false"),e.attr("data-mce-placeholder","1")}))}))}))})(e)}))}()},698:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=(n="string",e=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,(r=String).prototype.isPrototypeOf(n)||(null===(l=o.constructor)||void 0===l?void 0:l.name)===r.name)?"string":t;var n,o,r,l})(e)===n);var n;const o=(r=void 0,a=>r===a);var r,l=tinymce.util.Tools.resolve("tinymce.util.Delay"),c=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),d=tinymce.util.Tools.resolve("tinymce.util.Tools");const m=e=>{const t=/^(\d+)([ms]?)$/.exec(e);return(t&&t[2]?{s:1e3,m:6e4}[t[2]]:1)*parseInt(e,10)},option=e=>t=>t.options.get(e),h=option("autosave_ask_before_unload"),f=option("autosave_restore_when_empty"),y=option("autosave_interval"),v=option("autosave_retention"),w=e=>{const t=document.location;return e.options.get("autosave_prefix").replace(/{path}/g,t.pathname).replace(/{query}/g,t.search).replace(/{hash}/g,t.hash).replace(/{id}/g,e.id)},x=(e,html)=>{if(o(html))return e.dom.isEmpty(e.getBody());{const t=d.trim(html);if(""===t)return!0;{const n=(new DOMParser).parseFromString(t,"text/html");return e.dom.isEmpty(n)}}},k=e=>{var t;const time=parseInt(null!==(t=c.getItem(w(e)+"time"))&&void 0!==t?t:"0",10)||0;return!((new Date).getTime()-time>v(e))||(C(e,!1),!1)},C=(e,t)=>{const n=w(e);c.removeItem(n+"draft"),c.removeItem(n+"time"),!1!==t&&(e=>{e.dispatch("RemoveDraft")})(e)},S=e=>{const t=w(e);!x(e)&&e.isDirty()&&(c.setItem(t+"draft",e.getContent({format:"raw",no_events:!0})),c.setItem(t+"time",(new Date).getTime().toString()),(e=>{e.dispatch("StoreDraft")})(e))},T=e=>{var t;const n=w(e);k(e)&&(e.setContent(null!==(t=c.getItem(n+"draft"))&&void 0!==t?t:"",{format:"raw"}),(e=>{e.dispatch("RestoreDraft")})(e))};var _=tinymce.util.Tools.resolve("tinymce.EditorManager");const A=e=>t=>{t.setEnabled(k(e));const n=()=>t.setEnabled(k(e));return e.on("StoreDraft RestoreDraft RemoveDraft",n),()=>e.off("StoreDraft RestoreDraft RemoveDraft",n)},O=e=>{(e=>{const t=y(e);l.setEditorInterval(e,(()=>{S(e)}),t)})(e);const t=()=>{(e=>{e.undoManager.transact((()=>{T(e),C(e)})),e.focus()})(e)};e.ui.registry.addButton("restoredraft",{tooltip:"Restore last draft",icon:"restore-draft",onAction:t,onSetup:A(e)}),e.ui.registry.addMenuItem("restoredraft",{text:"Restore last draft",icon:"restore-draft",onAction:t,onSetup:A(e)})};e.add("autosave",(e=>((e=>{const n=e.options.register,o=e=>{const n=t(e);return n?{value:m(e),valid:n}:{valid:!1,message:"Must be a string."}};n("autosave_ask_before_unload",{processor:"boolean",default:!0}),n("autosave_prefix",{processor:"string",default:"tinymce-autosave-{path}{query}{hash}-{id}-"}),n("autosave_restore_when_empty",{processor:"boolean",default:!1}),n("autosave_interval",{processor:o,default:"30s"}),n("autosave_retention",{processor:o,default:"20m"})})(e),(e=>{e.editorManager.on("BeforeUnload",(e=>{let t;d.each(_.get(),(e=>{e.plugins.autosave&&e.plugins.autosave.storeDraft(),!t&&e.isDirty()&&h(e)&&(t=e.translate("You have unsaved changes are you sure you want to navigate away?"))})),t&&(e.preventDefault(),e.returnValue=t)}))})(e),O(e),e.on("init",(()=>{f(e)&&e.dom.isEmpty(e.getBody())&&T(e)})),(e=>({hasDraft:()=>k(e),storeDraft:()=>S(e),restoreDraft:()=>T(e),removeDraft:t=>C(e,t),isEmpty:html=>x(e,html)}))(e))))}()},699:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=(n=null,a=>n===a);var n;const o=e=>e,r={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\ufeff￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"},l=0,c=1,d=2,m=3,h=4,f=5,y=6,v=7,w=8,x=9,k=10,C=11,S=12,T=13,_=[new RegExp(r.aletter),new RegExp(r.midnumlet),new RegExp(r.midletter),new RegExp(r.midnum),new RegExp(r.numeric),new RegExp(r.cr),new RegExp(r.lf),new RegExp(r.newline),new RegExp(r.extend),new RegExp(r.format),new RegExp(r.katakana),new RegExp(r.extendnumlet),new RegExp("@")],A=new RegExp("^"+r.punctuation+"$"),O=_,D=T,E=e=>{let t=D;const n=O.length;for(let o=0;o<n;++o){const n=O[o];if(n&&n.test(e)){t=o;break}}return t},N=e=>((e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o})(e,(e=>{const t={};return n=>{if(t[n])return t[n];{const o=e(n);return t[n]=o,o}}})(E)),R=(map,e)=>{const t=map[e],n=map[e+1];if(e<0||e>map.length-1&&0!==e)return!1;if(t===l&&n===l)return!1;const o=map[e+2];if(t===l&&(n===d||n===c||n===S)&&o===l)return!1;const r=map[e-1];return(t!==d&&t!==c&&n!==S||n!==l||r!==l)&&((t!==h&&t!==l||n!==h&&n!==l)&&((t!==m&&t!==c||n!==h||r!==h)&&((t!==h||n!==m&&n!==c||o!==h)&&(t!==w&&t!==x&&r!==w&&r!==x&&n!==w&&n!==x&&((t!==f||n!==y)&&(t===v||t===f||t===y||(n===v||n===f||n===y||(t!==k||n!==k)&&((n!==C||t!==l&&t!==h&&t!==k&&t!==C)&&((t!==C||n!==l&&n!==h&&n!==k)&&t!==S)))))))))},M=/^\s+$/,F=A,P=e=>"http"===e||"https"===e,I=(e,t)=>{const n=((e,t)=>{let i;for(i=t;i<e.length&&!M.test(e[i]);i++);return i})(e,t+1);return"://"===e.slice(t+1,n).join("").substr(0,3)?n:t},L=(e,t,n)=>{n={includeWhitespace:!1,includePunctuation:!1,...n};const o=[],r=[];for(let i=0;i<e.length;i++){const n=t(e[i]);"\ufeff"!==n&&(o.push(e[i]),r.push(n))}return((e,t,n,o)=>{const r=[];let l=[];for(let i=0;i<n.length;++i)if(l.push(e[i]),R(n,i)){const n=t[i];if((o.includeWhitespace||!M.test(n))&&(o.includePunctuation||!F.test(n))){const n=i-l.length+1,o=i+1,c=t.slice(n,o).join("");if(P(c)){const n=I(t,i),r=e.slice(o,n);Array.prototype.push.apply(l,r),i=n}r.push(l)}l=[]}return r})(o,r,N(r),n)};var B=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const j=(e,t)=>{const n=t.getBlockElements(),o=t.getVoidElements(),r=e=>n[e.nodeName]||o[e.nodeName],l=[];let c="";const d=new B(e,e);let m;for(;m=d.next();)3===m.nodeType?c+=m.data.replace(/\uFEFF/g,""):r(m)&&c.length&&(l.push(c),c="");return c.length&&l.push(c),l},z=e=>e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,$=(e,t)=>{const text=(text=>text.replace(/\u200B/g,""))(j(e,t).join("\n"));return L(text.split(""),o).length},U=(e,t)=>{const text=j(e,t).join("");return z(text)},W=(e,t)=>{const text=j(e,t).join("").replace(/\s/g,"");return z(text)},H=(e,t)=>()=>t(e.getBody(),e.schema),V=(e,t)=>()=>t(e.selection.getRng().cloneContents(),e.schema),K=e=>H(e,$),Z=(e,t)=>{e.addCommand("mceWordCount",(()=>((e,t)=>{e.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(t.body.getWordCount()),String(t.selection.getWordCount())],["Characters (no spaces)",String(t.body.getCharacterCountWithoutSpaces()),String(t.selection.getCharacterCountWithoutSpaces())],["Characters",String(t.body.getCharacterCount()),String(t.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})})(e,t)))};var G=tinymce.util.Tools.resolve("tinymce.util.Delay");const Y=(e,t)=>{((e,t)=>{e.dispatch("wordCountUpdate",{wordCount:{words:t.body.getWordCount(),characters:t.body.getCharacterCount(),charactersWithoutSpaces:t.body.getCharacterCountWithoutSpaces()}})})(e,t)},J=(e,n,o)=>{const r=((e,n)=>{let o=null;return{cancel:()=>{t(o)||(clearTimeout(o),o=null)},throttle:(...r)=>{t(o)&&(o=setTimeout((()=>{o=null,e.apply(null,r)}),n))}}})((()=>Y(e,n)),o);e.on("init",(()=>{Y(e,n),G.setEditorTimeout(e,(()=>{e.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",r.throttle)}),0),e.on("remove",r.cancel)}))};((t=300)=>{e.add("wordcount",(e=>{const n=(e=>({body:{getWordCount:K(e),getCharacterCount:H(e,U),getCharacterCountWithoutSpaces:H(e,W)},selection:{getWordCount:V(e,$),getCharacterCount:V(e,U),getCharacterCountWithoutSpaces:V(e,W)},getCount:K(e)}))(e);return Z(e,n),(e=>{const t=()=>e.execCommand("mceWordCount");e.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:t}),e.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:t})})(e),J(e,n,t),n}))})()}()}}]);