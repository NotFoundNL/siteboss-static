/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[97,6,8,9,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,57,58,59,60,61,65,66,78,119,120,121,122,123,124,125,126,127,128,129],Array(541).concat([function(e,t,n){"use strict";n.r(t);n(16),n(80),n(238);var r={props:{label:{type:String,required:!0},required:{type:Boolean,default:!1},cols:{type:Number,default:12},description:{type:String,default:""},internal:{type:String,required:!0}},setup:function(){}},o=n(63),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",{class:"col-".concat(e.cols)},[t("b-form-group",{attrs:{id:"input-group-".concat(e.internal),description:e.description}},[t("label",{attrs:{"label-for":"input-".concat(e.internal)}},[e._v("\n      "+e._s(e.label)),e.required?t("span",{staticClass:"required-star"},[e._v(" *")]):e._e()]),e._v(" "),e._t("default")],2)],1)}),[],!1,null,null,null);t.default=component.exports},,,function(e,t,n){e.exports={}},,function(e,t,n){"use strict";n.r(t);var r={},o=(n(567),n(63)),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal show",staticStyle:{display:"block"},attrs:{tabindex:"-1",role:"dialog"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.$emit("cancel")}}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[e._t("title")],2),e._v(" "),t("button",{staticClass:"close cross",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){return e.$emit("cancel")}}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])]),e._v(" "),t("div",{staticClass:"modal-full"},[e._t("full")],2),e._v(" "),e.$slots.full?e._e():t("div",{staticClass:"modal-body"},[e._t("body")],2),e._v(" "),e.$slots.full?e._e():t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return e.$emit("cancel")}}},[e._t("btnCancel",(function(){return[e._v("Cancel")]}))],2),e._v(" "),e._t("btnConfirm",(function(){return[t("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.$emit("confirm")}}},[e._v("\n            REPLACE ME: Slot=btnConfirm\n          ")])]}))],2)])])])}),[],!1,null,"762284e4",null);t.default=component.exports},function(e,t,n){e.exports={primary:"#5b3776"}},function(e,t,n){e.exports={}},function(e,t,n){e.exports={}},,,function(e,t,n){"use strict";n.r(t);var r=n(178),o=n(576),l={props:{boundariesElement:{type:String,default:"body"}},components:{},data:function(){return{opened:!1,contextData:{}}},directives:{ClickOutside:n.n(o).a},computed:{isVisible:function(){return this.opened}},methods:{open:function(e,t){var n=this;this.opened=!0,this.contextData=t,this.popper&&this.popper.destroy(),this.popper=new r.a(this.referenceObject(e),this.$refs.popper,{placement:"right-start",strategy:"fixed",modifiers:{preventOverflow:{boundariesElement:document.querySelector(this.boundariesElement)}}}),this.$nextTick((function(){n.popper.scheduleUpdate()}))},close:function(){this.opened=!1,this.contextData=null},referenceObject:function(e){var t=e.layerX,n=e.layerY,r=t+1,o=n+1;return{getBoundingClientRect:function(){return{left:t,top:n,right:r,bottom:o}},clientWidth:1,clientHeight:1}}},beforeDestroy:function(){void 0!==this.popper&&this.popper.destroy()}},c=(n(577),n(63)),component=Object(c.a)(l,(function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.isVisible,expression:"isVisible"},{name:"click-outside",rawName:"v-click-outside",value:e.close,expression:"close"}],ref:"popper",staticClass:"context-menu",attrs:{tabindex:"-1"},on:{"!contextmenu":function(e){e.preventDefault()}}},[t("ul",[e._t("default",null,{contextData:e.contextData})],2)])}),[],!1,null,"d4268622",null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);var r={},o=(n(578),n(63)),component=Object(o.a)(r,(function(){return(0,this._self._c)("li",{staticClass:"context-menu-item"},[this._t("default")],2)}),[],!1,null,"c02fd02c",null);t.default=component.exports},function(e,t,n){e.exports={}},function(e,t,n){e.exports={}},function(e,t,n){"use strict";var r=n(286).start,o=n(404);e.exports=o("trimStart")?function(){return r(this)}:"".trimStart},function(e,t,n){e.exports={primary:"#5b3776"}},function(e,t,n){e.exports={}},function(e,t,n){e.exports={}},function(e,t,n){e.exports={primary:"#5b3776"}},function(e,t,n){e.exports={}},function(e,t,n){e.exports={}},function(e,t,n){e.exports={}},function(e,t,n){e.exports={}},function(e,t,n){"use strict";n.r(t);n(16),n(80),n(28),n(148),n(33);var r=n(710),o=n(9),l={components:{BFormDatepicker:r.a},props:{internal:{type:String,required:!0},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:o.default,required:!0}},data:function(){return{value:"",editing:!1,displayValue:"",date:"",locale:this.$i18n.locale,onTouched:!0,mounting:!0,valid:!this.properties.required}},computed:{state:function(){return this.onTouched?null:this.valid}},watch:{displayValue:function(e){this.mounting||(this.onTouched=!1),this.editing&&this.checkValid(e)},date:function(e){if(this.mounting||(this.onTouched=!1),null===e)this.editing||(this.displayValue=this.$t("date.noDate")),this.value=null,this.valid=!this.properties.required;else{var t=e.getTimezoneOffset(),n=new Date(e.getTime()-60*t*1e3);this.valid=!0,this.value=n.toISOString().substring(0,10),this.editing||(this.displayValue=null===e?this.$t("date.noDate"):e.toLocaleDateString(this.locale,{weekday:"long",year:"numeric",month:"long",day:"numeric"}))}this.updateValues()}},beforeMount:function(){var e=this;this.data&&(this.date=""===this.data.value?null:new Date(this.data.value),this.updateValues()),this.$nextTick((function(){e.mounting=!1}))},created:function(){var e=this;this.bus.$on("setStatus",(function(t){e.onTouched=!1}))},methods:{setInputMode:function(){this.displayValue=null===this.date?"":this.date.toLocaleDateString(this.locale,{year:"numeric",month:"numeric",day:"numeric"}),this.editing=!0},checkValid:function(e){if(""===e||null==e)return this.valid=!0,void(this.value=null);var t=null;if("nl"===this.locale)t=/^(?:(?:31(\/|-)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/;else t=/^(?:(?:(?:0?[13578]|1[02])(\/|-)31)\1|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:0?2(\/|-)29\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:(?:0?[1-9])|(?:1[0-2]))(\/|-)(?:0?[1-9]|1\d|2[0-8])\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/;this.valid=t.test(e),this.valid&&this.updateDateField()},updateDateField:function(){var e=this.displayValue.match(/([0-9]{1,2})[/-]([0-9]{1,2})[/-]([0-9]{2,4})/);2===e[3].length&&(e[3]="20".concat(e[3]));var t=null;if("nl"===this.locale)t="".concat(e[3],"/").concat(e[2],"/").concat(e[1]);else t="".concat(e[3],"/").concat(e[1],"/").concat(e[2]);this.date=new Date(t)},updateValues:function(){this.$emit("updateValues",{field:this.internal,valid:this.valid,value:this.value})},translateToPicker:function(){if(this.editing=!1,""===this.displayValue)return this.date=null,this.valid=!this.properties.required,void this.updateValues();this.valid?(this.updateDateField(),this.valid=!0):this.valid=!1,this.updateValues()}}},c=n(63),component=Object(c.a)(l,(function(){var e,t=this,n=t._self._c;return n("CommonAutolayoutLabelWrapper",{attrs:{label:t.properties.title,description:t.properties.description,required:t.properties.required,internal:t.internal,cols:null!==(e=t.properties.cols)&&void 0!==e?e:12}},[t.valid||t.onTouched?t._e():n("div",{staticClass:"input-feedback",attrs:{id:"input-".concat(t.internal,"-feedback")}},[t._v("\n    "+t._s(null===t.date?t.$t("common.required"):t.$t("date.invalid"))+"\n  ")]),t._v(" "),n("b-input-group",{staticClass:"mb-3"},[n("b-input-group-prepend",[n("b-form-datepicker",t._b({attrs:{"button-only":"",left:"","show-decade-nav":!0,"hide-header":!0,state:t.state,locale:t.locale,disabled:t.properties.disabled,"value-as-date":"","aria-controls":"`input-${internal}`"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},"b-form-datepicker",t.$t("datepicker"),!1))],1),t._v(" "),n("b-form-input",{attrs:{id:"input-".concat(t.internal),placeholder:t.$t("datepicker.placeholder"),type:"text",autocomplete:"off",state:t.state,disabled:t.properties.disabled},on:{focus:function(e){return t.setInputMode()},blur:function(e){return t.translateToPicker()}},model:{value:t.displayValue,callback:function(e){t.displayValue=e},expression:"displayValue"}})],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CommonAutolayoutLabelWrapper:n(541).default})},function(e,t,n){"use strict";n.r(t);n(16),n(80),n(51),n(28);var r=n(711),o=n(9),l={components:{BFormTimepicker:r.a},props:{internal:{type:String,required:!0},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:o.default,required:!0}},data:function(){return{value:"",editing:!1,time:"",displayValue:"",onTouched:!0,mounting:!0,valid:!this.properties.required}},computed:{state:function(){return this.onTouched?null:this.valid}},watch:{displayValue:function(e){this.mounting||(this.onTouched=!1),this.editing&&this.checkValid(e)},time:function(e){this.mounting||(this.onTouched=!1),null===e?(this.editing||(this.displayValue=""),this.value=null,this.valid=!this.properties.required):(this.valid=!0,this.editing||(this.displayValue=this.time.slice(0,5))),this.value=this.time,this.updateValues()}},beforeMount:function(){var e=this;if(this.data){var t=""===this.data.value?null:this.data.value;this.displayValue=t?t.slice(0,5):"",this.time=t}this.$nextTick((function(){e.mounting=!1}))},created:function(){var e=this;this.bus.$on("setStatus",(function(t){e.onTouched=!1}))},mounted:function(){this.updateValues()},methods:{setInputMode:function(){this.displayValue=null===this.time?"":this.time.slice(0,5),this.editing=!0},checkValid:function(e){""===e||null==e?this.properties.required?this.valid=!1:(this.valid=!0,this.value=null):this.valid=/^([0-1]{0,1}[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/.test(e),this.valid&&!this.editing&&this.updateTimeField()},updateValues:function(){this.$emit("updateValues",{field:this.internal,valid:this.valid,value:this.value})},updateTimeField:function(){4===this.displayValue.length&&(this.displayValue="0".concat(this.displayValue)),this.time="".concat(this.displayValue,":00")},fixInput:function(){if(this.editing=!1,""===this.displayValue)return this.time=null,void(this.valid=!this.properties.required);this.valid?(this.updateTimeField(),this.valid=!0):this.valid=!1,this.updateValues()}}},c=n(63),component=Object(c.a)(l,(function(){var e,t=this,n=t._self._c;return n("CommonAutolayoutLabelWrapper",{attrs:{label:t.properties.title,description:t.properties.description,required:t.properties.required,internal:t.internal,cols:null!==(e=t.properties.cols)&&void 0!==e?e:12}},[t.valid||t.onTouched?t._e():n("div",{staticClass:"input-feedback",attrs:{id:"input-".concat(t.internal,"-feedback")}},[t._v("\n    "+t._s(t.$t("common.required"))+"\n  ")]),t._v(" "),n("b-input-group",{staticClass:"mb-3"},[n("b-input-group-prepend",[n("b-form-timepicker",t._b({attrs:{"button-only":"",left:"",state:t.state,id:"input-".concat(t.internal),locale:this.$i18n.locale,disabled:t.properties.disabled,"no-close-button":""},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}},"b-form-timepicker",t.$t("timepicker"),!1))],1),t._v(" "),n("b-form-input",{attrs:{id:"example-input",type:"text",placeholder:"HH:mm",maxlength:"5",state:t.state,disabled:t.properties.disabled},on:{focus:function(e){return t.setInputMode()},blur:function(e){return t.fixInput()}},model:{value:t.displayValue,callback:function(e){t.displayValue=e},expression:"displayValue"}})],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CommonAutolayoutLabelWrapper:n(541).default})},function(e,t,n){"use strict";n(544)},function(e,t,n){"use strict";var r=n(20),o=n(149).findIndex,l=n(176),c="findIndex",d=!0;c in[]&&Array(1)[c]((function(){d=!1})),r({target:"Array",proto:!0,forced:d},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),l(c)},function(e,t,n){e.exports={primary:"#5b3776"}},function(e,t,n){e.exports={primary:"#5b3776"}},function(e,t,n){e.exports={primary:"#5b3776"}},function(e,t,n){e.exports={primary:"#5b3776"}},function(e,t,n){e.exports={}},function(e,t,n){"use strict";n.r(t);var r={props:{title:{type:String,default:""},padding:{type:Boolean,default:!0}}},o=n(63),component=Object(o.a)(r,(function(){var e=this;return(0,e._self._c)("b-card",{class:{"cms-widget":!0,"no-card-padding":!e.padding,"w-100":!0},attrs:{header:e.title,"no-body":!1===e.padding}},[e._t("default")],2)}),[],!1,null,null,null);t.default=component.exports},function(e,t,n){"use strict";n(547)},function(e,t){function n(e){return"function"==typeof e.value||(console.warn("[Vue-click-outside:] provided expression",e.expression,"is not a function."),!1)}function r(e){return void 0!==e.componentInstance&&e.componentInstance.$isServer}e.exports={bind:function(e,t,o){if(!n(t))return;function l(t){if(o.context){var n=t.path||t.composedPath&&t.composedPath();n&&n.length>0&&n.unshift(t.target),e.contains(t.target)||function(e,t){if(!e||!t)return!1;for(var i=0,n=t.length;i<n;i++)try{if(e.contains(t[i]))return!0;if(t[i].contains(e))return!1}catch(e){return!1}return!1}(o.context.popupItem,n)||e.__vueClickOutside__.callback(t)}}e.__vueClickOutside__={handler:l,callback:t.value};const c="ontouchstart"in document.documentElement?"touchstart":"click";!r(o)&&document.addEventListener(c,l)},update:function(e,t){n(t)&&(e.__vueClickOutside__.callback=t.value)},unbind:function(e,t,n){const o="ontouchstart"in document.documentElement?"touchstart":"click";!r(n)&&e.__vueClickOutside__&&document.removeEventListener(o,e.__vueClickOutside__.handler),delete e.__vueClickOutside__}}},function(e,t,n){"use strict";n(548)},function(e,t,n){"use strict";n(549)},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n(17),n(16),n(13),n(10),n(18),n(14),n(19);var r=n(2),o=n(4),l=n(3),c=n(8),d=n(1),h=n(34),m=n(7),f=n(0),v=n(29),y=n(26),w=n(240),A=n(122);function x(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var C=Object(f.d)(Object(m.m)(O(O({},v.b),{},{disabled:Object(f.c)(d.g,!1),noRemove:Object(f.c)(d.g,!1),pill:Object(f.c)(d.g,!1),removeLabel:Object(f.c)(d.t,"Remove tag"),tag:Object(f.c)(d.t,"span"),title:Object(f.c)(d.t),variant:Object(f.c)(d.t,"secondary")})),l.W),_=Object(o.c)({name:l.W,mixins:[v.a,y.a],props:C,methods:{onRemove:function(e){var t=e.type,n=e.keyCode;this.disabled||"click"!==t&&("keydown"!==t||n!==h.b)||this.$emit(c.C)}},render:function(e){var title=this.title,t=this.tag,n=this.variant,r=this.pill,o=this.disabled,l=this.safeId(),c=this.safeId("_taglabel_"),d=e();this.noRemove||o||(d=e(A.a,{staticClass:"b-form-tag-remove",props:{ariaLabel:this.removeLabel},attrs:{"aria-controls":l,"aria-describedby":c,"aria-keyshortcuts":"Delete"},on:{click:this.onRemove,keydown:this.onRemove}}));var h=e("span",{staticClass:"b-form-tag-content flex-grow-1 text-truncate",attrs:{id:c}},this.normalizeSlot()||title);return e(w.a,{staticClass:"b-form-tag d-inline-flex align-items-baseline mw-100",class:{disabled:o},props:{tag:t,variant:n,pill:r},attrs:{id:l,title:title||null,"aria-labelledby":c}},[h,d])}})},,function(e,t,n){"use strict";n.r(t);var r=n(2);n(28),n(54),n(148),n(147),n(10),n(17),n(16),n(13),n(18),n(14),n(19),n(701),n(702),n(703),n(704),n(632),n(633),n(634),n(635),n(636),n(637),n(638),n(639),n(640),n(641),n(642),n(643),n(644),n(645),n(646),n(647),n(648),n(649),n(650),n(651),n(652),n(653),n(654),n(655),n(656),n(657),n(658);function o(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var c={components:{editor:n(705).a},filters:{preview:function(e,form){if("string"==typeof e||e instanceof String){return e.replace(/<span.*?data-field="[0-9]+".*?>.*?<\/span>/gi,(function(e){var t=e.match(/data-field="([0-9]+)"/),n=parseInt(t[1],10),label=form.fields.find((function(e){return e.id===n}));return void 0!==label?'<strong style="background-color: #bbffbb">'.concat(label.label,"</strong>"):'<strong style="color: red">ONBEKEND VELD, Corrigeer alvorens op te staan</strong>'}))}return""}},props:{value:{type:String,required:!0},editorSettings:{type:Object,default:function(){}},endPoint:{type:String,default:""}},computed:{localEditorSettings:function(){return l(l(l({height:400,model:"dom",branding:!1,menubar:!1,skin:!1,content_css:!1,relative_urls:!1,object_resizing:!0,document_base_url:null,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:"undo redo | removeformat styles | bold italic | link unlink | numlist bullist | image media | code | help",link_class_list:[{title:"Geen",value:""},{title:"Primaire knop",value:"b-button b-button--small"},{title:"Secondaire knop",value:"b-button b-button--secondary"}]},this.editorSettings),this.languageSettings()),{},{images_upload_handler:this.uploadHandler})}},data:function(){return{localValue:null,preview_errors:!1,status:""}},watch:{localValue:function(e){this.$emit("input",e)}},methods:{languageSettings:function(){return"nl"===this.$i18n.locale?{language:"nl",language_url:"tinymce/langs/nl.js"}:{}},uploadHandler:function(e,t){var n=this;return new Promise((function(t,r){var o=new FormData;o.append("file",e.blob(),e.filename()),n.$axios.post(n.endPoint,o).then((function(data){t(data.data.path)})).catch((function(e){r("Invalid JSON")}))}))}}},d=(n(575),n(63)),component=Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("div",[t("editor",{attrs:{"initial-value":e.value,init:e.localEditorSettings},model:{value:e.localValue,callback:function(t){e.localValue=t},expression:"localValue"}})],1)}),[],!1,null,null,null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);n(28),n(146),n(33),n(100),n(13),n(10),n(91),n(114),n(14);var r=n(709),o=n(579),l=n(707),c=n(542),d=n.n(c),h=n(9),m={components:{draggable:d.a,BFormTags:r.a,BFormTag:o.a,BAlert:l.a},props:{internal:{type:String,required:!0},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:h.default,required:!0}},data:function(){return{options:[],search:"",selectedOptions:[],failed:!1}},fetch:function(){var e=this,t=this.$route.params,n=t.slug,r=t.id;this.$axios.get("/table/".concat(n,"/").concat(r,"/").concat(this.internal,"/nl/")).then((function(t){e.options=t.data})).catch((function(t){e.failed=!0}))},computed:{criteria:function(){return this.search.trim().toLowerCase()},availableOptions:function(){var e=this,t=this.criteria;return t?this.options.filter((function(e){return e.label.toLowerCase().includes(t)})).filter((function(t){return!e.selectedOptions.includes(t.id)})):this.options.filter((function(t){return!e.selectedOptions.includes(t.id)}))},tagList:function(){var e=this,t=[];return this.selectedOptions.forEach((function(n){t.push(e.options.filter((function(e){return e.id===n}))[0])})),t}},mounted:function(){},methods:{onOptionClick:function(e){this.selectedOptions.push(e),this.search=""},removeTag:function(e){this.selectedOptions=this.selectedOptions.filter((function(t){return t!==e}))}}},f=n(63),component=Object(f.a)(m,(function(){var e=this,t=e._self._c;return t("b-form-group",{attrs:{label:"Tagged input using dropdown","label-for":"tags-with-dropdown"}},[t("b-alert",{attrs:{show:e.failed,variant:"danger"}},[e._v("\n    "+e._s(e.$t("autolayout.tags.fetch"))+"\n  ")]),e._v(" "),e.properties.tagssortable?t("draggable",{staticClass:"list-group",attrs:{list:e.selectedOptions}},e._l(e.tagList,(function(n){return t("div",{key:n.id,staticClass:"list-group-item"},[e._v("\n      "+e._s(n.label)+"\n    ")])})),0):e._e(),e._v(" "),t("b-form-tags",{staticClass:"mb-2",attrs:{id:"tags-with-dropdown","no-outer-focus":""},scopedSlots:e._u([{key:"default",fn:function(n){var r=n.disabled;return[e.tagList.length&&!e.properties.tagssortable?t("ul",{staticClass:"list-inline d-inline-block mb-2"},e._l(e.tagList,(function(n){return t("li",{key:n.id,staticClass:"list-inline-item"},[t("b-form-tag",{attrs:{title:n.label,disabled:r,variant:"primary"},on:{remove:function(t){return e.removeTag(n.id)}}})],1)})),0):e._e(),e._v(" "),t("b-dropdown",{attrs:{size:"sm",variant:"outline-secondary",block:"","menu-class":"w-100"},scopedSlots:e._u([{key:"button-content",fn:function(){return[t("Icon",{attrs:{icon:"magnifying-glass"}}),e._v(" "+e._s(e.$t("autolayout.tags.select"))+"\n        ")]},proxy:!0}],null,!0)},[e._v(" "),t("b-dropdown-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),function(){}.apply(null,arguments)}}},[t("b-form-group",{staticClass:"mb-0",attrs:{label:e.$t("autolayout.tags.search"),"label-for":"tag-search-input","label-cols-md":"auto","label-size":"sm",disabled:r}},[t("b-form-input",{attrs:{id:"tag-search-input",type:"search",size:"sm",autocomplete:"off"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),t("b-dropdown-divider"),e._v(" "),t("li",{staticClass:"tags-dropdown"},e._l(e.availableOptions,(function(option){return t("b-dropdown-item-button",{key:option.id,on:{click:function(t){return e.onOptionClick(option.id)}}},[e._v("\n            "+e._s(option.label)+"\n          ")])})),1),e._v(" "),0===e.availableOptions.length?t("b-dropdown-text",[e._v("\n          "+e._s(e.$t("autolayout.tags.no_results"))+"\n        ")]):e._e()],1)]}}])})],1)}),[],!1,null,null,null);t.default=component.exports},function(e,t,n){"undefined"!=typeof self&&self,e.exports=(()=>{var e={646:e=>{e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},713:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},860:e=>{e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},206:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},319:(e,t,n)=>{var r=n(646),i=n(860),s=n(206);e.exports=function(e){return r(e)||i(e)||s()}},8:e=>{function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{VueSelect:()=>y,default:()=>A,mixins:()=>w});var e=n(319),t=n.n(e),i=n(8),s=n.n(i),o=n(713),a=n.n(o);const l={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer:function(){this.autoscroll&&this.maybeAdjustScroll()},open:function(e){var t=this;this.autoscroll&&e&&this.$nextTick((function(){return t.maybeAdjustScroll()}))}},methods:{maybeAdjustScroll:function(){var e,t=(null===(e=this.$refs.dropdownMenu)||void 0===e?void 0:e.children[this.typeAheadPointer])||!1;if(t){var n=this.getDropdownViewport(),r=t.getBoundingClientRect(),i=r.top,s=r.bottom,o=r.height;if(i<n.top)return this.$refs.dropdownMenu.scrollTop=t.offsetTop;if(s>n.bottom)return this.$refs.dropdownMenu.scrollTop=t.offsetTop-(n.height-o)}},getDropdownViewport:function(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},c={data:function(){return{typeAheadPointer:-1}},watch:{filteredOptions:function(){for(var e=0;e<this.filteredOptions.length;e++)if(this.selectable(this.filteredOptions[e])){this.typeAheadPointer=e;break}},open:function(e){e&&this.typeAheadToLastSelected()},selectedValue:function(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp:function(){for(var e=this.typeAheadPointer-1;e>=0;e--)if(this.selectable(this.filteredOptions[e])){this.typeAheadPointer=e;break}},typeAheadDown:function(){for(var e=this.typeAheadPointer+1;e<this.filteredOptions.length;e++)if(this.selectable(this.filteredOptions[e])){this.typeAheadPointer=e;break}},typeAheadSelect:function(){var e=this.filteredOptions[this.typeAheadPointer];e&&this.selectable(e)&&this.select(e)},typeAheadToLastSelected:function(){var e=0!==this.selectedValue.length?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1;-1!==e&&(this.typeAheadPointer=e)}}},u={props:{loading:{type:Boolean,default:!1}},data:function(){return{mutableLoading:!1}},watch:{search:function(){this.$emit("search",this.search,this.toggleLoading)},loading:function(e){this.mutableLoading=e}},methods:{toggleLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.mutableLoading=null==e?!this.mutableLoading:e}}};function p(e,t,n,r,i,s,o,a){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):i&&(l=a?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,l):[l]}return{exports:e,options:c}}const d={Deselect:p({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"}},[t("path",{attrs:{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"}})])}),[],!1,null,null,null).exports,OpenIndicator:p({},(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"}},[t("path",{attrs:{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"}})])}),[],!1,null,null,null).exports},h={inserted:function(e,t,n){var r=n.context;if(r.appendToBody){var i=r.$refs.toggle.getBoundingClientRect(),s=i.height,o=i.top,a=i.left,l=i.width,c=window.scrollX||window.pageXOffset,u=window.scrollY||window.pageYOffset;e.unbindPosition=r.calculatePosition(e,r,{width:l+"px",left:c+a+"px",top:u+o+s+"px"}),document.body.appendChild(e)}},unbind:function(e,t,n){n.context.appendToBody&&(e.unbindPosition&&"function"==typeof e.unbindPosition&&e.unbindPosition(),e.parentNode&&e.parentNode.removeChild(e))}},m=function(e){var t={};return Object.keys(e).sort().forEach((function(n){t[n]=e[n]})),JSON.stringify(t)};var f=0;const g=function(){return++f};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const y=p({components:v({},d),directives:{appendToBody:h},mixins:[l,c,u],props:{value:{},components:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},deselectFromDropdown:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},transition:{type:String,default:"vs__fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},autocomplete:{type:String,default:"off"},reduce:{type:Function,default:function(e){return e}},selectable:{type:Function,default:function(e){return!0}},getOptionLabel:{type:Function,default:function(e){return"object"===s()(e)?e.hasOwnProperty(this.label)?e[this.label]:console.warn('[vue-select warn]: Label key "option.'.concat(this.label,'" does not')+" exist in options object ".concat(JSON.stringify(e),".\n")+"https://vue-select.org/api/props.html#getoptionlabel"):e}},getOptionKey:{type:Function,default:function(e){if("object"!==s()(e))return e;try{return e.hasOwnProperty("id")?e.id:m(e)}catch(t){return console.warn("[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.\nhttps://vue-select.org/api/props.html#getoptionkey",e,t)}}},onTab:{type:Function,default:function(){this.selectOnTab&&!this.isComposing&&this.typeAheadSelect()}},taggable:{type:Boolean,default:!1},tabindex:{type:Number,default:null},pushTags:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},filterBy:{type:Function,default:function(e,t,n){return(t||"").toLocaleLowerCase().indexOf(n.toLocaleLowerCase())>-1}},filter:{type:Function,default:function(e,t){var n=this;return e.filter((function(e){var r=n.getOptionLabel(e);return"number"==typeof r&&(r=r.toString()),n.filterBy(e,r,t)}))}},createOption:{type:Function,default:function(e){return"object"===s()(this.optionList[0])?a()({},this.label,e):e}},resetOnOptionsChange:{default:!1,validator:function(e){return["function","boolean"].includes(s()(e))}},clearSearchOnBlur:{type:Function,default:function(e){var t=e.clearSearchOnSelect,n=e.multiple;return t&&!n}},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},selectOnTab:{type:Boolean,default:!1},selectOnKeyCodes:{type:Array,default:function(){return[13]}},searchInputQuerySelector:{type:String,default:"[type=search]"},mapKeydown:{type:Function,default:function(e,t){return e}},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default:function(e,t,n){var r=n.width,i=n.top,s=n.left;e.style.top=i,e.style.left=s,e.style.width=r}},dropdownShouldOpen:{type:Function,default:function(e){var t=e.noDrop,n=e.open,r=e.mutableLoading;return!t&&n&&!r}},uid:{type:[String,Number],default:function(){return g()}}},data:function(){return{search:"",open:!1,isComposing:!1,pushedTags:[],_value:[]}},computed:{isTrackingValues:function(){return void 0===this.value||this.$options.propsData.hasOwnProperty("reduce")},selectedValue:function(){var e=this.value;return this.isTrackingValues&&(e=this.$data._value),null!=e&&""!==e?[].concat(e):[]},optionList:function(){return this.options.concat(this.pushTags?this.pushedTags:[])},searchEl:function(){return this.$scopedSlots.search?this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector):this.$refs.search},scope:function(){var e=this,t={search:this.search,loading:this.loading,searching:this.searching,filteredOptions:this.filteredOptions};return{search:{attributes:v({disabled:this.disabled,placeholder:this.searchPlaceholder,tabindex:this.tabindex,readonly:!this.searchable,id:this.inputId,"aria-autocomplete":"list","aria-labelledby":"vs".concat(this.uid,"__combobox"),"aria-controls":"vs".concat(this.uid,"__listbox"),ref:"search",type:"search",autocomplete:this.autocomplete,value:this.search},this.dropdownOpen&&this.filteredOptions[this.typeAheadPointer]?{"aria-activedescendant":"vs".concat(this.uid,"__option-").concat(this.typeAheadPointer)}:{}),events:{compositionstart:function(){return e.isComposing=!0},compositionend:function(){return e.isComposing=!1},keydown:this.onSearchKeyDown,keypress:this.onSearchKeyPress,blur:this.onSearchBlur,focus:this.onSearchFocus,input:function(t){return e.search=t.target.value}}},spinner:{loading:this.mutableLoading},noOptions:{search:this.search,loading:this.mutableLoading,searching:this.searching},openIndicator:{attributes:{ref:"openIndicator",role:"presentation",class:"vs__open-indicator"}},listHeader:t,listFooter:t,header:v({},t,{deselect:this.deselect}),footer:v({},t,{deselect:this.deselect})}},childComponents:function(){return v({},d,{},this.components)},stateClasses:function(){return{"vs--open":this.dropdownOpen,"vs--single":!this.multiple,"vs--multiple":this.multiple,"vs--searching":this.searching&&!this.noDrop,"vs--searchable":this.searchable&&!this.noDrop,"vs--unsearchable":!this.searchable,"vs--loading":this.mutableLoading,"vs--disabled":this.disabled}},searching:function(){return!!this.search},dropdownOpen:function(){return this.dropdownShouldOpen(this)},searchPlaceholder:function(){return this.isValueEmpty&&this.placeholder?this.placeholder:void 0},filteredOptions:function(){var e=[].concat(this.optionList);if(!this.filterable&&!this.taggable)return e;var t=this.search.length?this.filter(e,this.search,this):e;if(this.taggable&&this.search.length){var n=this.createOption(this.search);this.optionExists(n)||t.unshift(n)}return t},isValueEmpty:function(){return 0===this.selectedValue.length},showClearButton:function(){return!this.multiple&&this.clearable&&!this.open&&!this.isValueEmpty}},watch:{options:function(e,t){var n=this;!this.taggable&&("function"==typeof n.resetOnOptionsChange?n.resetOnOptionsChange(e,t,n.selectedValue):n.resetOnOptionsChange)&&this.clearSelection(),this.value&&this.isTrackingValues&&this.setInternalValueFromOptions(this.value)},value:{immediate:!0,handler:function(e){this.isTrackingValues&&this.setInternalValueFromOptions(e)}},multiple:function(){this.clearSelection()},open:function(e){this.$emit(e?"open":"close")},search:function(e){e.length&&(this.open=!0)}},created:function(){this.mutableLoading=this.loading,this.$on("option:created",this.pushTag)},methods:{setInternalValueFromOptions:function(e){var t=this;Array.isArray(e)?this.$data._value=e.map((function(e){return t.findOptionFromReducedValue(e)})):this.$data._value=this.findOptionFromReducedValue(e)},select:function(e){this.$emit("option:selecting",e),this.isOptionSelected(e)?this.deselectFromDropdown&&(this.clearable||this.multiple&&this.selectedValue.length>1)&&this.deselect(e):(this.taggable&&!this.optionExists(e)&&this.$emit("option:created",e),this.multiple&&(e=this.selectedValue.concat(e)),this.updateValue(e),this.$emit("option:selected",e)),this.onAfterSelect(e)},deselect:function(e){var t=this;this.$emit("option:deselecting",e),this.updateValue(this.selectedValue.filter((function(n){return!t.optionComparator(n,e)}))),this.$emit("option:deselected",e)},clearSelection:function(){this.updateValue(this.multiple?[]:null)},onAfterSelect:function(e){var t=this;this.closeOnSelect&&(this.open=!this.open),this.clearSearchOnSelect&&(this.search=""),this.noDrop&&this.multiple&&this.$nextTick((function(){return t.$refs.search.focus()}))},updateValue:function(e){var t=this;void 0===this.value&&(this.$data._value=e),null!==e&&(e=Array.isArray(e)?e.map((function(e){return t.reduce(e)})):this.reduce(e)),this.$emit("input",e)},toggleDropdown:function(e){var n=e.target!==this.searchEl;n&&e.preventDefault();var r=[].concat(t()(this.$refs.deselectButtons||[]),t()([this.$refs.clearButton]||!1));void 0===this.searchEl||r.filter(Boolean).some((function(t){return t.contains(e.target)||t===e.target}))?e.preventDefault():this.open&&n?this.searchEl.blur():this.disabled||(this.open=!0,this.searchEl.focus())},isOptionSelected:function(e){var t=this;return this.selectedValue.some((function(n){return t.optionComparator(n,e)}))},isOptionDeselectable:function(e){return this.isOptionSelected(e)&&this.deselectFromDropdown},optionComparator:function(e,t){return this.getOptionKey(e)===this.getOptionKey(t)},findOptionFromReducedValue:function(e){var n=this,r=[].concat(t()(this.options),t()(this.pushedTags)).filter((function(t){return JSON.stringify(n.reduce(t))===JSON.stringify(e)}));return 1===r.length?r[0]:r.find((function(e){return n.optionComparator(e,n.$data._value)}))||e},closeSearchOptions:function(){this.open=!1,this.$emit("search:blur")},maybeDeleteValue:function(){if(!this.searchEl.value.length&&this.selectedValue&&this.selectedValue.length&&this.clearable){var e=null;this.multiple&&(e=t()(this.selectedValue.slice(0,this.selectedValue.length-1))),this.updateValue(e)}},optionExists:function(e){var t=this;return this.optionList.some((function(n){return t.optionComparator(n,e)}))},normalizeOptionForSlot:function(e){return"object"===s()(e)?e:a()({},this.label,e)},pushTag:function(e){this.pushedTags.push(e)},onEscape:function(){this.search.length?this.search="":this.open=!1},onSearchBlur:function(){if(!this.mousedown||this.searching){var e=this.clearSearchOnSelect,t=this.multiple;return this.clearSearchOnBlur({clearSearchOnSelect:e,multiple:t})&&(this.search=""),void this.closeSearchOptions()}this.mousedown=!1,0!==this.search.length||0!==this.options.length||this.closeSearchOptions()},onSearchFocus:function(){this.open=!0,this.$emit("search:focus")},onMousedown:function(){this.mousedown=!0},onMouseUp:function(){this.mousedown=!1},onSearchKeyDown:function(e){var t=this,n=function(e){return e.preventDefault(),!t.isComposing&&t.typeAheadSelect()},r={8:function(e){return t.maybeDeleteValue()},9:function(e){return t.onTab()},27:function(e){return t.onEscape()},38:function(e){if(e.preventDefault(),t.open)return t.typeAheadUp();t.open=!0},40:function(e){if(e.preventDefault(),t.open)return t.typeAheadDown();t.open=!0}};this.selectOnKeyCodes.forEach((function(e){return r[e]=n}));var i=this.mapKeydown(r,this);if("function"==typeof i[e.keyCode])return i[e.keyCode](e)},onSearchKeyPress:function(e){this.open||32!==e.keyCode||(e.preventDefault(),this.open=!0)}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-select",class:e.stateClasses,attrs:{dir:e.dir}},[e._t("header",null,null,e.scope.header),e._v(" "),n("div",{ref:"toggle",staticClass:"vs__dropdown-toggle",attrs:{id:"vs"+e.uid+"__combobox",role:"combobox","aria-expanded":e.dropdownOpen.toString(),"aria-owns":"vs"+e.uid+"__listbox","aria-label":"Search for option"},on:{mousedown:function(t){return e.toggleDropdown(t)}}},[n("div",{ref:"selectedOptions",staticClass:"vs__selected-options"},[e._l(e.selectedValue,(function(t){return e._t("selected-option-container",[n("span",{key:e.getOptionKey(t),staticClass:"vs__selected"},[e._t("selected-option",[e._v("\n            "+e._s(e.getOptionLabel(t))+"\n          ")],null,e.normalizeOptionForSlot(t)),e._v(" "),e.multiple?n("button",{ref:"deselectButtons",refInFor:!0,staticClass:"vs__deselect",attrs:{disabled:e.disabled,type:"button",title:"Deselect "+e.getOptionLabel(t),"aria-label":"Deselect "+e.getOptionLabel(t)},on:{click:function(n){return e.deselect(t)}}},[n(e.childComponents.Deselect,{tag:"component"})],1):e._e()],2)],{option:e.normalizeOptionForSlot(t),deselect:e.deselect,multiple:e.multiple,disabled:e.disabled})})),e._v(" "),e._t("search",[n("input",e._g(e._b({staticClass:"vs__search"},"input",e.scope.search.attributes,!1),e.scope.search.events))],null,e.scope.search)],2),e._v(" "),n("div",{ref:"actions",staticClass:"vs__actions"},[n("button",{directives:[{name:"show",rawName:"v-show",value:e.showClearButton,expression:"showClearButton"}],ref:"clearButton",staticClass:"vs__clear",attrs:{disabled:e.disabled,type:"button",title:"Clear Selected","aria-label":"Clear Selected"},on:{click:e.clearSelection}},[n(e.childComponents.Deselect,{tag:"component"})],1),e._v(" "),e._t("open-indicator",[e.noDrop?e._e():n(e.childComponents.OpenIndicator,e._b({tag:"component"},"component",e.scope.openIndicator.attributes,!1))],null,e.scope.openIndicator),e._v(" "),e._t("spinner",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.mutableLoading,expression:"mutableLoading"}],staticClass:"vs__spinner"},[e._v("Loading...")])],null,e.scope.spinner)],2)]),e._v(" "),n("transition",{attrs:{name:e.transition}},[e.dropdownOpen?n("ul",{directives:[{name:"append-to-body",rawName:"v-append-to-body"}],key:"vs"+e.uid+"__listbox",ref:"dropdownMenu",staticClass:"vs__dropdown-menu",attrs:{id:"vs"+e.uid+"__listbox",role:"listbox",tabindex:"-1"},on:{mousedown:function(t){return t.preventDefault(),e.onMousedown(t)},mouseup:e.onMouseUp}},[e._t("list-header",null,null,e.scope.listHeader),e._v(" "),e._l(e.filteredOptions,(function(t,r){return n("li",{key:e.getOptionKey(t),staticClass:"vs__dropdown-option",class:{"vs__dropdown-option--deselect":e.isOptionDeselectable(t)&&r===e.typeAheadPointer,"vs__dropdown-option--selected":e.isOptionSelected(t),"vs__dropdown-option--highlight":r===e.typeAheadPointer,"vs__dropdown-option--disabled":!e.selectable(t)},attrs:{id:"vs"+e.uid+"__option-"+r,role:"option","aria-selected":r===e.typeAheadPointer||null},on:{mouseover:function(n){e.selectable(t)&&(e.typeAheadPointer=r)},click:function(n){n.preventDefault(),n.stopPropagation(),e.selectable(t)&&e.select(t)}}},[e._t("option",[e._v("\n          "+e._s(e.getOptionLabel(t))+"\n        ")],null,e.normalizeOptionForSlot(t))],2)})),e._v(" "),0===e.filteredOptions.length?n("li",{staticClass:"vs__no-options"},[e._t("no-options",[e._v("\n          Sorry, no matching options.\n        ")],null,e.scope.noOptions)],2):e._e(),e._v(" "),e._t("list-footer",null,null,e.scope.listFooter)],2):n("ul",{staticStyle:{display:"none",visibility:"hidden"},attrs:{id:"vs"+e.uid+"__listbox",role:"listbox"}})]),e._v(" "),e._t("footer",null,null,e.scope.footer)],2)}),[],!1,null,null,null).exports,w={ajax:u,pointer:c,pointerScroll:l},A=y})(),r})()},function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=89)}([function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(35),i=Function.prototype,o=i.call,s=r&&i.bind.bind(o,o);e.exports=r?s:function(e){return function(){return o.apply(e,arguments)}}},function(e,t,n){var r=n(59),i=r.all;e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},function(e,t,n){var r=n(4),i=n(43).f,o=n(30),s=n(11),u=n(33),a=n(95),l=n(66);e.exports=function(e,t){var n,c,d,p,h,m=e.target,f=e.global,g=e.stat;if(n=f?r:g?r[m]||u(m,{}):(r[m]||{}).prototype)for(c in t){if(p=t[c],d=e.dontCallGetSet?(h=i(n,c))&&h.value:n[c],!l(f?c:m+(g?".":"#")+c,e.forced)&&void 0!==d){if(typeof p==typeof d)continue;a(p,d)}(e.sham||d&&d.sham)&&o(p,"sham",!0),s(n,c,p,e)}}},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(t,n(139))},function(e,t,n){var r=n(0);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var r=n(8),i=String,o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not an object")}},function(e,t,n){var r=n(1),i=n(14),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},function(e,t,n){var r=n(2),i=n(59),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===o}:function(e){return"object"==typeof e?null!==e:r(e)}},function(e,t,n){var r=n(4),i=n(47),o=n(7),s=n(75),u=n(72),a=n(76),l=i("wks"),c=r.Symbol,d=c&&c.for,p=a?c:c&&c.withoutSetter||s;e.exports=function(e){if(!o(l,e)||!u&&"string"!=typeof l[e]){var t="Symbol."+e;u&&o(c,e)?l[e]=c[e]:l[e]=a&&d?d(t):p(t)}return l[e]}},function(e,t,n){var r=n(123);e.exports=function(e){return r(e.length)}},function(e,t,n){var r=n(2),i=n(13),o=n(104),s=n(33);e.exports=function(e,t,n,u){u||(u={});var a=u.enumerable,l=void 0!==u.name?u.name:t;if(r(n)&&o(n,l,u),u.global)a?e[t]=n:s(t,n);else{try{u.unsafe?e[t]&&(a=!0):delete e[t]}catch(e){}a?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return e}},function(e,t,n){var r=n(35),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},function(e,t,n){var r=n(5),i=n(62),o=n(77),s=n(6),u=n(50),a=TypeError,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor;t.f=r?o?function(e,t,n){if(s(e),t=u(t),s(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var r=c(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return l(e,t,n)}:l:function(e,t,n){if(s(e),t=u(t),s(n),i)try{return l(e,t,n)}catch(e){}if("get"in n||"set"in n)throw a("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(24),i=Object;e.exports=function(e){return i(r(e))}},function(e,t,n){var r=n(1),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},function(e,t,n){var r=n(0),i=n(9),o=n(23),s=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,n){var r=n(4),i=n(2),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e]):r[e]&&r[e][t]}},function(e,t,n){var r=n(15);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(39),i=n(24);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(29),i=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},function(e,t,n){var r=n(100),i=n(1),o=n(39),s=n(14),u=n(10),a=n(28),l=i([].push),c=function(e){var t=1==e,n=2==e,i=3==e,c=4==e,d=6==e,p=7==e,h=5==e||d;return function(m,f,g,v){for(var b,y,w=s(m),A=o(w),x=r(f,g),O=u(A),C=0,_=v||a,S=t?_(m,O):n||p?_(m,0):void 0;O>C;C++)if((h||C in A)&&(y=x(b=A[C],C,w),e))if(t)S[C]=y;else if(y)switch(e){case 3:return!0;case 5:return b;case 6:return C;case 2:l(S,b)}else switch(e){case 4:return!1;case 7:l(S,b)}return d?-1:i||c?c:S}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},function(e,t){var n=TypeError;e.exports=function(e){if(e>9007199254740991)throw n("Maximum allowed index exceeded");return e}},function(e,t,n){var r,i,o=n(4),s=n(97),u=o.process,a=o.Deno,l=u&&u.versions||a&&a.version,c=l&&l.v8;c&&(i=(r=c.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},function(e,t,n){var r=n(40),i=TypeError;e.exports=function(e){if(r(e))throw i("Can't call method on "+e);return e}},function(e,t,n){var r=n(2),i=n(74),o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not a function")}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){return 1},1)}))}},function(e,t,n){"use strict";var r=n(5),i=n(18),o=TypeError,s=Object.getOwnPropertyDescriptor,u=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=u?function(e,t){if(i(e)&&!s(e,"length").writable)throw o("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},function(e,t,n){var r=n(94);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},function(e,t,n){var r=n(51),i=n(2),o=n(15),u=n(9)("toStringTag"),a=Object,l="Arguments"==o(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(e){}};e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=a(e),u))?n:l?o(t):"Object"==(r=o(t))&&i(t.callee)?"Arguments":r}},function(e,t,n){var r=n(5),i=n(13),o=n(31);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var r=n(50),i=n(13),o=n(31);e.exports=function(e,t,n){var s=r(t);s in e?i.f(e,s,o(0,n)):e[s]=n}},function(e,t,n){var r=n(4),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var r=n(0);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},function(e,t,n){var r=n(5),i=n(7),o=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,u=i(o,"name"),a=u&&"something"===function(){}.name,l=u&&(!r||r&&s(o,"name").configurable);e.exports={EXISTS:u,PROPER:a,CONFIGURABLE:l}},function(e,t,n){var r=n(15),i=n(1);e.exports=function(e){if("Function"===r(e))return i(e)}},function(e,t){e.exports={}},function(e,t,n){var r=n(1),i=n(0),o=n(15),s=Object,u=r("".split);e.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?u(e,""):s(e)}:s},function(e,t){e.exports=function(e){return null==e}},function(e,t,n){var r=n(17),i=n(2),o=n(44),s=n(76),u=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&o(t.prototype,u(e))}},function(e,t,n){var r,i=n(6),o=n(107),s=n(34),u=n(38),a=n(101),l=n(60),c=n(70)("IE_PROTO"),p=function(){},d=function(e){return"<script>"+e+"<\/script>"},h=function(e){e.write(d("")),e.close();var t=e.parentWindow.Object;return e=null,t},m=function(){var e,t=l("iframe");return t.style.display="none",a.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(d("document.F=Object")),e.close(),e.F},g=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}g="undefined"!=typeof document?document.domain&&r?h(r):m():h(r);for(var e=s.length;e--;)delete g.prototype[s[e]];return g()};u[c]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(p.prototype=i(e),n=new p,p.prototype=null,n[c]=e):n=g(),void 0===t?n:o.f(n,t)}},function(e,t,n){var r=n(5),i=n(12),o=n(110),s=n(31),u=n(19),a=n(50),l=n(7),c=n(62),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=u(e),t=a(t),c)try{return d(e,t)}catch(e){}if(l(e,t))return s(!i(o.f,e,t),e[t])}},function(e,t,n){var r=n(1);e.exports=r({}.isPrototypeOf)},function(e,t,n){"use strict";var r=n(12),i=n(1),o=n(20),s=n(69),u=n(117),a=n(47),l=n(42),c=n(64).get,d=n(118),p=n(119),h=a("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,f=m,g=i("".charAt),v=i("".indexOf),b=i("".replace),y=i("".slice),w=function(){var e=/a/,t=/b*/g;return r(m,e,"a"),r(m,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),A=u.BROKEN_CARET,x=void 0!==/()??/.exec("")[1];(w||x||A||d||p)&&(f=function(e){var t,n,i,u,a,d,p,O=this,C=c(O),_=o(e),S=C.raw;if(S)return S.lastIndex=O.lastIndex,t=r(f,S,_),O.lastIndex=S.lastIndex,t;var k=C.groups,j=A&&O.sticky,T=r(s,O),I=O.source,D=0,E=_;if(j&&(T=b(T,"y",""),-1===v(T,"g")&&(T+="g"),E=y(_,O.lastIndex),O.lastIndex>0&&(!O.multiline||O.multiline&&"\n"!==g(_,O.lastIndex-1))&&(I="(?: "+I+")",E=" "+E,D++),n=new RegExp("^(?:"+I+")",T)),x&&(n=new RegExp("^"+I+"$(?!\\s)",T)),w&&(i=O.lastIndex),u=r(m,j?n:O,E),j?u?(u.input=y(u.input,D),u[0]=y(u[0],D),u.index=O.lastIndex,O.lastIndex+=u[0].length):O.lastIndex=0:w&&u&&(O.lastIndex=O.global?u.index+u[0].length:i),x&&u&&u.length>1&&r(h,u[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(u[a]=void 0)})),u&&k)for(u.groups=d=l(null),a=0;a<k.length;a++)d[(p=k[a])[0]]=u[p[1]];return u}),e.exports=f},function(e,t,n){var r=n(4),i=n(33),o=r["__core-js_shared__"]||i("__core-js_shared__",{});e.exports=o},function(e,t,n){var r=n(103),i=n(46);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.26.1",mode:r?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(e,t,n){var r=n(49),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},function(e,t,n){var r=n(105);e.exports=function(e){var t=+e;return t!=t||0===t?0:r(t)}},function(e,t,n){var r=n(73),i=n(41);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},function(e,t,n){var r={};r[n(9)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){"use strict";var r=n(5),i=n(4),o=n(1),s=n(66),u=n(11),a=n(7),l=n(102),c=n(44),d=n(41),p=n(73),h=n(0),m=n(67).f,f=n(43).f,g=n(13).f,v=n(122),b=n(71).trim,y=i.Number,w=y.prototype,A=i.TypeError,x=o("".slice),O=o("".charCodeAt),C=function(e){var t=p(e,"number");return"bigint"==typeof t?t:_(t)},_=function(e){var t,n,r,i,o,s,u,a,l=p(e,"number");if(d(l))throw A("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=b(l),43===(t=O(l,0))||45===t){if(88===(n=O(l,2))||120===n)return NaN}else if(48===t){switch(O(l,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(s=(o=x(l,2)).length,u=0;u<s;u++)if((a=O(o,u))<48||a>i)return NaN;return parseInt(o,r)}return+l};if(s("Number",!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var S,k=function(e){var t=arguments.length<1?0:y(C(e)),n=this;return c(w,n)&&h((function(){v(n)}))?l(Object(t),n,k):t},j=r?m(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),T=0;j.length>T;T++)a(y,S=j[T])&&!a(k,S)&&g(k,S,f(y,S));k.prototype=w,w.constructor=k,u(i,"Number",k,{constructor:!0})}},function(e,t,n){"use strict";var r=n(3),i=n(45);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(e,t,n){"use strict";function r(e){return!(0===e||(!Array.isArray(e)||0!==e.length)&&e)}function i(e){return function(){return!e.apply(void 0,arguments)}}function o(e,t){return void 0===e&&(e="undefined"),null===e&&(e="null"),!1===e&&(e="false"),-1!==e.toString().toLowerCase().indexOf(t.trim())}function s(e,t,n,r){return e.filter((function(e){return o(r(e,n),t)}))}function u(e){return e.filter((function(e){return!e.$isLabel}))}function a(e,t){return function(n){return n.reduce((function(n,r){return r[e]&&r[e].length?(n.push({$groupLabel:r[t],$isLabel:!0}),n.concat(r[e])):n}),[])}}function l(e,t,r,i,o){return function(u){return u.map((function(u){var a;if(!u[r])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];var l=s(u[r],e,t,o);return l.length?(a={},n.i(d.a)(a,i,u[i]),n.i(d.a)(a,r,l),a):[]}))}}var c=n(88),d=n(87),p=n(129),h=(n.n(p),n(82)),m=(n.n(h),n(81)),f=(n.n(m),n(83)),g=(n.n(f),n(84)),v=(n.n(g),n(128)),b=(n.n(v),n(135)),y=(n.n(b),n(127)),w=(n.n(y),n(132)),A=(n.n(w),n(131)),x=(n.n(A),n(125)),O=(n.n(x),n(130)),C=(n.n(O),n(52)),_=(n.n(C),n(53)),S=(n.n(_),n(85)),k=(n.n(S),n(134)),j=(n.n(k),n(80)),T=(n.n(j),n(79)),I=(n.n(T),n(133)),D=(n.n(I),n(126)),E=(n.n(D),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}});t.a={data:function(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},value:{type:null,default:function(){return[]}},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default:function(e,t){return r(e)?"":t?e[t]:e}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default:function(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted:function(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue:function(){return this.value||0===this.value?Array.isArray(this.value)?this.value:[this.value]:[]},filteredOptions:function(){var e=this.search||"",t=e.toLowerCase().trim(),n=this.options.concat();return n=this.internalSearch?this.groupValues?this.filterAndFlat(n,t,this.label):s(n,t,this.label,this.customLabel):this.groupValues?a(this.groupValues,this.groupLabel)(n):n,n=this.hideSelected?n.filter(i(this.isSelected)):n,this.taggable&&t.length&&!this.isExistingOption(t)&&("bottom"===this.tagPosition?n.push({isTag:!0,label:e}):n.unshift({isTag:!0,label:e})),n.slice(0,this.optionsLimit)},valueKeys:function(){var e=this;return this.trackBy?this.internalValue.map((function(t){return t[e.trackBy]})):this.internalValue},optionKeys:function(){var e=this;return(this.groupValues?this.flatAndStrip(this.options):this.options).map((function(t){return e.customLabel(t,e.label).toString().toLowerCase()}))},currentOptionLabel:function(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:function(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("input",this.multiple?[]:null))},search:function(){this.$emit("search-change",this.search,this.id)}},methods:{getValue:function(){return this.multiple?this.internalValue:0===this.internalValue.length?null:this.internalValue[0]},filterAndFlat:function(e,t,n){return E(l(t,n,this.groupValues,this.groupLabel,this.customLabel),a(this.groupValues,this.groupLabel))(e)},flatAndStrip:function(e){return E(a(this.groupValues,this.groupLabel),u)(e)},updateSearch:function(e){this.search=e},isExistingOption:function(e){return!!this.options&&this.optionKeys.indexOf(e)>-1},isSelected:function(e){var t=this.trackBy?e[this.trackBy]:e;return this.valueKeys.indexOf(t)>-1},isOptionDisabled:function(e){return!!e.$isDisabled},getOptionLabel:function(e){if(r(e))return"";if(e.isTag)return e.label;if(e.$isLabel)return e.$groupLabel;var t=this.customLabel(e,this.label);return r(t)?"":t},select:function(e,t){if(e.$isLabel&&this.groupSelect)this.selectGroup(e);else if(!(-1!==this.blockKeys.indexOf(t)||this.disabled||e.$isDisabled||e.$isLabel)&&(!this.max||!this.multiple||this.internalValue.length!==this.max)&&("Tab"!==t||this.pointerDirty)){if(e.isTag)this.$emit("tag",e.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(e))return void("Tab"!==t&&this.removeElement(e));this.multiple?this.$emit("input",this.internalValue.concat([e]),this.id):this.$emit("input",e,this.id),this.$emit("select",e,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup:function(e){var t=this,n=this.options.find((function(n){return n[t.groupLabel]===e.$groupLabel}));if(n){if(this.wholeGroupSelected(n)){this.$emit("remove",n[this.groupValues],this.id);var r=this.internalValue.filter((function(e){return-1===n[t.groupValues].indexOf(e)}));this.$emit("input",r,this.id)}else{var i=n[this.groupValues].filter((function(e){return!(t.isOptionDisabled(e)||t.isSelected(e))}));this.max&&i.splice(this.max-this.internalValue.length),this.$emit("select",i,this.id),this.$emit("input",this.internalValue.concat(i),this.id)}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected:function(e){var t=this;return e[this.groupValues].every((function(e){return t.isSelected(e)||t.isOptionDisabled(e)}))},wholeGroupDisabled:function(e){return e[this.groupValues].every(this.isOptionDisabled)},removeElement:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.disabled&&!e.$isDisabled){if(!this.allowEmpty&&this.internalValue.length<=1)return void this.deactivate();var r="object"===n.i(c.a)(e)?this.valueKeys.indexOf(e[this.trackBy]):this.valueKeys.indexOf(e);if(this.multiple){var i=this.internalValue.slice(0,r).concat(this.internalValue.slice(r+1));this.$emit("input",i,this.id)}else this.$emit("input",null,this.id);this.$emit("remove",e,this.id),this.closeOnSelect&&t&&this.deactivate()}},removeLastElement:function(){-1===this.blockKeys.indexOf("Delete")&&0===this.search.length&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate:function(){var e=this;this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&0===this.pointer&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick((function(){return e.$refs.search&&e.$refs.search.focus()}))):this.preventAutofocus||void 0!==this.$el&&this.$el.focus(),this.$emit("open",this.id))},deactivate:function(){this.isOpen&&(this.isOpen=!1,this.searchable?void 0!==this.$refs.search&&this.$refs.search.blur():void 0!==this.$el&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle:function(){this.isOpen?this.deactivate():this.activate()},adjustPosition:function(){if("undefined"!=typeof window){var e=this.$el.getBoundingClientRect().top,t=window.innerHeight-this.$el.getBoundingClientRect().bottom;t>this.maxHeight||t>e||"below"===this.openDirection||"bottom"===this.openDirection?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(t-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(e-40,this.maxHeight))}}}}},function(e,t,n){"use strict";var r=n(52),i=(n.n(r),n(53)),o=(n.n(i),n(85)),s=(n.n(o),n(82)),u=(n.n(s),n(81)),a=(n.n(u),n(83)),l=(n.n(a),n(84)),c=(n.n(l),n(79));n.n(c),t.a={data:function(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition:function(){return this.pointer*this.optionHeight},visibleElements:function(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions:function(){this.pointerAdjust()},isOpen:function(){this.pointerDirty=!1},pointer:function(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight:function(e,t){return{"multiselect__option--highlight":e===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(t)}},groupHighlight:function(e,t){var n=this;if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":t.$isLabel}];var r=this.options.find((function(e){return e[n.groupLabel]===t.$groupLabel}));return r&&!this.wholeGroupDisabled(r)?["multiselect__option--group",{"multiselect__option--highlight":e===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(r)}]:"multiselect__option--disabled"},addPointerElement:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Enter").key;this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],e),this.pointerReset()},pointerForward:function(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward:function(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset:function(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust:function(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet:function(e){this.pointer=e,this.pointerDirty=!0}}}},function(e,t,n){"use strict";var r=n(52),i=(n.n(r),n(80)),o=(n.n(i),n(54)),s=n(55);t.a={name:"vue-multiselect",mixins:[o.a,s.a],props:{name:{type:String,default:""},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:function(e){return"and ".concat(e," more")}},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{hasOptionGroup:function(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible:function(){return(this.singleValue||0===this.singleValue)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible:function(){return!(this.internalValue.length||this.searchable&&this.isOpen)},visibleValues:function(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue:function(){return this.internalValue[0]},deselectLabelText:function(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText:function(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText:function(){return this.showLabels?this.selectLabel:""},selectGroupLabelText:function(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText:function(){return this.showLabels?this.selectedLabel:""},inputStyle:function(){return this.searchable||this.multiple&&this.value&&this.value.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle:function(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove:function(){return"above"===this.openDirection||"top"===this.openDirection||"below"!==this.openDirection&&"bottom"!==this.openDirection&&"above"===this.preferredOpenDirection},showSearchInput:function(){return this.searchable&&(!this.hasSingleSelectedSlot||!this.visibleSingleValue&&0!==this.visibleSingleValue||this.isOpen)}}}},function(e,t,n){var r=n(19),i=n(48),o=n(10),s=function(e){return function(t,n,s){var u,a=r(t),l=o(a),c=i(s,l);if(e&&n!=n){for(;l>c;)if((u=a[c++])!=u)return!0}else for(;l>c;c++)if((e||c in a)&&a[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},function(e,t,n){"use strict";var r=n(74),i=TypeError;e.exports=function(e,t){if(!delete e[t])throw i("Cannot delete property "+r(t)+" of "+r(e))}},function(e,t){var n="object"==typeof document&&document.all,r=void 0===n&&void 0!==n;e.exports={all:n,IS_HTMLDDA:r}},function(e,t,n){var r=n(4),i=n(8),o=r.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},function(e,t,n){var r=n(25),i=n(40);e.exports=function(e,t){var n=e[t];return i(n)?void 0:r(n)}},function(e,t,n){var r=n(5),i=n(0),o=n(60);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(1),i=n(2),o=n(46),s=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource},function(e,t,n){var r,i,o,s=n(124),u=n(4),a=n(8),l=n(30),c=n(7),d=n(46),p=n(70),h=n(38),m=u.TypeError,f=u.WeakMap,g=function(e){return o(e)?i(e):r(e,{})},v=function(e){return function(t){var n;if(!a(t)||(n=i(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return n}};if(s||d.state){var b=d.state||(d.state=new f);b.get=b.get,b.has=b.has,b.set=b.set,r=function(e,t){if(b.has(e))throw m("Object already initialized");return t.facade=e,b.set(e,t),t},i=function(e){return b.get(e)||{}},o=function(e){return b.has(e)}}else{var y=p("state");h[y]=!0,r=function(e,t){if(c(e,y))throw m("Object already initialized");return t.facade=e,l(e,y,t),t},i=function(e){return c(e,y)?e[y]:{}},o=function(e){return c(e,y)}}e.exports={set:r,get:i,has:o,enforce:g,getterFor:v}},function(e,t,n){var r=n(1),i=n(0),o=n(2),s=n(29),u=n(17),a=n(63),l=function(){},c=[],d=u("Reflect","construct"),p=/^\s*(?:class|function)\b/,h=r(p.exec),m=!p.exec(l),f=function(e){if(!o(e))return!1;try{return d(l,c,e),!0}catch(e){return!1}},g=function(e){if(!o(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return m||!!h(p,a(e))}catch(e){return!0}};g.sham=!0,e.exports=!d||i((function(){var e;return f(f.call)||!f(Object)||!f((function(){e=!0}))||e}))?g:f},function(e,t,n){var r=n(0),i=n(2),o=/#|\.prototype\./,s=function(e,t){var n=a[u(e)];return n==c||n!=l&&(i(t)?r(t):!!t)},u=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},a=s.data={},l=s.NATIVE="N",c=s.POLYFILL="P";e.exports=s},function(e,t,n){var r=n(68),o=n(34).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(1),i=n(7),o=n(19),s=n(57).indexOf,u=n(38),a=r([].push);e.exports=function(e,t){var n,r=o(e),l=0,c=[];for(n in r)!i(u,n)&&i(r,n)&&a(c,n);for(;t.length>l;)i(r,n=t[l++])&&(~s(c,n)||a(c,n));return c}},function(e,t,n){"use strict";var r=n(6);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},function(e,t,n){var r=n(47),i=n(75),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t,n){var r=n(1),i=n(24),o=n(20),s=n(78),u=r("".replace),a="["+s+"]",l=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),d=function(e){return function(t){var n=o(i(t));return 1&e&&(n=u(n,l,"")),2&e&&(n=u(n,c,"")),n}};e.exports={start:d(1),end:d(2),trim:d(3)}},function(e,t,n){var r=n(23),i=n(0);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(e,t,n){var r=n(12),i=n(8),o=n(41),s=n(61),u=n(113),a=n(9),l=TypeError,c=a("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var n,a=s(e,c);if(a){if(void 0===t&&(t="default"),n=r(a,e,t),!i(n)||o(n))return n;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),u(e,t)}},function(e,t){var n=String;e.exports=function(e){try{return n(e)}catch(e){return"Object"}}},function(e,t,n){var r=n(1),i=0,o=Math.random(),s=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++i+o,36)}},function(e,t,n){var r=n(72);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r=n(5),i=n(0);e.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(e,t){e.exports="\t\n\v\f\r Â áš€â€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€\u2028\u2029\ufeff"},function(e,t,n){"use strict";var r=n(3),i=n(21).find,o=n(91),s=!0;"find"in[]&&Array(1).find((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("find")},function(e,t,n){"use strict";var r=n(3),i=n(18),o=n(65),s=n(8),u=n(48),a=n(10),l=n(19),c=n(32),d=n(9),p=n(16),h=n(93),m=p("slice"),f=d("species"),g=Array,v=Math.max;r({target:"Array",proto:!0,forced:!m},{slice:function(e,t){var n,r,d,p=l(this),m=a(p),b=u(e,m),y=u(void 0===t?m:t,m);if(i(p)&&(n=p.constructor,(o(n)&&(n===g||i(n.prototype))||s(n)&&null===(n=n[f]))&&(n=void 0),n===g||void 0===n))return h(p,b,y);for(r=new(void 0===n?g:n)(v(y-b,0)),d=0;b<y;b++,d++)b in p&&c(r,d,p[b]);return r.length=d,r}})},function(e,t,n){var r=n(1),i=n(11),o=Date.prototype,s=r(o.toString),u=r(o.getTime);"Invalid Date"!=String(new Date(NaN))&&i(o,"toString",(function(){var e=u(this);return e==e?s(this):"Invalid Date"}))},function(e,t,n){var r=n(11),i=n(98),o=Error.prototype;o.toString!==i&&r(o,"toString",i)},function(e,t,n){var r=n(51),i=n(11),o=n(112);r||i(Object.prototype,"toString",o,{unsafe:!0})},function(e,t,n){"use strict";var r=n(36).PROPER,i=n(11),o=n(6),s=n(20),u=n(0),a=n(116),l=RegExp.prototype.toString,c=u((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),p=r&&"toString"!=l.name;(c||p)&&i(RegExp.prototype,"toString",(function(){var e=o(this);return"/"+s(e.source)+"/"+s(a(e))}),{unsafe:!0})},function(e,t,n){"use strict";var r=n(12),i=n(99),o=n(6),s=n(40),u=n(24),a=n(120),l=n(20),c=n(61),d=n(115);i("search",(function(e,t,n){return[function(t){var n=u(this),i=s(t)?void 0:c(t,e);return i?r(i,t,n):new RegExp(t)[e](l(n))},function(e){var r=o(this),i=l(e),s=n(t,r,i);if(s.done)return s.value;var u=r.lastIndex;a(u,0)||(r.lastIndex=0);var c=d(r,i);return a(r.lastIndex,u)||(r.lastIndex=u),null===c?-1:c.index}]}))},function(e,t,n){"use strict";function r(e){n(136)}var i=n(56),o=n(138),u=r,a=n(137)(i.a,o.a,!1,u,null,null);t.a=a.exports},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=r},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(86),i=n(54),o=n(55);n.d(t,"Multiselect",(function(){return r.a})),n.d(t,"multiselectMixin",(function(){return i.a})),n.d(t,"pointerMixin",(function(){return o.a})),t.default=r.a},function(e,t,n){var r=n(2),i=String,o=TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw o("Can't set "+i(e)+" as a prototype")}},function(e,t,n){var r=n(9),i=n(42),o=n(13).f,s=r("unscopables"),u=Array.prototype;null==u[s]&&o(u,s,{configurable:!0,value:i(null)}),e.exports=function(e){u[s][e]=!0}},function(e,t,n){var r=n(25),i=n(14),o=n(39),s=n(10),u=TypeError,a=function(e){return function(t,n,a,l){r(n);var c=i(t),d=o(c),p=s(c),h=e?p-1:0,m=e?-1:1;if(a<2)for(;;){if(h in d){l=d[h],h+=m;break}if(h+=m,e?h<0:p<=h)throw u("Reduce of empty array with no initial value")}for(;e?h>=0:p>h;h+=m)h in d&&(l=n(l,d[h],h,c));return l}};e.exports={left:a(!1),right:a(!0)}},function(e,t,n){var r=n(1);e.exports=r([].slice)},function(e,t,n){var r=n(18),i=n(65),o=n(8),u=n(9)("species"),a=Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,(i(t)&&(t===a||r(t.prototype))||o(t)&&null===(t=t[u]))&&(t=void 0)),void 0===t?a:t}},function(e,t,n){var r=n(7),i=n(114),o=n(43),s=n(13);e.exports=function(e,t,n){for(var u=i(t),a=s.f,l=o.f,c=0;c<u.length;c++){var d=u[c];r(e,d)||n&&r(n,d)||a(e,d,l(t,d))}}},function(e,t,n){var r=n(15),i=n(4);e.exports="process"==r(i.process)},function(e,t,n){var r=n(17);e.exports=r("navigator","userAgent")||""},function(e,t,n){"use strict";var r=n(5),i=n(0),o=n(6),s=n(42),u=n(106),a=Error.prototype.toString,l=i((function(){if(r){var e=s(Object.defineProperty({},"name",{get:function(){return this===e}}));if("true"!==a.call(e))return!0}return"2: 1"!==a.call({message:1,name:2})||"Error"!==a.call({})}));e.exports=l?function(){var e=o(this),t=u(e.name,"Error"),n=u(e.message);return t?n?t+": "+n:t:n}:a},function(e,t,n){"use strict";n(53);var r=n(37),i=n(11),o=n(45),s=n(0),u=n(9),a=n(30),l=u("species"),c=RegExp.prototype;e.exports=function(e,t,n,d){var p=u(e),h=!s((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),m=h&&!s((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[l]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!h||!m||n){var f=r(/./[p]),g=t(p,""[e],(function(e,t,n,i,s){var u=r(e),a=t.exec;return a===o||a===c.exec?h&&!s?{done:!0,value:f(t,n,i)}:{done:!0,value:u(n,t,i)}:{done:!1}}));i(String.prototype,e,g[0]),i(c,p,g[1])}d&&a(c[p],"sham",!0)}},function(e,t,n){var r=n(37),i=n(25),o=n(35),s=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?s(e,t):function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(17);e.exports=r("document","documentElement")},function(e,t,n){var r=n(2),i=n(8),o=n(111);e.exports=function(e,t,n){var s,u;return o&&r(s=t.constructor)&&s!==n&&i(u=s.prototype)&&u!==n.prototype&&o(e,u),e}},function(e,t){e.exports=!1},function(e,t,n){var r=n(0),i=n(2),o=n(7),s=n(5),u=n(36).CONFIGURABLE,a=n(63),l=n(64),c=l.enforce,d=l.get,p=Object.defineProperty,h=s&&!r((function(){return 8!==p((function(){}),"length",{value:8}).length})),m=String(String).split("String"),f=e.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!o(e,"name")||u&&e.name!==t)&&(s?p(e,"name",{value:t,configurable:!0}):e.name=t),h&&n&&o(n,"arity")&&e.length!==n.arity&&p(e,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?s&&p(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=c(e);return o(r,"source")||(r.source=m.join("string"==typeof t?t:"")),e};Function.prototype.toString=f((function(){return i(this)&&d(this).source||a(this)}),"toString")},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var t=+e;return(t>0?r:n)(t)}},function(e,t,n){var r=n(20);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},function(e,t,n){var r=n(5),i=n(77),o=n(13),s=n(6),u=n(19),a=n(109);t.f=r&&!i?Object.defineProperties:function(e,t){s(e);for(var n,r=u(t),i=a(t),l=i.length,c=0;l>c;)o.f(e,n=i[c++],r[n]);return e}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(68),i=n(34);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(1),i=n(6),o=n(90);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return i(n),o(r),t?e(n,r):n.__proto__=r,n}}():void 0)},function(e,t,n){"use strict";var r=n(51),i=n(29);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(e,t,n){var r=n(12),i=n(2),o=n(8),s=TypeError;e.exports=function(e,t){var n,u;if("string"===t&&i(n=e.toString)&&!o(u=r(n,e)))return u;if(i(n=e.valueOf)&&!o(u=r(n,e)))return u;if("string"!==t&&i(n=e.toString)&&!o(u=r(n,e)))return u;throw s("Can't convert object to primitive value")}},function(e,t,n){var r=n(17),i=n(1),o=n(67),s=n(108),u=n(6),a=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(u(e)),n=s.f;return n?a(t,n(e)):t}},function(e,t,n){var r=n(12),i=n(6),o=n(2),s=n(15),u=n(45),a=TypeError;e.exports=function(e,t){var n=e.exec;if(o(n)){var l=r(n,e,t);return null!==l&&i(l),l}if("RegExp"===s(e))return r(u,e,t);throw a("RegExp#exec called on incompatible receiver")}},function(e,t,n){var r=n(12),i=n(7),o=n(44),s=n(69),u=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in u||i(e,"flags")||!o(u,e)?t:r(s,e)}},function(e,t,n){var r=n(0),o=n(4).RegExp,s=r((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),u=s||r((function(){return!o("a","y").sticky})),a=s||r((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:u,UNSUPPORTED_Y:s}},function(e,t,n){var r=n(0),o=n(4).RegExp;e.exports=r((function(){var e=o(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},function(e,t,n){var r=n(0),o=n(4).RegExp;e.exports=r((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){var r=n(36).PROPER,i=n(0),o=n(78),s="â€‹Â…á Ž";e.exports=function(e){return i((function(){return!!o[e]()||s[e]()!==s||r&&o[e].name!==e}))}},function(e,t,n){var r=n(1);e.exports=r(1..valueOf)},function(e,t,n){var r=n(49),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(4),i=n(2),o=r.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},function(e,t,n){"use strict";var r=n(3),i=n(0),o=n(18),s=n(8),u=n(14),a=n(10),l=n(22),c=n(32),d=n(28),p=n(16),h=n(9),m=n(23),f=h("isConcatSpreadable"),g=m>=51||!i((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),v=p("concat"),b=function(e){if(!s(e))return!1;var t=e[f];return void 0!==t?!!t:o(e)};r({target:"Array",proto:!0,arity:1,forced:!g||!v},{concat:function(e){var t,n,r,i,o,s=u(this),p=d(s,0),h=0;for(t=-1,r=arguments.length;t<r;t++)if(b(o=-1===t?s:arguments[t]))for(i=a(o),l(h+i),n=0;n<i;n++,h++)n in o&&c(p,h,o[n]);else l(h+1),c(p,h++,o);return p.length=h,p}})},function(e,t,n){"use strict";var r=n(3),i=n(21).every;r({target:"Array",proto:!0,forced:!n(26)("every")},{every:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(3),i=n(21).filter;r({target:"Array",proto:!0,forced:!n(16)("filter")},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(3),i=n(37),o=n(57).indexOf,s=n(26),u=i([].indexOf),a=!!u&&1/u([1],1,-0)<0,l=s("indexOf");r({target:"Array",proto:!0,forced:a||!l},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return a?u(this,e,t)||0:o(this,e,t)}})},function(e,t,n){n(3)({target:"Array",stat:!0},{isArray:n(18)})},function(e,t,n){"use strict";var r=n(3),i=n(21).map;r({target:"Array",proto:!0,forced:!n(16)("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(3),i=n(14),o=n(10),s=n(27),u=n(22),l=n(0)((function(){return 4294967297!==[].push.call({length:4294967296},1)})),c=!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}();r({target:"Array",proto:!0,arity:1,forced:l||c},{push:function(e){var t=i(this),n=o(t),r=arguments.length;u(n+r);for(var a=0;a<r;a++)t[n]=arguments[a],n++;return s(t,n),n}})},function(e,t,n){"use strict";var r=n(3),i=n(92).left,o=n(26),s=n(23),u=n(96);r({target:"Array",proto:!0,forced:!o("reduce")||!u&&s>79&&s<83},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(3),i=n(14),o=n(48),s=n(49),u=n(10),a=n(27),l=n(22),c=n(28),d=n(32),p=n(58),h=n(16)("splice"),m=Math.max,g=Math.min;r({target:"Array",proto:!0,forced:!h},{splice:function(e,t){var n,r,h,f,v,b,y=i(this),w=u(y),A=o(e,w),x=arguments.length;for(0===x?n=r=0:1===x?(n=0,r=w-A):(n=x-2,r=g(m(s(t),0),w-A)),l(w+n-r),h=c(y,r),f=0;f<r;f++)(v=A+f)in y&&d(h,f,y[v]);if(h.length=r,n<r){for(f=A;f<w-r;f++)b=f+n,(v=f+r)in y?y[b]=y[v]:p(y,b);for(f=w;f>w-r+n;f--)p(y,f-1)}else if(n>r)for(f=w-r;f>A;f--)b=f+n-1,(v=f+r-1)in y?y[b]=y[v]:p(y,b);for(f=0;f<n;f++)y[f+A]=arguments[f+2];return a(y,w-r+n),h}})},function(e,t,n){"use strict";var r=n(3),i=n(14),o=n(10),s=n(27),u=n(58),a=n(22),l=1!==[].unshift(0),c=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}();r({target:"Array",proto:!0,arity:1,forced:l||c},{unshift:function(e){var t=i(this),n=o(t),r=arguments.length;if(r){a(n+r);for(var l=n;l--;){var c=l+r;l in t?t[c]=t[l]:u(t,c)}for(var d=0;d<r;d++)t[d]=arguments[d]}return s(t,n+r)}})},function(e,t,n){"use strict";var r=n(3),i=n(71).trim;r({target:"String",proto:!0,forced:n(121)("trim")},{trim:function(){return i(this)}})},function(e,t){},function(e,t){e.exports=function(e,t,n,r,i,o){var s,u=e=e||{},a=typeof e.default;"object"!==a&&"function"!==a||(s=e,u=e.default);var l,c="function"==typeof u?u.options:u;if(t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),i&&(c._scopeId=i),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):r&&(l=r),l){var d=c.functional,p=d?c.render:c.beforeCreate;d?(c._injectStyles=l,c.render=function(e,t){return l.call(t),p(e,t)}):c.beforeCreate=p?[].concat(p,l):[l]}return{esModule:s,exports:u,options:c}}},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"multiselect",class:{"multiselect--active":e.isOpen,"multiselect--disabled":e.disabled,"multiselect--above":e.isAbove,"multiselect--has-options-group":e.hasOptionGroup},attrs:{tabindex:e.searchable?-1:e.tabindex,role:"combobox","aria-owns":"listbox-"+e.id},on:{focus:function(t){return e.activate()},blur:function(t){!e.searchable&&e.deactivate()},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])||t.target!==t.currentTarget?null:(t.preventDefault(),e.pointerForward())},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])||t.target!==t.currentTarget?null:(t.preventDefault(),e.pointerBackward())}],keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:(t.stopPropagation(),t.target!==t.currentTarget?null:e.addPointerElement(t))},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.deactivate()}}},[e._t("caret",(function(){return[n("div",{staticClass:"multiselect__select",on:{mousedown:function(t){return t.preventDefault(),t.stopPropagation(),e.toggle()}}})]}),{toggle:e.toggle}),e._v(" "),e._t("clear",null,{search:e.search}),e._v(" "),n("div",{ref:"tags",staticClass:"multiselect__tags"},[e._t("selection",(function(){return[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visibleValues.length>0,expression:"visibleValues.length > 0"}],staticClass:"multiselect__tags-wrap"},[e._l(e.visibleValues,(function(t,r){return[e._t("tag",(function(){return[n("span",{key:r,staticClass:"multiselect__tag"},[n("span",{domProps:{textContent:e._s(e.getOptionLabel(t))}}),e._v(" "),n("i",{staticClass:"multiselect__tag-icon",attrs:{tabindex:"1"},on:{keypress:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:(n.preventDefault(),e.removeElement(t))},mousedown:function(n){return n.preventDefault(),e.removeElement(t)}}})])]}),{option:t,search:e.search,remove:e.removeElement})]}))],2),e._v(" "),e.internalValue&&e.internalValue.length>e.limit?[e._t("limit",(function(){return[n("strong",{staticClass:"multiselect__strong",domProps:{textContent:e._s(e.limitText(e.internalValue.length-e.limit))}})]}))]:e._e()]}),{search:e.search,remove:e.removeElement,values:e.visibleValues,isOpen:e.isOpen}),e._v(" "),n("transition",{attrs:{name:"multiselect__loading"}},[e._t("loading",(function(){return[n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"multiselect__spinner"})]}))],2),e._v(" "),e.searchable?n("input",{ref:"search",staticClass:"multiselect__input",style:e.inputStyle,attrs:{name:e.name,id:e.id,type:"text",autocomplete:"off",spellcheck:"false",placeholder:e.placeholder,disabled:e.disabled,tabindex:e.tabindex,"aria-controls":"listbox-"+e.id},domProps:{value:e.search},on:{input:function(t){return e.updateSearch(t.target.value)},focus:function(t){return t.preventDefault(),e.activate()},blur:function(t){return t.preventDefault(),e.deactivate()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.deactivate()},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.pointerForward())},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.pointerBackward())},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:(t.stopPropagation(),e.removeLastElement())}],keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),t.stopPropagation(),t.target!==t.currentTarget?null:e.addPointerElement(t))}}}):e._e(),e._v(" "),e.isSingleLabelVisible?n("span",{staticClass:"multiselect__single",on:{mousedown:function(t){return t.preventDefault(),e.toggle.apply(null,arguments)}}},[e._t("singleLabel",(function(){return[[e._v(e._s(e.currentOptionLabel))]]}),{option:e.singleValue})],2):e._e(),e._v(" "),e.isPlaceholderVisible?n("span",{staticClass:"multiselect__placeholder",on:{mousedown:function(t){return t.preventDefault(),e.toggle.apply(null,arguments)}}},[e._t("placeholder",(function(){return[e._v("\n          "+e._s(e.placeholder)+"\n        ")]}))],2):e._e()],2),e._v(" "),n("transition",{attrs:{name:"multiselect"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],ref:"list",staticClass:"multiselect__content-wrapper",style:{maxHeight:e.optimizedHeight+"px"},attrs:{tabindex:"-1"},on:{focus:e.activate,mousedown:function(e){e.preventDefault()}}},[n("ul",{staticClass:"multiselect__content",style:e.contentStyle,attrs:{role:"listbox",id:"listbox-"+e.id}},[e._t("beforeList"),e._v(" "),e.multiple&&e.max===e.internalValue.length?n("li",[n("span",{staticClass:"multiselect__option"},[e._t("maxElements",(function(){return[e._v("Maximum of "+e._s(e.max)+" options selected. First remove a selected option to select another.")]}))],2)]):e._e(),e._v(" "),!e.max||e.internalValue.length<e.max?e._l(e.filteredOptions,(function(t,r){return n("li",{key:r,staticClass:"multiselect__element",attrs:{id:e.id+"-"+r,role:t&&(t.$isLabel||t.$isDisabled)?null:"option"}},[t&&(t.$isLabel||t.$isDisabled)?e._e():n("span",{staticClass:"multiselect__option",class:e.optionHighlight(r,t),attrs:{"data-select":t&&t.isTag?e.tagPlaceholder:e.selectLabelText,"data-selected":e.selectedLabelText,"data-deselect":e.deselectLabelText},on:{click:function(n){return n.stopPropagation(),e.select(t)},mouseenter:function(t){return t.target!==t.currentTarget?null:e.pointerSet(r)}}},[e._t("option",(function(){return[n("span",[e._v(e._s(e.getOptionLabel(t)))])]}),{option:t,search:e.search,index:r})],2),e._v(" "),t&&(t.$isLabel||t.$isDisabled)?n("span",{staticClass:"multiselect__option",class:e.groupHighlight(r,t),attrs:{"data-select":e.groupSelect&&e.selectGroupLabelText,"data-deselect":e.groupSelect&&e.deselectGroupLabelText},on:{mouseenter:function(t){if(t.target!==t.currentTarget)return null;e.groupSelect&&e.pointerSet(r)},mousedown:function(n){return n.preventDefault(),e.selectGroup(t)}}},[e._t("option",(function(){return[n("span",[e._v(e._s(e.getOptionLabel(t)))])]}),{option:t,search:e.search,index:r})],2):e._e()])})):e._e(),e._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:e.showNoResults&&0===e.filteredOptions.length&&e.search&&!e.loading,expression:"showNoResults && (filteredOptions.length === 0 && search && !loading)"}]},[n("span",{staticClass:"multiselect__option"},[e._t("noResult",(function(){return[e._v("No elements found. Consider changing the search query.")]}),{search:e.search})],2)]),e._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:e.showNoOptions&&(0===e.options.length||!0===e.hasOptionGroup&&0===e.filteredOptions.length)&&!e.search&&!e.loading,expression:"showNoOptions && ((options.length === 0 || (hasOptionGroup === true && filteredOptions.length === 0)) && !search && !loading)"}]},[n("span",{staticClass:"multiselect__option"},[e._t("noOptions",(function(){return[e._v("List is empty.")]}))],2)]),e._v(" "),e._t("afterList")],2)])])],2)},o={render:r,staticRenderFns:[]};t.a=o},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n}])},function(e,t,n){"use strict";n(554)},function(e,t,n){"use strict";n.d(t,"b",(function(){return W})),n.d(t,"a",(function(){return Q}));n(17),n(16),n(18),n(14),n(19);var r,o=n(2),l=(n(13),n(10),n(33),n(28),n(54),n(43),n(56),n(51),n(4)),c=n(3),d=n(706),h=n(8),m=n(34),f=n(1),v=n(12),y=n(15),w=n(550),A=n(5),x=n(11),O=n(27),C=n(6),_=n(551),S=n(37),k=n(39),j=n(69),T=n(23),I=n(7),D=n(0),E=n(22),R=n(44),B=n(29),M=n(26),P=n(543);function L(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function F(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?L(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):L(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var $=Object(j.a)("value",{type:f.k}),N=$.mixin,z=$.props,V=$.prop,H=$.event,W=Object(D.d)(Object(I.m)(F(F(F({},B.b),z),{},{ariaControls:Object(D.c)(f.t),block:Object(D.c)(f.g,!1),dateDisabledFn:Object(D.c)(f.l),dateFormatOptions:Object(D.c)(f.p,{year:d.f,month:d.b,day:d.f,weekday:d.b}),dateInfoFn:Object(D.c)(f.l),direction:Object(D.c)(f.t),disabled:Object(D.c)(f.g,!1),headerTag:Object(D.c)(f.t,"header"),hidden:Object(D.c)(f.g,!1),hideHeader:Object(D.c)(f.g,!1),initialDate:Object(D.c)(f.k),labelCalendar:Object(D.c)(f.t,"Calendar"),labelCurrentMonth:Object(D.c)(f.t,"Current month"),labelHelp:Object(D.c)(f.t,"Use cursor keys to navigate calendar dates"),labelNav:Object(D.c)(f.t,"Calendar navigation"),labelNextDecade:Object(D.c)(f.t,"Next decade"),labelNextMonth:Object(D.c)(f.t,"Next month"),labelNextYear:Object(D.c)(f.t,"Next year"),labelNoDateSelected:Object(D.c)(f.t,"No date selected"),labelPrevDecade:Object(D.c)(f.t,"Previous decade"),labelPrevMonth:Object(D.c)(f.t,"Previous month"),labelPrevYear:Object(D.c)(f.t,"Previous year"),labelSelected:Object(D.c)(f.t,"Selected date"),labelToday:Object(D.c)(f.t,"Today"),locale:Object(D.c)(f.f),max:Object(D.c)(f.k),min:Object(D.c)(f.k),navButtonVariant:Object(D.c)(f.t,"secondary"),noHighlightToday:Object(D.c)(f.g,!1),noKeyNav:Object(D.c)(f.g,!1),readonly:Object(D.c)(f.g,!1),roleDescription:Object(D.c)(f.t),selectedVariant:Object(D.c)(f.t,"primary"),showDecadeNav:Object(D.c)(f.g,!1),startWeekday:Object(D.c)(f.o,0),todayVariant:Object(D.c)(f.t),valueAsDate:Object(D.c)(f.g,!1),weekdayHeaderFormat:Object(D.c)(f.t,d.d,(function(e){return Object(y.a)([d.b,d.d,d.c],e)})),width:Object(D.c)(f.t,"270px")})),c.i),Q=Object(l.c)({name:c.i,mixins:[R.a,B.a,N,M.a],props:W,data:function(){var e=Object(w.f)(this[V])||"";return{selectedYMD:e,activeYMD:e||Object(w.f)(Object(w.a)(this.initialDate||this.getToday()),this.min,this.max),gridHasFocus:!1,isLive:!1}},computed:{valueId:function(){return this.safeId()},widgetId:function(){return this.safeId("_calendar-wrapper_")},navId:function(){return this.safeId("_calendar-nav_")},gridId:function(){return this.safeId("_calendar-grid_")},gridCaptionId:function(){return this.safeId("_calendar-grid-caption_")},gridHelpId:function(){return this.safeId("_calendar-grid-help_")},activeId:function(){return this.activeYMD?this.safeId("_cell-".concat(this.activeYMD,"_")):null},selectedDate:function(){return Object(w.n)(this.selectedYMD)},activeDate:function(){return Object(w.n)(this.activeYMD)},computedMin:function(){return Object(w.n)(this.min)},computedMax:function(){return Object(w.n)(this.max)},computedWeekStarts:function(){return Object(k.c)(Object(T.c)(this.startWeekday,0),0)%7},computedLocale:function(){return Object(w.o)(Object(y.b)(this.locale).filter(O.a),d.a)},computedDateDisabledFn:function(){var e=this.dateDisabledFn;return Object(D.b)(e)?e:function(){return!1}},computedDateInfoFn:function(){var e=this.dateInfoFn;return Object(D.b)(e)?e:function(){return{}}},calendarLocale:function(){var e=new Intl.DateTimeFormat(this.computedLocale,{calendar:d.a}),t=e.resolvedOptions().calendar,n=e.resolvedOptions().locale;return t!==d.a&&(n=n.replace(/-u-.+$/i,"").concat("-u-ca-gregory")),n},calendarYear:function(){return this.activeDate.getFullYear()},calendarMonth:function(){return this.activeDate.getMonth()},calendarFirstDay:function(){return Object(w.b)(this.calendarYear,this.calendarMonth,1,12)},calendarDaysInMonth:function(){var e=Object(w.b)(this.calendarFirstDay);return e.setMonth(e.getMonth()+1,0),e.getDate()},computedVariant:function(){return"btn-".concat(this.selectedVariant||"primary")},computedTodayVariant:function(){return"btn-outline-".concat(this.todayVariant||this.selectedVariant||"primary")},computedNavButtonVariant:function(){return"btn-outline-".concat(this.navButtonVariant||"primary")},isRTL:function(){var e=Object(E.g)(this.direction).toLowerCase();return"rtl"===e||"ltr"!==e&&Object(_.a)(this.computedLocale)},context:function(){var e=this.selectedYMD,t=this.activeYMD,n=Object(w.n)(e),r=Object(w.n)(t);return{selectedYMD:e,selectedDate:n,selectedFormatted:n?this.formatDateString(n):this.labelNoDateSelected,activeYMD:t,activeDate:r,activeFormatted:r?this.formatDateString(r):"",disabled:this.dateDisabled(r),locale:this.computedLocale,calendarLocale:this.calendarLocale,rtl:this.isRTL}},dateOutOfRange:function(){var e=this.computedMin,t=this.computedMax;return function(n){return n=Object(w.n)(n),e&&n<e||t&&n>t}},dateDisabled:function(){var e=this,t=this.dateOutOfRange;return function(n){n=Object(w.n)(n);var r=Object(w.f)(n);return!(!t(n)&&!e.computedDateDisabledFn(r,n))}},formatDateString:function(){return Object(w.c)(this.calendarLocale,F(F({year:d.f,month:d.e,day:d.e},this.dateFormatOptions),{},{hour:void 0,minute:void 0,second:void 0,calendar:d.a}))},formatYearMonth:function(){return Object(w.c)(this.calendarLocale,{year:d.f,month:d.b,calendar:d.a})},formatWeekdayName:function(){return Object(w.c)(this.calendarLocale,{weekday:d.b,calendar:d.a})},formatWeekdayNameShort:function(){return Object(w.c)(this.calendarLocale,{weekday:this.weekdayHeaderFormat||d.d,calendar:d.a})},formatDay:function(){var e=new Intl.NumberFormat([this.computedLocale],{style:"decimal",minimumIntegerDigits:1,minimumFractionDigits:0,maximumFractionDigits:0,notation:"standard"});return function(t){return e.format(t.getDate())}},prevDecadeDisabled:function(){var e=this.computedMin;return this.disabled||e&&Object(w.g)(Object(w.h)(this.activeDate))<e},prevYearDisabled:function(){var e=this.computedMin;return this.disabled||e&&Object(w.g)(Object(w.l)(this.activeDate))<e},prevMonthDisabled:function(){var e=this.computedMin;return this.disabled||e&&Object(w.g)(Object(w.j)(this.activeDate))<e},thisMonthDisabled:function(){return this.disabled},nextMonthDisabled:function(){var e=this.computedMax;return this.disabled||e&&Object(w.e)(Object(w.k)(this.activeDate))>e},nextYearDisabled:function(){var e=this.computedMax;return this.disabled||e&&Object(w.e)(Object(w.m)(this.activeDate))>e},nextDecadeDisabled:function(){var e=this.computedMax;return this.disabled||e&&Object(w.e)(Object(w.i)(this.activeDate))>e},calendar:function(){for(var e=[],t=this.calendarFirstDay,n=t.getFullYear(),r=t.getMonth(),o=this.calendarDaysInMonth,l=t.getDay(),c=0-((this.computedWeekStarts>l?7:0)-this.computedWeekStarts)-l,d=0;d<6&&c<o;d++){e[d]=[];for(var h=0;h<7;h++){c++;var m=Object(w.b)(n,r,c),f=m.getMonth(),v=Object(w.f)(m),y=this.dateDisabled(m),A=this.computedDateInfoFn(v,Object(w.n)(v));A=Object(C.n)(A)||Object(C.a)(A)?{class:A}:Object(C.k)(A)?F({class:""},A):{class:""},e[d].push({ymd:v,day:this.formatDay(m),label:this.formatDateString(m),isThisMonth:f===r,isDisabled:y,info:A})}}return e},calendarHeadings:function(){var e=this;return this.calendar[0].map((function(t){return{text:e.formatWeekdayNameShort(Object(w.n)(t.ymd)),label:e.formatWeekdayName(Object(w.n)(t.ymd))}}))}},watch:(r={},Object(o.a)(r,V,(function(e,t){var n=Object(w.f)(e)||"",r=Object(w.f)(t)||"";Object(w.d)(n,r)||(this.activeYMD=n||this.activeYMD,this.selectedYMD=n)})),Object(o.a)(r,"selectedYMD",(function(e,t){e!==t&&this.$emit(H,this.valueAsDate?Object(w.n)(e)||null:e||"")})),Object(o.a)(r,"context",(function(e,t){Object(S.a)(e,t)||this.$emit(h.f,e)})),Object(o.a)(r,"hidden",(function(e){this.activeYMD=this.selectedYMD||Object(w.f)(this[V]||this.constrainDate(this.initialDate||this.getToday())),this.setLive(!e)})),r),created:function(){var e=this;this.$nextTick((function(){e.$emit(h.f,e.context)}))},mounted:function(){this.setLive(!0)},activated:function(){this.setLive(!0)},deactivated:function(){this.setLive(!1)},beforeDestroy:function(){this.setLive(!1)},methods:{focus:function(){this.disabled||Object(A.d)(this.$refs.grid)},blur:function(){this.disabled||Object(A.c)(this.$refs.grid)},setLive:function(e){var t=this;e?this.$nextTick((function(){Object(A.B)((function(){t.isLive=!0}))})):this.isLive=!1},getToday:function(){return Object(w.n)(Object(w.b)())},constrainDate:function(e){return Object(w.a)(e,this.computedMin,this.computedMax)},emitSelected:function(e){var t=this;this.$nextTick((function(){t.$emit(h.K,Object(w.f)(e)||"",Object(w.n)(e)||null)}))},setGridFocusFlag:function(e){this.gridHasFocus=!this.disabled&&"focus"===e.type},onKeydownWrapper:function(e){if(!this.noKeyNav){var t=e.altKey,n=e.ctrlKey,r=e.keyCode;if(Object(y.a)([m.j,m.i,m.d,m.g,m.h,m.m,m.k,m.c],r)){Object(x.f)(e);var o=Object(w.b)(this.activeDate),l=Object(w.b)(this.activeDate),c=o.getDate(),d=this.constrainDate(this.getToday()),h=this.isRTL;r===m.j?(o=(t?n?w.h:w.l:w.j)(o),(l=Object(w.b)(o)).setDate(1)):r===m.i?(o=(t?n?w.i:w.m:w.k)(o),(l=Object(w.b)(o)).setMonth(l.getMonth()+1),l.setDate(0)):r===m.h?(o.setDate(c+(h?1:-1)),l=o=this.constrainDate(o)):r===m.k?(o.setDate(c+(h?-1:1)),l=o=this.constrainDate(o)):r===m.m?(o.setDate(c-7),l=o=this.constrainDate(o)):r===m.c?(o.setDate(c+7),l=o=this.constrainDate(o)):r===m.g?l=o=d:r===m.d&&(l=o=Object(w.n)(this.selectedDate)||d),this.dateOutOfRange(l)||Object(w.d)(o,this.activeDate)||(this.activeYMD=Object(w.f)(o)),this.focus()}}},onKeydownGrid:function(e){var t=e.keyCode,n=this.activeDate;t!==m.e&&t!==m.l||(Object(x.f)(e),this.disabled||this.readonly||this.dateDisabled(n)||(this.selectedYMD=Object(w.f)(n),this.emitSelected(n)),this.focus())},onClickDay:function(e){var t=this.selectedDate,n=this.activeDate,r=Object(w.n)(e.ymd);this.disabled||e.isDisabled||this.dateDisabled(r)||(this.readonly||(this.selectedYMD=Object(w.f)(Object(w.d)(r,t)?t:r),this.emitSelected(r)),this.activeYMD=Object(w.f)(Object(w.d)(r,n)?n:Object(w.b)(r)),this.focus())},gotoPrevDecade:function(){this.activeYMD=Object(w.f)(this.constrainDate(Object(w.h)(this.activeDate)))},gotoPrevYear:function(){this.activeYMD=Object(w.f)(this.constrainDate(Object(w.l)(this.activeDate)))},gotoPrevMonth:function(){this.activeYMD=Object(w.f)(this.constrainDate(Object(w.j)(this.activeDate)))},gotoCurrentMonth:function(){this.activeYMD=Object(w.f)(this.constrainDate(this.getToday()))},gotoNextMonth:function(){this.activeYMD=Object(w.f)(this.constrainDate(Object(w.k)(this.activeDate)))},gotoNextYear:function(){this.activeYMD=Object(w.f)(this.constrainDate(Object(w.m)(this.activeDate)))},gotoNextDecade:function(){this.activeYMD=Object(w.f)(this.constrainDate(Object(w.i)(this.activeDate)))},onHeaderClick:function(){this.disabled||(this.activeYMD=this.selectedYMD||Object(w.f)(this.getToday()),this.focus())}},render:function(e){var t=this;if(this.hidden)return e();var n=this.valueId,r=this.widgetId,l=this.navId,c=this.gridId,d=this.gridCaptionId,h=this.gridHelpId,m=this.activeId,f=this.disabled,y=this.noKeyNav,A=this.isLive,x=this.isRTL,C=this.activeYMD,_=this.selectedYMD,S=this.safeId,k=!this.showDecadeNav,j=Object(w.f)(this.getToday()),T=!this.noHighlightToday,I=e("output",{staticClass:"form-control form-control-sm text-center",class:{"text-muted":f,readonly:this.readonly||f},attrs:{id:n,for:c,role:"status",tabindex:f?null:"-1","data-selected":Object(E.g)(_),"aria-live":A?"polite":"off","aria-atomic":A?"true":null},on:{click:this.onHeaderClick,focus:this.onHeaderClick}},this.selectedDate?[e("bdi",{staticClass:"sr-only"}," (".concat(Object(E.g)(this.labelSelected),") ")),e("bdi",this.formatDateString(this.selectedDate))]:this.labelNoDateSelected||"Â ");I=e(this.headerTag,{staticClass:"b-calendar-header",class:{"sr-only":this.hideHeader},attrs:{title:this.selectedDate&&this.labelSelected||null}},[I]);var D={isRTL:x},R={shiftV:.5},B=F(F({},R),{},{flipH:x}),M=F(F({},R),{},{flipH:!x}),L=this.normalizeSlot(v.H,D)||e(P.c,{props:B}),$=this.normalizeSlot(v.J,D)||e(P.d,{props:B}),N=this.normalizeSlot(v.I,D)||e(P.f,{props:B}),z=this.normalizeSlot(v.K,D)||e(P.h,{props:R}),V=this.normalizeSlot(v.F,D)||e(P.f,{props:M}),H=this.normalizeSlot(v.G,D)||e(P.d,{props:M}),W=this.normalizeSlot(v.E,D)||e(P.c,{props:M}),Q=function(content,label,n,r,o){return e("button",{staticClass:"btn btn-sm border-0 flex-fill",class:[t.computedNavButtonVariant,{disabled:r}],attrs:{title:label||null,type:"button",tabindex:y?"-1":null,"aria-label":label||null,"aria-disabled":r?"true":null,"aria-keyshortcuts":o||null},on:r?{}:{click:n}},[e("div",{attrs:{"aria-hidden":"true"}},[content])])},U=e("div",{staticClass:"b-calendar-nav d-flex",attrs:{id:l,role:"group",tabindex:y?"-1":null,"aria-hidden":f?"true":null,"aria-label":this.labelNav||null,"aria-controls":c}},[k?e():Q(L,this.labelPrevDecade,this.gotoPrevDecade,this.prevDecadeDisabled,"Ctrl+Alt+PageDown"),Q($,this.labelPrevYear,this.gotoPrevYear,this.prevYearDisabled,"Alt+PageDown"),Q(N,this.labelPrevMonth,this.gotoPrevMonth,this.prevMonthDisabled,"PageDown"),Q(z,this.labelCurrentMonth,this.gotoCurrentMonth,this.thisMonthDisabled,"Home"),Q(V,this.labelNextMonth,this.gotoNextMonth,this.nextMonthDisabled,"PageUp"),Q(H,this.labelNextYear,this.gotoNextYear,this.nextYearDisabled,"Alt+PageUp"),k?e():Q(W,this.labelNextDecade,this.gotoNextDecade,this.nextDecadeDisabled,"Ctrl+Alt+PageUp")]),Y=e("div",{staticClass:"b-calendar-grid-caption text-center font-weight-bold",class:{"text-muted":f},attrs:{id:d,"aria-live":A?"polite":null,"aria-atomic":A?"true":null},key:"grid-caption"},this.formatYearMonth(this.calendarFirstDay)),G=e("div",{staticClass:"b-calendar-grid-weekdays row no-gutters border-bottom",attrs:{"aria-hidden":"true"}},this.calendarHeadings.map((function(t,n){return e("small",{staticClass:"col text-truncate",class:{"text-muted":f},attrs:{title:t.label===t.text?null:t.label,"aria-label":t.label},key:n},t.text)}))),K=this.calendar.map((function(n){var r=n.map((function(n,r){var l,c=n.ymd===_,d=n.ymd===C,h=n.ymd===j,m=S("_cell-".concat(n.ymd,"_")),v=e("span",{staticClass:"btn border-0 rounded-circle text-nowrap",class:(l={focus:d&&t.gridHasFocus,disabled:n.isDisabled||f,active:c},Object(o.a)(l,t.computedVariant,c),Object(o.a)(l,t.computedTodayVariant,h&&T&&!c&&n.isThisMonth),Object(o.a)(l,"btn-outline-light",!(h&&T||c||d)),Object(o.a)(l,"btn-light",!(h&&T)&&!c&&d),Object(o.a)(l,"text-muted",!n.isThisMonth&&!c),Object(o.a)(l,"text-dark",!(h&&T)&&!c&&!d&&n.isThisMonth),Object(o.a)(l,"font-weight-bold",(c||n.isThisMonth)&&!n.isDisabled),l),on:{click:function(){return t.onClickDay(n)}}},n.day);return e("div",{staticClass:"col p-0",class:n.isDisabled?"bg-light":n.info.class||"",attrs:{id:m,role:"button","data-date":n.ymd,"aria-hidden":n.isThisMonth?null:"true","aria-disabled":n.isDisabled||f?"true":null,"aria-label":[n.label,c?"(".concat(t.labelSelected,")"):null,h?"(".concat(t.labelToday,")"):null].filter(O.a).join(" "),"aria-selected":c?"true":null,"aria-current":c?"date":null},key:r},[v])}));return e("div",{staticClass:"row no-gutters",key:n[0].ymd},r)}));K=e("div",{staticClass:"b-calendar-grid-body",style:f?{pointerEvents:"none"}:{}},K);var X=e("div",{staticClass:"b-calendar-grid-help border-top small text-muted text-center bg-light",attrs:{id:h}},[e("div",{staticClass:"small"},this.labelHelp)]),Z=e("div",{staticClass:"b-calendar-grid form-control h-auto text-center",attrs:{id:c,role:"application",tabindex:y?"-1":f?null:"0","data-month":C.slice(0,-3),"aria-roledescription":this.labelCalendar||null,"aria-labelledby":d,"aria-describedby":h,"aria-disabled":f?"true":null,"aria-activedescendant":m},on:{keydown:this.onKeydownGrid,focus:this.setGridFocusFlag,blur:this.setGridFocusFlag},ref:"grid"},[Y,G,K,X]),J=this.normalizeSlot();J=J?e("footer",{staticClass:"b-calendar-footer"},J):e();var ee=e("div",{staticClass:"b-calendar-inner",style:this.block?{}:{width:this.width},attrs:{id:r,dir:x?"rtl":"ltr",lang:this.computedLocale||null,role:"group","aria-disabled":f?"true":null,"aria-controls":this.ariaControls||null,"aria-roledescription":this.roleDescription||null,"aria-describedby":[this.bvAttrs["aria-describedby"],n,h].filter(O.a).join(" ")},on:{keydown:this.onKeydownWrapper}},[I,U,Z,J]);return e("div",{staticClass:"b-calendar",class:{"d-block":this.block}},[ee])}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return U})),n.d(t,"a",(function(){return Y}));n(17),n(16),n(18),n(14),n(19);var r,o=n(2),l=n(47),c=(n(51),n(28),n(43),n(56),n(13),n(10),n(54),n(4)),d=n(3),h=n(8),m=n(34),f=n(1),v=n(35),y=n(15),w=n(550),A=n(5),x=n(11),O=n(27),C=n(6),_=n(37),S=n(551),k=n(69),j=n(23),T=n(7),I=n(0),D=n(22),E=n(29),R=n(26),B=n(588),M=n(543);function P(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function L(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var F=Object(k.a)("value",{type:f.t,defaultValue:""}),$=F.mixin,N=F.props,z=F.prop,V=F.event,H="numeric",W=function(e){return"00".concat(e||"").slice(-2)},Q=function(e){e=Object(D.g)(e);var t=null,n=null,r=null;if(v.x.test(e)){var o=e.split(":").map((function(e){return Object(j.c)(e,null)})),c=Object(l.a)(o,3);t=c[0],n=c[1],r=c[2]}return{hours:Object(C.p)(t)?null:t,minutes:Object(C.p)(n)?null:n,seconds:Object(C.p)(r)?null:r,ampm:Object(C.p)(t)||t<12?0:1}},U=Object(I.d)(Object(T.m)(L(L(L(L({},E.b),N),Object(T.k)(B.b,["labelIncrement","labelDecrement"])),{},{ariaLabelledby:Object(I.c)(f.t),disabled:Object(I.c)(f.g,!1),footerTag:Object(I.c)(f.t,"footer"),headerTag:Object(I.c)(f.t,"header"),hidden:Object(I.c)(f.g,!1),hideHeader:Object(I.c)(f.g,!1),hour12:Object(I.c)(f.g,null),labelAm:Object(I.c)(f.t,"AM"),labelAmpm:Object(I.c)(f.t,"AM/PM"),labelHours:Object(I.c)(f.t,"Hours"),labelMinutes:Object(I.c)(f.t,"Minutes"),labelNoTimeSelected:Object(I.c)(f.t,"No time selected"),labelPm:Object(I.c)(f.t,"PM"),labelSeconds:Object(I.c)(f.t,"Seconds"),labelSelected:Object(I.c)(f.t,"Selected time"),locale:Object(I.c)(f.f),minutesStep:Object(I.c)(f.o,1),readonly:Object(I.c)(f.g,!1),secondsStep:Object(I.c)(f.o,1),showSeconds:Object(I.c)(f.g,!1)})),d.Nb),Y=Object(c.c)({name:d.Nb,mixins:[E.a,$,R.a],props:U,data:function(){var e=Q(this[z]||"");return{modelHours:e.hours,modelMinutes:e.minutes,modelSeconds:e.seconds,modelAmpm:e.ampm,isLive:!1}},computed:{computedHMS:function(){return function(e){var t=e.hours,n=e.minutes,r=e.seconds,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(C.g)(t)||Object(C.g)(n)||o&&Object(C.g)(r)?"":[t,n,o?r:0].map(W).join(":")}({hours:this.modelHours,minutes:this.modelMinutes,seconds:this.modelSeconds},this.showSeconds)},resolvedOptions:function(){var e=Object(y.b)(this.locale).filter(O.a),t={hour:H,minute:H,second:H};Object(C.p)(this.hour12)||(t.hour12=!!this.hour12);var n=new Intl.DateTimeFormat(e,t).resolvedOptions(),r=n.hour12||!1,o=n.hourCycle||(r?"h12":"h23");return{locale:n.locale,hour12:r,hourCycle:o}},computedLocale:function(){return this.resolvedOptions.locale},computedLang:function(){return(this.computedLocale||"").replace(/-u-.*$/,"")},computedRTL:function(){return Object(S.a)(this.computedLang)},computedHourCycle:function(){return this.resolvedOptions.hourCycle},is12Hour:function(){return!!this.resolvedOptions.hour12},context:function(){return{locale:this.computedLocale,isRTL:this.computedRTL,hourCycle:this.computedHourCycle,hour12:this.is12Hour,hours:this.modelHours,minutes:this.modelMinutes,seconds:this.showSeconds?this.modelSeconds:0,value:this.computedHMS,formatted:this.formattedTimeString}},valueId:function(){return this.safeId()||null},computedAriaLabelledby:function(){return[this.ariaLabelledby,this.valueId].filter(O.a).join(" ")||null},timeFormatter:function(){var e={hour12:this.is12Hour,hourCycle:this.computedHourCycle,hour:H,minute:H,timeZone:"UTC"};return this.showSeconds&&(e.second=H),Object(w.c)(this.computedLocale,e)},numberFormatter:function(){return new Intl.NumberFormat(this.computedLocale,{style:"decimal",minimumIntegerDigits:2,minimumFractionDigits:0,maximumFractionDigits:0,notation:"standard"}).format},formattedTimeString:function(){var e=this.modelHours,t=this.modelMinutes,n=this.showSeconds&&this.modelSeconds||0;return this.computedHMS?this.timeFormatter(Object(w.b)(Date.UTC(0,0,1,e,t,n))):this.labelNoTimeSelected||" "},spinScopedSlots:function(){var e=this.$createElement;return{increment:function(t){var n=t.hasFocus;return e(M.g,{props:{scale:n?1.5:1.25},attrs:{"aria-hidden":"true"}})},decrement:function(t){var n=t.hasFocus;return e(M.g,{props:{flipV:!0,scale:n?1.5:1.25},attrs:{"aria-hidden":"true"}})}}}},watch:(r={},Object(o.a)(r,z,(function(e,t){if(e!==t&&!Object(_.a)(Q(e),Q(this.computedHMS))){var n=Q(e),r=n.hours,o=n.minutes,l=n.seconds,c=n.ampm;this.modelHours=r,this.modelMinutes=o,this.modelSeconds=l,this.modelAmpm=c}})),Object(o.a)(r,"computedHMS",(function(e,t){e!==t&&this.$emit(V,e)})),Object(o.a)(r,"context",(function(e,t){Object(_.a)(e,t)||this.$emit(h.f,e)})),Object(o.a)(r,"modelAmpm",(function(e,t){var n=this;if(e!==t){var r=Object(C.g)(this.modelHours)?0:this.modelHours;this.$nextTick((function(){0===e&&r>11?n.modelHours=r-12:1===e&&r<12&&(n.modelHours=r+12)}))}})),Object(o.a)(r,"modelHours",(function(e,t){e!==t&&(this.modelAmpm=e>11?1:0)})),r),created:function(){var e=this;this.$nextTick((function(){e.$emit(h.f,e.context)}))},mounted:function(){this.setLive(!0)},activated:function(){this.setLive(!0)},deactivated:function(){this.setLive(!1)},beforeDestroy:function(){this.setLive(!1)},methods:{focus:function(){this.disabled||Object(A.d)(this.$refs.spinners[0])},blur:function(){if(!this.disabled){var e=Object(A.g)();Object(A.f)(this.$el,e)&&Object(A.c)(e)}},formatHours:function(e){var t=this.computedHourCycle;return e=0===(e=this.is12Hour&&e>12?e-12:e)&&"h12"===t?12:0===e&&"h24"===t?24:12===e&&"h11"===t?0:e,this.numberFormatter(e)},formatMinutes:function(e){return this.numberFormatter(e)},formatSeconds:function(e){return this.numberFormatter(e)},formatAmpm:function(e){return 0===e?this.labelAm:1===e?this.labelPm:""},setHours:function(e){this.modelHours=e},setMinutes:function(e){this.modelMinutes=e},setSeconds:function(e){this.modelSeconds=e},setAmpm:function(e){this.modelAmpm=e},onSpinLeftRight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.keyCode;if(!this.disabled&&"keydown"===t&&(n===m.h||n===m.k)){Object(x.f)(e);var r=this.$refs.spinners||[],o=r.map((function(e){return!!e.hasFocus})).indexOf(!0);o=(o+=n===m.h?-1:1)>=r.length?0:o<0?r.length-1:o,Object(A.d)(r[o])}},setLive:function(e){var t=this;e?this.$nextTick((function(){Object(A.B)((function(){t.isLive=!0}))})):this.isLive=!1}},render:function(e){var t=this;if(this.hidden)return e();var n=this.disabled,r=this.readonly,l=this.computedLocale,d=this.computedAriaLabelledby,h=this.labelIncrement,m=this.labelDecrement,f=this.valueId,v=this.focus,y=[],w=function(d,v,w){var A=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},x=t.safeId("_spinbutton_".concat(v,"_"))||null;return y.push(x),e(B.a,Object(o.a)({class:w,props:L({id:x,placeholder:"--",vertical:!0,required:!0,disabled:n,readonly:r,locale:l,labelIncrement:h,labelDecrement:m,wrap:!0,ariaControls:f,min:0},A),scopedSlots:t.spinScopedSlots,on:{change:d},key:v,ref:"spinners"},c.b,!0))},A=function(){return e("div",{staticClass:"d-flex flex-column",class:{"text-muted":n||r},attrs:{"aria-hidden":"true"}},[e(M.h,{props:{shiftV:4,scale:.5}}),e(M.h,{props:{shiftV:-4,scale:.5}})])},x=[];x.push(w(this.setHours,"hours","b-time-hours",{value:this.modelHours,max:23,step:1,formatterFn:this.formatHours,ariaLabel:this.labelHours})),x.push(A()),x.push(w(this.setMinutes,"minutes","b-time-minutes",{value:this.modelMinutes,max:59,step:this.minutesStep||1,formatterFn:this.formatMinutes,ariaLabel:this.labelMinutes})),this.showSeconds&&(x.push(A()),x.push(w(this.setSeconds,"seconds","b-time-seconds",{value:this.modelSeconds,max:59,step:this.secondsStep||1,formatterFn:this.formatSeconds,ariaLabel:this.labelSeconds}))),this.isLive&&this.is12Hour&&x.push(w(this.setAmpm,"ampm","b-time-ampm",{value:this.modelAmpm,max:1,formatterFn:this.formatAmpm,ariaLabel:this.labelAmpm,required:!1})),x=e("div",{staticClass:"d-flex align-items-center justify-content-center mx-auto",attrs:{role:"group",tabindex:n||r?null:"-1","aria-labelledby":d},on:{keydown:this.onSpinLeftRight,click:function(e){e.target===e.currentTarget&&v()}}},x);var C=e("output",{staticClass:"form-control form-control-sm text-center",class:{disabled:n||r},attrs:{id:f,role:"status",for:y.filter(O.a).join(" ")||null,tabindex:n?null:"-1","aria-live":this.isLive?"polite":"off","aria-atomic":"true"},on:{click:v,focus:v}},[e("bdi",this.formattedTimeString),this.computedHMS?e("span",{staticClass:"sr-only"}," (".concat(this.labelSelected,") ")):""]),_=e(this.headerTag,{staticClass:"b-time-header",class:{"sr-only":this.hideHeader}},[C]),S=this.normalizeSlot(),k=S?e(this.footerTag,{staticClass:"b-time-footer"},S):e();return e("div",{staticClass:"b-time d-inline-flex flex-column text-center",attrs:{role:"group",lang:this.computedLang||null,"aria-labelledby":d||null,"aria-disabled":n?"true":null,"aria-readonly":r&&!n?"true":null}},[_,x,k])}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return Q})),n.d(t,"a",(function(){return U}));n(17),n(16),n(18),n(14),n(19);var r,o=n(2),l=(n(10),n(74),n(405),n(13),n(107),n(50),n(4)),c=n(3),d=n(8),h=n(1),m=n(34),f=n(12),v=n(15),y=n(5),w=n(11),A=n(27),x=n(6),O=n(551),C=n(39),_=n(69),S=n(23),k=n(7),j=n(0),T=n(22),I=n(44),D=n(75),E=n(67),R=n(29),B=n(26),M=n(72),P=n(543);function L(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function F(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?L(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):L(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var $=Object(_.a)("value",{type:h.h}),N=$.mixin,z=$.props,V=$.prop,H=$.event,W=[m.m,m.c,m.g,m.d,m.j,m.i],Q=Object(j.d)(Object(k.m)(F(F(F(F(F(F({},R.b),z),Object(k.j)(M.b,["required","autofocus"])),D.b),E.b),{},{ariaControls:Object(j.c)(h.t),ariaLabel:Object(j.c)(h.t),formatterFn:Object(j.c)(h.l),inline:Object(j.c)(h.g,!1),labelDecrement:Object(j.c)(h.t,"Decrement"),labelIncrement:Object(j.c)(h.t,"Increment"),locale:Object(j.c)(h.f),max:Object(j.c)(h.o,100),min:Object(j.c)(h.o,1),placeholder:Object(j.c)(h.t),readonly:Object(j.c)(h.g,!1),repeatDelay:Object(j.c)(h.o,500),repeatInterval:Object(j.c)(h.o,100),repeatStepMultiplier:Object(j.c)(h.o,4),repeatThreshold:Object(j.c)(h.o,10),step:Object(j.c)(h.o,1),vertical:Object(j.c)(h.g,!1),wrap:Object(j.c)(h.g,!1)})),c.V),U=Object(l.c)({name:c.V,mixins:[I.a,R.a,N,D.a,E.a,B.a],inheritAttrs:!1,props:Q,data:function(){return{localValue:Object(S.b)(this[V],null),hasFocus:!1}},computed:{required:function(){return!1},spinId:function(){return this.safeId()},computedInline:function(){return this.inline&&!this.vertical},computedReadonly:function(){return this.readonly&&!this.disabled},computedRequired:function(){return this.required&&!this.computedReadonly&&!this.disabled},computedStep:function(){return Object(S.b)(this.step,1)},computedMin:function(){return Object(S.b)(this.min,1)},computedMax:function(){var e=Object(S.b)(this.max,100),t=this.computedStep,n=this.computedMin;return Object(C.b)((e-n)/t)*t+n},computedDelay:function(){var e=Object(S.c)(this.repeatDelay,0);return e>0?e:500},computedInterval:function(){var e=Object(S.c)(this.repeatInterval,0);return e>0?e:100},computedThreshold:function(){return Object(C.c)(Object(S.c)(this.repeatThreshold,10),1)},computedStepMultiplier:function(){return Object(C.c)(Object(S.c)(this.repeatStepMultiplier,4),1)},computedPrecision:function(){var e=this.computedStep;return Object(C.b)(e)===e?0:(e.toString().split(".")[1]||"").length},computedMultiplier:function(){return Object(C.e)(10,this.computedPrecision||0)},valueAsFixed:function(){var e=this.localValue;return Object(x.g)(e)?"":e.toFixed(this.computedPrecision)},computedLocale:function(){var e=Object(v.b)(this.locale).filter(A.a);return new Intl.NumberFormat(e).resolvedOptions().locale},computedRTL:function(){return Object(O.a)(this.computedLocale)},defaultFormatter:function(){var e=this.computedPrecision;return new Intl.NumberFormat(this.computedLocale,{style:"decimal",useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:e,maximumFractionDigits:e,notation:"standard"}).format},computedFormatter:function(){var e=this.formatterFn;return Object(j.b)(e)?e:this.defaultFormatter},computedAttrs:function(){return F(F({},this.bvAttrs),{},{role:"group",lang:this.computedLocale,tabindex:this.disabled?null:"-1",title:this.ariaLabel})},computedSpinAttrs:function(){var e=this.spinId,t=this.localValue,n=this.computedRequired,r=this.disabled,o=this.state,l=this.computedFormatter,c=!Object(x.g)(t);return F(F({dir:this.computedRTL?"rtl":"ltr"},this.bvAttrs),{},{id:e,role:"spinbutton",tabindex:r?null:"0","aria-live":"off","aria-label":this.ariaLabel||null,"aria-controls":this.ariaControls||null,"aria-invalid":!1===o||!c&&n?"true":null,"aria-required":n?"true":null,"aria-valuemin":Object(T.g)(this.computedMin),"aria-valuemax":Object(T.g)(this.computedMax),"aria-valuenow":c?t:null,"aria-valuetext":c?l(t):null})}},watch:(r={},Object(o.a)(r,V,(function(e){this.localValue=Object(S.b)(e,null)})),Object(o.a)(r,"localValue",(function(e){this.$emit(H,e)})),Object(o.a)(r,"disabled",(function(e){e&&this.clearRepeat()})),Object(o.a)(r,"readonly",(function(e){e&&this.clearRepeat()})),r),created:function(){this.$_autoDelayTimer=null,this.$_autoRepeatTimer=null,this.$_keyIsDown=!1},beforeDestroy:function(){this.clearRepeat()},deactivated:function(){this.clearRepeat()},methods:{focus:function(){this.disabled||Object(y.d)(this.$refs.spinner)},blur:function(){this.disabled||Object(y.c)(this.$refs.spinner)},emitChange:function(){this.$emit(d.c,this.localValue)},stepValue:function(e){var t=this.localValue;if(!this.disabled&&!Object(x.g)(t)){var n=this.computedStep*e,r=this.computedMin,o=this.computedMax,l=this.computedMultiplier,c=this.wrap;t=Object(C.f)((t-r)/n)*n+r+n,t=Object(C.f)(t*l)/l,this.localValue=t>o?c?r:o:t<r?c?o:r:t}},onFocusBlur:function(e){this.hasFocus=!this.disabled&&"focus"===e.type},stepUp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.localValue;Object(x.g)(t)?this.localValue=this.computedMin:this.stepValue(1*e)},stepDown:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.localValue;Object(x.g)(t)?this.localValue=this.wrap?this.computedMax:this.computedMin:this.stepValue(-1*e)},onKeydown:function(e){var t=e.keyCode,n=e.altKey,r=e.ctrlKey,o=e.metaKey;if(!(this.disabled||this.readonly||n||r||o)&&Object(v.a)(W,t)){if(Object(w.f)(e,{propagation:!1}),this.$_keyIsDown)return;this.resetTimers(),Object(v.a)([m.m,m.c],t)?(this.$_keyIsDown=!0,t===m.m?this.handleStepRepeat(e,this.stepUp):t===m.c&&this.handleStepRepeat(e,this.stepDown)):t===m.j?this.stepUp(this.computedStepMultiplier):t===m.i?this.stepDown(this.computedStepMultiplier):t===m.g?this.localValue=this.computedMin:t===m.d&&(this.localValue=this.computedMax)}},onKeyup:function(e){var t=e.keyCode,n=e.altKey,r=e.ctrlKey,o=e.metaKey;this.disabled||this.readonly||n||r||o||Object(v.a)(W,t)&&(Object(w.f)(e,{propagation:!1}),this.resetTimers(),this.$_keyIsDown=!1,this.emitChange())},handleStepRepeat:function(e,t){var n=this,r=e||{},o=r.type,button=r.button;if(!this.disabled&&!this.readonly){if("mousedown"===o&&button)return;this.resetTimers(),t(1);var l=this.computedThreshold,c=this.computedStepMultiplier,d=this.computedDelay,h=this.computedInterval;this.$_autoDelayTimer=setTimeout((function(){var e=0;n.$_autoRepeatTimer=setInterval((function(){t(e<l?1:c),e++}),h)}),d)}},onMouseup:function(e){var t=e||{},n=t.type,button=t.button;"mouseup"===n&&button||(Object(w.f)(e,{propagation:!1}),this.resetTimers(),this.setMouseup(!1),this.emitChange())},setMouseup:function(e){try{Object(w.c)(e,document.body,"mouseup",this.onMouseup,!1),Object(w.c)(e,document.body,"touchend",this.onMouseup,!1)}catch(e){}},resetTimers:function(){clearTimeout(this.$_autoDelayTimer),clearInterval(this.$_autoRepeatTimer),this.$_autoDelayTimer=null,this.$_autoRepeatTimer=null},clearRepeat:function(){this.resetTimers(),this.setMouseup(!1),this.$_keyIsDown=!1}},render:function(e){var t=this,n=this.spinId,r=this.localValue,o=this.computedInline,l=this.computedReadonly,c=this.vertical,d=this.disabled,h=this.computedFormatter,m=!Object(x.g)(r),v=function(r,label,o,h,m,f,v){var A=e(o,{props:{scale:t.hasFocus?1.5:1.25},attrs:{"aria-hidden":"true"}}),x={hasFocus:t.hasFocus},O=function(e){d||l||(Object(w.f)(e,{propagation:!1}),t.setMouseup(!0),Object(y.d)(e.currentTarget),t.handleStepRepeat(e,r))};return e("button",{staticClass:"btn btn-sm border-0 rounded-0",class:{"py-0":!c},attrs:{tabindex:"-1",type:"button",disabled:d||l||f,"aria-disabled":d||l||f?"true":null,"aria-controls":n,"aria-label":label||null,"aria-keyshortcuts":m||null},on:{mousedown:O,touchstart:O},key:h||null,ref:h},[t.normalizeSlot(v,x)||A])},A=v(this.stepUp,this.labelIncrement,P.l,"inc","ArrowUp",!1,f.s),O=v(this.stepDown,this.labelDecrement,P.k,"dec","ArrowDown",!1,f.f),C=e();this.name&&!d&&(C=e("input",{attrs:{type:"hidden",name:this.name,form:this.form||null,value:this.valueAsFixed},key:"hidden"}));var _=e("output",{staticClass:"flex-grow-1",class:{"d-flex":c,"align-self-center":!c,"align-items-center":c,"border-top":c,"border-bottom":c,"border-left":!c,"border-right":!c},attrs:this.computedSpinAttrs,key:"output",ref:"spinner"},[e("bdi",m?h(r):this.placeholder||"")]);return e("div",{staticClass:"b-form-spinbutton form-control",class:[{disabled:d,readonly:l,focus:this.hasFocus,"d-inline-flex":o||c,"d-flex":!o&&!c,"align-items-stretch":!c,"flex-column":c},this.sizeFormClass,this.stateClass],attrs:this.computedAttrs,on:{keydown:this.onKeydown,keyup:this.onKeyup,"!focus":this.onFocusBlur,"!blur":this.onFocusBlur}},c?[A,C,_,O]:[O,C,_,A])}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return Ge}));var r=n(9);function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function i(e){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var a,h,m=(a=function(e){!function(){var t={}.hasOwnProperty;function i(){for(var e=[],n=0;n<arguments.length;n++){var s=arguments[n];if(s){var r=typeof s;if("string"===r||"number"===r)e.push(s);else if(Array.isArray(s)){if(s.length){var o=i.apply(null,s);o&&e.push(o)}}else if("object"===r)if(s.toString===Object.prototype.toString)for(var a in s)t.call(s,a)&&s[a]&&e.push(a);else e.push(s.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):window.classNames=i}()},a(h={path:undefined,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&h.path)}},h.exports),h.exports),f=function(e){return function(t,i){if(!t)return e;var n;"string"==typeof t?n=t:i=t;var s=e;return n&&(s+="__"+n),s+(i?Object.keys(i).reduce((function(e,t){var n=i[t];return n&&(e+=" "+("boolean"==typeof n?s+"--"+t:s+"--"+t+"_"+n)),e}),""):"")}};function u(e,t,i){var n,s,r,o,a;function l(){var c=Date.now()-o;c<t&&c>=0?n=setTimeout(l,t-c):(n=null,i||(a=e.apply(r,s),r=s=null))}null==t&&(t=100);var c=function(){r=this,s=arguments,o=Date.now();var c=i&&!n;return n||(n=setTimeout(l,t)),c&&(a=e.apply(r,s),r=s=null),a};return c.clear=function(){n&&(clearTimeout(n),n=null)},c.flush=function(){n&&(a=e.apply(r,s),r=s=null,clearTimeout(n),n=null)},c}u.debounce=u;var v=u,y=function(){return y=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},y.apply(this,arguments)};function p(e,t){var i,n;return e&&t?(i=""+e+t[0].toUpperCase()+t.slice(1),n=e+"-"+t):(i=e||t,n=e||t),{name:i,classname:n}}function g(e){return/^blob:/.test(e)}function w(e){return g(e)||function(e){return/^data:/.test(e)}(e)}function b(e){return!!(e&&e.constructor&&e.call&&e.apply)}function A(e){return void 0===e}function x(e){return"object"==typeof e&&null!==e}function O(e,t,i){var n={};return x(e)?(Object.keys(t).forEach((function(s){A(e[s])?n[s]=t[s]:x(t[s])?x(e[s])?n[s]=O(e[s],t[s],i[s]):n[s]=e[s]?t[s]:i[s]:!0===t[s]||!1===t[s]?n[s]=Boolean(e[s]):n[s]=e[s]})),n):e?t:i}function C(e){var t=Number(e);return Number.isNaN(t)?e:t}function _(e){return typeof("number"==e||function(e){return"object"==typeof e&&null!==e}(e)&&"[object Number]"==toString.call(e))&&!S(e)}function S(e){return e!=e}function k(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}var j=function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.type="manipulateImage",this.move=e,this.scale=t},T=function(e,t){void 0===t&&(t={}),this.type="resize",this.directions=e,this.params=t},I=function(e){this.type="move",this.directions=e},D=function(){function e(e,t,i,n,s){this.type="drag",this.nativeEvent=e,this.position=i,this.previousPosition=n,this.element=t,this.anchor=s}return e.prototype.shift=function(){var e=this,t=e.element,i=e.anchor,n=e.position,s=t.getBoundingClientRect(),r=s.left,o=s.top;return{left:n.left-r-i.left,top:n.top-o-i.top}},e}();function E(e,t,i,n,s,r,o,a,l,c){"boolean"!=typeof o&&(l=a,a=o,o=!1);const d="function"==typeof i?i.options:i;let h;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,s&&(d.functional=!0)),n&&(d._scopeId=n),r?(h=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(r)},d._ssrRegister=h):t&&(h=o?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),h)if(d.functional){const e=d.render;d.render=function(t,i){return h.call(i),e(t,i)}}else{const e=d.beforeCreate;d.beforeCreate=e?[].concat(e,h):[h]}return i}var R=E({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{ref:"draggable",class:e.classname,on:{touchstart:e.onTouchStart,mousedown:e.onMouseDown,mouseover:e.onMouseOver,mouseleave:e.onMouseLeave}},[e._t("default")],2)},staticRenderFns:[]},void 0,{name:"DraggableElement",mixins:[{beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&!this.touches.length&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(e){e.cancelable&&!this.disabled&&1===e.touches.length&&(this.touches=c(e.touches),this.hovered||(this.$emit("enter"),this.hovered=!0),e.touches.length&&this.initAnchor(this.touches.reduce((function(t,i){return{clientX:t.clientX+i.clientX/e.touches.length,clientY:t.clientY+i.clientY/e.touches.length}}),{clientX:0,clientY:0})),e.preventDefault&&e.preventDefault(),e.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(e){this.touches.length&&(this.processMove(e,e.touches),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())},onMouseDown:function(e){if(!this.disabled&&0===e.button){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.preventDefault())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.draggable.getBoundingClientRect(),i=t.left,n=t.right,s=t.bottom,r=t.top;this.anchor={left:e.clientX-i,top:e.clientY-r,bottom:s-e.clientY,right:n-e.clientX}},processMove:function(e,t){var i=c(t);if(this.touches.length){if(1===this.touches.length&&1===i.length){var n=this.$refs.draggable;this.$emit("drag",new D(e,n,{left:i[0].clientX,top:i[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=i}},processEnd:function(){this.touches.length&&this.$emit("drag-end"),this.hovered&&(this.$emit("leave"),this.hovered=!1),this.touches=[]}}}],props:{classname:{type:String}}},void 0,!1,void 0,!1,void 0,void 0,void 0),B=f("vue-handler-wrapper"),M=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.classes.root},[i("DraggableElement",{class:e.classes.draggable,on:{drag:function(t){return e.$emit("drag",t)},"drag-end":function(t){return e.$emit("drag-end")},leave:function(t){return e.$emit("leave")},enter:function(t){return e.$emit("enter")}}},[e._t("default")],2)],1)},staticRenderFns:[]},void 0,{name:"HandlerWrapper",components:{DraggableElement:R},props:{horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classes:function(){var e;if(this.horizontalPosition||this.verticalPosition){var t,i=p(this.horizontalPosition,this.verticalPosition);e=B((l(t={},i.classname,!0),l(t,"disabled",this.disabled),t))}else e=B({disabled:this.disabled});return{root:e,draggable:B("draggable")}}}},void 0,!1,void 0,!1,void 0,void 0,void 0),P=f("vue-line-wrapper"),L=E({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("DraggableElement",{class:e.classname,on:{drag:function(t){return e.$emit("drag",t)},"drag-end":function(t){return e.$emit("drag-end")},leave:function(t){return e.$emit("leave")},enter:function(t){return e.$emit("enter")}}},[e._t("default")],2)},staticRenderFns:[]},void 0,{name:"LineWrapper",components:{DraggableElement:R},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var e;return P((l(e={},this.position,!0),l(e,"disabled",this.disabled),e))}}},void 0,!1,void 0,!1,void 0,void 0,void 0),F=["left","right","top","bottom"],$=["left","right"],N=["top","bottom"],z=["left","top"],V=["fill-area","fit-area","stencil","none"],H={left:0,top:0,width:0,height:0};function W(e,t,i){return!(i=i||["width","height","left","top"]).some((function(i){return e[i]!==t[i]}))}function Q(e){return{left:e.left,top:e.top,right:e.left+e.width,bottom:e.top+e.height}}function U(e,t){return{left:e.left-t.left,top:e.top-t.top}}function Y(e){return{left:e.left+e.width/2,top:e.top+e.height/2}}function G(e,t){var i={left:0,top:0,right:0,bottom:0};return F.forEach((function(n){var s=t[n],r=Q(e)[n];i[n]=void 0!==s&&void 0!==r?"left"===n||"top"===n?Math.max(0,s-r):Math.max(0,r-s):0})),i}function K(e,t){return{left:e.left-t.left,top:e.top-t.top,width:e.width+t.left+t.right,height:e.height+t.top+t.bottom}}function X(e){return{left:-e.left,top:-e.top}}function q(e,t){return y(y({},e),{left:e.left+t.left,top:e.top+t.top})}function Z(e,t,i,n){if(1!==t){if(i){var s=Y(e);return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2+(i.left-s.left)*(n||1-t),top:e.top+e.height*(1-t)/2+(i.top-s.top)*(n||1-t)}}return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2,top:e.top+e.height*(1-t)/2}}return e}function J(e){return e.width/e.height}function ee(e,t){return Math.min(void 0!==t.right&&void 0!==t.left?(t.right-t.left)/e.width:1/0,void 0!==t.bottom&&void 0!==t.top?(t.bottom-t.top)/e.height:1/0)}function te(e,t){var i={left:0,top:0},n=G(e,t);return n.left&&n.left>0?i.left=n.left:n.right&&n.right>0&&(i.left=-n.right),n.top&&n.top>0?i.top=n.top:n.bottom&&n.bottom>0&&(i.top=-n.bottom),i}function ne(e,t){var i;return t.minimum&&e<t.minimum?i=t.minimum:t.maximum&&e>t.maximum&&(i=t.maximum),i}function re(e,t){var i=J(e),n=J(t);return t.width<1/0&&t.height<1/0?i>n?{width:t.width,height:t.width/i}:{width:t.height*i,height:t.height}:t.width<1/0?{width:t.width,height:t.width/i}:t.height<1/0?{width:t.height*i,height:t.height}:e}function oe(e,t){var i=t*Math.PI/180;return{width:Math.abs(e.width*Math.cos(i))+Math.abs(e.height*Math.sin(i)),height:Math.abs(e.width*Math.sin(i))+Math.abs(e.height*Math.cos(i))}}function ie(e,t){var i=t*Math.PI/180;return{left:e.left*Math.cos(i)-e.top*Math.sin(i),top:e.left*Math.sin(i)+e.top*Math.cos(i)}}function se(e,t){var i=G(ae(e,t),t);return i.left+i.right+i.top+i.bottom?i.left+i.right>i.top+i.bottom?Math.min((e.width+i.left+i.right)/e.width,ee(e,t)):Math.min((e.height+i.top+i.bottom)/e.height,ee(e,t)):1}function ae(e,t,i){void 0===i&&(i=!1);var n=te(e,t);return q(e,i?X(n):n)}function rt(e){return{width:void 0!==e.right&&void 0!==e.left?e.right-e.left:1/0,height:void 0!==e.bottom&&void 0!==e.top?e.bottom-e.top:1/0}}function le(e,t,i){void 0===i&&(i=!0);var n={};return F.forEach((function(s){var r=e[s],o=t[s];void 0!==r&&void 0!==o?n[s]="left"===s||"top"===s?i?Math.max(r,o):Math.min(r,o):i?Math.min(r,o):Math.max(r,o):void 0!==o?n[s]=o:void 0!==r&&(n[s]=r)})),n}function ce(e,t){return le(e,t,!0)}function ue(e){var t=e.size,i=e.aspectRatio,n=e.ignoreMinimum,s=e.sizeRestrictions;return Boolean((t.correctRatio||J(t)>=i.minimum&&J(t)<=i.maximum)&&t.height<=s.maxHeight&&t.width<=s.maxWidth&&t.width&&t.height&&(n||t.height>=s.minHeight&&t.width>=s.minWidth))}function dt(e,t){return Math.pow(e.width-t.width,2)+Math.pow(e.height-t.height,2)}function de(e){var t=e.width,i=e.height,n=e.sizeRestrictions,s={minimum:e.aspectRatio&&e.aspectRatio.minimum||0,maximum:e.aspectRatio&&e.aspectRatio.maximum||1/0},r={width:Math.max(n.minWidth,Math.min(n.maxWidth,t)),height:Math.max(n.minHeight,Math.min(n.maxHeight,i))};function o(e,r){return void 0===r&&(r=!1),e.reduce((function(e,o){return ue({size:o,aspectRatio:s,sizeRestrictions:n,ignoreMinimum:r})&&(!e||dt(o,{width:t,height:i})<dt(e,{width:t,height:i}))?o:e}),null)}var a=[];s&&[s.minimum,s.maximum].forEach((function(e){e&&a.push({width:r.width,height:r.width/e,correctRatio:!0},{width:r.height*e,height:r.height,correctRatio:!0})})),ue({size:r,aspectRatio:s,sizeRestrictions:n})&&a.push(r);var l=o(a)||o(a,!0);return l&&{width:l.width,height:l.height}}function he(e){var t=e.event,i=e.coordinates,n=e.positionRestrictions,s=void 0===n?{}:n,r=q(i,t.directions);return q(r,te(r,s))}function pe(e){e.event;var t=e.getAreaRestrictions,i=e.boundaries,n=e.coordinates,s=e.visibleArea;e.aspectRatio;var r=e.stencilSize,o=e.sizeRestrictions,a=e.positionRestrictions;e.stencilReference;var l,c,d,h=y({},n),u=y({},s),m=y({},r);l=J(m),c=J(h),void 0===d&&(d=.001),(0===l||0===c?Math.abs(c-l)<d:Math.abs(c/l)<1+d&&Math.abs(c/l)>1-d)||(h=y(y({},h),de({sizeRestrictions:o,width:h.width,height:h.height,aspectRatio:{minimum:J(m),maximum:J(m)}})));var p=se(u=Z(u,h.width*i.width/(u.width*m.width)),t({visibleArea:u,type:"resize"}));return 1!==p&&(u=Z(u,p),h=Z(h,p)),u=ae(u=q(u,U(Y(h),Y(u))),t({visibleArea:u,type:"move"})),{coordinates:h=ae(h,ce(Q(u),a)),visibleArea:u}}function me(e){var t=e.event,i=e.getAreaRestrictions,n=e.boundaries,s=e.coordinates,r=e.visibleArea;e.aspectRatio,e.stencilSize,e.sizeRestrictions;var o=e.positionRestrictions;e.stencilReference;var a=y({},s),l=y({},r);if(s&&r&&"manipulateImage"!==t.type){var c={width:0,height:0};l.width,n.width,J(n)>J(a)?(c.height=.8*n.height,c.width=c.height*J(a)):(c.width=.8*n.width,c.height=c.width*J(a));var d=se(l=Z(l,a.width*n.width/(l.width*c.width)),i({visibleArea:l,type:"resize"}));l=Z(l,d),1!==d&&(c.height/=d,c.width/=d),l=ae(l=q(l,U(Y(a),Y(l))),i({visibleArea:l,type:"move"})),a=ae(a,ce(Q(l),o))}return{coordinates:a,visibleArea:l}}function fe(e){var t=e.event,i=e.coordinates,n=e.visibleArea,s=e.getAreaRestrictions,r=y({},n),o=y({},i);if("setCoordinates"===t.type){var a=Math.max(0,o.width-r.width),l=Math.max(0,o.height-r.height);a>l?r=Z(r,Math.min(o.width/r.width,ee(r,s({visibleArea:r,type:"resize"})))):l>a&&(r=Z(r,Math.min(o.height/r.height,ee(r,s({visibleArea:r,type:"resize"}))))),r=ae(r=q(r,X(te(o,Q(r)))),s({visibleArea:r,type:"move"}))}return{visibleArea:r,coordinates:o}}function ge(e){var t=e.imageSize,i=e.visibleArea,n=e.aspectRatio,s=e.sizeRestrictions,r=i||t,o=Math.min(n.maximum||1/0,Math.max(n.minimum||0,J(r))),a=r.width<r.height?{width:.8*r.width,height:.8*r.width/o}:{height:.8*r.height,width:.8*r.height*o};return de(y(y({},a),{aspectRatio:n,sizeRestrictions:s}))}function be(e){var t,i,n=e.imageSize,s=e.visibleArea,r=e.boundaries,o=e.aspectRatio,a=e.sizeRestrictions,l=e.stencilSize,c=s||n;return J(c)>J(r)?i=(t=l.height*c.height/r.height)*J(l):t=(i=l.width*c.width/r.width)/J(l),de({width:i,height:t,aspectRatio:o,sizeRestrictions:a})}function ve(e,t){return le(e,Q(t))}function ye(e){var t=e.directions,i=e.coordinates,n=e.positionRestrictions,s=void 0===n?{}:n,r=e.sizeRestrictions,o=e.preserveRatio,a=e.compensate,l=y({},t),c=K(i,l).width,d=K(i,l).height;c<0&&(l.left<0&&l.right<0?(l.left=-(i.width-r.minWidth)/(l.left/l.right),l.right=-(i.width-r.minWidth)/(l.right/l.left)):l.left<0?l.left=-(i.width-r.minWidth):l.right<0&&(l.right=-(i.width-r.minWidth))),d<0&&(l.top<0&&l.bottom<0?(l.top=-(i.height-r.minHeight)/(l.top/l.bottom),l.bottom=-(i.height-r.minHeight)/(l.bottom/l.top)):l.top<0?l.top=-(i.height-r.minHeight):l.bottom<0&&(l.bottom=-(i.height-r.minHeight)));var h=G(K(i,l),s);a&&(h.left&&h.left>0&&0===h.right?(l.right+=h.left,l.left-=h.left):h.right&&h.right>0&&0===h.left&&(l.left+=h.right,l.right-=h.right),h.top&&h.top>0&&0===h.bottom?(l.bottom+=h.top,l.top-=h.top):h.bottom&&h.bottom>0&&0===h.top&&(l.top+=h.bottom,l.bottom-=h.bottom),h=G(K(i,l),s));var u={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(F.forEach((function(e){var t=h[e];t&&l[e]&&(u[e]=Math.max(0,1-t/l[e]))})),o){var m=Math.min.apply(null,F.map((function(e){return u[e]})));m!==1/0&&F.forEach((function(e){l[e]*=m}))}else F.forEach((function(e){u[e]!==1/0&&(l[e]*=u[e])}));if(c=K(i,l).width,d=K(i,l).height,l.right+l.left&&(c>r.maxWidth?u.width=(r.maxWidth-i.width)/(l.right+l.left):c<r.minWidth&&(u.width=(r.minWidth-i.width)/(l.right+l.left))),l.bottom+l.top&&(d>r.maxHeight?u.height=(r.maxHeight-i.height)/(l.bottom+l.top):d<r.minHeight&&(u.height=(r.minHeight-i.height)/(l.bottom+l.top))),o){var p=Math.min(u.width,u.height);p!==1/0&&F.forEach((function(e){l[e]*=p}))}else u.width!==1/0&&$.forEach((function(e){l[e]*=u.width})),u.height!==1/0&&N.forEach((function(e){l[e]*=u.height}));return l}function we(e,t,i){return 0==t&&0==i?e/2:0==t?0:0==i?e:e*Math.abs(t/(t+i))}var Ae=f("vue-simple-handler"),xe=f("vue-simple-handler-wrapper"),Oe=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("HandlerWrapper",{class:e.classes.wrapper,attrs:{"vertical-position":e.verticalPosition,"horizontal-position":e.horizontalPosition,disabled:e.disabled},on:{drag:e.onDrag,"drag-end":e.onDragEnd,enter:e.onEnter,leave:e.onLeave}},[i("div",{class:e.classes.default})])},staticRenderFns:[]},void 0,{name:"SimpleHandler",components:{HandlerWrapper:M},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){var e,t=(l(e={},this.horizontalPosition,Boolean(this.horizontalPosition)),l(e,this.verticalPosition,Boolean(this.verticalPosition)),l(e,"".concat(this.horizontalPosition,"-").concat(this.verticalPosition),Boolean(this.verticalPosition&&this.horizontalPosition)),l(e,"hover",this.hover),e);return{default:m(Ae(t),this.defaultClass,this.hover&&this.hoverClass),wrapper:m(xe(t),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}}},void 0,!1,void 0,!1,void 0,void 0,void 0),Ce=f("vue-simple-line"),_e=f("vue-simple-line-wrapper"),Se=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("LineWrapper",{class:e.classes.wrapper,attrs:{position:e.position,disabled:e.disabled},on:{drag:e.onDrag,"drag-end":e.onDragEnd,enter:e.onEnter,leave:e.onLeave}},[i("div",{class:e.classes.root})])},staticRenderFns:[]},void 0,{name:"SimpleLine",components:{LineWrapper:L},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){return{root:m(Ce(l({},this.position,!0)),this.defaultClass,this.hover&&this.hoverClass),wrapper:m(_e(l({},this.position,!0)),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}}},void 0,!1,void 0,!1,void 0,void 0,void 0),ke=f("vue-bounding-box"),je=["east","west",null],Te=["south","north",null],Ie=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"box",class:e.classes.root,style:e.style},[e._t("default"),e._v(" "),i("div",e._l(e.lineNodes,(function(t){return i(t.component,{key:t.name,tag:"component",attrs:{"default-class":t.class,"hover-class":t.hoverClass,"wrapper-class":t.wrapperClass,position:t.name,disabled:t.disabled},on:{drag:function(i){return e.onHandlerDrag(i,t.horizontalDirection,t.verticalDirection)},"drag-end":function(t){return e.onEnd()}}})})),1),e._v(" "),e._l(e.handlerNodes,(function(t){return i("div",{key:t.name,class:t.wrapperClass,style:t.wrapperStyle},[i(t.component,{tag:"component",attrs:{"default-class":t.class,"hover-class":t.hoverClass,"wrapper-class":t.wrapperClass,"horizontal-position":t.horizontalDirection,"vertical-position":t.verticalDirection,disabled:t.disabled},on:{drag:function(i){return e.onHandlerDrag(i,t.horizontalDirection,t.verticalDirection)},"drag-end":function(t){return e.onEnd()}}})],1)}))],2)},staticRenderFns:[]},void 0,{name:"BoundingBox",props:{width:{type:Number},height:{type:Number},transitions:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlersComponent:{type:[Object,String],default:function(){return Oe}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},linesComponent:{type:[Object,String],default:function(){return Se}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},resizable:{type:Boolean,default:!0}},data:function(){var e=[];return je.forEach((function(t){Te.forEach((function(i){if(t!==i){var n=p(t,i),s=n.name,r=n.classname;e.push({name:s,classname:r,verticalDirection:i,horizontalDirection:t})}}))})),{points:e}},computed:{style:function(){var e={};return this.width&&this.height&&(e.width="".concat(this.width,"px"),e.height="".concat(this.height,"px"),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction))),e},classes:function(){var e=this.handlersClasses,t=this.handlersWrappersClasses,i=this.linesClasses,n=this.linesWrappersClasses;return{root:ke(),handlers:e,handlersWrappers:t,lines:i,linesWrappers:n}},lineNodes:function(){var e=this,t=[];return this.points.forEach((function(i){i.horizontalDirection&&i.verticalDirection||!e.lines[i.name]||t.push({name:i.name,component:e.linesComponent,class:m(e.classes.lines.default,e.classes.lines[i.name],!e.resizable&&e.classes.lines.disabled),wrapperClass:m(e.classes.linesWrappers.default,e.classes.linesWrappers[i.name],!e.resizable&&e.classes.linesWrappers.disabled),hoverClass:e.classes.lines.hover,verticalDirection:i.verticalDirection,horizontalDirection:i.horizontalDirection,disabled:!e.resizable})})),t},handlerNodes:function(){var e=this,t=[],i=this.width,s=this.height;return this.points.forEach((function(n){if(e.handlers[n.name]){var r={name:n.name,component:e.handlersComponent,class:m(e.classes.handlers.default,e.classes.handlers[n.name]),wrapperClass:m(e.classes.handlersWrappers.default,e.classes.handlersWrappers[n.name]),hoverClass:e.classes.handlers.hover,verticalDirection:n.verticalDirection,horizontalDirection:n.horizontalDirection,disabled:!e.resizable};if(i&&s){var a=n.horizontalDirection,o=n.verticalDirection,c="east"===a?i:"west"===a?0:i/2,d="south"===o?s:"north"===o?0:s/2;r.wrapperClass=ke("handler"),r.wrapperStyle={transform:"translate(".concat(c,"px, ").concat(d,"px)")},e.transitions&&e.transitions.enabled&&(r.wrapperStyle.transition="".concat(e.transitions.time,"ms ").concat(e.transitions.timingFunction))}else r.wrapperClass=ke("handler",l({},n.classname,!0));t.push(r)}})),t}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onEnd:function(){this.$emit("resize-end")},onHandlerDrag:function(e,t,i){var n,s=e.shift(),r=s.left,o=s.top,a={left:0,right:0,top:0,bottom:0};"west"===t?a.left-=r:"east"===t&&(a.right+=r),"north"===i?a.top-=o:"south"===i&&(a.bottom+=o),!i&&t?n="width":i&&!t&&(n="height"),this.resizable&&this.$emit("resize",new T(a,{allowedDirections:{left:"west"===t||!t,right:"east"===t||!t,bottom:"south"===i||!i,top:"north"===i||!i},preserveAspectRatio:e.nativeEvent&&e.nativeEvent.shiftKey,respectDirection:n}))}}},void 0,!1,void 0,!1,void 0,void 0,void 0),De=f("vue-draggable-area"),Ee=E({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{ref:"container",on:{touchstart:e.onTouchStart,mousedown:e.onMouseDown}},[e._t("default")],2)},staticRenderFns:[]},void 0,{name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:20}},computed:{classnames:function(){return{default:De()}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(e){if(e.cancelable){var t=this.movable&&1===e.touches.length;t&&(this.touches=c(e.touches)),(this.touchStarted||t)&&(e.preventDefault(),e.stopPropagation())}},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(e){this.touches.length>=1&&(this.touchStarted?(this.processMove(e,e.touches),e.preventDefault(),e.stopPropagation()):k({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:e.touches[0].clientX,y:e.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(e){if(this.movable&&0===e.button){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.cancelable&&e.preventDefault(),e.stopPropagation())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.container.getBoundingClientRect(),i=t.left,n=t.top;this.anchor={x:e.clientX-i,y:e.clientY-n}},processMove:function(e,t){var i=c(t);if(this.touches.length){var n=this.$refs.container.getBoundingClientRect(),s=n.left,r=n.top;1===this.touches.length&&1===i.length&&this.$emit("move",new I({left:i[0].clientX-(s+this.anchor.x),top:i[0].clientY-(r+this.anchor.y)}))}},processEnd:function(){this.touches.length&&this.$emit("move-end"),this.touches=[]}}},void 0,!1,void 0,!1,void 0,void 0,void 0);function Re(e){var t,i;return{rotate:e.rotate||0,flip:{horizontal:(null===(t=null==e?void 0:e.flip)||void 0===t?void 0:t.horizontal)||!1,vertical:(null===(i=null==e?void 0:e.flip)||void 0===i?void 0:i.vertical)||!1}}}function Be(e){var t=e.rotate,i=e.flip,n=e.scaleX,s=e.scaleY,r="";return r+=" rotate("+t+"deg) ",(r+=" scaleX("+n*(i.horizontal?-1:1)+") ")+" scaleY("+s*(i.vertical?-1:1)+") "}var Me=f("vue-preview-result");E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.classes.root},[i("div",{ref:"wrapper",class:e.classes.wrapper,style:e.wrapperStyle},[i("img",{ref:"image",class:e.classes.image,style:e.imageStyle,attrs:{src:e.image.src}})])])},staticRenderFns:[]},void 0,{name:"PreviewResult",props:{image:{type:Object},transitions:{type:Object},stencilCoordinates:{type:Object,default:function(){return{width:0,height:0,left:0,top:0}}},imageClass:{type:String}},computed:{classes:function(){return{root:Me(),wrapper:Me("wrapper"),imageWrapper:Me("image-wrapper"),image:m(Me("image"),this.imageClass)}},wrapperStyle:function(){var e={width:"".concat(this.stencilCoordinates.width,"px"),height:"".concat(this.stencilCoordinates.height,"px"),left:"calc(50% - ".concat(this.stencilCoordinates.width/2,"px)"),top:"calc(50% - ".concat(this.stencilCoordinates.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},imageStyle:function(){var e=this.image.transforms,t=oe({width:this.image.width,height:this.image.height},e.rotate),i={width:"".concat(this.image.width,"px"),height:"".concat(this.image.height,"px"),left:"0px",top:"0px"},n=(this.image.width-t.width)*e.scaleX/2,r=(this.image.height-t.height)*e.scaleY/2,o=(1-e.scaleX)*this.image.width/2,l=(1-e.scaleY)*this.image.height/2;return i.transform="translate(\n\t\t\t\t".concat(-this.stencilCoordinates.left-e.translateX-n-o,"px,").concat(-this.stencilCoordinates.top-e.translateY-r-l,"px) ")+Be(e),this.transitions&&this.transitions.enabled&&(i.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),i}}},void 0,!1,void 0,!1,void 0,void 0,void 0);function Pe(e,t){var i=t.getBoundingClientRect(),n=i.left,s=i.top,r={left:0,top:0},o=0;return e.forEach((function(t){r.left+=(t.clientX-n)/e.length,r.top+=(t.clientY-s)/e.length})),e.forEach((function(e){o+=k({x:r.left,y:r.top},{x:e.clientX-n,y:e.clientY-s})})),{centerMass:r,spread:o,count:e.length}}var Le=E({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{ref:"container",on:{touchstart:e.onTouchStart,mousedown:e.onMouseDown,wheel:e.onWheel}},[e._t("default")],2)},staticRenderFns:[]},void 0,{props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0},eventsFilter:{type:Function,required:!1}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},created:function(){this.transforming=!1,this.debouncedProcessEnd=v(this.processEnd),this.touches=[]},methods:{processMove:function(e,t){if(this.touches.length){if(1===this.touches.length&&1===t.length)this.$emit("move",new j({left:this.touches[0].clientX-t[0].clientX,top:this.touches[0].clientY-t[0].clientY}));else if(this.touches.length>1&&this.touchResize){var i=Pe(t,this.$refs.container),n=this.oldGeometricProperties;n.count===i.count&&n.count>1&&this.$emit("resize",new j({left:n.centerMass.left-i.centerMass.left,top:n.centerMass.top-i.centerMass.top},{factor:n.spread/i.spread,center:i.centerMass})),this.oldGeometricProperties=i}this.touches=t}},processEnd:function(){this.transforming&&(this.transforming=!1,this.$emit("transform-end"))},processStart:function(){this.transforming=!0,this.debouncedProcessEnd.clear()},processEvent:function(e){return this.eventsFilter?!1!==this.eventsFilter(e,this.transforming):(e.preventDefault(),e.stopPropagation(),!0)},onTouchStart:function(e){if(e.cancelable&&(this.touchMove||this.touchResize&&e.touches.length>1)&&this.processEvent(e)){var t=this.$refs.container,i=t.getBoundingClientRect(),n=i.left,s=i.top,r=i.bottom,a=i.right;this.touches=c(e.touches).filter((function(e){return e.clientX>n&&e.clientX<a&&e.clientY>s&&e.clientY<r})),this.oldGeometricProperties=Pe(this.touches,t)}},onTouchEnd:function(e){0===e.touches.length&&(this.touches=[],this.processEnd())},onTouchMove:function(e){var t=this;if(this.touches.length){var i=c(e.touches).filter((function(e){return!e.identifier||t.touches.find((function(t){return t.identifier===e.identifier}))}));this.processEvent(e)&&(this.processMove(e,i),this.processStart())}},onMouseDown:function(e){if(this.mouseMove&&"buttons"in e&&1===e.buttons&&this.processEvent(e)){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.processStart()}},onMouseMove:function(e){this.touches.length&&this.processEvent(e)&&this.processMove(e,[{clientX:e.clientX,clientY:e.clientY}])},onMouseUp:function(){this.touches=[],this.processEnd()},onWheel:function(e){if(this.wheelResize&&this.processEvent(e)){var t=this.$refs.container.getBoundingClientRect(),i=t.left,n=t.top,s=1+this.wheelResize.ratio*(0==(a=+(e.deltaY||e.detail||e.wheelDelta))||S(a)?a:a>0?1:-1),r={left:e.clientX-i,top:e.clientY-n};this.$emit("resize",new j({},{factor:s,center:r})),this.touches.length||this.debouncedProcessEnd()}var a}}},void 0,!1,void 0,!1,void 0,void 0,void 0),Fe=E({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("transformable-image",{attrs:{"touch-move":e.touchMove,"touch-resize":e.touchResize,"mouse-move":e.mouseMove,"wheel-resize":e.wheelResize},on:{move:function(t){return e.$emit("move",t)},resize:function(t){return e.$emit("resize",t)}}},[e._t("default")],2)},staticRenderFns:[]},void 0,{components:{TransformableImage:Le},props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0}}},void 0,!1,void 0,!1,void 0,void 0,void 0),$e=f("vue-preview"),Ne=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"root",class:e.classes.root,style:e.style},[i("div",{ref:"wrapper",class:e.classes.wrapper,style:e.wrapperStyle},[i("img",{directives:[{name:"show",rawName:"v-show",value:e.image&&e.image.src,expression:"image && image.src"}],ref:"image",class:e.classes.image,style:e.imageStyle,attrs:{src:e.image&&e.image.src}})])])},staticRenderFns:[]},void 0,{props:{coordinates:{type:Object},transitions:{type:Object},image:{type:Object,default:function(){return{}}},imageClass:{type:String},width:{type:Number},height:{type:Number},fill:{type:Boolean}},data:function(){return{calculatedImageSize:{width:0,height:0},calculatedSize:{width:0,height:0}}},computed:{classes:function(){return{root:$e({fill:this.fill}),wrapper:$e("wrapper"),imageWrapper:$e("image-wrapper"),image:m($e("image"),this.imageClass)}},style:function(){if(this.fill)return{};var e={};return this.width&&(e.width="".concat(this.size.width,"px")),this.height&&(e.height="".concat(this.size.height,"px")),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},wrapperStyle:function(){var e={width:"".concat(this.size.width,"px"),height:"".concat(this.size.height,"px"),left:"calc(50% - ".concat(this.size.width/2,"px)"),top:"calc(50% - ".concat(this.size.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},imageStyle:function(){if(this.coordinates&&this.image){var e=this.coordinates.width/this.size.width,t=i(i({rotate:0,flip:{horizontal:!1,vertical:!1}},this.image.transforms),{},{scaleX:1/e,scaleY:1/e}),n=this.imageSize.width,s=this.imageSize.height,r=oe({width:n,height:s},t.rotate),o={width:"".concat(n,"px"),height:"".concat(s,"px"),left:"0px",top:"0px"},a={rotate:{left:(n-r.width)*t.scaleX/2,top:(s-r.height)*t.scaleY/2},scale:{left:(1-t.scaleX)*n/2,top:(1-t.scaleY)*s/2}};return o.transform="translate(\n\t\t\t\t".concat(-this.coordinates.left/e-a.rotate.left-a.scale.left,"px,").concat(-this.coordinates.top/e-a.rotate.top-a.scale.top,"px) ")+Be(t),this.transitions&&this.transitions.enabled&&(o.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),o}return{}},size:function(){return{width:this.width||this.calculatedSize.width,height:this.height||this.calculatedSize.height}},imageSize:function(){return{width:this.image.width||this.calculatedImageSize.width,height:this.image.height||this.calculatedImageSize.height}}},watch:{image:function(e){(e.width||e.height)&&this.onChangeImage()}},mounted:function(){var e=this;this.onChangeImage(),this.$refs.image.addEventListener("load",(function(){e.refreshImage()})),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},destroyed:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh)},methods:{refreshImage:function(){var e=this.$refs.image;this.calculatedImageSize.height=e.naturalHeight,this.calculatedImageSize.width=e.naturalWidth},refresh:function(){var e=this.$refs.root;this.width||(this.calculatedSize.width=e.clientWidth),this.height||(this.calculatedSize.height=e.clientHeight)},onChangeImage:function(){var e=this.$refs.image;e&&e.complete&&this.refreshImage(),this.refresh()}}},void 0,!1,void 0,!1,void 0,void 0,void 0),ze=E({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("preview",e._b({attrs:{fill:!0}},"preview",e.$attrs,!1))},staticRenderFns:[]},void 0,{components:{Preview:Ne},inheritAttrs:!1},void 0,!1,void 0,!1,void 0,void 0,void 0),Ve=f("vue-rectangle-stencil"),He=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.classes.stencil,style:e.style},[i("bounding-box",{class:e.classes.boundingBox,attrs:{width:e.stencilCoordinates.width,height:e.stencilCoordinates.height,transitions:e.transitions,handlers:e.handlers,"handlers-component":e.handlersComponent,"handlers-classes":e.handlersClasses,"handlers-wrappers-classes":e.handlersWrappersClasses,lines:e.lines,"lines-component":e.linesComponent,"lines-classes":e.linesClasses,"lines-wrappers-classes":e.linesWrappersClasses,resizable:e.resizable},on:{resize:e.onResize,"resize-end":e.onResizeEnd}},[i("draggable-area",{attrs:{movable:e.movable},on:{move:e.onMove,"move-end":e.onMoveEnd}},[i("stencil-preview",{class:e.classes.preview,attrs:{image:e.image,coordinates:e.coordinates,width:e.stencilCoordinates.width,height:e.stencilCoordinates.height,transitions:e.transitions}})],1)],1)],1)},staticRenderFns:[]},void 0,{name:"RectangleStencil",components:{StencilPreview:ze,BoundingBox:Ie,DraggableArea:Ee},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlersComponent:{type:[Object,String],default:function(){return Oe}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return Se}},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:m(Ve({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:m(Ve("preview"),this.previewClass),boundingBox:m(Ve("bounding-box"),this.boundingBoxClass)}},style:function(){var e=this.stencilCoordinates,t=e.height,i=e.width,n=e.left,s=e.top,r={width:"".concat(i,"px"),height:"".concat(t,"px"),transform:"translate(".concat(n,"px, ").concat(s,"px)")};return this.transitions&&this.transitions.enabled&&(r.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),r}},methods:{onMove:function(e){this.$emit("move",e),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(e){this.$emit("resize",e),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}}},void 0,!1,void 0,!1,void 0,void 0,void 0),We=f("vue-circle-stencil"),qe=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.classes.stencil,style:e.style},[i("bounding-box",{class:e.classes.boundingBox,attrs:{width:e.stencilCoordinates.width,height:e.stencilCoordinates.height,transitions:e.transitions,handlers:e.handlers,"handlers-component":e.handlersComponent,"handlers-classes":e.handlersClasses,"handlers-wrappers-classes":e.handlersWrappersClasses,lines:e.lines,"lines-component":e.linesComponent,"lines-classes":e.linesClasses,"lines-wrappers-classes":e.linesWrappersClasses,resizable:e.resizable},on:{resize:e.onResize,"resize-end":e.onResizeEnd}},[i("draggable-area",{attrs:{movable:e.movable},on:{move:e.onMove,"move-end":e.onMoveEnd}},[i("stencil-preview",{class:e.classes.preview,attrs:{image:e.image,coordinates:e.coordinates,width:e.stencilCoordinates.width,height:e.stencilCoordinates.height,transitions:e.transitions}})],1)],1)],1)},staticRenderFns:[]},void 0,{components:{StencilPreview:ze,BoundingBox:Ie,DraggableArea:Ee},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,westNorth:!0,westSouth:!0,eastSouth:!0}}},handlersComponent:{type:[Object,String],default:function(){return Oe}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return Se}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:m(We({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:m(We("preview"),this.previewClass),boundingBox:m(We("bounding-box"),this.boundingBoxClass)}},style:function(){var e=this.stencilCoordinates,t=e.height,i=e.width,n=e.left,s=e.top,r={width:"".concat(i,"px"),height:"".concat(t,"px"),transform:"translate(".concat(n,"px, ").concat(s,"px)")};return this.transitions&&this.transitions.enabled&&(r.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),r}},methods:{onMove:function(e){this.$emit("move",e),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(e){this.$emit("resize",e),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:1,maximum:1}}}},void 0,!1,void 0,!1,void 0,void 0,void 0),Qe=["transitions"],Ue=f("vue-advanced-cropper"),Ye={name:"Cropper",components:{BackgroundWrapper:Fe},props:{src:{type:String,default:null},stencilComponent:{type:[Object,String],default:function(){return He}},backgroundWrapperComponent:{type:[Object,String],default:function(){return Fe}},stencilProps:{type:Object,default:function(){return{}}},autoZoom:{type:Boolean,default:!1},imageClass:{type:String},boundariesClass:{type:String},backgroundClass:{type:String},foregroundClass:{type:String},minWidth:{type:[Number,String]},minHeight:{type:[Number,String]},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},debounce:{type:[Boolean,Number],default:500},transitions:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},canvas:{type:[Object,Boolean],default:!0},crossOrigin:{type:[Boolean,String],default:void 0},transitionTime:{type:Number,default:300},imageRestriction:{type:String,default:"fit-area",validator:function(e){return-1!==V.indexOf(e)}},roundResult:{type:Boolean,default:!0},defaultSize:{type:[Function,Object]},defaultPosition:{type:[Function,Object],default:function(e){var t=e.imageSize,i=e.visibleArea,n=e.coordinates,s=i||t;return{left:(i?i.left:0)+s.width/2-n.width/2,top:(i?i.top:0)+s.height/2-n.height/2}}},defaultVisibleArea:{type:[Function,Object],default:function(e){var t=e.getAreaRestrictions,i=e.coordinates,n=e.imageSize,s=J(e.boundaries);if(i){var r={height:Math.max(i.height,n.height),width:Math.max(i.width,n.width)},o=re({width:J(r)>s?r.width:r.height*s,height:J(r)>s?r.width/s:r.height},rt(t())),a={left:i.left+i.width/2-o.width/2,top:i.top+i.height/2-o.height/2,width:o.width,height:o.height},l=G(i,Q(y({left:0,top:0},n))),c={};return!l.left&&!l.right&&a.width<=n.width&&(c.left=0,c.right=n.width),!l.top&&!l.bottom&&a.height<=n.height&&(c.top=0,c.bottom=n.height),ae(a,c)}var d=J(n);return o={height:d>s?n.height:n.width/s,width:d>s?n.height*s:n.width},{left:n.width/2-o.width/2,top:n.height/2-o.height/2,width:o.width,height:o.height}}},defaultTransforms:{type:[Function,Object]},defaultBoundaries:{type:[Function,String],validator:function(e){return!("string"==typeof e&&"fill"!==e&&"fit"!==e)}},priority:{type:String,default:"coordinates"},stencilSize:{type:[Object,Function]},resizeImage:{type:[Boolean,Object],default:!0},moveImage:{type:[Boolean,Object],default:!0},autoZoomAlgorithm:{type:Function},resizeAlgorithm:{type:Function,default:function(e){var t=e.event,i=e.coordinates,n=e.aspectRatio,s=e.positionRestrictions,r=e.sizeRestrictions,o=y(y({},i),{right:i.left+i.width,bottom:i.top+i.height}),a=t.params||{},l=y({},t.directions),c=a.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};r.widthFrozen&&(l.left=0,l.right=0),r.heightFrozen&&(l.top=0,l.bottom=0),F.forEach((function(e){c[e]||(l[e]=0)}));var d=K(o,l=ye({coordinates:o,directions:l,sizeRestrictions:r,positionRestrictions:s})).width,h=K(o,l).height,u=a.preserveRatio?J(o):ne(d/h,n);if(u){var m=a.respectDirection;if(m||(m=o.width>=o.height||1===u?"width":"height"),"width"===m){var p=d/u-o.height;if(c.top&&c.bottom){var g=l.top,f=l.bottom;l.bottom=we(p,f,g),l.top=we(p,g,f)}else c.bottom?l.bottom=p:c.top?l.top=p:c.right?l.right=0:c.left&&(l.left=0)}else if("height"===m){var b=o.width-h*u;if(c.left&&c.right){var v=l.left,w=l.right;l.left=-we(b,v,w),l.right=-we(b,w,v)}else c.left?l.left=-b:c.right?l.right=-b:c.top?l.top=0:c.bottom&&(l.bottom=0)}l=ye({directions:l,coordinates:o,sizeRestrictions:r,positionRestrictions:s,preserveRatio:!0,compensate:a.compensate})}return d=K(o,l).width,h=K(o,l).height,(u=a.preserveRatio?J(o):ne(d/h,n))&&Math.abs(u-d/h)>.001&&F.forEach((function(e){c[e]||(l[e]=0)})),he({event:new I({left:-l.left,top:-l.top}),coordinates:{width:i.width+l.right+l.left,height:i.height+l.top+l.bottom,left:i.left,top:i.top},positionRestrictions:s})}},moveAlgorithm:{type:Function,default:he},initStretcher:{type:Function,default:function(e){var t=e.stretcher,i=e.imageSize,n=J(i);t.style.width=i.width+"px",t.style.height=t.clientWidth/n+"px",t.style.width=t.clientWidth+"px"}},fitCoordinates:{type:Function,default:function(e){var t=e.visibleArea,i=e.coordinates,n=e.aspectRatio,s=e.sizeRestrictions,r=e.positionRestrictions,o=y(y({},i),de({width:i.width,height:i.height,aspectRatio:n,sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minHeight:Math.min(t.height,s.minHeight),minWidth:Math.min(t.width,s.minWidth)}}));return ae(o=q(o,U(Y(i),Y(o))),ce(Q(t),r))}},fitVisibleArea:{type:Function,default:function(e){var t=e.visibleArea,i=e.boundaries,n=e.getAreaRestrictions,s=e.coordinates,r=y({},t);r.height=r.width/J(i),r.top+=(t.height-r.height)/2,(s.height-r.height>0||s.width-r.width>0)&&(r=Z(r,Math.max(s.height/r.height,s.width/r.width)));var o=X(te(s,Q(r=Z(r,se(r,n({visibleArea:r,type:"resize"}))))));return r.width<s.width&&(o.left=0),r.height<s.height&&(o.top=0),ae(r=q(r,o),n({visibleArea:r,type:"move"}))}},areaRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.visibleArea,i=e.boundaries,n=e.imageSize,s=e.imageRestriction,r=e.type,o={};return"fill-area"===s?o={left:0,top:0,right:n.width,bottom:n.height}:"fit-area"===s&&(J(i)>J(n)?(o={top:0,bottom:n.height},t&&"move"===r&&(t.width>n.width?(o.left=-(t.width-n.width)/2,o.right=n.width-o.left):(o.left=0,o.right=n.width))):(o={left:0,right:n.width},t&&"move"===r&&(t.height>n.height?(o.top=-(t.height-n.height)/2,o.bottom=n.height-o.top):(o.top=0,o.bottom=n.height)))),o}},sizeRestrictionsAlgorithm:{type:Function,default:function(e){return{minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight}}},positionRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.imageSize,i={};return"none"!==e.imageRestriction&&(i={left:0,top:0,right:t.width,bottom:t.height}),i}}},data:function(){return{transitionsActive:!1,imageLoaded:!1,imageAttributes:{width:null,height:null,crossOrigin:!1,src:null},defaultImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},appliedImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},boundaries:{width:0,height:0},visibleArea:null,coordinates:i({},H)}},computed:{image:function(){return{src:this.imageAttributes.src,width:this.imageAttributes.width,height:this.imageAttributes.height,transforms:this.imageTransforms}},imageTransforms:function(){return{rotate:this.appliedImageTransforms.rotate,flip:{horizontal:this.appliedImageTransforms.flip.horizontal,vertical:this.appliedImageTransforms.flip.vertical},translateX:this.visibleArea?this.visibleArea.left/this.coefficient:0,translateY:this.visibleArea?this.visibleArea.top/this.coefficient:0,scaleX:1/this.coefficient,scaleY:1/this.coefficient}},imageSize:function(){var e=function(e){return e*Math.PI/180}(this.imageTransforms.rotate);return{width:Math.abs(this.imageAttributes.width*Math.cos(e))+Math.abs(this.imageAttributes.height*Math.sin(e)),height:Math.abs(this.imageAttributes.width*Math.sin(e))+Math.abs(this.imageAttributes.height*Math.cos(e))}},initialized:function(){return Boolean(this.visibleArea&&this.imageLoaded)},settings:function(){var e=O(this.resizeImage,{touch:!0,wheel:{ratio:.1},adjustStencil:!0},{touch:!1,wheel:!1,adjustStencil:!1});return{moveImage:O(this.moveImage,{touch:!0,mouse:!0},{touch:!1,mouse:!1}),resizeImage:e}},coefficient:function(){return this.visibleArea?this.visibleArea.width/this.boundaries.width:0},areaRestrictions:function(){return this.imageLoaded?this.areaRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction,boundaries:this.boundaries}):{}},transitionsOptions:function(){return{enabled:this.transitionsActive,timingFunction:"ease-in-out",time:350}},sizeRestrictions:function(){if(this.boundaries.width&&this.boundaries.height&&this.imageSize.width&&this.imageSize.height){var e=this.sizeRestrictionsAlgorithm({imageSize:this.imageSize,minWidth:A(this.minWidth)?0:C(this.minWidth),minHeight:A(this.minHeight)?0:C(this.minHeight),maxWidth:A(this.maxWidth)?1/0:C(this.maxWidth),maxHeight:A(this.maxHeight)?1/0:C(this.maxHeight)});if(e=function(e){var t=e.areaRestrictions,i=e.sizeRestrictions,n=e.boundaries,s=e.positionRestrictions,r=y(y({},i),{minWidth:void 0!==i.minWidth?i.minWidth:0,minHeight:void 0!==i.minHeight?i.minHeight:0,maxWidth:void 0!==i.maxWidth?i.maxWidth:1/0,maxHeight:void 0!==i.maxHeight?i.maxHeight:1/0});void 0!==s.left&&void 0!==s.right&&(r.maxWidth=Math.min(r.maxWidth,s.right-s.left)),void 0!==s.bottom&&void 0!==s.top&&(r.maxHeight=Math.min(r.maxHeight,s.bottom-s.top));var o=rt(t),a=re(n,o);return o.width<1/0&&(!r.maxWidth||r.maxWidth>a.width)&&(r.maxWidth=Math.min(r.maxWidth,a.width)),o.height<1/0&&(!r.maxHeight||r.maxHeight>a.height)&&(r.maxHeight=Math.min(r.maxHeight,a.height)),r.minWidth>r.maxWidth&&(r.minWidth=r.maxWidth,r.widthFrozen=!0),r.minHeight>r.maxHeight&&(r.minHeight=r.maxHeight,r.heightFrozen=!0),r}({sizeRestrictions:e,areaRestrictions:this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}),imageSize:this.imageSize,boundaries:this.boundaries,positionRestrictions:this.positionRestrictions,imageRestriction:this.imageRestriction,visibleArea:this.visibleArea,stencilSize:this.getStencilSize()}),this.visibleArea&&this.stencilSize){var t=this.getStencilSize(),i=rt(this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}));e.maxWidth=Math.min(e.maxWidth,i.width*t.width/this.boundaries.width),e.maxHeight=Math.min(e.maxHeight,i.height*t.height/this.boundaries.height),e.maxWidth<e.minWidth&&(e.minWidth=e.maxWidth),e.maxHeight<e.minHeight&&(e.minHeight=e.maxHeight)}return e}return{minWidth:0,minHeight:0,maxWidth:0,maxHeight:0}},positionRestrictions:function(){return this.positionRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction})},classes:function(){return{cropper:Ue(),image:m(Ue("image"),this.imageClass),stencil:Ue("stencil"),boundaries:m(Ue("boundaries"),this.boundariesClass),stretcher:m(Ue("stretcher")),background:m(Ue("background"),this.backgroundClass),foreground:m(Ue("foreground"),this.foregroundClass),imageWrapper:m(Ue("image-wrapper")),cropperWrapper:m(Ue("cropper-wrapper"))}},stencilCoordinates:function(){if(this.initialized){var e=this.coordinates,t=e.width,i=e.height,n=e.left,s=e.top;return{width:t/this.coefficient,height:i/this.coefficient,left:(n-this.visibleArea.left)/this.coefficient,top:(s-this.visibleArea.top)/this.coefficient}}return this.defaultCoordinates()},boundariesStyle:function(){var e={width:this.boundaries.width?"".concat(Math.round(this.boundaries.width),"px"):"auto",height:this.boundaries.height?"".concat(Math.round(this.boundaries.height),"px"):"auto",transition:"opacity ".concat(this.transitionTime,"ms"),pointerEvents:this.imageLoaded?"all":"none"};return this.imageLoaded||(e.opacity="0"),e},imageStyle:function(){var e=this.imageAttributes.width>this.imageAttributes.height?{width:Math.min(1024,this.imageAttributes.width),height:Math.min(1024,this.imageAttributes.width)/(this.imageAttributes.width/this.imageAttributes.height)}:{height:Math.min(1024,this.imageAttributes.height),width:Math.min(1024,this.imageAttributes.height)*(this.imageAttributes.width/this.imageAttributes.height)},t=(e.width-this.imageSize.width)/(2*this.coefficient),n=(e.height-this.imageSize.height)/(2*this.coefficient),r=(1-1/this.coefficient)*e.width/2,o=(1-1/this.coefficient)*e.height/2,s=i(i({},this.imageTransforms),{},{scaleX:this.imageTransforms.scaleX*(this.imageAttributes.width/e.width),scaleY:this.imageTransforms.scaleY*(this.imageAttributes.height/e.height)}),l={width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),left:"0px",top:"0px",transform:"translate(".concat(-t-r-this.imageTransforms.translateX,"px, ").concat(-n-o-this.imageTransforms.translateY,"px)")+Be(s)};return this.transitionsOptions.enabled&&(l.transition="".concat(this.transitionsOptions.time,"ms ").concat(this.transitionsOptions.timingFunction)),l}},watch:{src:function(){this.onChangeImage()},stencilComponent:function(){var e=this;this.$nextTick((function(){e.resetCoordinates(),e.runAutoZoom("setCoordinates"),e.onChange()}))},minWidth:function(){this.onPropsChange()},maxWidth:function(){this.onPropsChange()},minHeight:function(){this.onPropsChange()},maxHeight:function(){this.onPropsChange()},imageRestriction:function(){this.reset()},stencilProps:function(e,t){["aspectRatio","minAspectRatio","maxAspectRatio"].find((function(i){return e[i]!==t[i]}))&&this.$nextTick(this.onPropsChange)}},created:function(){this.debouncedUpdate=v(this.update,this.debounce),this.debouncedDisableTransitions=v(this.disableTransitions,this.transitionsOptions.time),this.awaiting=!1},mounted:function(){this.$refs.image.addEventListener("load",this.onSuccessLoadImage),this.$refs.image.addEventListener("error",this.onFailLoadImage),this.onChangeImage(),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},destroyed:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh),this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.debouncedUpdate.clear(),this.debouncedDisableTransitions.clear()},methods:{getResult:function(){var e=this.initialized?this.prepareResult(i({},this.coordinates)):this.defaultCoordinates(),t={rotate:this.imageTransforms.rotate%360,flip:i({},this.imageTransforms.flip)};if(this.src&&this.imageLoaded){var n=this;return{image:this.image,coordinates:e,visibleArea:this.visibleArea?i({},this.visibleArea):null,imageTransforms:t,get canvas(){return n.canvas?n.getCanvas():void 0}}}return{image:this.image,coordinates:e,visibleArea:this.visibleArea?i({},this.visibleArea):null,canvas:void 0,imageTransforms:t}},zoom:function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).transitions,s=void 0===n||n;this.onManipulateImage(new j({},{factor:1/e,center:t}),{normalize:!1,transitions:s})},move:function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).transitions,s=void 0===n||n;this.onManipulateImage(new j({left:e||0,top:t||0}),{normalize:!1,transitions:s})},setCoordinates:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.autoZoom,s=void 0===n||n,r=i.transitions,o=void 0===r||r;this.$nextTick((function(){t.imageLoaded?(t.transitionsActive||(o&&t.enableTransitions(),t.coordinates=t.applyTransform(e),s&&t.runAutoZoom("setCoordinates"),o&&t.debouncedDisableTransitions()),t.onChange()):t.delayedTransforms=e}))},refresh:function(){var e=this,t=this.$refs.image;if(this.src&&t)return this.initialized?this.updateVisibleArea().then((function(){e.onChange()})):this.resetVisibleArea().then((function(){e.onChange()}))},reset:function(){var e=this;return this.resetVisibleArea().then((function(){e.onChange(!1)}))},awaitRender:function(e){var t=this;this.awaiting||(this.awaiting=!0,this.$nextTick((function(){e(),t.awaiting=!1})))},prepareResult:function(e){return this.roundResult?function(e){var t=e.coordinates,i=e.sizeRestrictions,n=e.positionRestrictions,s={width:Math.round(t.width),height:Math.round(t.height),left:Math.round(t.left),top:Math.round(t.top)};return s.width>i.maxWidth?s.width=Math.floor(t.width):s.width<i.minWidth&&(s.width=Math.ceil(t.width)),s.height>i.maxHeight?s.height=Math.floor(t.height):s.height<i.minHeight&&(s.height=Math.ceil(t.height)),ae(s,n)}(i(i({},this.getPublicProperties()),{},{positionRestrictions:ve(this.positionRestrictions,this.visibleArea),coordinates:e})):e},processAutoZoom:function(e,t,n,s){var r=this.autoZoomAlgorithm;r||(r=this.stencilSize?pe:this.autoZoom?me:fe);var o=r({event:{type:e,params:s},visibleArea:t,coordinates:n,boundaries:this.boundaries,aspectRatio:this.getAspectRatio(),positionRestrictions:this.positionRestrictions,getAreaRestrictions:this.getAreaRestrictions,sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize()});return i(i({},o),{},{changed:!W(o.visibleArea,t)||!W(o.coordinates,n)})},runAutoZoom:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.transitions,n=void 0!==i&&i,r=function(e,t){if(null==e)return{};var i,n,s=function(e,t){if(null==e)return{};var i,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(s[i]=e[i]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}(t,Qe),o=this.processAutoZoom(e,this.visibleArea,this.coordinates,r),a=o.visibleArea,l=o.coordinates,c=o.changed;n&&c&&this.enableTransitions(),this.visibleArea=a,this.coordinates=l,n&&c&&this.debouncedDisableTransitions()},normalizeEvent:function(e){return function(e){var t=e.event,i=e.visibleArea,n=e.coefficient;if("manipulateImage"===t.type)return y(y({},t),{move:{left:t.move&&t.move.left?n*t.move.left:0,top:t.move&&t.move.top?n*t.move.top:0},scale:{factor:t.scale&&t.scale.factor?t.scale.factor:1,center:t.scale&&t.scale.center?{left:t.scale.center.left*n+i.left,top:t.scale.center.top*n+i.top}:null}});if("resize"===t.type){var s=y(y({},t),{directions:y({},t.directions)});return F.forEach((function(e){s.directions[e]*=n})),s}if("move"===t.type){var r=y(y({},t),{directions:y({},t.directions)});return z.forEach((function(e){r.directions[e]*=n})),r}return t}(i(i({},this.getPublicProperties()),{},{event:e}))},getCanvas:function(){if(this.$refs.canvas){var e=this.$refs.canvas,t=this.$refs.image,n=0!==this.imageTransforms.rotate||this.imageTransforms.flip.horizontal||this.imageTransforms.flip.vertical?function(e,t,i){var n=i.rotate,s=i.flip,r={width:t.naturalWidth,height:t.naturalHeight},o=oe(r,n),a=e.getContext("2d");e.height=o.height,e.width=o.width,a.save();var l=ie(Y(y({left:0,top:0},r)),n);return a.translate(-(l.left-o.width/2),-(l.top-o.height/2)),a.rotate(n*Math.PI/180),a.translate(s.horizontal?r.width:0,s.vertical?r.height:0),a.scale(s.horizontal?-1:1,s.vertical?-1:1),a.drawImage(t,0,0,r.width,r.height),a.restore(),e}(this.$refs.sourceCanvas,t,this.imageTransforms):t,s=i({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:this.maxCanvasSize,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},this.canvas),r=function(e){return e.find((function(e){return t=e,!Number.isNaN(parseFloat(t))&&isFinite(t);var t}))},o=de({sizeRestrictions:{minWidth:r([s.width,s.minWidth])||0,minHeight:r([s.height,s.minHeight])||0,maxWidth:r([s.width,s.maxWidth])||1/0,maxHeight:r([s.height,s.maxHeight])||1/0},width:this.coordinates.width,height:this.coordinates.height,aspectRatio:{minimum:this.coordinates.width/this.coordinates.height,maximum:this.coordinates.width/this.coordinates.height}});if(s.maxArea&&o.width*o.height>s.maxArea){var a=Math.sqrt(s.maxArea/(o.width*o.height));o={width:Math.round(a*o.width),height:Math.round(a*o.height)}}return function(e,t,i,n,s){e.width=n?n.width:i.width,e.height=n?n.height:i.height;var r=e.getContext("2d");r.clearRect(0,0,e.width,e.height),s&&(s.imageSmoothingEnabled&&(r.imageSmoothingEnabled=s.imageSmoothingEnabled),s.imageSmoothingQuality&&(r.imageSmoothingQuality=s.imageSmoothingQuality),s.fillColor&&(r.fillStyle=s.fillColor,r.fillRect(0,0,e.width,e.height),r.save()));var o=i.left<0?-i.left:0,a=i.top<0?-i.top:0;r.drawImage(t,i.left+o,i.top+a,i.width,i.height,o,a,e.width,e.height)}(e,n,this.coordinates,o,s),e}},update:function(){this.$emit("change",this.getResult())},applyTransform:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.visibleArea&&t?function(e,t){return y(y({},e),{minWidth:Math.min(t.width,e.minWidth),minHeight:Math.min(t.height,e.minHeight),maxWidth:Math.min(t.width,e.maxWidth),maxHeight:Math.min(t.height,e.maxHeight)})}(this.sizeRestrictions,this.visibleArea):this.sizeRestrictions,n=this.visibleArea&&t?ve(this.positionRestrictions,this.visibleArea):this.positionRestrictions;return function(e){var t=e.coordinates,i=e.transform,n=e.imageSize,s=e.sizeRestrictions,r=e.positionRestrictions,o=e.aspectRatio,a=e.visibleArea,l=function(e,t){return he({coordinates:e,positionRestrictions:r,event:new I({left:t.left-e.left,top:t.top-e.top})})},c=y({},t);return(Array.isArray(i)?i:[i]).forEach((function(e){var t;A((t="function"==typeof e?e({coordinates:c,imageSize:n,visibleArea:a}):e).width)&&A(t.height)||(c=function(e,t){var i=y(y(y({},e),de({width:t.width,height:t.height,sizeRestrictions:s,aspectRatio:o})),{left:0,top:0});return l(i,{left:e.left,top:e.top})}(c,y(y({},c),t))),A(t.left)&&A(t.top)||(c=l(c,y(y({},c),t)))})),c}({transform:e,coordinates:this.coordinates,imageSize:this.imageSize,sizeRestrictions:i,positionRestrictions:n,aspectRatio:this.getAspectRatio(),visibleArea:this.visibleArea})},resetCoordinates:function(){var e=this;if(this.$refs.image){this.$refs.cropper,this.$refs.image;var t=this.defaultSize;t||(t=this.stencilSize?be:ge);var n=this.sizeRestrictions;n.minWidth,n.minHeight,n.maxWidth,n.maxHeight;var s=[b(t)?t({boundaries:this.boundaries,imageSize:this.imageSize,aspectRatio:this.getAspectRatio(),sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize(),visibleArea:this.visibleArea}):t,function(t){var n=t.coordinates;return i({},b(e.defaultPosition)?e.defaultPosition({coordinates:n,imageSize:e.imageSize,visibleArea:e.visibleArea}):e.defaultPosition)}];this.delayedTransforms&&s.push.apply(s,c(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.coordinates=this.applyTransform(s,!0),this.delayedTransforms=null}},clearImage:function(){var e=this;this.imageLoaded=!1,setTimeout((function(){var t=e.$refs.stretcher;t&&(t.style.height="auto",t.style.width="auto"),e.coordinates=e.defaultCoordinates(),e.boundaries={width:0,height:0}}),this.transitionTime)},enableTransitions:function(){this.transitions&&(this.transitionsActive=!0)},disableTransitions:function(){this.transitionsActive=!1},updateBoundaries:function(){var e=this,t=this.$refs.stretcher,i=this.$refs.cropper;return this.initStretcher({cropper:i,stretcher:t,imageSize:this.imageSize}),this.$nextTick().then((function(){var t={cropper:i,imageSize:e.imageSize};if(b(e.defaultBoundaries)?e.boundaries=e.defaultBoundaries(t):"fit"===e.defaultBoundaries?e.boundaries=function(e){var t=e.cropper,i=e.imageSize,n=t.clientHeight,s=t.clientWidth,r=n,o=i.width*n/i.height;return o>s&&(o=s,r=i.height*s/i.width),{width:o,height:r}}(t):e.boundaries=function(e){var t=e.cropper;return{width:t.clientWidth,height:t.clientHeight}}(t),!e.boundaries.width||!e.boundaries.height)throw new Error("It's impossible to fit the cropper in the current container")}))},resetVisibleArea:function(){var e=this;return this.appliedImageTransforms=i(i({},this.defaultImageTransforms),{},{flip:i({},this.defaultImageTransforms.flip)}),this.updateBoundaries().then((function(){var t,n,s,r,o;"visible-area"!==e.priority&&(e.visibleArea=null,e.resetCoordinates()),e.visibleArea=b(e.defaultVisibleArea)?e.defaultVisibleArea({imageSize:e.imageSize,boundaries:e.boundaries,coordinates:"visible-area"!==e.priority?e.coordinates:null,getAreaRestrictions:e.getAreaRestrictions,stencilSize:e.getStencilSize()}):e.defaultVisibleArea,e.visibleArea=(n=(t={visibleArea:e.visibleArea,boundaries:e.boundaries,getAreaRestrictions:e.getAreaRestrictions}).boundaries,s=t.getAreaRestrictions,r=y({},t.visibleArea),o=J(n),r.width/r.height!==o&&(r.height=r.width/o),ae(r,s({visibleArea:r,type:"move"}))),"visible-area"===e.priority?e.resetCoordinates():e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("resetVisibleArea")})).catch((function(){e.visibleArea=null}))},updateVisibleArea:function(){var e=this;return this.updateBoundaries().then((function(){e.visibleArea=e.fitVisibleArea({imageSize:e.imageSize,boundaries:e.boundaries,visibleArea:e.visibleArea,coordinates:e.coordinates,getAreaRestrictions:e.getAreaRestrictions}),e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("updateVisibleArea")})).catch((function(){e.visibleArea=null}))},onChange:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$listeners&&this.$listeners.change&&(e&&this.debounce?this.debouncedUpdate():this.update())},onChangeImage:function(){var e,t=this;if(this.imageLoaded=!1,this.delayedTransforms=null,this.src){if(function(e){if(w(e))return!1;var t=window.location,i=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(e)||[],n={protocol:i[1]||"",host:i[2]||"",port:i[3]||""},s=function(e){return e.port||("http"===(e.protocol||t.protocol)?80:433)};return!(!n.protocol&&!n.host&&!n.port||Boolean(n.protocol&&n.protocol==t.protocol&&n.host&&n.host==t.host&&n.host&&s(n)==s(t)))}(this.src)){var i=A(this.crossOrigin)?this.canvas:this.crossOrigin;!0===i&&(i="anonymous"),this.imageAttributes.crossOrigin=i}if(this.checkOrientation){var n=(e=this.src,new Promise((function(t){(function(e){return new Promise((function(t,i){try{if(e)if(/^data:/i.test(e))t(function(e){e=e.replace(/^data:([^;]+);base64,/gim,"");for(var t=atob(e),i=t.length,n=new ArrayBuffer(i),s=new Uint8Array(n),r=0;r<i;r++)s[r]=t.charCodeAt(r);return n}(e));else if(/^blob:/i.test(e)){var n=new FileReader;n.onload=function(e){t(e.target.result)},r=e,o=function(e){n.readAsArrayBuffer(e)},(a=new XMLHttpRequest).open("GET",r,!0),a.responseType="blob",a.onload=function(){200!=this.status&&0!==this.status||o(this.response)},a.send()}else{var s=new XMLHttpRequest;s.onreadystatechange=function(){4===s.readyState&&(200===s.status||0===s.status?t(s.response):i("Warning: could not load an image to parse its orientation"),s=null)},s.onprogress=function(){"image/jpeg"!==s.getResponseHeader("content-type")&&s.abort()},s.withCredentials=!1,s.open("GET",e,!0),s.responseType="arraybuffer",s.send(null)}else i("Error: the image is empty")}catch(e){i(e)}var r,o,a}))})(e).then((function(i){var n=function(e){try{var t,i=new DataView(e),n=void 0,s=void 0,r=void 0,o=void 0;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var a=i.byteLength,l=2;l+1<a;){if(255===i.getUint8(l)&&225===i.getUint8(l+1)){r=l;break}l++}if(r&&(n=r+10,"Exif"===function(e,t,i){var n,s="";for(n=t,i+=t;n<i;n++)s+=String.fromCharCode(e.getUint8(n));return s}(i,r+4,4))){var c=i.getUint16(n);if(((s=18761===c)||19789===c)&&42===i.getUint16(n+2,s)){var d=i.getUint32(n+4,s);d>=8&&(o=n+d)}}if(o)for(var h=i.getUint16(o,s),u=0;u<h;u++)if(l=o+12*u+2,274===i.getUint16(l,s)){l+=8,t=i.getUint16(l,s),i.setUint16(l,1,s);break}return t}catch(e){return null}}(i);t(i?{source:e,arrayBuffer:i,orientation:n}:{source:e,arrayBuffer:null,orientation:null})})).catch((function(i){console.warn(i),t({source:e,arrayBuffer:null,orientation:null})}))})));setTimeout((function(){n.then(t.onParseImage)}),this.transitionTime)}else setTimeout((function(){t.onParseImage({source:t.src})}),this.transitionTime)}else this.clearImage()},onFailLoadImage:function(){this.imageAttributes.src&&(this.clearImage(),this.$emit("error"))},onSuccessLoadImage:function(){var e=this,t=this.$refs.image;t&&!this.imageLoaded&&(this.imageAttributes.height=t.naturalHeight,this.imageAttributes.width=t.naturalWidth,this.imageLoaded=!0,this.resetVisibleArea().then((function(){e.$emit("ready"),e.onChange(!1)})))},onParseImage:function(e){var t=this,n=e.source,s=e.arrayBuffer,r=e.orientation;this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.imageAttributes.revoke=!1,s&&r&&r>1?g(n)||!w(n)?(this.imageAttributes.src=URL.createObjectURL(new Blob([s])),this.imageAttributes.revoke=!0):this.imageAttributes.src=function(e){for(var t=[],i=new Uint8Array(e);i.length>0;){var n=i.subarray(0,8192);t.push(String.fromCharCode.apply(null,Array.from?Array.from(n):n.slice())),i=i.subarray(8192)}return"data:image/jpeg;base64,"+btoa(t.join(""))}(s):this.imageAttributes.src=n,b(this.defaultTransforms)?this.appliedImageTransforms=Re(this.defaultTransforms()):x(this.defaultTransforms)?this.appliedImageTransforms=Re(this.defaultTransforms):this.appliedImageTransforms=function(e){var t=Re({});if(e)switch(e){case 2:t.flip.horizontal=!0;break;case 3:t.rotate=-180;break;case 4:t.flip.vertical=!0;break;case 5:t.rotate=90,t.flip.vertical=!0;break;case 6:t.rotate=90;break;case 7:t.rotate=90,t.flip.horizontal=!0;break;case 8:t.rotate=-90}return t}(r),this.defaultImageTransforms=i(i({},this.appliedImageTransforms),{},{flip:i({},this.appliedImageTransforms.flip)}),this.$nextTick((function(){var e=t.$refs.image;e&&e.complete&&(function(e){return Boolean(e.naturalWidth)}(e)?t.onSuccessLoadImage():t.onFailLoadImage())}))},onResizeEnd:function(){this.runAutoZoom("resize",{transitions:!0})},onMoveEnd:function(){this.runAutoZoom("move",{transitions:!0})},onMove:function(e){var t=this;this.transitionsOptions.enabled||this.awaitRender((function(){t.coordinates=t.moveAlgorithm(i(i({},t.getPublicProperties()),{},{positionRestrictions:ve(t.positionRestrictions,t.visibleArea),coordinates:t.coordinates,event:t.normalizeEvent(e)})),t.onChange()}))},onResize:function(e){var t=this;this.transitionsOptions.enabled||this.stencilSize&&!this.autoZoom||this.awaitRender((function(){var n=t.sizeRestrictions,s=Math.min(t.coordinates.width,t.coordinates.height,20*t.coefficient);t.coordinates=t.resizeAlgorithm(i(i({},t.getPublicProperties()),{},{positionRestrictions:ve(t.positionRestrictions,t.visibleArea),sizeRestrictions:{maxWidth:Math.min(n.maxWidth,t.visibleArea.width),maxHeight:Math.min(n.maxHeight,t.visibleArea.height),minWidth:Math.max(n.minWidth,s),minHeight:Math.max(n.minHeight,s)},event:t.normalizeEvent(e)})),t.onChange(),t.ticking=!1}))},onManipulateImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.transitionsOptions.enabled){var n=t.transitions,s=void 0!==n&&n,r=t.normalize,o=void 0===r||r;s&&this.enableTransitions();var a=function(e){var t=e.event,i=e.coordinates,n=e.visibleArea,s=e.sizeRestrictions,r=e.getAreaRestrictions,o=e.positionRestrictions,a=e.adjustStencil,l=t.scale,c=t.move,d=y({},n),h=y({},i),u=1,m=1,p=l.factor&&Math.abs(l.factor-1)>.001;d=q(d,{left:c.left||0,top:c.top||0});var g={stencil:{minimum:Math.max(s.minWidth?s.minWidth/h.width:0,s.minHeight?s.minHeight/h.height:0),maximum:Math.min(s.maxWidth?s.maxWidth/h.width:1/0,s.maxHeight?s.maxHeight/h.height:1/0,ee(h,o))},area:{maximum:ee(d,r({visibleArea:d,type:"resize"}))}};l.factor&&p&&(l.factor<1?(m=Math.max(l.factor,g.stencil.minimum))>1&&(m=1):l.factor>1&&(m=Math.min(l.factor,Math.min(g.area.maximum,g.stencil.maximum)))<1&&(m=1)),m&&(d=Z(d,m,l.center));var f=i.left-n.left,b=n.width+n.left-(i.width+i.left),v=i.top-n.top,w=n.height+n.top-(i.height+i.top);return d=ae(d=q(d,te(d,{left:void 0!==o.left?o.left-f*m:void 0,top:void 0!==o.top?o.top-v*m:void 0,bottom:void 0!==o.bottom?o.bottom+w*m:void 0,right:void 0!==o.right?o.right+b*m:void 0})),r({visibleArea:d,type:"move"})),h.width=h.width*m,h.height=h.height*m,h.left=d.left+f*m,h.top=d.top+v*m,h=ae(h,ce(Q(d),o)),l.factor&&p&&a&&(l.factor>1?u=Math.min(g.area.maximum,l.factor)/m:l.factor<1&&(u=Math.max(h.height/d.height,h.width/d.width,l.factor/m)),1!==u&&(d=q(d=ae(d=Z(d,u,l.factor>1?l.center:Y(h)),r({visibleArea:d,type:"move"})),X(te(h,Q(d)))))),{coordinates:h,visibleArea:d}}(i(i({},this.getPublicProperties()),{},{event:o?this.normalizeEvent(e):e,getAreaRestrictions:this.getAreaRestrictions,imageRestriction:this.imageRestriction,adjustStencil:!this.stencilSize&&this.settings.resizeImage.adjustStencil})),l=a.visibleArea,c=a.coordinates;this.visibleArea=l,this.coordinates=c,this.runAutoZoom("manipulateImage"),this.onChange(),s&&this.debouncedDisableTransitions()}},onPropsChange:function(){this.coordinates=this.applyTransform(this.coordinates,!0),this.onChange(!1)},getAreaRestrictions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.visibleArea,i=e.type,n=void 0===i?"move":i;return this.areaRestrictionsAlgorithm({boundaries:this.boundaries,imageSize:this.imageSize,imageRestriction:this.imageRestriction,visibleArea:t,type:n})},getAspectRatio:function(e){var t,i,n=this.stencilProps,s=n.aspectRatio,r=n.minAspectRatio,o=n.maxAspectRatio;if(this.$refs.stencil&&this.$refs.stencil.aspectRatios){var a=this.$refs.stencil.aspectRatios();t=a.minimum,i=a.maximum}if(A(t)&&(t=A(s)?r:s),A(i)&&(i=A(s)?o:s),!e&&(A(t)||A(i))){var l=this.getStencilSize(),c=l?J(l):null;A(t)&&(t=_(c)?c:void 0),A(i)&&(i=_(c)?c:void 0)}return{minimum:t,maximum:i}},getStencilSize:function(){if(this.stencilSize)return t=(e={currentStencilSize:{width:this.stencilCoordinates.width,height:this.stencilCoordinates.height},stencilSize:this.stencilSize,boundaries:this.boundaries,coefficient:this.coefficient,coordinates:this.coordinates,aspectRatio:this.getAspectRatio(!0)}).boundaries,n=e.aspectRatio,ne(J(s=b(i=e.stencilSize)?i({boundaries:t,aspectRatio:n}):i),n)&&(s=de({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:s.width,height:s.height,aspectRatio:{minimum:n.minimum,maximum:n.maximum}})),(s.width>t.width||s.height>t.height)&&(s=de({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:s.width,height:s.height,aspectRatio:{minimum:J(s),maximum:J(s)}})),s;var e,t,i,n,s},getPublicProperties:function(){return{coefficient:this.coefficient,visibleArea:this.visibleArea,coordinates:this.coordinates,boundaries:this.boundaries,sizeRestrictions:this.sizeRestrictions,positionRestrictions:this.positionRestrictions,aspectRatio:this.getAspectRatio(),imageRestriction:this.imageRestriction}},defaultCoordinates:function(){return i({},H)},flip:function(e,t){var s=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).transitions,n=void 0===s||s;if(!this.transitionsActive){n&&this.enableTransitions();var r=i({},this.imageTransforms.flip),a=function(e){var t=e.flip,i=e.previousFlip,n=e.rotate;e.aspectRatio;var s=e.getAreaRestrictions,r=e.coordinates,o=e.visibleArea,a=e.imageSize,l=y({},r),c=y({},o),d=i.horizontal!==t.horizontal,h=i.vertical!==t.vertical;if(d||h){var u=ie({left:a.width/2,top:a.height/2},-n),m=ie(Y(l),-n),p=ie({left:d?u.left-(m.left-u.left):m.left,top:h?u.top-(m.top-u.top):m.top},n);l=q(l,U(p,Y(l))),m=ie(Y(c),-n),c=ae(c=q(c,U(p=ie({left:d?u.left-(m.left-u.left):m.left,top:h?u.top-(m.top-u.top):m.top},n),Y(c))),s({visibleArea:c,type:"move"}))}return{coordinates:l,visibleArea:c}}({flip:{horizontal:e?!r.horizontal:r.horizontal,vertical:t?!r.vertical:r.vertical},previousFlip:r,rotate:this.imageTransforms.rotate,visibleArea:this.visibleArea,coordinates:this.coordinates,imageSize:this.imageSize,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),o=a.visibleArea,l=a.coordinates;e&&(this.appliedImageTransforms.flip.horizontal=!this.appliedImageTransforms.flip.horizontal),t&&(this.appliedImageTransforms.flip.vertical=!this.appliedImageTransforms.flip.vertical),this.visibleArea=o,this.coordinates=l,this.onChange(),n&&this.debouncedDisableTransitions()}},rotate:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).transitions,s=void 0===t||t;if(!this.transitionsActive){s&&this.enableTransitions();var n=i({},this.imageSize);this.appliedImageTransforms.rotate+=e;var r=function(e){var t=e.aspectRatio,i=e.getAreaRestrictions,n=e.coordinates,s=e.visibleArea,r=e.sizeRestrictions,o=e.positionRestrictions,a=e.imageSize,l=e.previousImageSize,c=e.angle,d=y({},n),h=y({},s),u=ie(Y(y({left:0,top:0},l)),c);return(d=y(y({},de({sizeRestrictions:r,aspectRatio:t,width:d.width,height:d.height})),ie(Y(d),c))).left-=u.left-a.width/2+d.width/2,d.top-=u.top-a.height/2+d.height/2,h=Z(h,se(h,i({visibleArea:h,type:"resize"}))),{coordinates:d=ae(d,o),visibleArea:h=ae(h=q(h,U(Y(d),Y(n))),i({visibleArea:h,type:"move"}))}}({visibleArea:this.visibleArea,coordinates:this.coordinates,previousImageSize:n,imageSize:this.imageSize,angle:e,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),a=r.visibleArea,o=r.coordinates,l=this.processAutoZoom("rotateImage",a,o);a=l.visibleArea,o=l.coordinates,this.visibleArea=a,this.coordinates=o,this.onChange(),s&&this.debouncedDisableTransitions()}}}},Ge=E({render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"cropper",class:e.classes.cropper},[i("div",{ref:"stretcher",class:e.classes.stretcher}),e._v(" "),i("div",{class:e.classes.boundaries,style:e.boundariesStyle},[i(e.backgroundWrapperComponent,{tag:"component",class:e.classes.cropperWrapper,attrs:{"wheel-resize":e.settings.resizeImage.wheel,"touch-resize":e.settings.resizeImage.touch,"touch-move":e.settings.moveImage.touch,"mouse-move":e.settings.moveImage.mouse},on:{move:e.onManipulateImage,resize:e.onManipulateImage}},[i("div",{class:e.classes.background,style:e.boundariesStyle}),e._v(" "),i("div",{class:e.classes.imageWrapper},[i("img",{ref:"image",class:e.classes.image,style:e.imageStyle,attrs:{crossorigin:e.imageAttributes.crossOrigin,src:e.imageAttributes.src},on:{mousedown:function(e){e.preventDefault()}}})]),e._v(" "),i("div",{class:e.classes.foreground,style:e.boundariesStyle}),e._v(" "),i(e.stencilComponent,e._b({directives:[{name:"show",rawName:"v-show",value:e.imageLoaded,expression:"imageLoaded"}],ref:"stencil",tag:"component",attrs:{image:e.image,coordinates:e.coordinates,"stencil-coordinates":e.stencilCoordinates,transitions:e.transitionsOptions},on:{resize:e.onResize,"resize-end":e.onResizeEnd,move:e.onMove,"move-end":e.onMoveEnd}},"component",e.stencilProps,!1)),e._v(" "),e.canvas?i("canvas",{ref:"canvas",style:{display:"none"}}):e._e(),e._v(" "),e.canvas?i("canvas",{ref:"sourceCanvas",style:{display:"none"}}):e._e()],1)],1)])},staticRenderFns:[]},void 0,Ye,void 0,!1,void 0,!1,void 0,void 0,void 0);r.default.component("cropper",Ge),r.default.component("rectangle-stencil",He),r.default.component("circle-stencil",qe),r.default.component("simple-handler",Oe),r.default.component("simple-line",Se)},function(e,t,n){e.exports={}},function(e,t,n){var r;e.exports=function(){function e(t,n,o){function l(i,c){if(!n[i]){if(!t[i]){if(!c&&"function"==typeof r&&r)return r(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};t[i][0].call(p.exports,(function(e){return l(t[i][1][e]||e)}),p,p.exports,e,t,n,o)}return n[i].exports}for(var u="function"==typeof r&&r,i=0;i<o.length;i++)l(o[i]);return l}return e}()({1:[function(e,t,n){"use strict";var r=e("multimath"),o=e("./mm_unsharp_mask"),l=e("./mm_resize");function c(e){var t=e||[],n={js:t.indexOf("js")>=0,wasm:t.indexOf("wasm")>=0};r.call(this,n),this.features={js:n.js,wasm:n.wasm&&this.has_wasm()},this.use(o),this.use(l)}c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.prototype.resizeAndUnsharp=function(e,t){var n=this.resize(e,t);return e.unsharpAmount&&this.unsharp_mask(n,e.toWidth,e.toHeight,e.unsharpAmount,e.unsharpRadius,e.unsharpThreshold),n},t.exports=c},{"./mm_resize":4,"./mm_unsharp_mask":9,multimath:19}],2:[function(e,t,n){"use strict";function r(i){return i<0?0:i>255?255:i}function o(i){return i>=0?i:0}function l(e,t,n,r,l,c){var d,g,b,a,h,m,f,v,y,w,A,x=0,O=0;for(y=0;y<r;y++){for(h=0,w=0;w<l;w++){for(m=c[h++],f=c[h++],v=x+4*m|0,d=g=b=a=0;f>0;f--)a=a+(A=c[h++])*e[v+3]|0,b=b+A*e[v+2]|0,g=g+A*e[v+1]|0,d=d+A*e[v]|0,v=v+4|0;t[O+3]=o(a>>7),t[O+2]=o(b>>7),t[O+1]=o(g>>7),t[O]=o(d>>7),O=O+4*r|0}O=4*(y+1)|0,x=(y+1)*n*4|0}}function c(e,t,n,o,l,c){var d,g,b,a,h,m,f,v,y,w,A,x=0,O=0;for(y=0;y<o;y++){for(h=0,w=0;w<l;w++){for(m=c[h++],f=c[h++],v=x+4*m|0,d=g=b=a=0;f>0;f--)a=a+(A=c[h++])*e[v+3]|0,b=b+A*e[v+2]|0,g=g+A*e[v+1]|0,d=d+A*e[v]|0,v=v+4|0;d>>=7,g>>=7,b>>=7,a>>=7,t[O+3]=r(a+8192>>14),t[O+2]=r(b+8192>>14),t[O+1]=r(g+8192>>14),t[O]=r(d+8192>>14),O=O+4*o|0}O=4*(y+1)|0,x=(y+1)*n*4|0}}function d(e,t,n,r,l,c){var d,g,b,a,h,m,f,v,y,w,A,x,O=0,C=0;for(w=0;w<r;w++){for(m=0,A=0;A<l;A++){for(f=c[m++],v=c[m++],y=O+4*f|0,d=g=b=a=0;v>0;v--)a=a+(x=c[m++])*(h=e[y+3])|0,b=b+x*e[y+2]*h|0,g=g+x*e[y+1]*h|0,d=d+x*e[y]*h|0,y=y+4|0;b=b/255|0,g=g/255|0,d=d/255|0,t[C+3]=o(a>>7),t[C+2]=o(b>>7),t[C+1]=o(g>>7),t[C]=o(d>>7),C=C+4*r|0}C=4*(w+1)|0,O=(w+1)*n*4|0}}function h(e,t,n,o,l,c){var d,g,b,a,h,m,f,v,y,w,A,x=0,O=0;for(y=0;y<o;y++){for(h=0,w=0;w<l;w++){for(m=c[h++],f=c[h++],v=x+4*m|0,d=g=b=a=0;f>0;f--)a=a+(A=c[h++])*e[v+3]|0,b=b+A*e[v+2]|0,g=g+A*e[v+1]|0,d=d+A*e[v]|0,v=v+4|0;d>>=7,g>>=7,b>>=7,(a=r(8192+(a>>=7)>>14))>0&&(d=255*d/a|0,g=255*g/a|0,b=255*b/a|0),t[O+3]=a,t[O+2]=r(b+8192>>14),t[O+1]=r(g+8192>>14),t[O]=r(d+8192>>14),O=O+4*o|0}O=4*(y+1)|0,x=(y+1)*n*4|0}}t.exports={convolveHor:l,convolveVert:c,convolveHorWithPre:d,convolveVertWithPre:h}},{}],3:[function(e,t,n){"use strict";t.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAEYA2AGf39/f39/AGAAAGAIf39/f39/f38AAg8BA2VudgZtZW1vcnkCAAADBwYBAAAAAAIGBgF/AEEACweUAQgRX193YXNtX2NhbGxfY3RvcnMAAAtjb252b2x2ZUhvcgABDGNvbnZvbHZlVmVydAACEmNvbnZvbHZlSG9yV2l0aFByZQADE2NvbnZvbHZlVmVydFdpdGhQcmUABApjb252b2x2ZUhWAAUMX19kc29faGFuZGxlAwAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAAKyA4GAwABC4wDARB/AkAgA0UNACAERQ0AIANBAnQhFQNAQQAhE0EAIQsDQCALQQJqIQcCfyALQQF0IAVqIgYuAQIiC0UEQEEAIQhBACEGQQAhCUEAIQogBwwBCyASIAYuAQBqIQhBACEJQQAhCiALIRRBACEOIAchBkEAIQ8DQCAFIAZBAXRqLgEAIhAgACAIQQJ0aigCACIRQRh2bCAPaiEPIBFB/wFxIBBsIAlqIQkgEUEQdkH/AXEgEGwgDmohDiARQQh2Qf8BcSAQbCAKaiEKIAhBAWohCCAGQQFqIQYgFEEBayIUDQALIAlBB3UhCCAKQQd1IQYgDkEHdSEJIA9BB3UhCiAHIAtqCyELIAEgDEEBdCIHaiAIQQAgCEEAShs7AQAgASAHQQJyaiAGQQAgBkEAShs7AQAgASAHQQRyaiAJQQAgCUEAShs7AQAgASAHQQZyaiAKQQAgCkEAShs7AQAgDCAVaiEMIBNBAWoiEyAERw0ACyANQQFqIg0gAmwhEiANQQJ0IQwgAyANRw0ACwsL2gMBD38CQCADRQ0AIARFDQAgAkECdCEUA0AgCyEMQQAhE0EAIQIDQCACQQJqIQYCfyACQQF0IAVqIgcuAQIiAkUEQEEAIQhBACEHQQAhCkEAIQkgBgwBCyAHLgEAQQJ0IBJqIQhBACEJIAIhCkEAIQ0gBiEHQQAhDkEAIQ8DQCAFIAdBAXRqLgEAIhAgACAIQQF0IhFqLwEAbCAJaiEJIAAgEUEGcmovAQAgEGwgDmohDiAAIBFBBHJqLwEAIBBsIA9qIQ8gACARQQJyai8BACAQbCANaiENIAhBBGohCCAHQQFqIQcgCkEBayIKDQALIAlBB3UhCCANQQd1IQcgDkEHdSEKIA9BB3UhCSACIAZqCyECIAEgDEECdGogB0GAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQQh0QYD+A3EgCUGAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQRB0QYCA/AdxIApBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EYdHJyIAhBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG3I2AgAgAyAMaiEMIBNBAWoiEyAERw0ACyAUIAtBAWoiC2whEiADIAtHDQALCwuSAwEQfwJAIANFDQAgBEUNACADQQJ0IRUDQEEAIRNBACEGA0AgBkECaiEIAn8gBkEBdCAFaiIGLgECIgdFBEBBACEJQQAhDEEAIQ1BACEOIAgMAQsgEiAGLgEAaiEJQQAhDkEAIQ1BACEMIAchFEEAIQ8gCCEGA0AgBSAGQQF0ai4BACAAIAlBAnRqKAIAIhBBGHZsIhEgD2ohDyARIBBBEHZB/wFxbCAMaiEMIBEgEEEIdkH/AXFsIA1qIQ0gESAQQf8BcWwgDmohDiAJQQFqIQkgBkEBaiEGIBRBAWsiFA0ACyAPQQd1IQkgByAIagshBiABIApBAXQiCGogDkH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEECcmogDUH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEEcmogDEH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEGcmogCUEAIAlBAEobOwEAIAogFWohCiATQQFqIhMgBEcNAAsgC0EBaiILIAJsIRIgC0ECdCEKIAMgC0cNAAsLC4IEAQ9/AkAgA0UNACAERQ0AIAJBAnQhFANAIAshDEEAIRJBACEHA0AgB0ECaiEKAn8gB0EBdCAFaiICLgECIhNFBEBBACEIQQAhCUEAIQYgCiEHQQAMAQsgAi4BAEECdCARaiEJQQAhByATIQJBACENIAohBkEAIQ5BACEPA0AgBSAGQQF0ai4BACIIIAAgCUEBdCIQai8BAGwgB2ohByAAIBBBBnJqLwEAIAhsIA5qIQ4gACAQQQRyai8BACAIbCAPaiEPIAAgEEECcmovAQAgCGwgDWohDSAJQQRqIQkgBkEBaiEGIAJBAWsiAg0ACyAHQQd1IQggDUEHdSEJIA9BB3UhBiAKIBNqIQcgDkEHdQtBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKGyIKQf8BcQRAIAlB/wFsIAJtIQkgCEH/AWwgAm0hCCAGQf8BbCACbSEGCyABIAxBAnRqIAlBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EIdEGA/gNxIAZBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EQdEGAgPwHcSAKQRh0ciAIQYBAa0EOdSICQf8BIAJB/wFIGyICQQAgAkEAShtycjYCACADIAxqIQwgEkEBaiISIARHDQALIBQgC0EBaiILbCERIAMgC0cNAAsLC0AAIAcEQEEAIAIgAyAEIAUgABADIAJBACAEIAUgBiABEAQPC0EAIAIgAyAEIAUgABABIAJBACAEIAUgBiABEAIL"},{}],4:[function(e,t,n){"use strict";t.exports={name:"resize",fn:e("./resize"),wasm_fn:e("./resize_wasm"),wasm_src:e("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(e,t,n){"use strict";var r=e("./resize_filter_gen"),o=e("./convolve"),l=o.convolveHor,c=o.convolveVert,d=o.convolveHorWithPre,h=o.convolveVertWithPre;function m(e,t,n){for(var r=3,o=t*n*4|0;r<o;){if(255!==e[r])return!0;r=r+4|0}return!1}function f(e,t,n){for(var r=3,o=t*n*4|0;r<o;)e[r]=255,r=r+4|0}t.exports=function(e){var t=e.src,n=e.width,o=e.height,v=e.toWidth,y=e.toHeight,w=e.scaleX||e.toWidth/e.width,A=e.scaleY||e.toHeight/e.height,x=e.offsetX||0,O=e.offsetY||0,C=e.dest||new Uint8Array(v*y*4),filter=void 0===e.filter?"mks2013":e.filter,_=r(filter,n,v,w,x),S=r(filter,o,y,A,O),k=new Uint16Array(v*o*4);return m(t,n,o)?(d(t,k,n,o,v,_),h(k,C,o,v,y,S)):(l(t,k,n,o,v,_),c(k,C,o,v,y,S),f(C,v,y)),C}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(e,t,n){"use strict";var r=e("./resize_filter_info"),o=14;function l(e){return Math.round(e*((1<<o)-1))}t.exports=function(filter,e,t,n,o){var c,d,h,m,f,v,y,w,A,x,O,C,_,S,k,j,T,I=r.filter[filter].fn,D=1/n,E=Math.min(1,n),R=r.filter[filter].win/E,B=Math.floor(2*(R+1)),M=new Int16Array((B+2)*t),P=0,L=!M.subarray||!M.set;for(c=0;c<t;c++){for(d=(c+.5)*D+o,h=Math.max(0,Math.floor(d-R)),f=(m=Math.min(e-1,Math.ceil(d+R)))-h+1,v=new Float32Array(f),y=new Int16Array(f),w=0,A=h,x=0;A<=m;A++,x++)w+=O=I((A+.5-d)*E),v[x]=O;for(C=0,x=0;x<v.length;x++)C+=_=v[x]/w,y[x]=l(_);for(y[t>>1]+=l(1-C),S=0;S<y.length&&0===y[S];)S++;if(S<y.length){for(k=y.length-1;k>0&&0===y[k];)k--;if(j=h+S,T=k-S+1,M[P++]=j,M[P++]=T,L)for(x=S;x<=k;x++)M[P++]=y[x];else M.set(y.subarray(S,k+1),P),P+=T}else M[P++]=0,M[P++]=0}return M}},{"./resize_filter_info":7}],7:[function(e,t,n){"use strict";var filter={box:{win:.5,fn:function(e){return e<0&&(e=-e),e<.5?1:0}},hamming:{win:1,fn:function(e){if(e<0&&(e=-e),e>=1)return 0;if(e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*(.54+.46*Math.cos(t/1))}},lanczos2:{win:2,fn:function(e){if(e<0&&(e=-e),e>=2)return 0;if(e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/2)/(t/2)}},lanczos3:{win:3,fn:function(e){if(e<0&&(e=-e),e>=3)return 0;if(e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/3)/(t/3)}},mks2013:{win:2.5,fn:function(e){return e<0&&(e=-e),e>=2.5?0:e>=1.5?-.125*(e-2.5)*(e-2.5):e>=.5?.25*(4*e*e-11*e+7):1.0625-1.75*e*e}}};t.exports={filter:filter,f2q:{box:0,hamming:1,lanczos2:2,lanczos3:3},q2f:["box","hamming","lanczos2","lanczos3"]}},{}],8:[function(e,t,n){"use strict";var r=e("./resize_filter_gen");function o(e,t,n){for(var r=3,o=t*n*4|0;r<o;){if(255!==e[r])return!0;r=r+4|0}return!1}function l(e,t,n){for(var r=3,o=t*n*4|0;r<o;)e[r]=255,r=r+4|0}function c(e){return new Uint8Array(e.buffer,0,e.byteLength)}var d=!0;try{d=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]}catch(e){}function h(e,t,n){if(d)t.set(c(e),n);else for(var r=n,i=0;i<e.length;i++){var data=e[i];t[r++]=255&data,t[r++]=data>>8&255}}t.exports=function(e){var t=e.src,n=e.width,c=e.height,d=e.toWidth,m=e.toHeight,f=e.scaleX||e.toWidth/e.width,v=e.scaleY||e.toHeight/e.height,y=e.offsetX||0,w=e.offsetY||0,A=e.dest||new Uint8Array(d*m*4),filter=void 0===e.filter?"mks2013":e.filter,x=r(filter,n,d,f,y),O=r(filter,c,m,v,w),C=0,_=Math.max(t.byteLength,A.byteLength),S=this.__align(C+_),k=c*d*4*2,j=this.__align(S+k),T=this.__align(j+x.byteLength),I=T+O.byteLength,D=this.__instance("resize",I),E=new Uint8Array(this.__memory.buffer),R=new Uint32Array(this.__memory.buffer),B=new Uint32Array(t.buffer);R.set(B),h(x,E,j),h(O,E,T);var M=D.exports.convolveHV||D.exports._convolveHV;return o(t,n,c)?M(j,T,S,n,c,d,m,1):(M(j,T,S,n,c,d,m,0),l(A,d,m)),new Uint32Array(A.buffer).set(new Uint32Array(this.__memory.buffer,0,m*d)),A}},{"./resize_filter_gen":6}],9:[function(e,t,n){"use strict";t.exports={name:"unsharp_mask",fn:e("./unsharp_mask"),wasm_fn:e("./unsharp_mask_wasm"),wasm_src:e("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(e,t,n){"use strict";var r=e("glur/mono16");function o(img,e,t){for(var n,g,b,r,o=e*t,l=new Uint16Array(o),i=0;i<o;i++)n=img[4*i],g=img[4*i+1],b=img[4*i+2],r=n>=g&&n>=b?n:g>=b&&g>=n?g:b,l[i]=r<<8;return l}t.exports=function(img,e,t,n,l,c){var d,h,m,f,v;if(!(0===n||l<.5)){l>2&&(l=2);var y=o(img,e,t),w=new Uint16Array(y);r(w,e,t,l);for(var A=n/100*4096+.5|0,x=c<<8,O=e*t,i=0;i<O;i++)f=(d=y[i])-w[i],Math.abs(f)>=x&&(m=((h=(h=(h=d+(A*f+2048>>12))>65280?65280:h)<0?0:h)<<12)/(d=0!==d?d:1)|0,img[v=4*i]=img[v]*m+2048>>12,img[v+1]=img[v+1]*m+2048>>12,img[v+2]=img[v+2]*m+2048>>12)}}},{"glur/mono16":18}],11:[function(e,t,n){"use strict";t.exports=function(img,e,t,n,r,o){if(!(0===n||r<.5)){r>2&&(r=2);var l=e*t,c=4*l,d=2*l,h=2*l,m=4*Math.max(e,t),f=32,v=0,y=c,w=y+d,A=w+h,x=A+h,O=x+m,C=this.__instance("unsharp_mask",c+d+2*h+m+f,{exp:Math.exp}),_=new Uint32Array(img.buffer);new Uint32Array(this.__memory.buffer).set(_);var S=C.exports.hsv_v16||C.exports._hsv_v16;S(v,y,e,t),(S=C.exports.blurMono16||C.exports._blurMono16)(y,w,A,x,O,e,t,r),(S=C.exports.unsharp||C.exports._unsharp)(v,v,y,w,e,t,n,o),_.set(new Uint32Array(this.__memory.buffer,0,l))}}},{}],12:[function(e,t,n){"use strict";t.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAE0B2AAAGAEf39/fwBgBn9/f39/fwBgCH9/f39/f39/AGAIf39/f39/f30AYAJ9fwBgAXwBfAIZAgNlbnYDZXhwAAYDZW52Bm1lbW9yeQIAAAMHBgAFAgQBAwYGAX8AQQALB4oBCBFfX3dhc21fY2FsbF9jdG9ycwABFl9fYnVpbGRfZ2F1c3NpYW5fY29lZnMAAg5fX2dhdXNzMTZfbGluZQADCmJsdXJNb25vMTYABAdoc3ZfdjE2AAUHdW5zaGFycAAGDF9fZHNvX2hhbmRsZQMAGF9fd2FzbV9hcHBseV9kYXRhX3JlbG9jcwABCsUMBgMAAQvWAQEHfCABRNuGukOCGvs/IAC7oyICRAAAAAAAAADAohAAIgW2jDgCFCABIAKaEAAiAyADoCIGtjgCECABRAAAAAAAAPA/IAOhIgQgBKIgAyACIAKgokQAAAAAAADwP6AgBaGjIgS2OAIAIAEgBSAEmqIiB7Y4AgwgASADIAJEAAAAAAAA8D+gIASioiIItjgCCCABIAMgAkQAAAAAAADwv6AgBKKiIgK2OAIEIAEgByAIoCAFRAAAAAAAAPA/IAahoCIDo7Y4AhwgASAEIAKgIAOjtjgCGAuGBQMGfwl8An0gAyoCDCEVIAMqAgghFiADKgIUuyERIAMqAhC7IRACQCAEQQFrIghBAEgiCQRAIAIhByAAIQYMAQsgAiAALwEAuCIPIAMqAhi7oiIMIBGiIg0gDCAQoiAPIAMqAgS7IhOiIhQgAyoCALsiEiAPoqCgoCIOtjgCACACQQRqIQcgAEECaiEGIAhFDQAgCEEBIAhBAUgbIgpBf3MhCwJ/IAQgCmtBAXFFBEAgDiENIAgMAQsgAiANIA4gEKIgFCASIAAvAQK4Ig+ioKCgIg22OAIEIAJBCGohByAAQQRqIQYgDiEMIARBAmsLIQIgC0EAIARrRg0AA0AgByAMIBGiIA0gEKIgDyAToiASIAYvAQC4Ig6ioKCgIgy2OAIAIAcgDSARoiAMIBCiIA4gE6IgEiAGLwECuCIPoqCgoCINtjgCBCAHQQhqIQcgBkEEaiEGIAJBAkohACACQQJrIQIgAA0ACwsCQCAJDQAgASAFIAhsQQF0aiIAAn8gBkECay8BACICuCINIBW7IhKiIA0gFrsiE6KgIA0gAyoCHLuiIgwgEKKgIAwgEaKgIg8gB0EEayIHKgIAu6AiDkQAAAAAAADwQWMgDkQAAAAAAAAAAGZxBEAgDqsMAQtBAAs7AQAgCEUNACAGQQRrIQZBACAFa0EBdCEBA0ACfyANIBKiIAJB//8DcbgiDSAToqAgDyIOIBCioCAMIBGioCIPIAdBBGsiByoCALugIgxEAAAAAAAA8EFjIAxEAAAAAAAAAABmcQRAIAyrDAELQQALIQMgBi8BACECIAAgAWoiACADOwEAIAZBAmshBiAIQQFKIQMgDiEMIAhBAWshCCADDQALCwvRAgIBfwd8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIglEAAAAAAAAAMCiEAAiDLaMOAIUIAQgCZoQACIKIAqgIg22OAIQIAREAAAAAAAA8D8gCqEiCyALoiAKIAkgCaCiRAAAAAAAAPA/oCAMoaMiC7Y4AgAgBCAMIAuaoiIOtjgCDCAEIAogCUQAAAAAAADwP6AgC6KiIg+2OAIIIAQgCiAJRAAAAAAAAPC/oCALoqIiCbY4AgQgBCAOIA+gIAxEAAAAAAAA8D8gDaGgIgqjtjgCHCAEIAsgCaAgCqO2OAIYIAYEQANAIAAgBSAIbEEBdGogAiAIQQF0aiADIAQgBSAGEAMgCEEBaiIIIAZHDQALCyAFRQ0AQQAhCANAIAIgBiAIbEEBdGogASAIQQF0aiADIAQgBiAFEAMgCEEBaiIIIAVHDQALCwtxAQN/IAIgA2wiBQRAA0AgASAAKAIAIgRBEHZB/wFxIgIgAiAEQQh2Qf8BcSIDIAMgBEH/AXEiBEkbIAIgA0sbIgYgBiAEIAIgBEsbIAMgBEsbQQh0OwEAIAFBAmohASAAQQRqIQAgBUEBayIFDQALCwuZAgIDfwF8IAQgBWwhBAJ/IAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6AiC5lEAAAAAAAA4EFjBEAgC6oMAQtBgICAgHgLIQUgBARAIAdBCHQhCUEAIQYDQCAJIAIgBkEBdCIHai8BACIBIAMgB2ovAQBrIgcgB0EfdSIIaiAIc00EQCAAIAZBAnQiCGoiCiAFIAdsQYAQakEMdSABaiIHQYD+AyAHQYD+A0gbIgdBACAHQQBKG0EMdCABQQEgARtuIgEgCi0AAGxBgBBqQQx2OgAAIAAgCEEBcmoiByABIActAABsQYAQakEMdjoAACAAIAhBAnJqIgcgASAHLQAAbEGAEGpBDHY6AAALIAZBAWoiBiAERw0ACwsL"},{}],13:[function(e,t,n){"use strict";var r=100;function o(e,t){this.create=e,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=t||2e3}o.prototype.acquire=function(){var e,t=this;return 0!==this.available.length?e=this.available.pop():((e=this.create()).id=this.lastId++,e.release=function(){return t.release(e)}),this.acquired[e.id]=e,e},o.prototype.release=function(e){var t=this;delete this.acquired[e.id],e.lastUsed=Date.now(),this.available.push(e),0===this.timeoutId&&(this.timeoutId=setTimeout((function(){return t.gc()}),r))},o.prototype.gc=function(){var e=this,t=Date.now();this.available=this.available.filter((function(n){return!(t-n.lastUsed>e.idle&&(n.destroy(),1))})),0!==this.available.length?this.timeoutId=setTimeout((function(){return e.gc()}),r):this.timeoutId=0},t.exports=o},{}],14:[function(e,t,n){"use strict";var r=2;t.exports=function(e,t,n,o,l,c){var d=n/e,h=o/t,m=(2*c+r+1)/l;if(m>.5)return[[n,o]];var f=Math.ceil(Math.log(Math.min(d,h))/Math.log(m));if(f<=1)return[[n,o]];for(var v=[],i=0;i<f;i++){var y=Math.round(Math.pow(Math.pow(e,f-i-1)*Math.pow(n,i+1),1/f)),w=Math.round(Math.pow(Math.pow(t,f-i-1)*Math.pow(o,i+1),1/f));v.push([y,w])}return v}},{}],15:[function(e,t,n){"use strict";var r=1e-5;function o(e){var t=Math.round(e);return Math.abs(e-t)<r?t:Math.floor(e)}function l(e){var t=Math.round(e);return Math.abs(e-t)<r?t:Math.ceil(e)}t.exports=function(e){var t,n,r,c,d,h,m=e.toWidth/e.width,f=e.toHeight/e.height,v=o(e.srcTileSize*m)-2*e.destTileBorder,y=o(e.srcTileSize*f)-2*e.destTileBorder;if(v<1||y<1)throw new Error("Internal error in pica: target tile width/height is too small.");var w,A=[];for(c=0;c<e.toHeight;c+=y)for(r=0;r<e.toWidth;r+=v)(t=r-e.destTileBorder)<0&&(t=0),t+(d=r+v+e.destTileBorder-t)>=e.toWidth&&(d=e.toWidth-t),(n=c-e.destTileBorder)<0&&(n=0),n+(h=c+y+e.destTileBorder-n)>=e.toHeight&&(h=e.toHeight-n),w={toX:t,toY:n,toWidth:d,toHeight:h,toInnerX:r,toInnerY:c,toInnerWidth:v,toInnerHeight:y,offsetX:t/m-o(t/m),offsetY:n/f-o(n/f),scaleX:m,scaleY:f,x:o(t/m),y:o(n/f),width:l(d/m),height:l(h/f)},A.push(w);return A}},{}],16:[function(e,t,n){"use strict";function r(e){return Object.prototype.toString.call(e)}t.exports.isCanvas=function(element){var e=r(element);return"[object HTMLCanvasElement]"===e||"[object OffscreenCanvas]"===e||"[object Canvas]"===e},t.exports.isImage=function(element){return"[object HTMLImageElement]"===r(element)},t.exports.isImageBitmap=function(element){return"[object ImageBitmap]"===r(element)},t.exports.limiter=function(e){var t=0,n=[];function r(){t<e&&n.length&&(t++,n.shift()())}return function(e){return new Promise((function(o,l){n.push((function(){e().then((function(e){o(e),t--,r()}),(function(e){l(e),t--,r()}))})),r()}))}},t.exports.cib_quality_name=function(e){switch(e){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},t.exports.cib_support=function(e){return Promise.resolve().then((function(){if("undefined"==typeof createImageBitmap)return!1;var t=e(100,100);return createImageBitmap(t,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then((function(e){var n=10===e.width;return e.close(),t=null,n}))})).catch((function(){return!1}))},t.exports.worker_offscreen_canvas_support=function(){return new Promise((function(e,t){if("undefined"!=typeof OffscreenCanvas){var code=btoa("(".concat(r.toString(),")(self);")),n=new Worker("data:text/javascript;base64,".concat(code));n.onmessage=function(t){return e(t.data)},n.onerror=t}else e(!1);function r(e){"undefined"!=typeof createImageBitmap?Promise.resolve().then((function(){var canvas=new OffscreenCanvas(10,10);return canvas.getContext("2d").rect(0,0,1,1),createImageBitmap(canvas,0,0,1,1)})).then((function(){return e.postMessage(!0)}),(function(){return e.postMessage(!1)})):e.postMessage(!1)}})).then((function(e){return e}),(function(){return!1}))},t.exports.can_use_canvas=function(e){var t=!1;try{var n=e(2,1).getContext("2d"),r=n.createImageData(2,1);r.data[0]=12,r.data[1]=23,r.data[2]=34,r.data[3]=255,r.data[4]=45,r.data[5]=56,r.data[6]=67,r.data[7]=255,n.putImageData(r,0,0),r=null,12===(r=n.getImageData(0,0,2,1)).data[0]&&23===r.data[1]&&34===r.data[2]&&255===r.data[3]&&45===r.data[4]&&56===r.data[5]&&67===r.data[6]&&255===r.data[7]&&(t=!0)}catch(e){}return t},t.exports.cib_can_use_region=function(){return new Promise((function(e){if("undefined"!=typeof Image&&"undefined"!=typeof createImageBitmap){var image=new Image;image.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",image.onload=function(){createImageBitmap(image,0,0,image.width,image.height).then((function(t){t.width===image.width&&t.height===image.height?e(!0):e(!1)}),(function(){return e(!1)}))},image.onerror=function(){return e(!1)}}else e(!1)}))}},{}],17:[function(e,t,n){"use strict";t.exports=function(){var t,n=e("./mathlib");onmessage=function(e){var r=e.data.opts,o=!1;if(!r.src&&r.srcBitmap){var canvas=new OffscreenCanvas(r.width,r.height),l=canvas.getContext("2d");l.drawImage(r.srcBitmap,0,0),r.src=l.getImageData(0,0,r.width,r.height).data,canvas.width=canvas.height=0,canvas=null,r.srcBitmap.close(),r.srcBitmap=null}t||(t=new n(e.data.features));var data=t.resizeAndUnsharp(r);if(o){var c=new ImageData(new Uint8ClampedArray(data),r.toWidth,r.toHeight),d=new OffscreenCanvas(r.toWidth,r.toHeight);d.getContext("2d").putImageData(c,0,0),createImageBitmap(d).then((function(e){postMessage({bitmap:e},[e])}))}else postMessage({data:data},[data.buffer])}}},{"./mathlib":1}],18:[function(e,t,n){var r,o,l,c,d,h;function m(e){e<.5&&(e=.5);var a=Math.exp(.527076)/e,t=Math.exp(-a),n=Math.exp(-2*a),m=(1-t)*(1-t)/(1+2*a*t-n);return r=m,o=m*(a-1)*t,l=m*(a+1)*t,c=-m*n,d=2*t,h=-n,new Float32Array([r,o,l,c,d,h,(r+o)/(1-d-h),(l+c)/(1-d-h)])}function f(e,t,line,n,r,o){var l,c,d,h,m,f,v,y,i,w,A,x,O,C;for(i=0;i<o;i++){for(v=i,y=0,h=m=(l=e[f=i*r])*n[6],A=n[0],x=n[1],O=n[4],C=n[5],w=0;w<r;w++)d=(c=e[f])*A+l*x+h*O+m*C,m=h,h=d,l=c,line[y]=h,y++,f++;for(y--,v+=o*(r-1),h=m=(l=e[--f])*n[7],c=l,A=n[2],x=n[3],w=r-1;w>=0;w--)d=c*A+l*x+h*O+m*C,m=h,h=d,l=c,c=e[f],t[v]=line[y]+h,f--,y--,v-=o}}function v(e,t,n,r){if(r){var o=new Uint16Array(e.length),l=new Float32Array(Math.max(t,n)),c=m(r);f(e,o,l,c,t,n,r),f(o,e,l,c,n,t,r)}}t.exports=v},{}],19:[function(e,t,n){"use strict";var r=e("object-assign"),o=e("./lib/base64decode"),l=e("./lib/wa_detect"),c={js:!0,wasm:!0};function d(e){if(!(this instanceof d))return new d(e);var t=r({},c,e||{});if(this.options=t,this.__cache={},this.__init_promise=null,this.__modules=t.modules||{},this.__memory=null,this.__wasm={},this.__isLE=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0],!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}d.prototype.has_wasm=l,d.prototype.use=function(e){return this.__modules[e.name]=e,this.options.wasm&&this.has_wasm()&&e.wasm_fn?this[e.name]=e.wasm_fn:this[e.name]=e.fn,this},d.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error('mathlib: only "wasm" was enabled, but it\'s not supported'));var e=this;return this.__init_promise=Promise.all(Object.keys(e.__modules).map((function(t){var n=e.__modules[t];return e.options.wasm&&e.has_wasm()&&n.wasm_fn?e.__wasm[t]?null:WebAssembly.compile(e.__base64decode(n.wasm_src)).then((function(n){e.__wasm[t]=n})):null}))).then((function(){return e})),this.__init_promise},d.prototype.__base64decode=o,d.prototype.__reallocate=function(e){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(e/65536)}),this.__memory;var t=this.__memory.buffer.byteLength;return t<e&&this.__memory.grow(Math.ceil((e-t)/65536)),this.__memory},d.prototype.__instance=function(e,t,n){if(t&&this.__reallocate(t),!this.__wasm[e]){var o=this.__modules[e];this.__wasm[e]=new WebAssembly.Module(this.__base64decode(o.wasm_src))}if(!this.__cache[e]){var l={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[e]=new WebAssembly.Instance(this.__wasm[e],{env:r(l,n||{})})}return this.__cache[e]},d.prototype.__align=function(e,base){var t=e%(base=base||8);return e+(t?base-t:0)},t.exports=d},{"./lib/base64decode":20,"./lib/wa_detect":21,"object-assign":22}],20:[function(e,t,n){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports=function(e){for(var input=e.replace(/[\r\n=]/g,""),t=input.length,n=new Uint8Array(3*t>>2),o=0,l=0,c=0;c<t;c++)c%4==0&&c&&(n[l++]=o>>16&255,n[l++]=o>>8&255,n[l++]=255&o),o=o<<6|r.indexOf(input.charAt(c));var d=t%4*6;return 0===d?(n[l++]=o>>16&255,n[l++]=o>>8&255,n[l++]=255&o):18===d?(n[l++]=o>>10&255,n[l++]=o>>2&255):12===d&&(n[l++]=o>>4&255),n}},{}],21:[function(e,t,n){"use strict";var r;t.exports=function(){if(void 0!==r)return r;if(r=!1,"undefined"==typeof WebAssembly)return r;try{var e=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),t=new WebAssembly.Module(e);return 0!==new WebAssembly.Instance(t,{}).exports.test(4)&&(r=!0),r}catch(e){}return r}},{}],22:[function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;function c(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function d(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}t.exports=d()?Object.assign:function(e,source){for(var t,n,d=c(e),s=1;s<arguments.length;s++){for(var h in t=Object(arguments[s]))o.call(t,h)&&(d[h]=t[h]);if(r){n=r(t);for(var i=0;i<n.length;i++)l.call(t,n[i])&&(d[n[i]]=t[n[i]])}}return d}},{}],23:[function(e,t,n){var r=arguments[3],o=arguments[4],l=arguments[5],c=JSON.stringify;t.exports=function(e,t){for(var n,d=Object.keys(l),i=0,h=d.length;i<h;i++){var m=d[i],f=l[m].exports;if(f===e||f&&f.default===e){n=m;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var v={};for(i=0,h=d.length;i<h;i++)v[m=d[i]]=m;o[n]=["function(require,module,exports){"+e+"(self); }",v]}var y=Math.floor(Math.pow(16,8)*Math.random()).toString(16),w={};w[n]=n,o[y]=["function(require,module,exports){var f = require("+c(n)+");(f.default ? f.default : f)(self);}",w];var A={};function x(e){for(var t in A[e]=!0,o[e][1]){var n=o[e][1][t];A[n]||x(n)}}x(y);var O="("+r+")({"+Object.keys(A).map((function(e){return c(e)+":["+o[e][0]+","+c(o[e][1])+"]"})).join(",")+"},{},["+c(y)+"])",C=window.URL||window.webkitURL||window.mozURL||window.msURL,_=new Blob([O],{type:"text/javascript"});if(t&&t.bare)return _;var S=C.createObjectURL(_),k=new Worker(S);return k.objectURL=S,k}},{}],"/index.js":[function(e,t,n){"use strict";function r(e,i){return h(e)||d(e,i)||l(e,i)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function d(e,i){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,r,o=[],l=!0,c=!1;try{for(t=t.call(e);!(l=(n=t.next()).done)&&(o.push(n.value),!i||o.length!==i);l=!0);}catch(e){c=!0,r=e}finally{try{l||null==t.return||t.return()}finally{if(c)throw r}}return o}}function h(e){if(Array.isArray(e))return e}var m=e("object-assign"),f=e("webworkify"),v=e("./lib/mathlib"),y=e("./lib/pool"),w=e("./lib/utils"),A=e("./lib/worker"),x=e("./lib/stepper"),O=e("./lib/tiler"),C=e("./lib/mm_resize/resize_filter_info"),_={},S=!1;try{"undefined"!=typeof navigator&&navigator.userAgent&&(S=navigator.userAgent.indexOf("Safari")>=0)}catch(e){}var k=1;"undefined"!=typeof navigator&&(k=Math.min(navigator.hardwareConcurrency||1,4));var j={tile:1024,concurrency:k,features:["js","wasm","ww"],idle:2e3,createCanvas:function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n}},T={filter:"mks2013",unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},I=!1,D=!1,E=!1,R=!1,B=!1;function M(){return{value:f(A),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var e=window.URL||window.webkitURL||window.mozURL||window.msURL;e&&e.revokeObjectURL&&this.value.objectURL&&e.revokeObjectURL(this.value.objectURL)}}}}function P(e){if(!(this instanceof P))return new P(e);this.options=m({},j,e||{});var t="lk_".concat(this.options.concurrency);this.__limit=_[t]||w.limiter(this.options.concurrency),_[t]||(_[t]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}P.prototype.init=function(){var t=this;if(this.__initPromise)return this.__initPromise;if("undefined"!=typeof ImageData&&"undefined"!=typeof Uint8ClampedArray)try{new ImageData(new Uint8ClampedArray(400),10,10),I=!0}catch(e){}"undefined"!=typeof ImageBitmap&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?D=!0:this.debug("ImageBitmap does not support .close(), disabled"));var n=this.options.features.slice();if(n.indexOf("all")>=0&&(n=["cib","wasm","js","ww"]),this.__requested_features=n,this.__mathlib=new v(n),n.indexOf("ww")>=0&&"undefined"!=typeof window&&"Worker"in window)try{e("webworkify")((function(){})).terminate(),this.features.ww=!0;var r="wp_".concat(JSON.stringify(this.options));_[r]?this.__workersPool=_[r]:(this.__workersPool=new y(M,this.options.idle),_[r]=this.__workersPool)}catch(e){}var o,l,c=this.__mathlib.init().then((function(e){m(t.features,e.features)}));o=D?w.cib_support(this.options.createCanvas).then((function(e){t.features.cib&&n.indexOf("cib")<0?t.debug("createImageBitmap() resize supported, but disabled by config"):n.indexOf("cib")>=0&&(t.features.cib=e)})):Promise.resolve(!1),E=w.can_use_canvas(this.options.createCanvas),l=(l=D&&I&&-1!==n.indexOf("ww")?w.worker_offscreen_canvas_support():Promise.resolve(!1)).then((function(e){R=e}));var d=w.cib_can_use_region().then((function(e){B=e}));return this.__initPromise=Promise.all([c,o,l,d]).then((function(){return t})),this.__initPromise},P.prototype.__invokeResize=function(e,t){var n=this;return t.__mathCache=t.__mathCache||{},Promise.resolve().then((function(){return n.features.ww?new Promise((function(r,o){var l=n.__workersPool.acquire();t.cancelToken&&t.cancelToken.catch((function(e){return o(e)})),l.value.onmessage=function(e){l.release(),e.data.err?o(e.data.err):r(e.data)};var c=[];e.src&&c.push(e.src.buffer),e.srcBitmap&&c.push(e.srcBitmap),l.value.postMessage({opts:e,features:n.__requested_features,preload:{wasm_nodule:n.__mathlib.__}},c)})):{data:n.__mathlib.resizeAndUnsharp(e,t.__mathCache)}}))},P.prototype.__extractTileData=function(e,t,n,r,o){if(this.features.ww&&R&&(w.isCanvas(t)||B))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(r.srcImageBitmap||t,e.x,e.y,e.width,e.height).then((function(e){return o.srcBitmap=e,o}));if(w.isCanvas(t))return r.srcCtx||(r.srcCtx=t.getContext("2d")),this.debug("Get tile pixel data"),o.src=r.srcCtx.getImageData(e.x,e.y,e.width,e.height).data,o;this.debug("Draw tile imageBitmap/image to temporary canvas");var l=this.options.createCanvas(e.width,e.height),c=l.getContext("2d");return c.globalCompositeOperation="copy",c.drawImage(r.srcImageBitmap||t,e.x,e.y,e.width,e.height,0,0,e.width,e.height),this.debug("Get tile pixel data"),o.src=c.getImageData(0,0,e.width,e.height).data,l.width=l.height=0,o},P.prototype.__landTileData=function(e,t,n){var r;if(this.debug("Convert raw rgba tile result to ImageData"),t.bitmap)return n.toCtx.drawImage(t.bitmap,e.toX,e.toY),null;if(I)r=new ImageData(new Uint8ClampedArray(t.data),e.toWidth,e.toHeight);else if((r=n.toCtx.createImageData(e.toWidth,e.toHeight)).data.set)r.data.set(t.data);else for(var i=r.data.length-1;i>=0;i--)r.data[i]=t.data[i];return this.debug("Draw tile"),S?n.toCtx.putImageData(r,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth+1e-5,e.toInnerHeight+1e-5):n.toCtx.putImageData(r,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth,e.toInnerHeight),null},P.prototype.__tileAndResize=function(e,t,n){var r=this,o={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null},l=function(t){return r.__limit((function(){if(n.canceled)return n.cancelToken;var l={width:t.width,height:t.height,toWidth:t.toWidth,toHeight:t.toHeight,scaleX:t.scaleX,scaleY:t.scaleY,offsetX:t.offsetX,offsetY:t.offsetY,filter:n.filter,unsharpAmount:n.unsharpAmount,unsharpRadius:n.unsharpRadius,unsharpThreshold:n.unsharpThreshold};return r.debug("Invoke resize math"),Promise.resolve(l).then((function(l){return r.__extractTileData(t,e,n,o,l)})).then((function(e){return r.debug("Invoke resize math"),r.__invokeResize(e,n)})).then((function(e){return n.canceled?n.cancelToken:(o.srcImageData=null,r.__landTileData(t,e,o))}))}))};return Promise.resolve().then((function(){if(o.toCtx=t.getContext("2d"),w.isCanvas(e))return null;if(w.isImageBitmap(e))return o.srcImageBitmap=e,o.isImageBitmapReused=!0,null;if(w.isImage(e))return D?(r.debug("Decode image via createImageBitmap"),createImageBitmap(e).then((function(e){o.srcImageBitmap=e})).catch((function(e){return null}))):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')})).then((function(){if(n.canceled)return n.cancelToken;r.debug("Calculate tiles");var e=O({width:n.width,height:n.height,srcTileSize:r.options.tile,toWidth:n.toWidth,toHeight:n.toHeight,destTileBorder:n.__destTileBorder}).map((function(e){return l(e)}));function c(e){e.srcImageBitmap&&(e.isImageBitmapReused||e.srcImageBitmap.close(),e.srcImageBitmap=null)}return r.debug("Process tiles"),Promise.all(e).then((function(){return r.debug("Finished!"),c(o),t}),(function(e){throw c(o),e}))}))},P.prototype.__processStages=function(e,t,n,o){var l=this;if(o.canceled)return o.cancelToken;var filter,c,d=r(e.shift(),2),h=d[0],f=d[1],v=0===e.length;return filter=v||C.q2f.indexOf(o.filter)<0?o.filter:"box"===o.filter?"box":"hamming",o=m({},o,{toWidth:h,toHeight:f,filter:filter}),v||(c=this.options.createCanvas(h,f)),this.__tileAndResize(t,v?n:c,o).then((function(){return v?n:(o.width=h,o.height=f,l.__processStages(e,c,n,o))})).then((function(e){return c&&(c.width=c.height=0),e}))},P.prototype.__resizeViaCreateImageBitmap=function(e,t,n){var r=this,o=t.getContext("2d");return this.debug("Resize via createImageBitmap()"),createImageBitmap(e,{resizeWidth:n.toWidth,resizeHeight:n.toHeight,resizeQuality:w.cib_quality_name(C.f2q[n.filter])}).then((function(e){if(n.canceled)return n.cancelToken;if(!n.unsharpAmount)return o.drawImage(e,0,0),e.close(),o=null,r.debug("Finished!"),t;r.debug("Unsharp result");var l=r.options.createCanvas(n.toWidth,n.toHeight),c=l.getContext("2d");c.drawImage(e,0,0),e.close();var d=c.getImageData(0,0,n.toWidth,n.toHeight);return r.__mathlib.unsharp_mask(d.data,n.toWidth,n.toHeight,n.unsharpAmount,n.unsharpRadius,n.unsharpThreshold),o.putImageData(d,0,0),l.width=l.height=0,d=c=l=o=null,r.debug("Finished!"),t}))},P.prototype.resize=function(e,t,n){var r=this;this.debug("Start resize...");var o=m({},T);if(isNaN(n)?n&&(o=m(o,n)):o=m(o,{quality:n}),o.toWidth=t.width,o.toHeight=t.height,o.width=e.naturalWidth||e.width,o.height=e.naturalHeight||e.height,Object.prototype.hasOwnProperty.call(o,"quality")){if(o.quality<0||o.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(o.quality));o.filter=C.q2f[o.quality]}if(0===t.width||0===t.height)return Promise.reject(new Error("Invalid output size: ".concat(t.width,"x").concat(t.height)));o.unsharpRadius>2&&(o.unsharpRadius=2),o.canceled=!1,o.cancelToken&&(o.cancelToken=o.cancelToken.then((function(data){throw o.canceled=!0,data}),(function(e){throw o.canceled=!0,e})));var l=3;return o.__destTileBorder=Math.ceil(Math.max(l,2.5*o.unsharpRadius|0)),this.init().then((function(){if(o.canceled)return o.cancelToken;if(r.features.cib){if(C.q2f.indexOf(o.filter)>=0)return r.__resizeViaCreateImageBitmap(e,t,o);r.debug("cib is enabled, but not supports provided filter, fallback to manual math")}if(!E){var n=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw n.code="ERR_GET_IMAGE_DATA",n}var l=x(o.width,o.height,o.toWidth,o.toHeight,r.options.tile,o.__destTileBorder);return r.__processStages(l,e,t,o)}))},P.prototype.resizeBuffer=function(e){var t=this,n=m({},T,e);if(Object.prototype.hasOwnProperty.call(n,"quality")){if(n.quality<0||n.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(n.quality));n.filter=C.q2f[n.quality]}return this.init().then((function(){return t.__mathlib.resizeAndUnsharp(n)}))},P.prototype.toBlob=function(canvas,e,t){return e=e||"image/png",new Promise((function(n){if(canvas.toBlob)canvas.toBlob((function(e){return n(e)}),e,t);else if(canvas.convertToBlob)n(canvas.convertToBlob({type:e,quality:t}));else{for(var r=atob(canvas.toDataURL(e,t).split(",")[1]),o=r.length,l=new Uint8Array(o),i=0;i<o;i++)l[i]=r.charCodeAt(i);n(new Blob([l],{type:e}))}}))},P.prototype.debug=function(){},t.exports=P},{"./lib/mathlib":1,"./lib/mm_resize/resize_filter_info":7,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":22,webworkify:23}]},{},[])("/index.js")},function(e,t,n){"use strict";n(555)},function(e,t,n){n(594);var r=n(20),o=n(556);r({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==o},{trimStart:o})},function(e,t,n){var r=n(20),o=n(556);r({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==o},{trimLeft:o})},function(e,t,n){"use strict";n(557)},function(e,t,n){"use strict";n(558)},function(e,t,n){"use strict";n(559)},function(e,t,n){"use strict";n(560)},function(e,t,n){"use strict";n(561)},function(e,t,n){"use strict";n(562)},function(e,t,n){"use strict";n(563)},function(e,t,n){"use strict";n(564)},function(e,t,n){"use strict";n.r(t);n(16),n(80),n(173),n(28),n(74);var r=n(9),o={props:{internal:{type:String,required:!0},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:r.default,required:!0}},data:function(){return{value:null,onTouched:!0,valid:!0,regEx:null,requiredError:!1}},computed:{state:function(){return this.onTouched?null:this.valid}},watch:{value:function(e,t){null!==t&&(this.onTouched=!1),this.checkValid(e),this.$emit("updateValues",{field:this.internal,valid:this.valid,value:e})}},beforeMount:function(){this.data&&(this.value=this.data.value),this.properties.regEx&&(this.regEx=new RegExp(this.properties.regEx))},created:function(){var e=this;this.bus.$on("setStatus",(function(t){e.onTouched=!1}))},mounted:function(){this.$emit("updateValues",{field:this.internal,valid:this.valid,value:this.value})},methods:{checkValid:function(e){this.requiredError=""===e||null==e,this.properties.required&&(""===e||null==e||this.regEx&&!this.regEx.test(e))?this.valid=!1:this.valid=!0}}},l=n(63),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("CommonAutolayoutLabelWrapper",{attrs:{label:e.properties.title,description:e.properties.description,required:e.properties.required,internal:e.internal}},[e.valid||e.onTouched||!e.requiredError?e._e():t("div",{staticClass:"input-feedback",attrs:{id:"input-".concat(e.internal,"-feedback")}},[e._v("\n    "+e._s(e.$t("common.required"))+"\n  ")]),e._v(" "),e.valid||e.onTouched||e.requiredError?e._e():t("div",{staticClass:"input-feedback",attrs:{id:"input-".concat(e.internal,"-feedback")}},[e._v("\n    "+e._s(e.$t("common.invalidFormat"))+"\n  ")]),e._v(" "),"richtext"==e.properties.type?t("CommonAutolayoutRichText",{class:{"is-invalid":!e.valid},attrs:{editorSettings:e.properties.editorSettings,endPoint:e.properties.endPoint},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):"multiline"==e.properties.type?t("b-textarea",{class:{"is-invalid":!e.valid},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):t("b-input",{attrs:{id:"input-".concat(e.internal),type:"text",state:e.state,maxlength:e.properties.maxlength,disabled:e.properties.disabled,autocomplete:e.properties.autocomplete,trim:!0},on:{focus:function(e){return e.target.select()}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e._v(" "),e.properties.maxlength?t("span",{class:{"max-length-helper":!0,"max-length-helper-almost":e.properties.maxlength-(e.value?e.value.length:0)<15&&e.properties.maxlength>50}},[e._v("\n    "+e._s(e.properties.maxlength-(e.value?e.value.length:0))+"\n    "+e._s(e.$t("common.charactersRemaining"))+"\n  ")]):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CommonAutolayoutRichText:n(581).default,CommonAutolayoutLabelWrapper:n(541).default})},function(e,t,n){"use strict";n.r(t);n(16),n(80),n(28);var r=n(9),o={props:{internal:{type:String,required:!0},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:r.default,required:!0}},data:function(){return{value:null,onTouched:!0,valid:!0}},computed:{state:function(){return this.onTouched?null:this.valid}},watch:{value:function(e,t){null!==t&&(this.onTouched=!1),this.checkValid(e),this.$emit("updateValues",{field:this.internal,valid:this.valid,value:e})}},beforeMount:function(){this.data&&(this.value=this.data.value)},created:function(){var e=this;this.bus.$on("setStatus",(function(t){e.onTouched=!1}))},mounted:function(){this.$emit("updateValues",{field:this.internal,valid:this.valid,value:this.value})},methods:{checkValid:function(e){!this.properties.required&&""===e||/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,24}))$/.test(e)?this.valid=!0:this.valid=!1}}},l=n(63),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("CommonAutolayoutLabelWrapper",{attrs:{label:e.properties.title,description:e.properties.description,required:e.properties.required,internal:e.internal}},[e.valid||e.onTouched?e._e():t("div",{staticClass:"input-feedback",attrs:{id:"input-".concat(e.internal,"-feedback")}},[e._v("\n    "+e._s(e.$t("common.required"))+"\n  ")]),e._v(" "),t("b-input",{attrs:{id:"input-".concat(e.internal),type:"text",state:e.state,maxlength:e.properties.maxlength,disabled:e.properties.disabled,autocomplete:e.properties.autocomplete,trim:!0},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CommonAutolayoutLabelWrapper:n(541).default})},function(e,t,n){"use strict";n.r(t);n(16),n(80);var r=n(9),o={props:{internal:{type:String,required:!0},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:r.default,required:!0}},data:function(){return{value:null,onTouched:!0,valid:!0}},computed:{state:function(){return this.onTouched?null:this.valid}},watch:{value:function(e,t){null!==t&&(this.onTouched=!1),this.checkValid(e),this.$emit("updateValues",{field:this.internal,valid:this.valid,value:e})}},beforeMount:function(){this.data&&(this.value=this.data.value)},created:function(){var e=this;this.bus.$on("setStatus",(function(t){e.onTouched=!1}))},mounted:function(){this.$emit("updateValues",{field:this.internal,valid:this.valid,value:this.value})},methods:{checkValid:function(e){this.properties.required?this.valid=""!==e&&null!=e:this.valid=!0}}},l=n(63),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("CommonAutolayoutLabelWrapper",{attrs:{label:e.properties.title,description:e.properties.description,required:e.properties.required,internal:e.internal}},[e.valid||e.onTouched?e._e():t("div",{staticClass:"input-feedback",attrs:{id:"input-".concat(e.internal,"-feedback")}},[e._v("\n    "+e._s(e.$t("common.required"))+"\n  ")]),e._v(" "),t("b-textarea",{attrs:{state:e.state,disabled:!0===e.properties.disabled,rows:"8","max-rows":"30"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CommonAutolayoutLabelWrapper:n(541).default})},function(e,t,n){"use strict";n.r(t);n(16),n(80),n(50),n(13),n(10),n(238);var r=n(9),o=n(583),l=n.n(o),c=n(231),d=n(131),h={components:{BFormSelect:c.a,BFormSelectOption:d.a,VSelect:l.a},props:{properties:{type:Object,default:function(){}},internal:{type:String,required:!0},data:{type:Object,default:function(){}},bus:{type:r.default,required:!0}},data:function(){return{value:"",valid:!this.properties.required,onTouched:!0}},computed:{state:function(){return this.onTouched?null:this.valid},newValue:{get:function(){return this.getObjectForValue(this.value)},set:function(e){null===e?this.value=null:(this.value=e.id,this.valid=!0)}}},watch:{value:function(e,t){this.onTouched=!1,this.checkValid(e),this.$emit("updateValues",{field:this.internal,valid:this.valid,value:e})}},created:function(){var e=this;this.bus.$on("setStatus",(function(t){e.onTouched=!1}))},mounted:function(){this.data&&(this.value=this.data.value,0===this.value&&(this.value=""),this.valid=null!==this.data.value&&""!==this.data.value||!this.properties.required),this.$emit("updateValues",{field:this.internal,valid:this.valid,value:this.value})},methods:{getObjectForValue:function(e){if(null===e)return{};var t=this.properties.items.filter((function(t){return t.id===Number(e)}));return t.length>0?t[0]:{}},checkValid:function(e){this.properties.required&&null===e?this.valid=!1:this.valid=!0}}},m=n(63),component=Object(m.a)(h,(function(){var e=this,t=e._self._c;return t("CommonAutolayoutLabelWrapper",{attrs:{label:e.properties.title,description:e.properties.description,required:e.properties.required,internal:e.internal}},[e.valid||e.onTouched?e._e():t("div",{staticClass:"input-feedback",attrs:{id:"input-".concat(e.internal,"-feedback")}},[e._v("\n    "+e._s(e.$t("common.required"))+"\n  ")]),e._v(" "),e.properties.searchable?t("v-select",{key:"id",attrs:{label:"name",options:e.properties.items,disabled:e.properties.disabled},model:{value:e.newValue,callback:function(t){e.newValue=t},expression:"newValue"}},[t("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v(e._s(e.$t("no_results")))])]):t("b-form-select",{staticClass:"mb-3",attrs:{disabled:e.properties.disabled},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[t("b-form-select-option",{attrs:{value:""}},[e._v("\n      -- "+e._s(e.$t("dropdown.choose"))+" --")]),e._v(" "),e._l(e.properties.items,(function(n){return t("b-form-select-option",{key:n.id,attrs:{value:n.id}},[e._v("\n      "+e._s(n.name)+"\n    ")])}))],2)],1)}),[],!1,null,"c0711b12",null);t.default=component.exports;installComponents(component,{CommonAutolayoutLabelWrapper:n(541).default})},function(e,t,n){"use strict";n.r(t);n(16),n(80),n(28),n(146),n(10),n(33),n(43);var r=n(9),o=n(584),l=n.n(o),c=n(542),d={components:{draggable:n.n(c).a,Multiselect:l.a},props:{internal:{type:String,required:!0},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:r.default,required:!0}},data:function(){return{value:null,onTouched:!0,valid:!0,ajaxOptions:[],isLoading:!1,showSorter:!1}},computed:{state:function(){return this.onTouched?null:this.valid},items:function(){var e;return null!==(e=this.properties.items)&&void 0!==e?e:[]}},watch:{value:function(e,t){null!==t&&(this.onTouched=!1),this.checkValid(e),this.updateValues(e)}},beforeMount:function(){this.data&&(this.data.value.length>0?this.value=this.data.value:this.value=[])},created:function(){var e=this;this.bus.$on("setStatus",(function(t){e.onTouched=!1}))},mounted:function(){this.updateValues(this.value)},methods:{toggleSorter:function(){this.showSorter=!this.showSorter},asyncFind:function(e){var t=this;!e||e&&e.length<=2||(this.isLoading=!0,this.$axios.get("".concat(this.properties.endPoint,"?q=").concat(e)).then((function(e){t.ajaxOptions=e.data.results})).catch((function(e){t.$sbToast.error("Error connecting to backend")})).finally((function(){t.isLoading=!1})))},updateValues:function(e){this.$emit("updateValues",{field:this.internal,valid:this.valid,value:e.map((function(e){return e.id}))})},checkValid:function(e){this.properties.required&&(0===e.length||null==e)?this.valid=!1:this.valid=!0}}},h=(n(585),n(63)),component=Object(h.a)(d,(function(){var e=this,t=e._self._c;return t("CommonAutolayoutLabelWrapper",{attrs:{label:e.properties.title,description:e.properties.description,required:e.properties.required,internal:e.internal}},[e.valid||e.onTouched?e._e():t("div",{staticClass:"input-feedback",attrs:{id:"input-".concat(e.internal,"-feedback")}},[e._v("\n    "+e._s(e.$t("common.required"))+"\n  ")]),e._v(" "),e.properties.lazyLoad?t("Multiselect",e._b({attrs:{id:"ajax",label:"label",options:e.ajaxOptions,"track-by":"id",multiple:!0,searchable:!0,loading:e.isLoading,"internal-search":!1,"clear-on-select":!1,"close-on-select":!1,"options-limit":300,"max-height":600,"show-no-results":!1,"hide-selected":!0},on:{"search-change":e.asyncFind},scopedSlots:e._u([{key:"clear",fn:function(n){return[e.value.length?t("div",{staticClass:"multiselect__clear",on:{mousedown:function(t){return t.preventDefault(),t.stopPropagation(),e.clearAll(n.search)}}}):e._e()]}}]),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"Multiselect",e.$t("multiSelect"),!1),[e._v(" "),t("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v(e._s(e.$t("multiSelect.noResult")))]),e._v(" "),t("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[e._v(e._s(e.$t("multiSelect.noOptions")))])]):t("Multiselect",e._b({attrs:{options:e.items,"custom-label":function(data){return data.label},multiple:!0,"track-by":"id"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"Multiselect",e.$t("multiSelect"),!1),[t("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v(e._s(e.$t("multiSelect.noResult")))]),e._v(" "),t("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[e._v(e._s(e.$t("multiSelect.noOptions")))])]),e._v(" "),e.properties.tagsSortable&&e.value&&e.value.length>=2?t("b-button",{staticClass:"mx-3",attrs:{size:"sm"},on:{click:function(t){return e.toggleSorter()}}},[t("Icon",{attrs:{icon:"sort"}}),e._v("\n    "+e._s(e.$t("multiSelect.sort"))+"\n  ")],1):e._e(),e._v(" "),e.showSorter?t("CommonModalsModal",{on:{cancel:function(t){return e.toggleSorter()}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.$t("multiSelect.sort"))+" ")]},proxy:!0},{key:"full",fn:function(){return[e.properties.tagsSortable&&e.value&&e.value.length>=2?t("draggable",{staticClass:"multi-drag-list",model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.value,(function(n,r){return t("div",{key:r},[e._v("\n          "+e._s(n.label)+"\n          "),t("Icon",{attrs:{icon:"up-down",size:"sm"}})],1)})),0):e._e()]},proxy:!0}],null,!1,3572239893)}):e._e()],1)}),[],!1,null,"37d77a34",null);t.default=component.exports;installComponents(component,{CommonModalsModal:n(546).default,CommonAutolayoutLabelWrapper:n(541).default})},function(e,t,n){"use strict";n.r(t);n(16),n(80),n(33);var r=n(9),o={props:{properties:{type:Object,default:function(){}},internal:{type:String,required:!0},data:{type:Object,default:function(){}},bus:{type:r.default,required:!0}},data:function(){return{value:"",valid:!this.properties.required,onTouched:!0,uniqueId:""}},computed:{state:function(){return this.ontouched?null:this.valid}},watch:{value:function(e,t){this.onTouched=!1,this.properties.required?this.valid=1===e||"1"===e:this.valid=!0,this.$emit("updateValues",{field:this.internal,valid:this.valid,value:1===e})}},created:function(){var e=this;this.bus.$on("setStatus",(function(t){e.onTouched=!1})),this.uniqueId="".concat(this._uid).concat(this.internal,"_checkbox")},mounted:function(){this.value=this.data.value?1:0,this.$emit("updateValues",{field:this.internal,valid:this.valid,value:this.value})}},l=n(63),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-12"},[t("b-form-group",{attrs:{id:"input-group-".concat(e.uniqueId),description:e.properties.description}},[t("b-form-checkbox",{attrs:{id:"input-".concat(e.uniqueId),name:"input-".concat(e.uniqueId),value:1,"unchecked-value":0},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[e._v("\n      "+e._s(e.properties.title)+"\n    ")]),e._v(" "),t("b-form-invalid-feedback",{attrs:{id:"input-".concat(e.uniqueId,"-feedback"),state:e.state}},[e._v("\n      "+e._s(e.$t("common.required"))+"\n    ")])],1)],1)}),[],!1,null,null,null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);n(16),n(80);var r=n(9),o={props:{items:{type:Array,default:function(){return[]}},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:r.default,required:!0}},data:function(){return{value:"",valid:!this.properties.required,onTouched:!0}},computed:{state:function(){return this.onTouched?null:this.valid}},watch:{value:function(e,t){this.onTouched=!1,this.properties.required?this.valid=this.value.length>0:this.valid=null,this.$emit("updateValues",{field:this.properties.internal,valid:this.valid,value:e})},valid:function(e,t){this.$emit("updateValues",{field:"text",valid:e,value:this.value})}},created:function(){var e=this;this.bus.$on("setStatus",(function(t){e.onTouched=!1}))},mounted:function(){this.$emit("updateValues",{field:this.properties.internal,required:this.properties.required,valid:this.valid,value:this.value})}},l=n(63),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("CommonAutolayoutLabelWrapper",{attrs:{label:e.properties.title,description:e.properties.description,required:e.properties.required,internal:e.internal}},[t("b-input",{attrs:{id:"input-".concat(e.properties.internal),type:"password",state:e.state,autocomplete:e.properties.autocomplete,trim:!0},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e._v(" "),t("b-form-invalid-feedback",{attrs:{id:"input-".concat(e.properties.internal,"-feedback")}},[e._v("\n    "+e._s(e.$t("common.required"))+"\n  ")])],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CommonAutolayoutLabelWrapper:n(541).default})},function(e,t,n){"use strict";n.r(t);n(16),n(80),n(51),n(33);var r=n(9),o=n(565),l={components:{Timepicker:n(566).default,Datepicker:o.default},props:{internal:{type:String,required:!0},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:r.default,required:!0}},data:function(){return{value:"",date:"",time:"",timeValid:!0,dateValid:!0,onTouched:!0,valid:!this.properties.required}},computed:{state:function(){return this.onTouched?null:this.valid}},watch:{},beforeMount:function(){var e,t,n;this.data&&(this.value=null!==(e=this.data.value)&&void 0!==e?e:null,this.date=null!==(t=this.data.value.slice(0,10))&&void 0!==t?t:null,this.time=null!==(n=this.data.value.slice(11,this.data.value.length+1))&&void 0!==n?n:null)},created:function(){var e=this;this.bus.$on("setStatus",(function(t){e.onTouched=!1}))},mounted:function(){this.$emit("updateValues",{field:this.internal,valid:this.valid,value:this.value})},methods:{updateValues:function(e){switch(e.field){case"date":this.date=e.value,this.dateValid=e.valid;break;case"time":this.time=e.value,this.timeValid=e.valid;break;default:return}this.checkValid(),this.value=null!==this.date&&null!==this.time&&this.valid?"".concat(this.date,"T").concat(this.time):null,this.$emit("updateValues",{field:this.internal,valid:this.valid,value:this.value})},checkValid:function(){this.valid=this.timeValid&&null!==this.time&&this.dateValid&&null!==this.date||!this.properties.required&&null==this.time&&null==this.date}}},c=n(63),component=Object(c.a)(l,(function(){var e=this,t=e._self._c;return t("CommonAutolayoutLabelWrapper",{class:{"is-invalid":!e.valid},attrs:{label:e.properties.title,description:e.properties.description,required:e.properties.required,internal:e.internal}},[e.valid||e.onTouched?e._e():t("div",{staticClass:"input-feedback",attrs:{id:"input-".concat(e.internal,"-feedback")}},[e._v("\n    "+e._s(this.valid||this.required?e.$t("common.required"):e.$t("forms.field.datetimeIncomplete"))+"\n  ")]),e._v(" "),t("b-row",[t("datepicker",{attrs:{data:{value:this.date},internal:"date",bus:e.bus,properties:{required:this.properties.required,title:"Datum",cols:6}},on:{updateValues:e.updateValues}}),e._v(" "),t("timepicker",{attrs:{label:"Tijd",data:{value:this.time},internal:"time",bus:e.bus,properties:{required:this.properties.required,title:"Tijd",cols:6}},on:{updateValues:e.updateValues}})],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CommonAutolayoutLabelWrapper:n(541).default})},function(e,t,n){"use strict";n.r(t);n(16),n(80),n(91),n(114),n(17),n(13),n(18),n(14),n(19);var r=n(47),o=n(38),l=n(2),c=(n(98),n(33),n(50),n(10),n(66),n(68),n(545),n(205),n(56),n(51),n(28),n(54),n(43),n(9)),d=n(708),h=n(589),m=(n(590),n(591)),f=n.n(m);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var w={components:{Cropper:h.a,BSpinner:d.a},props:{internal:{type:String,required:!0},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:c.default,required:!0}},data:function(){return y({value:null,preview:null,newValues:[],delete:!1,cropping:!1,dragging:!1,resizing:!1,onTouched:!0,valid:!0,cropperProps:{},cropperRequirements:null},this.setCropperLimits())},computed:{state:function(){return this.onTouched?null:this.valid}},created:function(){var e=this;this.bus.$on("setStatus",(function(t){e.onTouched=!1}))},beforeMount:function(){var e;null!==(e=this.data)&&void 0!==e&&e.value&&(this.value=this.data.value,this.preview=this.data.value.url?"".concat(this.data.value.url,"?").concat(Date.now()):null)},mounted:function(){var e=function(e){e.preventDefault()};window.addEventListener("dragover",e,!1),window.addEventListener("drop",e,!1),this.validate(),this.updateFormValues()},beforeDestroy:function(){var e=function(e){e.preventDefault()};window.removeEventListener("dragover",e,!1),window.removeEventListener("drop",e,!1)},methods:{checkMinimalRequirements:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,o,l,c,d,h,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=["png","jpg","jpeg","avif","webp"],o=e.name.split(".").pop().toLowerCase(),r.includes(o)){n.next=4;break}throw new Error("dit bestandstype kan niet worden gebruikt");case 4:return l=function(e){return new Promise((function(t){var img=new Image;img.onload=function(){t({height:img.height,width:img.width})},img.src=e}))},c=URL.createObjectURL(e),d=t.cropperProps,n.next=9,l(c);case 9:if(h=n.sent,m=[],d.minHeight&&h.height<d.minHeight&&(m=m.concat(["hoogte"])),d.minWidth&&h.width<d.minWidth&&(m=m.concat(["breedte"])),!m.length){n.next=15;break}throw new Error("De afbeelding is te klein (".concat(m.join(" en "),")."));case 15:return n.abrupt("return",c);case 16:case"end":return n.stop()}}),n)})))()},ignoreClickOnTargetId:function(e,t){return e.target.id===t||e.target.parentElement.id===t||e.target.parentElement.parentElement.id===t},onCropperCloseClick:function(){var e=this,t=function(){var t,n=e.newValues[e.newValues.length-1];return n?n.url:null!==(t=e.value)&&void 0!==t&&t.url&&!e.delete?e.value.url:null};this.cropping=!1,this.$refs["file-input"].value=null,this.newValues=this.newValues.slice(0,-1),this.preview=t()?"".concat(t(),"?").concat(Date.now()):null},onEditsSave:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,canvas,o,l,c,d,h,m,v;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),t.delete=!1,t.resizing=!0,r=t.$refs.cropper.getResult(),canvas=r.canvas,o=r.coordinates,l=t.newValues[t.newValues.length-1],c=[l.name,"_",t.internal,".png"].join(""),d="image/png",h=canvas,!(t.cropperProps.minWidth&&t.cropperProps.minHeight&&(o.width>2*t.cropperProps.minWidth||o.height>2*t.cropperProps.minHeight))){n.next=16;break}return m=new f.a,(v=document.createElement("canvas")).width=2*t.cropperProps.minWidth,v.height=2*t.cropperProps.minHeight,n.next=15,m.resize(canvas,v,{unsharpAmount:25,unsharpRadius:1,unsharpThreshold:1,quality:3});case 15:h=n.sent;case 16:t.resizing=!1,t.cropping=!1,t.preview=h.toDataURL(d),h.toBlob((function(e){var n=new File([e],c,{type:d});t.newValues=[{url:h.toDataURL(d),name:c,file:n}],t.validate(),t.updateFormValues()}));case 20:case"end":return n.stop()}}),n)})))()},onFileInputChange:function(e){var t=this,n=Object(r.a)(e.target.files,1)[0];this.cropping||this.properties.disabled||void 0===n||this.checkMinimalRequirements(n).then((function(e){t.newValues=t.newValues.concat([{url:e,name:n.name.replace(/\.[^/.]+$/,"")}]),t.preview=e,t.cropping=!0})).catch((function(e){t.$sbToast.error(e.message)})).finally((function(){e.target.value=""}))},onPreviewClick:function(e){var t;this.cropping||this.properties.disabled||this.ignoreClickOnTargetId(e,"reset")||null===(t=this.$refs["file-input"])||void 0===t||t.click()},onPreviewDeleteClick:function(){var e,t;this.preview.includes(null===(e=this.value)||void 0===e?void 0:e.url)?(this.preview=null,this.delete=!0):(this.newValues=[],this.$refs["file-input"].value=null,this.preview=null===(t=this.value)||void 0===t?void 0:t.url);this.validate(),this.updateFormValues()},onPreviewUndoDeleteClick:function(){this.newValues=[],this.preview="".concat(this.value.url,"?").concat(Date.now()),this.delete=!1,this.validate(),this.updateFormValues()},onPreviewDrop:function(e){var t=this,n=Object(r.a)(e.dataTransfer.files,1)[0];this.cropping||this.properties.disabled||void 0===n||this.checkMinimalRequirements(n).then((function(e){t.newValues=t.newValues.concat([{url:e,name:n.name.replace(/\.[^/.]+$/,"")}]),t.preview=e,t.dragging=!1,t.cropping=!0})).catch((function(e){t.$sbToast.error(e.message)}))},setCropperLimits:function(){var e,t={},n=[];if(!this.properties.sizes||!this.properties.sizes[0])return t;var r=parseInt(this.properties.sizes[0].width,10),o=parseInt(this.properties.sizes[0].height,10),l=null!==(e=this.properties.sizes[0].croptype)&&void 0!==e?e:"constrain",c=!!r&&0!==r,d=!!o&&0!==o;return c&&d&&(t.defaultSize={width:r,height:o}),"fitwithin"===l?(c&&(t.maxWidth=r,n=n.concat(["maximale breedte: ".concat(r,"px")])),d&&(t.maxHeight=o,n=n.concat(["maximale hoogte: ".concat(o,"px")]))):(c&&(t.minWidth=r,n=n.concat(["minimale breedte: ".concat(r,"px")])),d&&(t.minHeight=o,n=n.concat(["minimale hoogte: ".concat(o,"px")])),c&&d&&(t.stencilProps={aspectRatio:r/o})),{cropperProps:t,cropperRequirements:n.join(", ")}},setEditName:function(e){var t=this;e&&(this.newValues=this.newValues.map((function(n,r){return r===t.newValues.length-1?y(y({},n),{},{name:e}):n})))},toggleCropping:function(){this.cropping=!this.cropping},updateFormValues:function(){var e="".concat(this._uid).concat(this.internal,"_file"),t={files:this.newValues.length>0?[e]:[],delete:this.delete},n=this.newValues[0]&&this.newValues[0].file?{files:[{id:e,file:this.newValues[0].file}]}:{files:[]};this.$emit("updateValues",y({field:this.internal,valid:this.valid,value:t},n))},validate:function(){var e=this.value&&this.value.url&&!this.delete,t=this.newValues&&this.newValues[0]&&this.newValues[0].name&&this.newValues[0].file;this.properties.required?this.valid=!(!e&&!t):this.valid=!0}}},A=(n(592),n(63)),component=Object(A.a)(w,(function(){var e=this,t=e._self._c;return t("div",[t("CommonAutolayoutLabelWrapper",{attrs:{id:"input-group-".concat(e.internal),label:e.properties.title,"label-for":"input-".concat(e.internal),description:e.properties.description,required:e.properties.required,internal:e.internal}},[e.valid||e.onTouched?e._e():t("div",{staticClass:"input-feedback",attrs:{id:"input-".concat(e.internal,"-feedback")}},[e._v("\n      "+e._s(e.$t("common.required"))+"\n    ")]),e._v(" "),t("div",{on:{dragover:function(e){e.preventDefault()},drop:function(e){e.preventDefault()}}},[t("div",{class:["preview-container",e.preview?"":"empty",e.dragging?"droppable":"",e.properties.disabled?"disabled":"",e.valid||e.onTouched?"":"is-invalid",e.valid&&!e.onTouched?"is-valid":""],attrs:{tabindex:e.properties.disabled?-1:0},on:{dragover:function(t){e.dragging=!0},dragleave:function(t){e.dragging=!1},drop:e.onPreviewDrop,click:e.onPreviewClick,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onPreviewClick.apply(null,arguments)}}},[t("div",{staticClass:"preview-buttons"},[e.preview?t("b-button",{attrs:{id:"reset",type:"button",variant:"primary"},on:{click:e.onPreviewDeleteClick}},[t("Icon",{attrs:{icon:e.preview.includes(this.value.url)?"trash":"undo"}})],1):e._e(),e._v(" "),!e.preview&&this.value.url?t("b-button",{attrs:{id:"reset",type:"button",variant:"primary"},on:{click:e.onPreviewUndoDeleteClick}},[t("Icon",{attrs:{icon:"undo"}})],1):e._e()],1),e._v(" "),t("div",{staticClass:"preview-flex-container"},[e.preview?t("img",{staticClass:"preview-image",attrs:{src:e.preview}}):e.properties.disabled?t("div",[e._v("\n            "+e._s(e.$t("forms.field.disabled"))+"\n          ")]):t("div",[t("Icon",{attrs:{icon:"file-image"}}),e._v(" "),t("p",{staticClass:"mb-0"},[e._v(e._s(e.$t("forms.field.imageAdd")))])],1),e._v(" "),e.cropperRequirements?t("div",{staticClass:"image-field-requirements"},[e._v("\n            "+e._s(e.cropperRequirements)+"\n          ")]):e._e()])]),e._v(" "),t("input",{ref:"file-input",attrs:{hidden:"",id:"input-".concat(e.internal),state:e.state,disabled:e.properties.disabled,accept:"image/png, image/jpeg, image/svg+xml, image/avif, image/webp",type:"file"},on:{change:e.onFileInputChange}})])]),e._v(" "),e.cropping&&e.newValues.length?t("div",{staticClass:"cropper-modal"},[t("b-button",{staticClass:"cropper-modal-close",attrs:{type:"button",variant:"dark"},on:{click:e.onCropperCloseClick}},[t("Icon",{attrs:{icon:"xmark"}})],1),e._v(" "),t("cropper",e._b({ref:"cropper",staticClass:"cropper",attrs:{src:e.preview}},"cropper",e.cropperProps,!1)),e._v(" "),t("div",{staticClass:"mt-2 image-info"},[t("b-button",{attrs:{type:"button",variant:"primary",disabled:e.resizing},on:{click:e.onEditsSave}},[e.resizing?t("b-spinner",{staticClass:"spinner",attrs:{small:""}}):e._e(),e._v("\n        "+e._s(e.$t("forms.crop"))+"\n      ")],1)],1)],1):e._e()],1)}),[],!1,null,"663e83d9",null);t.default=component.exports;installComponents(component,{CommonAutolayoutLabelWrapper:n(541).default})},function(e,t,n){"use strict";n.r(t);n(16),n(80),n(28),n(54),n(593);var r=n(9),o={props:{internal:{type:String,required:!0},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:r.default,required:!0}},data:function(){return{value:null,onTouched:!0,valid:!0}},computed:{state:function(){return this.onTouched?null:this.valid}},watch:{value:function(e,t){var n=this;null!==t&&(this.onTouched=!1),this.checkValid(e),e=e.trimLeft().toLowerCase().replace(/[^a-z0-9]/gi," ").replace(/[ ]{2,100}/gi," ").replace(/ /gi,"-"),this.$nextTick((function(){n.value=e})),this.$emit("updateValues",{field:this.internal,valid:this.valid,value:e})}},beforeMount:function(){this.data&&(this.value=this.data.value)},created:function(){var e=this;this.bus.$on("setStatus",(function(t){e.onTouched=!1}))},mounted:function(){this.$emit("updateValues",{field:this.internal,valid:this.valid,value:this.value})},methods:{preventInvalidChars:function(e){/[^a-z0-9 _-]{1}/i.test(e.key)&&e.preventDefault()},checkValid:function(e){this.properties.required?this.valid=""!==e&&null!=e:this.valid=!0}}},l=n(63),component=Object(l.a)(o,(function(){var e,t=this,n=t._self._c;return n("CommonAutolayoutLabelWrapper",{attrs:{label:t.properties.title,description:null!==(e=t.properties.description)&&void 0!==e?e:t.$t("common.slugDescription"),required:t.properties.required,internal:t.internal}},[t.valid||t.onTouched?t._e():n("div",{staticClass:"input-feedback",attrs:{id:"input-".concat(t.internal,"-feedback")}},[t._v("\n    "+t._s(t.$t("common.required"))+"\n  ")]),t._v(" "),n("b-input",{attrs:{id:"input-".concat(t.internal),type:"text",state:t.state,maxlength:t.properties.maxlength,disabled:t.properties.disabled,autocomplete:t.properties.autocomplete},on:{keypress:function(e){return t.preventInvalidChars(e)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CommonAutolayoutLabelWrapper:n(541).default})},function(e,t,n){"use strict";n.r(t);n(16),n(80),n(50);var r=n(38),o=(n(33),n(98),n(9)),l={components:{},props:{internal:{type:String,required:!0},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:o.default,required:!0}},data:function(){return{value:"",file:null,onTouched:!0,deleted:!1,valid:!this.properties.required||null!==this.file}},computed:{state:function(){return this.onTouched?null:this.valid}},watch:{file:function(e){this.onTouched=!1,this.checkValid(e),this.deleted=!1,this.updateValues()}},beforeMount:function(){this.data&&(this.value=this.data.value)},created:function(){var e=this;this.bus.$on("setStatus",(function(t){e.onTouched=!1}))},mounted:function(){this.updateValues()},methods:{copy:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.clipboard.writeText(e.properties.downloadUrl);case 3:alert("Copied"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),alert("Cannot copy");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},updateValues:function(){var e="".concat(this._uid).concat(this.internal,"_file"),t={files:this.file?[e]:[],delete:this.deleted};this.$emit("updateValues",{field:this.internal,valid:this.valid,value:t,files:null==this.file?[]:[{id:e,file:this.file}]})},deleteFile:function(){this.deleted=!this.deleted,this.updateValues()},removeNewFile:function(){this.file=null},checkValid:function(e){this.properties.required?this.valid=""!==e&&null!=e:this.valid=!0}}},c=(n(595),n(63)),component=Object(c.a)(l,(function(){var e,t=this,n=t._self._c;return n("CommonAutolayoutLabelWrapper",{attrs:{label:t.properties.title,description:t.properties.description,required:t.properties.required,internal:t.internal}},[t.valid||t.onTouched?t._e():n("div",{staticClass:"input-feedback",attrs:{id:"input-".concat(t.internal,"-feedback")}},[t._v("\n    "+t._s(t.$t("common.required"))+"\n  ")]),t._v(" "),null!==(e=t.value)&&void 0!==e&&e.name&&!t.file?n("p",{class:{filename:!0,deleted:t.deleted}},[n("em",[t._v(" "+t._s(t.value.name))]),t._v(" "),t.value.size?n("span",[t._v(t._s(t.value.size))]):t._e(),t._v(" "),void 0!==t.properties.downloadUrl&&""!==t.properties.downloadUrl?n("span",[n("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:function(e){return e.preventDefault(),t.copy.apply(null,arguments)}}},[t._v("\n        "+t._s(t.properties.downloadUrl)+" "),n("Icon",{attrs:{icon:"copy"}})],1)],1):t._e(),t._v(" "),n("button",{staticClass:"btn btn-sm btn-primary px-2",on:{click:function(e){return e.preventDefault(),t.deleteFile.apply(null,arguments)}}},[t.deleted?n("Icon",{attrs:{icon:"undo"}}):n("Icon",{attrs:{icon:"trash"}})],1)]):t._e(),t._v(" "),n("b-input-group",{staticClass:"mt-3"},[n("b-form-file",{attrs:{state:Boolean(t.file)||!t.properties.required,placeholder:"Kies een bestand","drop-placeholder":"Sleep hier een bestand..."},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),t._v(" "),t.file?n("b-input-group-append",[n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return e.preventDefault(),t.removeNewFile.apply(null,arguments)}}},[n("Icon",{attrs:{icon:"trash"}})],1)],1):t._e()],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CommonAutolayoutLabelWrapper:n(541).default})},function(e,t,n){"use strict";n.r(t);n(16),n(80);var r=n(9),o={props:{internal:{type:String,required:!0},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:r.default,required:!0}},data:function(){return{value:null,onTouched:!0,valid:!0,sliderOptions:{dotOptions:[{style:{backgroundColor:"#472b5c",border:"1px solid #402753",boxShadow:"0.5px 0.5px 2px 1px rgba(107,107,107,.36)"},tooltipStyle:{backgroundColor:"#402753",borderColor:"#402753"}}]}}},computed:{state:function(){return this.onTouched?null:this.valid}},watch:{value:function(e,t){null!==t&&(this.onTouched=!1),this.checkValid(e),this.$emit("updateValues",{field:this.internal,valid:this.valid,value:e})}},beforeMount:function(){this.data&&(this.value=this.data.value),this.value||(this.value=this.properties.defaultValue)},created:function(){var e=this;this.bus.$on("setStatus",(function(t){e.onTouched=!1}))},mounted:function(){this.$emit("updateValues",{field:this.internal,valid:this.valid,value:this.value})},methods:{checkValid:function(e){this.properties.required?this.valid=""!==e&&null!=e:this.valid=!0}}},l=(n(597),n(63)),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("CommonAutolayoutLabelWrapper",{attrs:{label:e.properties.title,description:e.properties.description,required:e.properties.required,internal:e.internal}},[e.valid||e.onTouched?e._e():t("div",{staticClass:"input-feedback",attrs:{id:"input-".concat(e.internal,"-feedback")}},[e._v("\n    "+e._s(e.$t("common.required"))+"\n  ")]),e._v(" "),t("strong",[e._v(e._s(e.value))]),e._v(" "),e.properties.maxValue&&e.properties.minValue?t("b-form-input",{attrs:{id:"input-".concat(e.internal),state:e.state,maxlength:e.properties.maxlength,disabled:e.properties.disabled,autocomplete:e.properties.autocomplete,trim:!0,type:"range",max:e.properties.maxValue,min:e.properties.minValue},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):t("b-form-input",{attrs:{id:"input-".concat(e.internal),state:e.state,maxlength:e.properties.maxlength,disabled:e.properties.disabled,autocomplete:e.properties.autocomplete,trim:!0,type:"number"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)}),[],!1,null,"3bcbb264",null);t.default=component.exports;installComponents(component,{CommonAutolayoutLabelWrapper:n(541).default})},function(e,t,n){"use strict";n.r(t);var r=n(9),o={props:{internal:{type:String,required:!0},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:r.default,required:!0}},data:function(){return{value:null,onTouched:!0,valid:!0}}},l=(n(598),n(63)),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"little-problem"},[t("h3",[e._v(e._s(e.internal))]),e._v("\n  Input "),t("em",[e._v(e._s(e.properties.type))]),e._v(" not implemented\n  "),t("p",[t("em",[e._v(" Value")]),e._v(": "+e._s(e.value))]),e._v(" "),t("pre",{staticClass:"well"},[e._v("  "+e._s(e.properties)+"\n")])])}),[],!1,null,null,null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);n(16),n(80),n(28);var r=n(9),o={props:{internal:{type:String,required:!0},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:r.default,required:!0}},data:function(){return{value:null,onTouched:!0,valid:!0}},computed:{state:function(){return this.onTouched?null:this.valid}},watch:{value:function(e,t){null!==t&&(this.onTouched=!1),this.checkValid(e),this.$emit("updateValues",{field:this.internal,valid:this.valid,value:e})}},beforeMount:function(){this.data&&(this.value=this.data.value)},created:function(){var e=this;this.bus.$on("setStatus",(function(t){e.onTouched=!1}))},mounted:function(){this.$emit("updateValues",{field:this.internal,valid:this.valid,value:this.value})},methods:{preventInvalidChars:function(e){/\D/i.test(e.key)&&e.preventDefault()},checkValid:function(e){this.properties.required?this.valid=""!==e&&null!=e:this.valid=!0}}},l=n(63),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("CommonAutolayoutLabelWrapper",{attrs:{label:e.properties.title,description:e.properties.description,required:e.properties.required,internal:e.internal}},[e.valid||e.onTouched?e._e():t("div",{staticClass:"input-feedback",attrs:{id:"input-".concat(e.internal,"-feedback")}},[e._v("\n    "+e._s(e.$t("common.required"))+"\n  ")]),e._v(" "),t("b-input",{attrs:{id:"input-".concat(e.internal),type:"number",state:e.state,maxlength:e.properties.maxlength,disabled:e.properties.disabled,autocomplete:e.properties.autocomplete},on:{focus:function(e){return e.target.select()},keypress:function(t){return e.preventInvalidChars(t)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CommonAutolayoutLabelWrapper:n(541).default})},function(e,t,n){"use strict";n.r(t);var r={props:{properties:{type:Object,default:function(){}}}},o=(n(599),n(63)),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-12 c-a"},[4==e.properties.size?t("div",{class:{"mb-3":!0,underline:1==e.properties.underline}},[t("h4",{staticClass:"header"},[e._v("\n      "+e._s(e.properties.text)+"\n    ")])]):t("h2",{staticClass:"header"},[e._v("\n    "+e._s(e.properties.text)+"\n  ")])])}),[],!1,null,"44a29fe0",null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);var r={props:{properties:{type:Object,default:function(){}}}},o=n(63),component=Object(o.a)(r,(function(){var e=this;return(0,e._self._c)("div",{staticClass:"col-12",domProps:{innerHTML:e._s(e.properties.text)}})}),[],!1,null,null,null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);var r=n(708),o=n(9),l={components:{BSpinner:r.a},props:{items:{type:Array,default:function(){return[]}},properties:{type:Object,default:function(){}},bus:{type:o.default,required:!0}},data:function(){return{sending:!1,currentTitle:""}},mounted:function(){this.currentTitle=this.properties.title},methods:{setType:function(e,t){this.currentTitle=t,this.$emit("setFormOption","send",e)}},created:function(){var e=this;this.bus.$on("setStatus",(function(t){e.sending=!t.active}))}},c=(n(600),n(63)),component=Object(c.a)(l,(function(){var e=this,t=e._self._c;return t("div",{class:{"col-12 pb-3 pt-3 c-a":!0,"submit-button":e.properties.sticky}},[e.properties.alternatives?t("b-button-group",[t("b-button",{staticClass:"animateSize",attrs:{type:"submit",variant:"primary",disabled:e.sending}},[e.sending?t("b-spinner",{staticClass:"spinner",attrs:{small:""}}):e._e(),e._v(e._s(e.currentTitle)+"\n    ")],1),e._v(" "),t("b-dropdown",{attrs:{right:"",variant:"primary"}},[t("b-dropdown-item",{on:{click:function(t){return e.setType("default",e.properties.title)}}},[e._v(e._s(e.properties.title))]),e._v(" "),e._l(e.properties.alternatives,(function(n,r){return t("b-dropdown-item",{key:r,on:{click:function(t){return e.setType(r,n)}}},[e._v(e._s(n))])}))],2)],1):t("b-button",{staticClass:"animateSize",attrs:{type:"submit",variant:"primary",disabled:e.sending}},[e.sending?t("b-spinner",{staticClass:"spinner",attrs:{small:""}}):e._e(),e._v(e._s(e.properties.title)+"\n  ")],1)],1)}),[],!1,null,"36a02ebe",null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);n(403),n(174),n(50),n(17),n(16),n(13),n(18),n(14),n(19);var r=n(2),o=n(57),l=(n(28),n(146),n(43),n(54),n(10),n(66),n(68),n(545),n(205),n(33),n(542)),c=n.n(l),d=n(552),h=n(553);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v={components:{draggable:c.a,ContextMenu:d.default,ContextMenuItem:h.default},props:{properties:{type:Object,default:function(){}}},data:function(){return{search:"",disableDraggable:!1,currentPage:1,numberOfRecordsPerPage:25,numberOfRecordsOptions:[],currentSorting:{internal:"",ascending:!0}}},mounted:function(){var e,t,n,r,o=this.$route.query;this.numberOfRecordsPerPage=null!==(e=o.pitems)&&void 0!==e?e:this.numberOfRecordsPerPage,this.currentPage=null!==(t=o.page)&&void 0!==t?t:this.currentPage,this.search=null!==(n=o.search)&&void 0!==n?n:this.search,this.currentSorting.internal=null!==(r=o.sort)&&void 0!==r?r:this.currentSorting.internal,o.asc&&(this.currentSorting.ascending="true"===o.asc),this.properties.totalItems>this.numberOfRecordsPerPage&&this.numberOfRecordsOptions.push(this.numberOfRecordsPerPage),this.properties.totalItems>2*this.numberOfRecordsPerPage&&this.numberOfRecordsOptions.push(2*this.numberOfRecordsPerPage),this.properties.totalItems>10*this.numberOfRecordsPerPage&&this.numberOfRecordsOptions.push(10*this.numberOfRecordsPerPage)},computed:{pagingOptions:function(){return this.numberOfRecordsOptions.map((function(option){return{text:option,value:option}}))},headers:function(){var e=[];return this.properties.sort&&e.push({key:"index",title:""}),this.properties.edit&&e.push({key:"edit",title:""}),e.push.apply(e,Object(o.a)(this.properties.headers)),this.properties.delete&&e.push({key:"remove",title:""}),e},getUrlWithoutLocale:function(){return this.$route.path.replace("/".concat(this.$i18n.locale,"/"),"/")},editIcon:function(){var e,t;return null!==(e=null===(t=this.properties)||void 0===t?void 0:t.editIcon)&&void 0!==e?e:"edit"}},watch:{numberOfRecordsPerPage:function(){this.$router.push({query:f(f({},this.$route.query),{},{page:this.currentPage,pitems:this.numberOfRecordsPerPage})})},currentPage:function(){this.$router.push({query:f(f({},this.$route.query),{},{page:this.currentPage,pitems:this.numberOfRecordsPerPage})})}},methods:{setSearchQuery:function(){this.$router.push({query:f(f({},this.$route.query),{},{search:this.search})})},sortByColumn:function(e){var t;null!==(t=e.properties)&&void 0!==t&&t.sortable&&(this.currentSorting.internal===e.internal?this.currentSorting.ascending=!this.currentSorting.ascending:(this.currentSorting.internal=e.internal,this.currentSorting.ascending=!0),this.$router.push({query:f(f({},this.$route.query),{},{sort:e.internal,asc:this.currentSorting.ascending})}))},currentSortByColumn:function(e){var t;return null!==(t=e.properties)&&void 0!==t&&t.sortable?this.currentSorting.internal===e.internal?this.currentSorting.ascending?"ascending":"descending":"none":null},clearSearch:function(){this.search="",this.setSearchQuery()},editRow:function(link){this.properties.edit&&this.$router.push(this.localePath(link))},actionColumnClick:function(e){var t=this;this.$axios({url:e.properties.toggleEndPoint,method:"POST"}).then((function(n){n.data.error?t.$sbToast.error(n.data.error):(n.data.message&&t.$sbToast.success(n.data.message),e.value=n.data.value)})).catch((function(e){t.$sbToast.error("Error loading")}))},downloadDocument:function(e){var t=this;this.$axios({url:e.action,method:"GET"}).then((function(e){if(e.data.message)t.$sbToast.error(e.data.message);else{var n=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=n,r.setAttribute("download","report.csv"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(r)}})).catch((function(e){t.$sbToast.error("Error loading")}))},onChange:function(e){var t,n=this;this.disableDraggable=!0;var r=e.moved.element.id;if(e.moved.newIndex!==e.moved.oldIndex){var o;o=e.moved.newIndex<e.moved.oldIndex?this.properties.rows[e.moved.newIndex+1].id:this.properties.rows[e.moved.newIndex-1].id;var l=this.getUrlWithoutLocale,c=null!==(t=this.properties.moveEndpoint)&&void 0!==t?t:"".concat(l.replace(/\/$/,""),"/move/");this.$axios.put(c,{recordId:r,replacedRecordId:o}).then((function(){n.$nuxt.refresh()})).catch((function(e){n.$sbToast.error(e.response.data.message)})).finally((function(){n.disableDraggable=!1}))}else this.disableDraggable=!1},deleteRecord:function(e){var t=this,n=this.getUrlWithoutLocale,r=this.properties.deleteEndpoint?this.properties.deleteEndpoint+e:"".concat(n.replace(/\/$/,""),"/").concat(e,"/");this.$sbConfirm({message:this.$t("table.deleteConfirm"),callback:function(e){e&&t.$axios.delete(r).then((function(){t.$sbToast.success(t.$t("table.recordDeleted"))})).catch((function(e){t.$sbToast.error(e.response.data.message)})).finally((function(){t.$nuxt.refresh()}))}})}}},y=(n(601),n(63)),component=Object(y.a)(v,(function(){var e=this,t=e._self._c;return t("b-col",{ref:"container",attrs:{cols:"12 table-responsive mb-0"}},[t("ContextMenu",{ref:"menu",scopedSlots:e._u([{key:"default",fn:function(n){var r=n.contextData;return r?[r.columns?t("ContextMenuItem",{nativeOn:{click:function(t){return e.$refs.menu.close.apply(null,arguments)}}},[t("router-link",{attrs:{to:r.link}},[e._v("Bewerk "+e._s(r.columns[0].value))])],1):e._e()]:void 0}}],null,!0)}),e._v(" "),t("table",{staticClass:"table table-sm b-table"},[t("thead",[t("tr",e._l(e.headers,(function(n,r){return t("th",{key:r,attrs:{"aria-sort":e.currentSortByColumn(n)},on:{click:function(t){return e.sortByColumn(n)}}},[e._v("\n          "+e._s(n.title)+"\n        ")])})),0)]),e._v(" "),t("draggable",e._b({staticClass:"simple-body",attrs:{list:e.properties.rows,tag:"tbody",sort:!0,animation:"200",handle:".drag-anchor"},on:{change:e.onChange}},"draggable",{disabled:e.disableDraggable},!1),e._l(e.properties.rows,(function(n){return t("tr",{key:n.id,on:{dblclick:function(t){return e.editRow(n.link)},contextmenu:function(t){return t.preventDefault(),e.$refs.menu.open(t,n)}}},[e.properties.sort?t("td",{attrs:{width:"50"}},[t("div",{staticClass:"d-flex drag-anchor",class:{draggable:!e.disableDraggable}},[t("Icon",{attrs:{icon:"bars"}})],1)]):e._e(),e._v(" "),e.properties.edit?t("td",{staticClass:"column-type-checkbox"},[t("div",{staticClass:"d-flex",attrs:{"data-recordid":n.id,"data-index":1}},[t("NuxtLink",{staticClass:"td-title-link",attrs:{to:n.link}},[t("Icon",{attrs:{icon:e.editIcon}})],1)],1)]):e._e(),e._v(" "),e._l(n.columns,(function(n,r){var o,l,c;return t("td",{key:r,class:"column-type-".concat(n.type)},["checkbox"==n.type||"InputCheckbox"==n.type?t("div",{on:{click:function(t){return e.actionColumnClick(n)}}},[1==n.value?t("Icon",{staticClass:"color-true",attrs:{icon:"check"}}):t("Icon",{staticClass:"color-false",attrs:{icon:"close"}})],1):"Image"==n.type?t("div",[t("img",{staticClass:"preview-overview-image",attrs:{src:n.value,alt:""}})]):"InputButton"==n.type?t("div",[n.properties.action?t("b-button",{attrs:{variant:"secondary",size:"sm"},on:{click:function(t){return e.downloadDocument(n.properties)}}},[e._v("\n              "+e._s(null!==(o=n.properties.name)&&void 0!==o?o:n.value)+"\n            ")]):0==n.properties.external?t("b-button",{attrs:{variant:"secondary",size:"sm",to:e.localePath(n.properties.link)}},[t("Icon",{attrs:{icon:"up-right-from-square"}}),e._v("\n              "+e._s(null!==(l=n.properties.name)&&void 0!==l?l:n.value)+"\n            ")],1):t("b-button",{attrs:{variant:"secondary",size:"sm",target:"_blank",href:n.properties.link}},[e._v(e._s(null!==(c=n.properties.name)&&void 0!==c?c:n.value)+"\n            ")])],1):t("div",{staticClass:"notSelectable"},[e._v("\n            "+e._s(n.value)+"\n          ")])])})),e._v(" "),e.properties.delete?t("td",[t("a",{staticClass:"d-flex justify-content-end align-items-center pr-2",attrs:{role:"button"},on:{click:function(t){return e.deleteRecord(n.id)}}},[t("Icon",{attrs:{icon:"trash"}})],1)]):e._e()],2)})),0)],1)],1)}),[],!1,null,"85e90b34",null);t.default=component.exports;installComponents(component,{ContextMenuItem:n(553).default,ContextMenu:n(552).default})},function(e,t,n){"use strict";n.r(t);n(403);var r={props:{properties:{type:Object,default:function(){}}}},o=n(63),component=Object(o.a)(r,(function(){var e=this;return(0,e._self._c)("router-link",{staticClass:"btn btn-primary",attrs:{to:e.localePath(e.properties.link)}},[e._v("\n  "+e._s(e.properties.title)+"\n")])}),[],!1,null,"5833ee67",null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);n(403);var r={props:{properties:{type:Object,default:function(){}}}},o=n(63),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-12 breadcrumbs-animation"},[t("b-breadcrumb",e._l(e.properties.items,(function(n,r){return t("b-breadcrumb-item",{key:r,attrs:{active:null==n.link,to:e.localePath(n.link)}},[e._v("\n      "+e._s(n.title)+"\n    ")])})),1)],1)}),[],!1,null,null,null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);n(403),n(33);var r={props:{properties:{type:Object,default:function(){}}},methods:{runAction:function(){if("addNew"===this.properties.action)this.actionNew();else alert("Action unknown ".concat(this.properties.action))},actionNew:function(){var e=this,t=this.$route.params.slug;this.$axios.post("/table/".concat(t,"/")).then((function(n){e.$router.push(e.localePath("/table/".concat(t,"/").concat(n.data.id,"/")))})).catch((function(t){e.$sbToast.error("Er ging iets mis. Probeer het opnieuw.")}))}}},o=n(63),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return e.properties.action?t("b-button",{staticClass:"mx-3",attrs:{size:"sm"},on:{click:function(t){return e.runAction()}}},[e.properties.icon?t("Icon",{attrs:{icon:e.properties.icon}}):t("span",[e._v(" "+e._s(e.properties.text))])],1):t("b-button",{staticClass:"mx-3",attrs:{to:e.localePath(e.properties.link),size:"sm"}},[e.properties.icon?t("Icon",{attrs:{icon:e.properties.icon}}):t("span",[e._v(" "+e._s(e.properties.text))])],1)}),[],!1,null,null,null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);n(17),n(16),n(13),n(10),n(18),n(14),n(19);var r=n(2);function o(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var c={components:{},props:{properties:{type:Object,default:function(){}}},data:function(){return{currentPage:1}},methods:{changePage:function(e){this.$router.push({query:l(l({},this.$route.query),{},{page:e})})}},mounted:function(){var e,t,n=this.$route.query;this.itemsPerPage=null!==(e=n.pitems)&&void 0!==e?e:this.itemsPerPage,this.currentPage=null!==(t=n.page)&&void 0!==t?t:this.currentPage}},d=n(63),component=Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"col"},[e.properties.totalItems>e.properties.itemsPerPage?t("b-pagination",{staticClass:"mb-0 col",attrs:{size:"sm","total-rows":e.properties.totalItems,"per-page":e.properties.itemsPerPage,"first-number":"","last-number":""},on:{change:e.changePage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}):e._e()],1)}),[],!1,null,null,null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);n(28),n(146);var r=n(2);n(17),n(16),n(13),n(10),n(18),n(14),n(19);function o(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var c={data:function(){return{search:""}},mounted:function(){var e,t=this.$route.query;this.search=null!==(e=t.search)&&void 0!==e?e:""},methods:{clearSearch:function(){this.search="",this.setSearchQuery()},setSearchQuery:function(){this.$router.push({query:l(l({},this.$route.query),{},{search:this.search,page:1})})}},props:{properties:{type:Object,default:function(){}}}},d=(n(602),n(63)),component=Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"col search-box"},[t("div",{staticClass:"table-search"},[t("b-form",{on:{submit:function(t){return t.preventDefault(),e.setSearchQuery.apply(null,arguments)}}},[t("b-form-input",{attrs:{placeholder:e.properties.placeholder,type:"search",size:"sm",autofocus:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),t("div",{staticClass:"buttons"},[""!==e.search?t("button",{staticClass:"clear",attrs:{type:"reset"},on:{click:function(t){return e.clearSearch()}}},[t("Icon",{attrs:{icon:"times"}})],1):e._e(),e._v(" "),t("button",{staticClass:"search",attrs:{type:"submit",size:"sm"}},[t("Icon",{attrs:{icon:"magnifying-glass"}})],1)])],1)],1)])}),[],!1,null,"69b71bc6",null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);n(28),n(146);var r={data:function(){return{numberOfRecordsPerPage:10,search:"",numberOfRecordsOptions:[10,25,50,100]}},components:{BFormSelect:n(231).a},props:{properties:{type:Object,default:function(){}}}},o=n(63),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("b-col",{staticClass:"px-3 py-2 backgrond-gray",attrs:{cols:"12"}},[t("b-row",[t("b-col",{attrs:{cols:"6"}},[e.numberOfRecordsOptions.length>0?t("div",[e._v("\n        "+e._s(e.$t("table.records"))+"\n        "),t("b-form-select",{staticClass:"ml-1",staticStyle:{width:"110px"},attrs:{options:e.pagingOptions},model:{value:e.numberOfRecordsPerPage,callback:function(t){e.numberOfRecordsPerPage=t},expression:"numberOfRecordsPerPage"}}),e._v(" "),e.properties.create?t("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-2 mr-2",attrs:{variant:"primary",title:"Nieuw"},on:{click:e.newRecord}},[e._v("\n          "+e._s(e.$t("table.new"))+"\n        ")]):e._e()],1):e._e()]),e._v(" "),t("b-col",{attrs:{cols:"6"}},[t("div",{staticClass:"table-search"},[t("b-form-input",{attrs:{type:"search",size:"sm"},on:{change:e.setSearchQuery},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),t("div",{staticClass:"buttons"},[""!==e.search?t("button",{staticClass:"clear",on:{click:function(t){return e.clearSearch()}}},[t("Icon",{attrs:{icon:"times"}})],1):e._e(),e._v(" "),t("button",{staticClass:"search",attrs:{size:"sm"}},[t("Icon",{attrs:{icon:"magnifying-glass"}})],1)])],1)])],1)],1)}),[],!1,null,null,null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);n(403);var r={props:{properties:{type:Object,default:function(){}}}},o=n(63),component=Object(o.a)(r,(function(){var e=this;return(0,e._self._c)("b-nav-item",{attrs:{to:e.localePath(e.properties.link)}},[e._v("\n  "+e._s(e.properties.title)+"\n")])}),[],!1,null,null,null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);var r={components:{BAlert:n(707).a},props:{properties:{type:Object,default:function(){}}}},o=n(63),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-12"},[t("b-alert",{attrs:{show:"",variant:e.properties.type}},[t("strong",[e._v(e._s(e.properties.intro))]),e._v(" "+e._s(e.properties.text)+"\n  ")])],1)}),[],!1,null,null,null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);n(28),n(54);var r={props:{properties:{type:Object,default:function(){}}},computed:{productName:function(){return this.$store.state.settings.productName},version:function(){return this.$store.state.version.replace(/"/g,"")}}},o=n(63),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-12"},["version"==e.properties.feature?t("div",[e._v("\n    "+e._s(e.productName)+" client "+e._s(e.version)+" (based on SiteBossÂ®)\n  ")]):e._e(),e._v(" "),t("div",[e._v(e._s(e.properties.text))])])}),[],!1,null,null,null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);var r=n(9),o={props:{internal:{type:String,required:!0},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:r.default,required:!0}},data:function(){return{value:null,onTouched:!0,valid:!0}},computed:{},beforeMount:function(){this.data&&(this.value=this.data.value)},mounted:function(){this.$emit("updateValues",{field:this.internal,valid:!0,value:this.value})}},l=(n(596),n(63)),component=Object(l.a)(o,undefined,undefined,!1,null,"dd31c1d4",null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);var r=n(63),component=Object(r.a)({},(function(){return(0,this._self._c)("div",{staticClass:"border-top pt-3 m-3"})}),[],!1,null,null,null);t.default=component.exports},function(e,t,n){n(673)},function(e,t,n){n(674)},function(e,t,n){n(675)},function(e,t,n){n(676)},function(e,t,n){n(677)},function(e,t,n){n(678)},function(e,t,n){n(679)},function(e,t,n){n(680)},function(e,t,n){n(681)},function(e,t,n){n(682)},function(e,t,n){n(683)},function(e,t,n){n(684)},function(e,t,n){n(685)},function(e,t,n){n(686)},function(e,t,n){n(687)},function(e,t,n){n(688)},function(e,t,n){n(689)},function(e,t,n){n(690)},function(e,t,n){n(691)},function(e,t,n){n(692)},function(e,t,n){n(693)},function(e,t,n){n(694)},function(e,t,n){n(695)},function(e,t,n){n(696)},function(e,t,n){n(697)},function(e,t,n){n(698)},function(e,t,n){n(699)},function(e,t,n){"use strict";n(569)},function(e,t,n){"use strict";n(570)},function(e,t,n){"use strict";n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return A}));var r=n(4),o=n(3),l=n(1),c=n(32),d=n(6),h=n(39),m=n(23),f=n(0),v=n(22),y=n(26),w=Object(f.d)({animated:Object(f.c)(l.g,null),label:Object(f.c)(l.t),labelHtml:Object(f.c)(l.t),max:Object(f.c)(l.o,null),precision:Object(f.c)(l.o,null),showProgress:Object(f.c)(l.g,null),showValue:Object(f.c)(l.g,null),striped:Object(f.c)(l.g,null),value:Object(f.c)(l.o,0),variant:Object(f.c)(l.t)},o.Cb),A=Object(r.c)({name:o.Cb,mixins:[y.a],inject:{getBvProgress:{default:function(){return function(){return{}}}}},props:w,computed:{bvProgress:function(){return this.getBvProgress()},progressBarClasses:function(){var e=this.computedAnimated,t=this.computedVariant;return[t?"bg-".concat(t):"",this.computedStriped||e?"progress-bar-striped":"",e?"progress-bar-animated":""]},progressBarStyles:function(){return{width:this.computedValue/this.computedMax*100+"%"}},computedValue:function(){return Object(m.b)(this.value,0)},computedMax:function(){var e=Object(m.b)(this.max)||Object(m.b)(this.bvProgress.max,0);return e>0?e:100},computedPrecision:function(){return Object(h.c)(Object(m.c)(this.precision,Object(m.c)(this.bvProgress.precision,0)),0)},computedProgress:function(){var e=this.computedPrecision,p=Object(h.e)(10,e);return Object(m.a)(100*p*this.computedValue/this.computedMax/p,e)},computedVariant:function(){return this.variant||this.bvProgress.variant},computedStriped:function(){return Object(d.b)(this.striped)?this.striped:this.bvProgress.striped||!1},computedAnimated:function(){return Object(d.b)(this.animated)?this.animated:this.bvProgress.animated||!1},computedShowProgress:function(){return Object(d.b)(this.showProgress)?this.showProgress:this.bvProgress.showProgress||!1},computedShowValue:function(){return Object(d.b)(this.showValue)?this.showValue:this.bvProgress.showValue||!1}},render:function(e){var t,label=this.label,n=this.labelHtml,r=this.computedValue,o=this.computedPrecision,l={};return this.hasNormalizedSlot()?t=this.normalizeSlot():label||n?l=Object(c.a)(n,label):this.computedShowProgress?t=this.computedProgress:this.computedShowValue&&(t=Object(m.a)(r,o)),e("div",{staticClass:"progress-bar",class:this.progressBarClasses,style:this.progressBarStyles,attrs:{role:"progressbar","aria-valuemin":"0","aria-valuemax":Object(v.g)(this.computedMax),"aria-valuenow":Object(m.a)(r,o)},domProps:l},t)}})},function(e,t,n){"use strict";n(571)},function(e,t,n){"use strict";n(572)},function(e,t,n){"use strict";n(573)},function(e,t,n){"use strict";n.r(t);var r=n(38),o=n(47),l=(n(98),n(10),n(66),n(68),n(28),n(54),n(545),n(205),n(14),n(175),n(33),n(403),n(707)),progress=n(712),c=n(708),d=n(9),h={components:{BAlert:l.a,BProgress:progress.a,BSpinner:c.a,AutoLayout:function(){return Promise.all([n.e(1),n.e(2),n.e(3),n.e(6),n.e(129)]).then(n.bind(null,700))}},props:{items:{type:Array,default:function(){return[]}},properties:{type:Object,default:function(){}}},data:function(){return{fields:{},bus:new d.default,error:!1,errorMessage:"",progress:0,errorTitle:"Error",validated:!1,options:{}}},methods:{downloadFile:function(e){var t=this,n="report.csv";this.$axios({url:e,method:"GET"}).then((function(e){if(e.data.message)t.$sbToast.error(e.data.message);else{var r=e.headers["content-disposition"];if(r&&-1!==r.indexOf("attachment")){var o=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(r);null!=o&&o[1]&&(n=o[1].replace(/['"]/g,""))}var l=window.URL.createObjectURL(new Blob([e.data])),c=document.createElement("a");c.href=l,c.setAttribute("download",n),document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(c)}})).error((function(e){t.$sbToast.error("Download mislukt")})).catch((function(e){t.$sbToast.error("Er ging iets mis. Probeer het opnieuw.")}))},setFormOption:function(option,e){this.$set(this.options,option,e)},updateValues:function(e){var t=this;this.$set(this.fields,e.field,e),this.validated=!0,Object.entries(this.fields).forEach((function(e){!1!==e[1].valid&&0!==e[1].valid||(t.validated=!1)}))},submitHandler:function(e){if(!this.validated)return this.$sbToast.error(this.$t("autolayout.form_error")),this.bus.$emit("setStatus",{active:!0}),void this.$nextTick((function(){var e=document.getElementsByClassName("is-invalid");e&&e.length&&e[0].scrollIntoView({behavior:"smooth",block:"center"})}));this.error=!1,this.bus.$emit("setStatus",{active:!1});var t=[],data={};Object.entries(this.fields).forEach((function(e){var n=Object(o.a)(e,2),r=n[0],l=n[1];l.files&&(t=t.concat(l.files)),data[r]=l.value})),data.siteboss_formOptions=this.options,this.properties.onSubmit?this.properties.onSubmit(e,data,t):this.sendFormData(data,t)},sendFormData:function(data,e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new FormData,o=e.length>0,r.append("payload",JSON.stringify(data)),e.forEach((function(e){r.append(e.id,e.file)})),n.next=6,t.$axios.post(t.properties.url,r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){t.progress=parseInt(Math.round(100*e.loaded/e.total),10),o&&t.$bvModal.show("progressModal")}}).then((function(e){"ok"===e.data.status?(void 0!==e.data.actions&&t.runActions(e.data.actions),void 0!==e.data.ui&&t.showUIElements(e.data.ui)):t.$sbToast.error(t.$t("autolayout.api_error"))})).catch((function(e){var n,r;t.error=!0,t.errorMessage=null===(n=e.response)||void 0===n?void 0:n.statusText,t.$sbToast.error(null!==(r=t.errorMessage)&&void 0!==r?r:t.$t("autolayout.api_error"))})).finally((function(){t.bus.$emit("setStatus",{active:!0}),t.$bvModal.hide("progressModal")}));case 6:case"end":return n.stop()}}),n)})))()},showUIElements:function(e){"Page"===e[0].type&&this.$nuxt.$emit("siteboss-load-ui",e[0])},runActions:function(e){var t=this;e.forEach((function(e){switch(e.type){case"Toast":"ok"===e.data.status?t.$sbToast.success(e.data.message):t.$sbToast.error(e.data.message);break;case"Modal":break;case"Redirect":t.$nuxt.$router.push(t.localePath({path:e.data.target}));break;case"Download":t.downloadFile(e.data.link);break;default:console.log("Unknown action",e)}}))}}},m=(n(662),n(63)),component=Object(m.a)(h,(function(){var e=this,t=e._self._c;return t("b-form",{staticClass:"w-100 c-2",attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.submitHandler.apply(null,arguments)}}},[t("b-alert",{staticClass:"m-3 c-a sticky-error",attrs:{show:e.error,variant:"danger",dismissible:""}},[e._v("\n    "+e._s(e.errorMessage)+"\n  ")]),e._v(" "),t("AutoLayout",{attrs:{elements:e.items,bus:e.bus,toplevel:!1},on:{updateValues:e.updateValues,setFormOption:e.setFormOption}}),e._v(" "),t("b-modal",{attrs:{id:"progressModal",title:"Momentje...","hide-header-close":!0,"cancel-only":""},scopedSlots:e._u([{key:"modal-footer",fn:function(e){return function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),[t("b-spinner")]}}])},[e._v(" "),t("b-progress",{attrs:{value:e.progress,max:100,animated:""}})],1),e._v(" "),t("b-modal",{attrs:{id:"modalPopover",title:e.errorTitle,"ok-only":""}},[t("p",[e._v("\n      "+e._s(e.errorMessage)+"\n    ")])])],1)}),[],!1,null,null,null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);n(16),n(80),n(91),n(114),n(50);var r=n(47),o=(n(10),n(66),n(68),n(56),n(206),n(43),n(14),n(568),n(175),n(147),n(33),n(9)),l=n(542),c={components:{draggable:n.n(l).a,AutoLayout:function(){return Promise.all([n.e(0),n.e(2),n.e(3),n.e(6),n.e(128)]).then(n.bind(null,700))}},fetch:function(){var e,t,n,r,o=this,l=Array.isArray(null===(e=this.properties)||void 0===e?void 0:e.allowedBlocks)?null===(t=this.properties)||void 0===t||null===(n=t.allowedBlocks)||void 0===n?void 0:n.join(","):null===(r=this.properties)||void 0===r?void 0:r.allowedBlocks;this.$axios.get("/contentblocks/".concat(l)).then((function(e){o.availableBlocks=e.data}))},props:{internal:{type:String,required:!0},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:o.default,required:!0}},data:function(){return{availableBlocks:[],minimizedBlocks:[],blockTemplates:[],files:[]}},mounted:function(){var e;null!==(e=this.data)&&void 0!==e&&e.value&&(this.blockTemplates=this.data.value)},methods:{toggleExpanded:function(e){this.minimizedBlocks.includes(e)?this.minimizedBlocks.splice(this.minimizedBlocks.indexOf(e),1):this.minimizedBlocks.push(e)},toggleAllExpanded:function(e){this.minimizedBlocks.includes(e)?this.minimizedBlocks=[]:this.minimizedBlocks=this.blockTemplates.map((function(e,i){return i}))},updateValues:function(e,t){var n=this;this.blockTemplates[t].values||(this.blockTemplates[t].values={}),this.$set(this.blockTemplates[t].values,e.field,e),void 0!==(null==e?void 0:e.files)&&e.files.length>0&&e.files.forEach((function(e){var t=n.files.findIndex((function(t){return t.id===e.id}));-1===t?n.files.push(e):n.files.splice(t,1,e)})),this.triggerUpdate()},triggerUpdate:function(){var e=!0,t=this.blockTemplates.map((function(t,n){var o,l={};return t.values&&Object.entries(t.values).forEach((function(n){var o=Object(r.a)(n,2),c=(o[0],o[1]);t.deleted&&(e=!0),c.valid||!0===t.deleted||(e=!1),l[c.field]=c.value})),{items:l,tableId:t.table_id,recordId:t.record_id,deleted:null!==(o=t.deleted)&&void 0!==o&&o,order:n+1}}));this.$emit("updateValues",{field:this.internal,valid:e,value:t,files:this.files})},getNewBlockItems:function(e){var t=this.availableBlocks.find((function(t){return t.name===e})),n=JSON.parse(JSON.stringify(t));n.table_id=t.id,n.record_id="new".concat(this.blockTemplates.length),this.blockTemplates.push(n)},getTableName:function(e){var table=this.availableBlocks.find((function(t){return t.id===parseInt(e,10)}));return null==table?void 0:table.name},remove:function(e){var t=!this.blockTemplates[e].deleted;this.$set(this.blockTemplates[e],"deleted",t),this.triggerUpdate()},getUniqueBlockId:function(e){return"".concat(e.record_id,"_").concat(e.table_id)}}},d=(n(659),n(63)),component=Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("CommonAutolayoutLabelWrapper",{staticClass:"c-a",attrs:{label:e.properties.title,description:e.properties.description,required:e.properties.required,internal:e.internal}},[t("draggable",{attrs:{handle:".drag-handle"},on:{change:e.triggerUpdate},model:{value:e.blockTemplates,callback:function(t){e.blockTemplates=t},expression:"blockTemplates"}},e._l(e.blockTemplates,(function(n,r){return t("div",{key:e.getUniqueBlockId(n),staticClass:"contentblock",class:{deleted:n.deleted,"collapsed-content-block":e.minimizedBlocks.includes(r)}},[t("div",{staticClass:"badges left"},[t("b-badge",{staticClass:"name",attrs:{variant:"primary"}},[e._v("\n          "+e._s(e.getTableName(n.table_id))+"\n        ")])],1),e._v(" "),t("div",{staticClass:"badges right"},[e.minimizedBlocks.includes(r)?e._e():t("b-badge",{staticClass:"click badge-trash-icon",attrs:{id:"expander-badge"},on:{click:function(t){return e.remove(r)}}},[n.deleted?t("Icon",{attrs:{icon:"arrow-rotate-left"}}):t("Icon",{attrs:{icon:"trash"}})],1),e._v(" "),n.deleted?e._e():t("b-badge",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"click",attrs:{title:"Hold shift to toggle all"},on:{click:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:(t.preventDefault(),e.toggleExpanded(r))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:t.shiftKey?"button"in t&&0!==t.button||t.ctrlKey||t.altKey||t.metaKey?null:(t.preventDefault(),e.toggleAllExpanded(r)):null}]}},[e.minimizedBlocks.includes(r)?t("Icon",{attrs:{icon:"expand"}}):t("Icon",{attrs:{icon:"window-minimize"}})],1),e._v(" "),n.deleted?e._e():t("b-badge",{staticClass:"click drag-handle"},[t("Icon",{attrs:{icon:"up-down-left-right"}})],1)],1),e._v(" "),t("AutoLayout",{attrs:{elements:n.items,bus:e.bus},on:{updateValues:function(t){return e.updateValues(t,r)}}})],1)})),0),e._v(" "),t("b-row",[t("b-col",[e.availableBlocks.length>1?t("b-button-group",{attrs:{size:"sm"}},[t("b-dropdown",{attrs:{right:"",text:e.$t("common.addNew"),size:"sm"}},e._l(e.availableBlocks,(function(n,r){return t("b-dropdown-item",{key:r,on:{click:function(t){return e.getNewBlockItems(n.name)}}},[e._v("\n            "+e._s(n.name)+"\n          ")])})),1)],1):t("b-button-group",{attrs:{size:"sm"}},e._l(e.availableBlocks,(function(n,r){return t("b-button",{key:r,attrs:{variant:"secondary"},on:{click:function(t){return e.getNewBlockItems(n.name)}}},[t("Icon",{attrs:{icon:"plus",size:"sm"}}),e._v(" "+e._s(n.name)+"\n        ")],1)})),1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CommonAutolayoutLabelWrapper:n(541).default})},function(e,t,n){"use strict";n.r(t);n(16),n(80),n(18),n(14),n(19);var r=n(2),o=(n(10),n(66),n(68),n(43),n(288),n(17),n(406),n(33),n(568),n(13),n(74),n(9)),l=n(542);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={components:{draggable:n.n(l).a,AutoLayout:function(){return Promise.all([n.e(0),n.e(2),n.e(3),n.e(6),n.e(127)]).then(n.bind(null,700))}},props:{internal:{type:String,required:!0},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:o.default,required:!0}},data:function(){return{value:[],invalids:[],onTouched:!0,valid:!0,currentIndex:0}},created:function(){var e=this;this.bus.$on("setStatus",(function(t){e.onTouched=!1}))},mounted:function(){var e,t=this;null!==(e=this.data)&&void 0!==e&&e.value&&(this.value=this.data.value.map((function(element){return t.currentIndex+=1,element.index=t.currentIndex,element}))),this.triggerUpdate()},methods:{changeOrder:function(e){var t=e.moved;this.invalids=this.invalids.map((function(e){return e.index===t.oldIndex?d(d({},e),{},{index:t.newIndex}):e})),this.triggerUpdate()},elementsWithValue:function(e){var t=this,n=structuredClone(this.properties.template);return this.value[e]?n.map((function(n){return n.data&&!n.data.value&&(n.data.value=t.value[e][n.internal]),n})):this.properties.template},updateValues:function(e,t){if(this.$set(this.value[t],e.field,e.value),e.valid){var n=this.invalids.findIndex((function(n){return n.index===t&&n.field===e.field}));-1!==n&&(this.invalids=this.invalids.filter((function(e,t){return t!==n})))}else this.invalids=this.invalids.concat([{index:t,field:e.field}]);this.value[t]||(this.value[t]={}),this.triggerUpdate()},triggerUpdate:function(){var e=this,t=this.value.filter((function(e){return!e.deleted})),n=this.properties.showDeleted?this.value:t,r=!this.properties.required||t.length>0,o=this.invalids.filter((function(t){return!!e.properties.showDeleted||!e.value[t.index].deleted})).length;this.valid=r,this.$emit("updateValues",{field:this.internal,valid:!o&&r,value:n})},addNewItem:function(){this.currentIndex+=1,this.value.push({deleted:!1,new:!0,index:this.currentIndex}),this.triggerUpdate()},remove:function(e){var t=!this.value[e].deleted;this.$set(this.value[e],"deleted",t),this.triggerUpdate()},getUniqueBlockId:function(e){return Math.random().toString(36).substr(2,9)}}},m=(n(660),n(63)),component=Object(m.a)(h,(function(){var e=this,t=e._self._c;return t("CommonAutolayoutLabelWrapper",{staticClass:"c-a",attrs:{label:e.properties.title,description:e.properties.description,required:e.properties.required,internal:e.internal}},[e.valid||e.onTouched?e._e():t("div",{staticClass:"input-feedback",attrs:{id:"input-".concat(e.internal,"-feedback")}},[e._v("\n    "+e._s(e.$t("common.required"))+"\n  ")]),e._v(" "),t("draggable",{class:e.valid||e.onTouched?"":"is-invalid",attrs:{handle:".drag-handle"},on:{change:e.changeOrder},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.value,(function(n,r){return t("div",{key:n.index,staticClass:"repeatable",class:{deleted:n.deleted,"deleted-shown":e.properties.showDeleted}},[t("div",{staticClass:"badges right"},[t("b-badge",{staticClass:"click badge-trash-icon",attrs:{id:"expander-badge"},on:{click:function(t){return e.remove(r)}}},[n.deleted?t("Icon",{attrs:{icon:"arrow-rotate-left"}}):t("Icon",{attrs:{icon:"trash"}})],1),e._v(" "),n.deleted?e._e():t("b-badge",{staticClass:"click drag-handle"},[t("Icon",{attrs:{icon:"up-down-left-right"}})],1)],1),e._v(" "),t("AutoLayout",{attrs:{elements:e.elementsWithValue(r),bus:e.bus},on:{updateValues:function(t){return e.updateValues(t,r)}}})],1)})),0),e._v(" "),t("b-row",[t("b-col",[t("b-button-group",{attrs:{size:"sm"}},[t("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return e.addNewItem()}}},[t("Icon",{attrs:{icon:"plus",size:"sm"}}),e._v(" Add new item\n        ")],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CommonAutolayoutLabelWrapper:n(541).default})},function(e,t,n){"use strict";n.r(t);n(10),n(66),n(68);var r={components:{AutoLayout:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(124)]).then(n.bind(null,700))}},props:{items:{type:Array,default:function(){return[]}},properties:{type:Object,default:function(){}}},computed:{colClass:function(){switch(this.properties.cols){case 12:return"col-12";case 6:return"col-6";default:return"col"}}}},o=n(63),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",{class:[e.colClass,e.properties.padding?"":"no-card-padding","pb-4","widget-animation"]},[t("CommonWidget",{attrs:{title:e.properties.title}},[t("AutoLayout",{staticClass:"row",attrs:{elements:e.items}})],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CommonWidget:n(574).default})},function(e,t,n){"use strict";n.r(t);n(10),n(66),n(68);var r={components:{AutoLayout:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(123)]).then(n.bind(null,700))}},props:{items:{type:Array,default:function(){return[]}},properties:{type:Object,default:function(){}}}},o=n(63),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-100"},[t("h2",{staticClass:"header"},[e._v(e._s(e.properties.title))]),e._v(" "),t("AutoLayout",{staticClass:"row",attrs:{elements:e.items,toplevel:!1}})],1)}),[],!1,null,null,null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);n(10),n(66),n(68);var r={components:{AutoLayout:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(122)]).then(n.bind(null,700))}},props:{items:{type:Array,default:function(){return[]}},properties:{type:Object,default:function(){}}}},o=n(63),component=Object(o.a)(r,(function(){var e=this._self._c;return e("div",{staticClass:"col"},[e("AutoLayout",{staticClass:"row",attrs:{elements:this.items,toplevel:!1}})],1)}),[],!1,null,null,null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);n(10),n(66),n(68);var r={components:{AutoLayout:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(126)]).then(n.bind(null,700))}},props:{items:{type:Array,default:function(){return[]}},properties:{type:Object,default:function(){}}}},o=(n(663),n(63)),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex flex-row justify-content-around",class:{"remove-padding":e.properties.removePadding,"col-12":!e.properties.removePadding}},[t("AutoLayout",{staticClass:"d-flex w-100 layout-bar",class:{"no-background":e.properties.noBackground},attrs:{elements:e.items,toplevel:!1}})],1)}),[],!1,null,null,null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);n(10),n(66),n(68);var r={components:{AutoLayout:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(125)]).then(n.bind(null,700))}},props:{items:{type:Array,default:function(){return[]}},properties:{type:Object,default:function(){}}}},o=(n(664),n(63)),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"tabs col-12",class:{"tabs-with-padding":e.properties.padding}},[t("b-nav",{class:{"tab-bar":!0,"with-padding":e.properties.padding},attrs:{tabs:"",card:""}},[t("AutoLayout",{staticClass:"d-flex flex-row",attrs:{elements:e.items,toplevel:!1}})],1)],1)}),[],!1,null,"d55590c0",null);t.default=component.exports},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.ModelManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,r=(l=String).prototype,r.isPrototypeOf(n)||(null===(c=o.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,r;var o,l,c})(t)===e,n=e=>t=>typeof t===e,r=e=>a=>e===a,o=t("string"),l=t("object"),c=t("array"),d=r(null),h=n("boolean"),m=r(void 0),f=a=>!(a=>null==a)(a),v=n("function"),y=n("number"),w=()=>{},A=e=>()=>e,x=e=>e,O=(a,b)=>a===b;function C(e,...t){return(...n)=>{const r=t.concat(n);return e.apply(null,r)}}const _=e=>t=>!e(t),S=e=>e(),k=A(!1),j=A(!0);class T{constructor(e,t){this.tag=e,this.value=t}static some(e){return new T(!0,e)}static none(){return T.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?T.some(e(this.value)):T.none()}bind(e){return this.tag?e(this.value):T.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:T.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return f(e)?T.some(e):T.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}T.singletonNone=new T(!1);const I=Array.prototype.slice,D=Array.prototype.indexOf,E=Array.prototype.push,R=(e,t)=>{return n=e,r=t,D.call(n,r)>-1;var n,r},B=(e,t)=>{for(let i=0,n=e.length;i<n;i++){if(t(e[i],i))return!0}return!1},M=(e,t)=>{const n=[];for(let i=0;i<e;i++)n.push(t(i));return n},P=(e,t)=>{const n=e.length,r=new Array(n);for(let i=0;i<n;i++){const n=e[i];r[i]=t(n,i)}return r},L=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},F=(e,t)=>{const n=[],r=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];(t(o,i)?n:r).push(o)}return{pass:n,fail:r}},$=(e,t)=>{const n=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];t(r,i)&&n.push(r)}return n},N=(e,t,n)=>(((e,t)=>{for(let i=e.length-1;i>=0;i--)t(e[i],i)})(e,((e,i)=>{n=t(n,e,i)})),n),z=(e,t,n)=>(L(e,((e,i)=>{n=t(n,e,i)})),n),V=(e,t)=>((e,t,n)=>{for(let i=0,r=e.length;i<r;i++){const r=e[i];if(t(r,i))return T.some(r);if(n(r,i))break}return T.none()})(e,t,k),H=(e,t)=>{for(let i=0,n=e.length;i<n;i++){if(t(e[i],i))return T.some(i)}return T.none()},W=e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!c(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);E.apply(t,e[i])}return t},Q=(e,t)=>W(P(e,t)),U=(e,t)=>{for(let i=0,n=e.length;i<n;++i){if(!0!==t(e[i],i))return!1}return!0},Y=(e,t)=>{const n={};for(let i=0,r=e.length;i<r;i++){const r=e[i];n[String(r)]=t(r,i)}return n},G=(e,i)=>i>=0&&i<e.length?T.some(e[i]):T.none(),head=e=>G(e,0),K=e=>G(e,e.length-1),X=(e,t)=>{for(let i=0;i<e.length;i++){const n=t(e[i],i);if(n.isSome())return n}return T.none()},Z=Object.keys,J=Object.hasOwnProperty,ee=(e,t)=>{const n=Z(e);for(let r=0,o=n.length;r<o;r++){const i=n[r];t(e[i],i)}},map=(e,t)=>te(e,((e,i)=>({k:i,v:t(e,i)}))),te=(e,t)=>{const n={};return ee(e,((e,i)=>{const r=t(e,i);n[r.k]=r.v})),n},ne=(e,t)=>{const n={};return((e,t,n,r)=>{ee(e,((e,i)=>{(t(e,i)?n:r)(e,i)}))})(e,t,(e=>(t,i)=>{e[i]=t})(n),w),n},re=(e,t)=>{const n=[];return ee(e,((e,r)=>{n.push(t(e,r))})),n},oe=e=>re(e,x),ie=(e,t)=>J.call(e,t);"undefined"!=typeof window?window:Function("return this;")();const se=element=>element.dom.nodeName.toLowerCase(),ae=element=>element.dom.nodeType,le=e=>element=>ae(element)===e,ce=element=>8===ae(element)||"#comment"===se(element),ue=le(1),de=le(3),he=le(9),pe=le(11),me=e=>t=>ue(t)&&se(t)===e,fe=(e,t,n)=>{if(!(o(n)||h(n)||y(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},ge=(element,e,t)=>{fe(element.dom,e,t)},be=(element,e)=>{const t=element.dom;ee(e,((e,n)=>{fe(t,n,e)}))},ve=(element,e)=>{const t=element.dom.getAttribute(e);return null===t?void 0:t},ye=(element,e)=>T.from(ve(element,e)),we=(element,e)=>{element.dom.removeAttribute(e)},Ae=element=>z(element.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),xe=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Oe={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return xe(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return xe(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return xe(t)},fromDom:xe,fromPoint:(e,t,n)=>T.from(e.dom.elementFromPoint(t,n)).map(xe)},Ce=(element,e)=>{const t=element.dom;if(1!==t.nodeType)return!1;{const n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},_e=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Se=(e,t)=>{const base=void 0===t?document:t.dom;return _e(base)?T.none():T.from(base.querySelector(e)).map(Oe.fromDom)},ke=(e,t)=>e.dom===t.dom,je=(e,t)=>{const n=e.dom,r=t.dom;return n!==r&&n.contains(r)},Te=Ce,Ie=element=>Oe.fromDom(element.dom.ownerDocument),De=e=>he(e)?e:Ie(e),Ee=element=>T.from(element.dom.parentNode).map(Oe.fromDom),Re=(element,e)=>{const t=v(e)?e:k;let n=element.dom;const r=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,p=Oe.fromDom(e);if(r.push(p),!0===t(p))break;n=e}return r},Be=element=>T.from(element.dom.previousSibling).map(Oe.fromDom),Me=element=>T.from(element.dom.nextSibling).map(Oe.fromDom),Pe=element=>P(element.dom.childNodes,Oe.fromDom),Le=(element,e)=>{const t=element.dom.childNodes;return T.from(t[e]).map(Oe.fromDom)},Fe=(marker,element)=>{Ee(marker).each((e=>{e.dom.insertBefore(element.dom,marker.dom)}))},$e=(marker,element)=>{Me(marker).fold((()=>{Ee(marker).each((e=>{ze(e,element)}))}),(e=>{Fe(e,element)}))},Ne=(e,element)=>{const t=(element=>Le(element,0))(e);t.fold((()=>{ze(e,element)}),(t=>{e.dom.insertBefore(element.dom,t.dom)}))},ze=(e,element)=>{e.dom.appendChild(element.dom)},Ve=(element,e)=>{Fe(element,e),ze(e,element)},He=(marker,e)=>{L(e,((t,i)=>{const n=0===i?marker:e[i-1];$e(n,t)}))},We=(e,t)=>{L(t,(t=>{ze(e,t)}))},qe=element=>{element.dom.textContent="",L(Pe(element),(e=>{Qe(e)}))},Qe=element=>{const e=element.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Ue=e=>{const t=Pe(e);t.length>0&&He(e,t),Qe(e)},Ye=(e,t)=>Oe.fromDom(e.dom.cloneNode(t)),Ge=e=>Ye(e,!1),Ke=e=>Ye(e,!0),Xe=(e,t)=>{const n=Oe.fromTag(t),r=Ae(e);return be(n,r),n},Ze=["tfoot","thead","tbody","colgroup"],Je=(element,e,t)=>({element:element,rowspan:e,colspan:t}),et=(element,e,section)=>({element:element,cells:e,section:section}),tt=(element,e,t)=>({element:element,isNew:e,isLocked:t}),nt=(element,e,section,t)=>({element:element,cells:e,section:section,isNew:t}),ot=v(Element.prototype.attachShadow)&&v(Node.prototype.getRootNode),it=A(ot),st=ot?e=>Oe.fromDom(e.dom.getRootNode()):De,at=e=>{const t=st(e);return pe(n=t)&&f(n.dom.host)?T.some(t):T.none();var n},lt=e=>Oe.fromDom(e.dom.host),ct=element=>f(element.dom.shadowRoot),ut=element=>{const e=de(element)?element.dom.parentNode:element.dom;if(null==e||null===e.ownerDocument)return!1;const t=e.ownerDocument;return at(Oe.fromDom(e)).fold((()=>t.body.contains(e)),(n=ut,r=lt,a=>n(r(a))));var n,r},ht=e=>{const b=e.dom.body;if(null==b)throw new Error("Body is not available yet");return Oe.fromDom(b)},pt=(e,t)=>{let n=[];return L(Pe(e),(e=>{t(e)&&(n=n.concat([e])),n=n.concat(pt(e,t))})),n},mt=(e,t,n)=>((e,t,n)=>$(Re(e,n),t))(e,(e=>Ce(e,t)),n),ft=(e,t)=>((e,t)=>$(Pe(e),t))(e,(e=>Ce(e,t))),gt=(e,t)=>((e,t)=>{const base=void 0===t?document:t.dom;return _e(base)?[]:P(base.querySelectorAll(e),Oe.fromDom)})(t,e);var bt=(e,t,n,a,r)=>e(n,a)?T.some(n):v(r)&&r(n)?T.none():t(n,a,r);const vt=(e,t,n)=>{let element=e.dom;const r=v(n)?n:k;for(;element.parentNode;){element=element.parentNode;const e=Oe.fromDom(element);if(t(e))return T.some(e);if(r(e))break}return T.none()},yt=(e,t,n)=>vt(e,(e=>Ce(e,t)),n),wt=(e,t)=>((e,t)=>V(e.dom.childNodes,(e=>t(Oe.fromDom(e)))).map(Oe.fromDom))(e,(e=>Ce(e,t))),At=(e,t)=>Se(t,e),xt=(e,t,n)=>bt(((element,e)=>Ce(element,e)),yt,e,t,n),Ot=(e,t,n=O)=>e.exists((e=>n(e,t))),Ct=e=>{const t=[],n=e=>{t.push(e)};for(let i=0;i<e.length;i++)e[i].each(n);return t},_t=(b,a)=>b?T.some(a):T.none(),St=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,kt=(e,t,n=0,r)=>{const o=e.indexOf(t,n);return-1!==o&&(!!m(r)||o+t.length<=r)},jt=(e,t)=>St(e,t,0),Tt=(e,t)=>St(e,t,e.length-t.length),It=(e=>s=>s.replace(e,""))(/^\s+|\s+$/g),Dt=s=>s.length>0,Et=e=>void 0!==e.style&&v(e.style.getPropertyValue),Rt=(e,t,n)=>{if(!o(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Et(e)&&e.style.setProperty(t,n)},Bt=(element,e,t)=>{const n=element.dom;Rt(n,e,t)},Mt=(element,e)=>{const t=element.dom;ee(e,((e,n)=>{Rt(t,n,e)}))},Pt=(element,e)=>{const t=element.dom,n=window.getComputedStyle(t).getPropertyValue(e);return""!==n||ut(element)?n:Lt(t,e)},Lt=(e,t)=>Et(e)?e.style.getPropertyValue(t):"",Ft=(element,e)=>{const t=element.dom,n=Lt(t,e);return T.from(n).filter((e=>e.length>0))},$t=(element,e)=>{((e,t)=>{Et(e)&&e.style.removeProperty(t)})(element.dom,e),Ot(ye(element,"style").map(It),"")&&we(element,"style")},Nt=(e,t,n=0)=>ye(e,t).map((e=>parseInt(e,10))).getOr(n),zt=(e,t)=>Nt(e,t,1),Vt=e=>me("col")(e)?Nt(e,"span",1)>1:zt(e,"colspan")>1,Ht=e=>zt(e,"rowspan")>1,Wt=(element,e)=>parseInt(Pt(element,e),10),qt=A(10),Qt=A(10),Ut=(e,t)=>Yt(e,t,j),Yt=(e,t,n)=>Q(Pe(e),(e=>Ce(e,t)?n(e)?[e]:[]:Yt(e,t,n))),Gt=(element,e)=>((e,element,t=k)=>t(element)?T.none():R(e,se(element))?T.some(element):yt(element,e.join(","),(e=>Ce(e,"table")||t(e))))(["td","th"],element,e),Kt=e=>Ut(e,"th,td"),Xt=e=>Ce(e,"colgroup")?ft(e,"col"):Q(Jt(e),(e=>ft(e,"col"))),table=(element,e)=>xt(element,"table",e),Zt=e=>Ut(e,"tr"),Jt=e=>table(e).fold(A([]),(table=>ft(table,"colgroup"))),en=(e,t)=>P(e,(e=>{if("colgroup"===se(e)){const t=P(Xt(e),(e=>{const t=Nt(e,"span",1);return Je(e,1,t)}));return et(e,t,"colgroup")}{const n=P(Kt(e),(e=>{const t=Nt(e,"rowspan",1),n=Nt(e,"colspan",1);return Je(e,t,n)}));return et(e,n,t(e))}})),tn=e=>Ee(e).map((e=>{const t=se(e);return(e=>R(Ze,e))(t)?t:"tbody"})).getOr("tbody"),nn=table=>{const e=Zt(table),t=[...Jt(table),...e];return en(t,tn)},rn=e=>{let t,n=!1;return(...r)=>(n||(n=!0,t=e.apply(null,r)),t)},on=()=>sn(0,0),sn=(e,t)=>({major:e,minor:t}),an={nu:sn,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?on():((e,t)=>{const n=((e,s)=>{for(let i=0;i<e.length;i++){const t=e[i];if(t.test(s))return t}})(e,t);if(!n)return{major:0,minor:0};const r=i=>Number(t.replace(n,"$"+i));return sn(r(1),r(2))})(e,n)},unknown:on},ln=(e,t)=>{const n=String(t).toLowerCase();return V(e,(e=>e.search(n)))},cn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,un=e=>t=>kt(t,e),dn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>kt(e,"edge/")&&kt(e,"chrome")&&kt(e,"safari")&&kt(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,cn],search:e=>kt(e,"chrome")&&!kt(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>kt(e,"msie")||kt(e,"trident")},{name:"Opera",versionRegexes:[cn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:un("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:un("firefox")},{name:"Safari",versionRegexes:[cn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(kt(e,"safari")||kt(e,"mobile/"))&&kt(e,"applewebkit")}],hn=[{name:"Windows",search:un("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>kt(e,"iphone")||kt(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:un("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:un("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:un("linux"),versionRegexes:[]},{name:"Solaris",search:un("sunos"),versionRegexes:[]},{name:"FreeBSD",search:un("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:un("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],pn={browsers:A(dn),oses:A(hn)},mn="Edge",fn="Chromium",gn="Opera",bn="Firefox",vn="Safari",yn=e=>{const t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isEdge:r(mn),isChromium:r(fn),isIE:r("IE"),isOpera:r(gn),isFirefox:r(bn),isSafari:r(vn)}},wn={unknown:()=>yn({current:void 0,version:an.unknown()}),nu:yn,edge:A(mn),chromium:A(fn),ie:A("IE"),opera:A(gn),firefox:A(bn),safari:A(vn)},An="Windows",xn="Android",On="Linux",Cn="macOS",_n="Solaris",Sn="FreeBSD",kn="ChromeOS",jn=e=>{const t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isWindows:r(An),isiOS:r("iOS"),isAndroid:r(xn),isMacOS:r(Cn),isLinux:r(On),isSolaris:r(_n),isFreeBSD:r(Sn),isChromeOS:r(kn)}},Tn={unknown:()=>jn({current:void 0,version:an.unknown()}),nu:jn,windows:A(An),ios:A("iOS"),android:A(xn),linux:A(On),macos:A(Cn),solaris:A(_n),freebsd:A(Sn),chromeos:A(kn)},In=(e,t,n)=>{const r=pn.browsers(),o=pn.oses(),l=t.bind((e=>((e,t)=>X(t.brands,(t=>{const n=t.brand.toLowerCase();return V(e,(e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:an.nu(parseInt(t.version,10),0)})))})))(r,e))).orThunk((()=>((e,t)=>ln(e,t).map((e=>{const n=an.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(r,e))).fold(wn.unknown,wn.nu),c=((e,t)=>ln(e,t).map((e=>{const n=an.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(o,e).fold(Tn.unknown,Tn.nu),d=((e,t,n,r)=>{const o=e.isiOS()&&!0===/ipad/i.test(n),l=e.isiOS()&&!o,c=e.isiOS()||e.isAndroid(),d=c||r("(pointer:coarse)"),h=o||!l&&c&&r("(min-device-width:768px)"),m=l||c&&!h,f=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),v=!m&&!h&&!f;return{isiPad:A(o),isiPhone:A(l),isTablet:A(h),isPhone:A(m),isTouch:A(d),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:A(f),isDesktop:A(v)}})(c,l,e,n);return{browser:l,os:c,deviceType:d}},Dn=e=>window.matchMedia(e).matches;let En=rn((()=>In(navigator.userAgent,T.from(navigator.userAgentData),Dn)));const Rn=()=>En(),Bn=(e,t)=>{const n=element=>{const n=t(element);if(n<=0||null===n){const t=Pt(element,e);return parseFloat(t)||0}return n},r=(element,e)=>z(e,((e,t)=>{const n=Pt(element,t),r=void 0===n?0:parseInt(n,10);return isNaN(r)?e:e+r}),0);return{set:(element,t)=>{if(!y(t)&&!t.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+t);const n=element.dom;Et(n)&&(n.style[e]=t+"px")},get:n,getOuter:n,aggregate:r,max:(element,e,t)=>{const n=r(element,t);return e>n?e-n:0}}},Mn=(e,t)=>(e=>{const t=parseFloat(e);return isNaN(t)?T.none():T.some(t)})(e).getOr(t),Pn=(element,e,t)=>Mn(Pt(element,e),t),Ln=(element,e)=>{const t=element.dom,n=t.getBoundingClientRect().width||t.offsetWidth;return"border-box"===e?n:((element,e,t,n)=>e-Pn(element,`padding-${t}`,0)-Pn(element,`padding-${n}`,0)-Pn(element,`border-${t}-width`,0)-Pn(element,`border-${n}-width`,0))(element,n,"left","right")},Fn=Bn("width",(element=>element.dom.offsetWidth)),$n=element=>Fn.get(element),Nn=element=>Fn.getOuter(element),zn=element=>Ln(element,"content-box"),Vn=element=>Pn(element,"width",element.dom.offsetWidth),Hn=(e,t,n)=>{const r=e.cells,o=r.slice(0,t),l=r.slice(t),c=o.concat(n).concat(l);return Qn(e,c)},Wn=(e,t,n)=>Hn(e,t,[n]),qn=(e,t,n)=>{e.cells[t]=n},Qn=(e,t)=>nt(e.element,t,e.section,e.isNew),Un=(e,t)=>e.cells[t],Yn=(e,t)=>Un(e,t).element,Gn=e=>e.cells.length,Kn=e=>{const t=F(e,(e=>"colgroup"===e.section));return{rows:t.fail,cols:t.pass}},Xn=(e,t,n)=>{const r=P(e.cells,n);return nt(t(e.element),r,e.section,!0)},Zn="data-snooker-locked-cols",Jn=table=>ye(table,Zn).bind((e=>T.from(e.match(/\d+/g)))).map((e=>Y(e,j))),er=e=>{const t=z(Kn(e).rows,((e,t)=>(L(t.cells,((t,n)=>{t.isLocked&&(e[n]=!0)})),e)),{}),n=re(t,((e,t)=>parseInt(t,10)));return((e,t)=>{const n=I.call(e,0);return n.sort(t),n})(n)},nr=(e,t)=>e+","+t,rr=(e,t)=>{const n=Q(e.all,(e=>e.cells));return $(n,t)},or=e=>{const t={},n=[],r=head(e).map((e=>e.element)).bind(table).bind(Jn).getOr({});let o=0,l=0,c=0;const{pass:d,fail:h}=F(e,(e=>"colgroup"===e.section));L(h,(e=>{const d=[];L(e.cells,(e=>{let n=0;for(;void 0!==t[nr(c,n)];)n++;const o=((e,t)=>ie(e,t)&&void 0!==e[t]&&null!==e[t])(r,n.toString()),h=((element,e,t,n,r,o)=>({element:element,rowspan:e,colspan:t,row:n,column:r,isLocked:o}))(e.element,e.rowspan,e.colspan,c,n,o);for(let r=0;r<e.colspan;r++)for(let o=0;o<e.rowspan;o++){const e=n+r,d=nr(c+o,e);t[d]=h,l=Math.max(l,e+1)}d.push(h)})),o++,n.push(et(e.element,d,e.section)),c++}));const{columns:m,colgroups:f}=K(d).map((e=>{const t=(e=>{const t={};let n=0;return L(e.cells,(e=>{const r=e.colspan;M(r,(o=>{const l=n+o;t[l]=((element,e,t)=>({element:element,colspan:e,column:t}))(e.element,r,l)})),n+=r})),t})(e),n=((element,e)=>({element:element,columns:e}))(e.element,oe(t));return{colgroups:[n],columns:t}})).getOrThunk((()=>({colgroups:[],columns:{}}))),v=((e,t)=>({rows:e,columns:t}))(o,l);return{grid:v,access:t,all:n,columns:m,colgroups:f}},ir={fromTable:table=>{const e=nn(table);return or(e)},generate:or,getAt:(e,t,n)=>T.from(e.access[nr(t,n)]),findItem:(e,t,n)=>{const r=rr(e,(e=>n(t,e.element)));return r.length>0?T.some(r[0]):T.none()},filterItems:rr,justCells:e=>Q(e.all,(e=>e.cells)),justColumns:e=>oe(e.columns),hasColumns:e=>Z(e.columns).length>0,getColumnAt:(e,t)=>T.from(e.columns[t])},sr=(e,t=j)=>{const n=e.grid,r=M(n.columns,x),o=M(n.rows,x);return P(r,(col=>ar((()=>Q(o,(t=>ir.getAt(e,t,col).filter((e=>e.column===col)).toArray()))),(e=>1===e.colspan&&t(e.element)),(()=>ir.getAt(e,0,col)))))},ar=(e,t,n)=>{const r=e();return V(r,t).orThunk((()=>T.from(r[0]).orThunk(n))).map((e=>e.element))},lr=e=>{const t=e.grid,n=M(t.rows,x),r=M(t.columns,x);return P(n,(t=>ar((()=>Q(r,(n=>ir.getAt(e,t,n).filter((e=>e.row===t)).fold(A([]),(e=>[e]))))),(e=>1===e.rowspan),(()=>ir.getAt(e,t,0)))))},cr=(e,t)=>{if(t<0||t>=e.length-1)return T.none();const n=e[t].fold((()=>{const n=(e=>{const t=I.call(e,0);return t.reverse(),t})(e.slice(0,t));return X(n,((a,i)=>a.map((e=>({value:e,delta:i+1})))))}),(e=>T.some({value:e,delta:0}))),r=e[t+1].fold((()=>{const n=e.slice(t+1);return X(n,((a,i)=>a.map((e=>({value:e,delta:i+1})))))}),(e=>T.some({value:e,delta:1})));return n.bind((e=>r.map((t=>{const n=t.delta+e.delta;return Math.abs(t.value-e.value)/n}))))},ur=(e,t)=>element=>"rtl"===dr(element)?t:e,dr=element=>"rtl"===Pt(element,"direction")?"rtl":"ltr",pr=Bn("height",(element=>{const e=element.dom;return ut(element)?e.getBoundingClientRect().height:e.offsetHeight})),mr=element=>pr.get(element),fr=element=>pr.getOuter(element),gr=element=>Pn(element,"height",element.dom.offsetHeight),vr=(e,t)=>({left:e,top:t,translate:(n,r)=>vr(e+n,t+r)}),yr=vr,wr=(a,b)=>void 0!==a?a:void 0!==b?b:0,Ar=element=>{const e=element.dom.ownerDocument,body=e.body,t=e.defaultView,html=e.documentElement;if(body===element.dom)return yr(body.offsetLeft,body.offsetTop);const n=wr(null==t?void 0:t.pageYOffset,html.scrollTop),r=wr(null==t?void 0:t.pageXOffset,html.scrollLeft),o=wr(html.clientTop,body.clientTop),l=wr(html.clientLeft,body.clientLeft);return xr(element).translate(r-l,n-o)},xr=element=>{const e=element.dom,body=e.ownerDocument.body;return body===e?yr(body.offsetLeft,body.offsetTop):ut(element)?(e=>{const t=e.getBoundingClientRect();return yr(t.left,t.top)})(e):yr(0,0)},Or=(e,t)=>({row:e,y:t}),Cr=(col,e)=>({col:col,x:e}),_r=e=>Ar(e).left+Nn(e),Sr=e=>Ar(e).left,kr=(e,t)=>Cr(e,Sr(t)),jr=(e,t)=>Cr(e,_r(t)),Tr=e=>Ar(e).top,Ir=(e,t)=>Or(e,Tr(t)),Dr=(e,t)=>Or(e,Tr(t)+fr(t)),Er=(e,t,n)=>{if(0===n.length)return[];const r=P(n.slice(1),((t,n)=>t.map((t=>e(n,t))))),o=n[n.length-1].map((e=>t(n.length-1,e)));return r.concat([o])},Rr={delta:x,positions:e=>Er(Ir,Dr,e),edge:Tr},Br=ur({delta:x,edge:Sr,positions:e=>Er(kr,jr,e)},{delta:e=>-e,edge:_r,positions:e=>Er(jr,kr,e)}),Mr={delta:(e,table)=>Br(table).delta(e,table),positions:(e,table)=>Br(table).positions(e,table),edge:e=>Br(e).edge(e)},Pr={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},pattern=(()=>{const e="[0-9]+",t="[eE]"+("[+-]?"+e),n=input=>`(?:${input})?`,r=["Infinity",e+"\\."+n(e)+n(t),"\\."+e+n(t),e+n(t)].join("|");return new RegExp(`^(${`[+-]?(?:${r})`})(.*)$`)})(),Lr=(input,e)=>T.from(pattern.exec(input)).bind((t=>{const n=Number(t[1]),r=t[2];return((e,t)=>B(t,(t=>B(Pr[t],(t=>e===t)))))(r,e)?T.some({value:n,unit:r}):T.none()})),Fr=/(\d+(\.\d+)?)%/,$r=/(\d+(\.\d+)?)px|em/,Nr=me("col"),zr=(e,t,n)=>{const r=(element=e,T.from(element.dom.parentElement).map(Oe.fromDom)).getOrThunk((()=>ht(Ie(e))));var element;return t(e)/n(r)*100},Vr=(e,t)=>{Bt(e,"width",t+"px")},Hr=(e,t)=>{Bt(e,"width",t+"%")},Wr=(e,t)=>{Bt(e,"height",t+"px")},qr=(e,t,n,r)=>{const o=parseFloat(e);return Tt(e,"%")&&"table"!==se(t)?((e,t,n,r)=>{const o=table(e).map((table=>{const e=n(table);return Math.floor(t/100*e)})).getOr(t);return r(e,o),o})(t,o,n,r):o},Qr=e=>{const t=(e=>gr(e)+"px")(e);return t?qr(t,e,mr,Wr):mr(e)},Ur=(element,e)=>Ft(element,e).orThunk((()=>ye(element,e).map((e=>e+"px")))),Yr=element=>Ur(element,"width"),Gr=e=>zr(e,$n,zn),Kr=e=>Nr(e)?$n(e):Vn(e),Xr=e=>((e,t,n)=>n(e)/zt(e,t))(e,"rowspan",Qr),Zr=(e,t,n)=>{Bt(e,"width",t+n)},Jr=table=>zr(table,$n,zn)+"%",eo=A(Fr),to=me("col"),no=e=>Yr(e).getOrThunk((()=>Kr(e)+"px")),ro=e=>{return(element=e,Ur(element,"height")).getOrThunk((()=>Xr(e)+"px"));var element},oo=(e,t,n,filter,r,o)=>e.filter(filter).fold((()=>o(cr(n,t))),(e=>r(e))),io=(e,table,t,n)=>{const r=sr(e),o=ir.hasColumns(e)?(e=>P(ir.justColumns(e),(e=>T.from(e.element))))(e):r,l=[T.some(Mr.edge(table))].concat(P(Mr.positions(r,table),(e=>e.map((p=>p.x))))),c=_(Vt);return P(o,((e,o)=>oo(e,o,l,c,(e=>{if((e=>{const t=Rn().browser,n=t.isChromium()||t.isFirefox();return!to(e)||n})(e))return t(e);{const e=(a=r[o],d=x,null!=a?d(a):T.none());return oo(e,o,l,c,(e=>n(T.some($n(e)))),n)}var a,d}),n)))},so=e=>e.map((e=>e+"px")).getOr(""),ao=(e,table,t)=>io(e,table,Kr,(e=>e.getOrThunk(t.minCellWidth))),lo=(e,table,t,n,r)=>{const o=lr(e),l=[T.some(t.edge(table))].concat(P(t.positions(o,table),(e=>e.map((p=>p.y)))));return P(o,((e,t)=>oo(e,t,l,_(Ht),n,r)))},co=(table,e)=>()=>ut(table)?e(table):parseFloat(Ft(table,"width").getOr("0")),uo=table=>{const e=co(table,$n),t=A(0);return{width:e,pixelWidth:e,getWidths:(e,t)=>ao(e,table,t),getCellDelta:t,singleColumnWidth:A([0]),minCellWidth:t,setElementWidth:w,adjustTableWidth:w,isRelative:!0,label:"none"}},ho=table=>{const e=co(table,(e=>parseFloat(Jr(e)))),t=co(table,$n);return{width:e,pixelWidth:t,getWidths:(e,t)=>((e,table,t)=>io(e,table,Gr,(e=>e.fold((()=>t.minCellWidth()),(e=>e/t.pixelWidth()*100)))))(e,table,t),getCellDelta:e=>e/t()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>qt()/t()*100,setElementWidth:Hr,adjustTableWidth:t=>{const n=e();Hr(table,n+t/100*n)},isRelative:!0,label:"percent"}},po=table=>{const e=co(table,$n);return{width:e,pixelWidth:e,getWidths:(e,t)=>ao(e,table,t),getCellDelta:x,singleColumnWidth:(e,t)=>[Math.max(qt(),e+t)-e],minCellWidth:qt,setElementWidth:Vr,adjustTableWidth:t=>{const n=e()+t;Vr(table,n)},isRelative:!1,label:"pixel"}},mo=table=>Yr(table).fold((()=>uo(table)),(e=>((element,e)=>null!==eo().exec(e)?ho(element):po(element))(table,e))),fo=po,go=ho,bo=(e,t,n)=>{const r=e[n].element,td=Oe.fromTag("td");ze(td,Oe.fromTag("br"));(t?ze:Ne)(r,td)},vo=(table,e)=>{const t=t=>Ce(t.element,e),n=Ke(table),r=nn(n),o=mo(table),l=ir.generate(r),c=((e,t)=>{const n=e.grid.columns;let r=e.grid.rows,o=n,l=0,c=0;const d=[],h=[];return ee(e.access,(e=>{if(d.push(e),t(e)){h.push(e);const t=e.row,n=t+e.rowspan-1,d=e.column,m=d+e.colspan-1;t<r?r=t:n>l&&(l=n),d<o?o=d:m>c&&(c=m)}})),((e,t,n,r,o,l)=>({minRow:e,minCol:t,maxRow:n,maxCol:r,allCells:o,selectedCells:l}))(r,o,l,c,d,h)})(l,t),d="th:not("+e+"),td:not("+e+")",h=Yt(n,"th,td",(e=>Ce(e,d)));L(h,Qe),((e,t,n,r)=>{const o=$(e,(e=>"colgroup"!==e.section)),l=t.grid.columns,c=t.grid.rows;for(let i=0;i<c;i++){let e=!1;for(let c=0;c<l;c++)i<n.minRow||i>n.maxRow||c<n.minCol||c>n.maxCol||(ir.getAt(t,i,c).filter(r).isNone()?bo(o,e,i):e=!0)}})(r,l,c,t);const m=((table,e,t,n)=>{if(0===n.minCol&&e.grid.columns===n.maxCol+1)return 0;const r=ao(e,table,t),o=z(r,((e,t)=>e+t),0),l=z(r.slice(n.minCol,n.maxCol+1),((e,t)=>e+t),0),c=l/o*t.pixelWidth()-t.pixelWidth();return t.getCellDelta(c)})(table,ir.fromTable(table),o,c);return((e,t,n,r)=>{ee(n.columns,(col=>{(col.column<t.minCol||col.column>t.maxCol)&&Qe(col.element)}));const o=$(Ut(e,"tr"),(e=>0===e.dom.childElementCount));L(o,Qe),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||L(Ut(e,"th,td"),(e=>{we(e,"rowspan"),we(e,"colspan")})),we(e,Zn),we(e,"data-snooker-col-series"),mo(e).adjustTableWidth(r)})(n,c,l,m),n},yo=((e,t)=>{const n=element=>e(element)?T.from(element.dom.nodeValue):T.none();return{get:element=>{if(!e(element))throw new Error("Can only get "+t+" value of a "+t+" node");return n(element).getOr("")},getOption:n,set:(element,n)=>{if(!e(element))throw new Error("Can only set raw "+t+" value of a "+t+" node");element.dom.nodeValue=n}}})(de,"text"),wo=element=>yo.get(element),Ao=element=>yo.getOption(element),xo=(element,e)=>yo.set(element,e),Oo=element=>"img"===se(element)?1:Ao(element).fold((()=>Pe(element).length),(e=>e.length)),Co=["img","br"],_o=e=>Ao(e).filter((text=>0!==text.trim().length||text.indexOf("Â ")>-1)).isSome()||R(Co,se(e)),So=element=>((e,t)=>{const n=e=>{for(let i=0;i<e.childNodes.length;i++){const r=Oe.fromDom(e.childNodes[i]);if(t(r))return T.some(r);const o=n(e.childNodes[i]);if(o.isSome())return o}return T.none()};return n(e.dom)})(element,_o),ko=element=>jo(element,_o),jo=(e,t)=>{const n=element=>{const e=Pe(element);for(let i=e.length-1;i>=0;i--){const r=e[i];if(t(r))return T.some(r);const o=n(r);if(o.isSome())return o}return T.none()};return n(e)},To={scope:["row","col"]},Io=e=>()=>{const td=Oe.fromTag("td",e.dom);return ze(td,Oe.fromTag("br",e.dom)),td},Do=e=>()=>Oe.fromTag("col",e.dom),Eo=e=>()=>Oe.fromTag("colgroup",e.dom),Ro=e=>()=>Oe.fromTag("tr",e.dom),Bo=(e,t,n)=>{const r=((e,t)=>{const n=Xe(e,t),r=Pe(Ke(e));return We(n,r),n})(e,t);return ee(n,((e,t)=>{null===e?we(r,t):ge(r,t,e)})),r},Mo=e=>e,Po=(e,t,n)=>{const r=(e,t)=>{((source,e)=>{const t=source.dom,n=e.dom;Et(t)&&Et(n)&&(n.style.cssText=t.style.cssText)})(e.element,t),$t(t,"height"),1!==e.colspan&&$t(t,"width")};return{col:n=>{const col=Oe.fromTag(se(n.element),t.dom);return r(n,col),e(n.element,col),col},colgroup:Eo(t),row:Ro(t),cell:o=>{const td=Oe.fromTag(se(o.element),t.dom),l=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),c=l.length>0?((e,t,n)=>So(e).map((r=>{const o=n.join(","),l=mt(r,o,(element=>ke(element,e)));return N(l,((e,t)=>{const n=Ge(t);return we(n,"contenteditable"),ze(e,n),n}),t)})).getOr(t))(o.element,td,l):td;return ze(c,Oe.fromTag("br")),r(o,td),((e,t)=>{ee(To,((n,r)=>ye(e,r).filter((e=>R(n,e))).each((e=>ge(t,r,e)))))})(o.element,td),e(o.element,td),td},replace:Bo,colGap:Do(t),gap:Io(t)}},Lo=e=>({col:Do(e),colgroup:Eo(e),row:Ro(e),cell:Io(e),replace:Mo,colGap:Do(e),gap:Io(e)}),Fo=e=>Oe.fromDom(e.getBody()),$o=e=>element=>ke(element,Fo(e)),No=table=>{we(table,"data-mce-style");const e=element=>we(element,"data-mce-style");L(Kt(table),e),L(Xt(table),e),L(Zt(table),e)},zo=e=>Oe.fromDom(e.selection.getStart()),Vo=e=>e.getBoundingClientRect().width,Ho=e=>e.getBoundingClientRect().height,Wo=(e,t)=>{const n=t.column,r=t.column+t.colspan-1,o=t.row,l=t.row+t.rowspan-1;return n<=e.finishCol&&r>=e.startCol&&o<=e.finishRow&&l>=e.startRow},qo=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Qo=(e,t,n)=>{const r=ir.findItem(e,t,ke),o=ir.findItem(e,n,ke);return r.bind((e=>o.map((t=>{return n=e,r=t,o=Math.min(n.row,r.row),l=Math.min(n.column,r.column),c=Math.max(n.row+n.rowspan-1,r.row+r.rowspan-1),d=Math.max(n.column+n.colspan-1,r.column+r.colspan-1),{startRow:o,startCol:l,finishRow:c,finishCol:d};var n,r,o,l,c,d}))))},Uo=(e,t,n)=>Qo(e,t,n).bind((t=>((e,t)=>{let n=!0;const r=C(qo,t);for(let i=t.startRow;i<=t.finishRow;i++)for(let o=t.startCol;o<=t.finishCol;o++)n=n&&ir.getAt(e,i,o).exists(r);return n?T.some(t):T.none()})(e,t))),Yo=(e,t,n)=>Qo(e,t,n).map((t=>{const n=ir.filterItems(e,C(Wo,t));return P(n,(e=>e.element))})),Go=(e,t)=>ir.findItem(e,t,((e,t)=>je(t,e))).map((e=>e.element)),Ko=(e,t,n)=>table(e).bind((table=>((e,t,n,r)=>ir.findItem(e,t,ke).bind((t=>{const o=n>0?t.row+t.rowspan-1:t.row,l=r>0?t.column+t.colspan-1:t.column;return ir.getAt(e,o+n,l+r).map((e=>e.element))})))(Jo(table),e,t,n))),Xo=(table,e,t)=>{const n=Jo(table);return Yo(n,e,t)},Zo=(table,e,t,n,r)=>{const o=Jo(table),l=ke(table,t)?T.some(e):Go(o,e),c=ke(table,r)?T.some(n):Go(o,n);return l.bind((e=>c.bind((t=>Yo(o,e,t)))))},Jo=ir.fromTable;var ei=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ti=()=>({up:A({selector:yt,closest:xt,predicate:vt,all:Re}),down:A({selector:gt,predicate:pt}),styles:A({get:Pt,getRaw:Ft,set:Bt,remove:$t}),attrs:A({get:ve,set:ge,remove:we,copyTo:(source,e)=>{const t=Ae(source);be(e,t)}}),insert:A({before:Fe,after:$e,afterAll:He,append:ze,appendAll:We,prepend:Ne,wrap:Ve}),remove:A({unwrap:Ue,remove:Qe}),create:A({nu:Oe.fromTag,clone:element=>Oe.fromDom(element.dom.cloneNode(!1)),text:Oe.fromText}),query:A({comparePosition:(element,e)=>element.dom.compareDocumentPosition(e.dom),prevSibling:Be,nextSibling:Me}),property:A({children:Pe,name:se,parent:Ee,document:element=>De(element).dom,isText:de,isComment:ce,isElement:ue,isSpecial:element=>{const e=se(element);return R(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],e)},getLanguage:element=>ue(element)?ye(element,"lang"):T.none(),getText:wo,setText:xo,isBoundary:element=>!!ue(element)&&("body"===se(element)||R(ei,se(element))),isEmptyTag:element=>!!ue(element)&&R(["br","img","hr","input"],se(element)),isNonEditable:element=>ue(element)&&"false"===ve(element,"contenteditable")}),eq:ke,is:Te});const ni=(e,t,head,n)=>{const r=t(e,head);return N(n,((b,a)=>{const n=t(e,a);return ri(e,b,n)}),r)},ri=(e,t,n)=>t.bind((s=>n.filter(C(e.eq,s)))),oi=(e,t,n)=>n.length>0?((e,t,n,r)=>r(e,t,n[0],n.slice(1)))(e,t,n,ni):T.none(),ii=(e,t,n,r=k)=>{const o=[t].concat(e.up().all(t)),l=[n].concat(e.up().all(n)),c=path=>H(path,r).fold((()=>path),(e=>path.slice(0,e+1))),d=c(o),h=c(l),m=V(d,(t=>B(h,((e,t)=>C(e.eq,t))(e,t))));return{firstpath:d,secondpath:h,shared:m}},si=ti(),ai=(e,t)=>oi(si,((t,element)=>e(element)),t),ci=e=>yt(e,"table"),ui=(e,t,n)=>{const r=e=>element=>void 0!==n&&n(element)||ke(element,e);return ke(e,t)?T.some({boxes:T.some([e]),start:e,finish:t}):ci(e).bind((o=>ci(t).bind((l=>{if(ke(o,l))return T.some({boxes:Xo(o,e,t),start:e,finish:t});if(je(o,l)){const n=mt(t,"td,th",r(o)),c=n.length>0?n[n.length-1]:t;return T.some({boxes:Zo(o,e,o,t,l),start:e,finish:c})}if(je(l,o)){const n=mt(e,"td,th",r(l)),c=n.length>0?n[n.length-1]:e;return T.some({boxes:Zo(l,e,o,t,l),start:e,finish:c})}return((e,t,n)=>ii(si,e,t,n))(e,t).shared.bind((c=>xt(c,"table",n).bind((n=>{const c=mt(t,"td,th",r(n)),d=c.length>0?c[c.length-1]:t,h=mt(e,"td,th",r(n)),m=h.length>0?h[h.length-1]:e;return T.some({boxes:Zo(n,e,o,t,l),start:m,finish:d})}))))}))))},di=(e,t)=>{const n=gt(e,t);return n.length>0?T.some(n):T.none()},hi=(e,t,n)=>At(e,t).bind((t=>At(e,n).bind((e=>ai(ci,[t,e]).map((table=>({first:t,last:e,table:table}))))))),pi=(e,t,n,r,o)=>((e,t)=>V(e,(e=>Ce(e,t))))(e,o).bind((e=>Ko(e,t,n).bind((e=>((e,t)=>yt(e,"table").bind((table=>At(table,t).bind((t=>ui(t,e).bind((e=>e.boxes.map((t=>({boxes:t,start:e.start,finish:e.finish}))))))))))(e,r))))),mi=(e,t)=>di(e,t),fi=(e,t,n)=>hi(e,t,n).bind((t=>{const n=t=>ke(e,t),r="thead,tfoot,tbody,table",o=yt(t.first,r,n),l=yt(t.last,r,n);return o.bind((e=>l.bind((n=>ke(e,n)?((table,e,t)=>{const n=Jo(table);return Uo(n,e,t)})(t.table,t.first,t.last):T.none()))))})),gi=x,bi=e=>{const t=(e,t)=>ye(e,t).exists((span=>parseInt(span,10)>1));return e.length>0&&U(e,(e=>t(e,"rowspan")||t(e,"colspan")))?T.some(e):T.none()},vi=(table,e,t)=>e.length<=1?T.none():fi(table,t.firstSelectedSelector,t.lastSelectedSelector).map((t=>({bounds:t,cells:e}))),yi="data-mce-selected",wi="td["+yi+"],th["+yi+"]",Ai="["+yi+"]",xi="data-mce-first-selected",Oi="td["+xi+"],th["+xi+"]",Ci="data-mce-last-selected",_i="td["+Ci+"],th["+Ci+"]",Si=Ai,ki={selected:yi,selectedSelector:wi,firstSelected:xi,firstSelectedSelector:Oi,lastSelected:Ci,lastSelectedSelector:_i},ji=(e,table,t)=>({element:t,mergable:vi(table,e,ki),unmergable:bi(e),selection:gi(e)}),Ti=e=>(t,n)=>{const r=se(t),o="col"===r||"colgroup"===r?table(element=t).bind((table=>mi(table,ki.firstSelectedSelector))).fold(A(element),(e=>e[0])):t;var element;return xt(o,e,n)},Ii=Ti("th,td,caption"),Di=Ti("th,td"),Ei=e=>{return t=e.model.table.getSelectedCells(),P(t,Oe.fromDom);var t},Ri=(e,t)=>{e.on("BeforeGetContent",(t=>{const n=n=>{t.preventDefault(),(e=>table(e[0]).map((table=>{const e=vo(table,Si);return No(e),[e]})))(n).each((n=>{t.content="text"===t.format?(e=>P(e,(element=>element.dom.innerText)).join(""))(n):((e,t)=>P(t,(t=>e.selection.serializer.serialize(t.dom,{}))).join(""))(e,n)}))};if(!0===t.selection){const t=(e=>$(Ei(e),(e=>Ce(e,ki.selectedSelector))))(e);t.length>=1&&n(t)}})),e.on("BeforeSetContent",(n=>{if(!0===n.selection&&!0===n.paste){const r=Ei(e);head(r).each((r=>{table(r).each((table=>{const o=$(((html,e)=>{const div=(e||document).createElement("div");return div.innerHTML=html,Pe(Oe.fromDom(div))})(n.content),(content=>"meta"!==se(content))),l=me("table");if(1===o.length&&l(o[0])){n.preventDefault();const l=Oe.fromDom(e.getDoc()),c=Lo(l),d=((element,e,t)=>({element:element,clipboard:e,generators:t}))(r,o[0],c);t.pasteCells(table,d).each((()=>{e.focus()}))}}))}))}}))},Bi=(element,e)=>({element:element,offset:e}),Mi=(e,element,t)=>e.property().isText(element)&&0===e.property().getText(element).trim().length||e.property().isComment(element)?t(element).bind((n=>Mi(e,n,t).orThunk((()=>T.some(n))))):T.none(),Pi=(e,element)=>{if(e.property().isText(element))return e.property().getText(element).length;return e.property().children(element).length},Li=(e,element)=>{const t=Mi(e,element,e.query().prevSibling).getOr(element);if(e.property().isText(t))return Bi(t,Pi(e,t));const n=e.property().children(t);return n.length>0?Li(e,n[n.length-1]):Bi(t,Pi(e,t))},Fi=Li,$i=ti(),Ni=(main,e)=>{if(!Vt(main)){const t=(e=>Yr(e).bind((e=>Lr(e,["fixed","relative","empty"]))))(main);t.each((t=>{const n=t.value/2;Zr(main,n,t.unit),Zr(e,n,t.unit)}))}},zi=e=>P(e,A(0)),Vi=(e,t,n,r,o)=>o(e.slice(0,t)).concat(r).concat(o(e.slice(n))),Hi=e=>(t,n,r,o)=>{if(e(r)){const e=Math.max(o,t[n]-Math.abs(r)),l=Math.abs(e-t[n]);return r>=0?l:-l}return r},Wi=Hi((e=>e<0)),qi=Hi(j),Qi=()=>{const e=(e,t,n,r)=>{const o=(100+n)/100,l=Math.max(r,(e[t]+n)/o);return P(e,((e,n)=>(n===t?l:e/o)-e))},t=(t,n,r,o,l,c)=>c?e(t,n,o,l):((e,t,n,r,o)=>{const l=Wi(e,t,r,o);return Vi(e,t,n+1,[l,0],zi)})(t,n,r,o,l);return{resizeTable:(e,t)=>e(t),clampTableDelta:Wi,calcLeftEdgeDeltas:t,calcMiddleDeltas:(e,n,r,o,l,c,d)=>t(e,r,o,l,c,d),calcRightEdgeDeltas:(t,n,r,o,l,c)=>{if(c)return e(t,r,o,l);{const e=Wi(t,r,o,l);return zi(t.slice(0,r)).concat([e])}},calcRedestributedWidths:(e,t,n,r)=>{if(r){const r=(t+n)/t,o=P(e,(e=>e/r));return{delta:100*r-100,newSizes:o}}return{delta:n,newSizes:e}}}},Ui=()=>{const e=(e,t,n,r,o)=>{const l=qi(e,r>=0?n:t,r,o);return Vi(e,t,n+1,[l,-l],zi)};return{resizeTable:(e,t,n)=>{n&&e(t)},clampTableDelta:(e,t,n,r,o)=>{if(o){if(n>=0)return n;{const t=z(e,((a,b)=>a+b-r),0);return Math.max(-t,n)}}return Wi(e,t,n,r)},calcLeftEdgeDeltas:e,calcMiddleDeltas:(t,n,r,o,l,c)=>e(t,r,o,l,c),calcRightEdgeDeltas:(e,t,n,r,o,l)=>{if(l)return zi(e);{const t=r/e.length;return P(e,A(t))}},calcRedestributedWidths:(e,t,n,r)=>({delta:0,newSizes:e})}},Yi=table=>ir.fromTable(table).grid,Gi=me("th"),Ki=e=>U(e,(e=>Gi(e.element))),Xi=(e,t)=>e&&t?"sectionCells":e?"section":"cells",Zi=e=>{const t="thead"===e.section,n=Ot(Ji(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||n?{type:"header",subType:Xi(t,n)}:{type:"body"}},Ji=e=>{const t=$(e,(e=>Gi(e.element)));return 0===t.length?T.some("td"):t.length===e.length?T.some("th"):T.none()},es=(e,t,n)=>tt(n(e.element,t),!0,e.isLocked),ts=(e,section)=>e.section!==section?nt(e.element,e.cells,section,e.isNew):e,section=()=>({transformRow:ts,transformCell:(e,t,n)=>{const r=n(e.element,t),o="td"!==se(r)?((e,t)=>{const n=Xe(e,t);$e(e,n);const r=Pe(e);return We(n,r),Qe(e),n})(r,"td"):r;return tt(o,e.isNew,e.isLocked)}}),ns=()=>({transformRow:ts,transformCell:es}),rs=()=>({transformRow:(e,section)=>ts(e,"thead"===section?"tbody":section),transformCell:es}),os=(table,e)=>{const t=(e=>X(e.all,(e=>{const t=Zi(e);return"header"===t.type?T.from(t.subType):T.none()})))(ir.fromTable(table)).getOr(e);switch(t){case"section":return section();case"sectionCells":return ns();case"cells":return rs()}},is=section,ss=ns,as=rs,ls=()=>({transformRow:x,transformCell:es}),cs=e=>xt(e,"[contenteditable]"),us=(element,e=!1)=>ut(element)?element.dom.isContentEditable:cs(element).fold(A(e),(e=>"true"===ds(e))),ds=element=>element.dom.contentEditable,hs=(element,e,t,n)=>{t===n?we(element,e):ge(element,e,t)},ps=(table,e,element)=>{K(ft(table,e)).fold((()=>Ne(table,element)),(e=>$e(e,element)))},ms=(table,e)=>{const t=[],n=[],r=e=>P(e,(e=>{e.isNew&&t.push(e.element);const tr=e.element;return qe(tr),L(e.cells,(e=>{e.isNew&&n.push(e.element),hs(e.element,"colspan",e.colspan,1),hs(e.element,"rowspan",e.rowspan,1),ze(tr,e.element)})),tr})),o=e=>Q(e,(e=>P(e.cells,(col=>(hs(col.element,"span",col.colspan,1),col.element))))),l=(e,t)=>{const section=((table,e)=>{const section=wt(table,e).getOrThunk((()=>{const t=Oe.fromTag(e,Ie(table).dom);return"thead"===e?ps(table,"caption,colgroup",t):"colgroup"===e?ps(table,"caption",t):ze(table,t),t}));return qe(section),section})(table,t),n=("colgroup"===t?o:r)(e);We(section,n)},c=(e,t)=>{e.length>0?l(e,t):(e=>{wt(table,e).each(Qe)})(t)},d=[],h=[],m=[],f=[];return L(e,(e=>{switch(e.section){case"thead":d.push(e);break;case"tbody":h.push(e);break;case"tfoot":m.push(e);break;case"colgroup":f.push(e)}})),c(f,"colgroup"),c(d,"thead"),c(h,"tbody"),c(m,"tfoot"),{newRows:t,newCells:n}},fs=(e,t)=>{if(0===e.length)return 0;const n=e[0];return H(e,(e=>!t(n.element,e.element))).getOr(e.length)},gs=(e,t,n,r)=>{const o=((e,t)=>e[t])(e,t),l="colgroup"===o.section,c=fs(o.cells.slice(n),r),d=l?1:fs(((e,t)=>P(e,(e=>Un(e,t))))(e.slice(t),n),r);return{colspan:c,rowspan:d}},bs=(e,t)=>{const n=P(e,(e=>P(e.cells,k)));return P(e,((r,o)=>{const details=Q(r.cells,((r,l)=>{if(!1===n[o][l]){const m=gs(e,o,l,t);return((e,t,r,o)=>{for(let l=e;l<e+r;l++)for(let e=t;e<t+o;e++)n[l][e]=!0})(o,l,m.rowspan,m.colspan),[(element=r.element,c=m.rowspan,d=m.colspan,h=r.isNew,{element:element,rowspan:c,colspan:d,isNew:h})]}return[];var element,c,d,h}));return((element,e,section,t)=>({element:element,cells:e,section:section,isNew:t}))(r.element,details,r.section,r.isNew)}))},vs=(e,t,n)=>{const r=[];L(e.colgroups,(colgroup=>{const o=[];for(let r=0;r<e.grid.columns;r++){const element=ir.getColumnAt(e,r).map((e=>tt(e.element,n,!1))).getOrThunk((()=>tt(t.colGap(),!0,!1)));o.push(element)}r.push(nt(colgroup.element,o,"colgroup",n))}));for(let o=0;o<e.grid.rows;o++){const l=[];for(let r=0;r<e.grid.columns;r++){const element=ir.getAt(e,o,r).map((e=>tt(e.element,n,e.isLocked))).getOrThunk((()=>tt(t.gap(),!0,!1)));l.push(element)}const c=e.all[o],d=nt(c.element,l,c.section,n);r.push(d)}return r},ys=e=>bs(e,ke),ws=(e,element)=>X(e.all,(e=>V(e.cells,(e=>ke(element,e.element))))),As=(e,t,n)=>{const details=P(t.selection,(t=>Gt(t).bind((t=>ws(e,t))).filter(n))),r=Ct(details);return _t(r.length>0,r)},xs=(e,t,n,r,o)=>(table,l,c,d)=>{const h=ir.fromTable(table),m=T.from(null==d?void 0:d.section).getOrThunk(ls);return t(h,l).map((t=>{const n=((e,t)=>vs(e,t,!1))(h,c),r=e(n,t,ke,o(c),m),l=er(r.grid);return{info:t,grid:ys(r.grid),cursor:r.cursor,lockedColumns:l}})).bind((e=>{const t=ms(table,e.grid),o=T.from(null==d?void 0:d.sizing).getOrThunk((()=>mo(table))),l=T.from(null==d?void 0:d.resize).getOrThunk(Ui);return n(table,e.grid,e.info,{sizing:o,resize:l,section:m}),r(table),we(table,Zn),e.lockedColumns.length>0&&ge(table,Zn,e.lockedColumns.join(",")),T.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))},Os=(e,t)=>As(e,t,j).map((e=>({cells:e,generators:t.generators,clipboard:t.clipboard}))),Cs=(e,t)=>As(e,t,j),_s=(e,t)=>As(e,t,(e=>!e.isLocked)),Ss=(e,t)=>U(t,(t=>((e,t)=>ws(e,t).exists((e=>!e.isLocked)))(e,t))),ks=(e,t,n,r)=>{const o=Kn(e).rows;let l=!0;for(let i=0;i<o.length;i++)for(let e=0;e<Gn(o[0]);e++){const c=o[i],d=Un(c,e),h=n(d.element,t);h&&!l?qn(c,e,tt(r(),!0,d.isLocked)):h&&(l=!1)}return e},js=(e,t,n,r)=>{const o=Kn(e).rows;if(t>0&&t<o.length){const e=((e,t)=>z(e,((e,n)=>B(e,(e=>t(e.element,n.element)))?e:e.concat([n])),[]))(o[t-1].cells,n);L(e,(e=>{let l=T.none();for(let i=t;i<o.length;i++)for(let t=0;t<Gn(o[0]);t++){const c=o[i],d=Un(c,t);n(d.element,e.element)&&(l.isNone()&&(l=T.some(r())),l.each((sub=>{qn(c,t,tt(sub,!0,d.isLocked))})))}}))}return e},Ts=e=>{const t=t=>t(e),n=A(e),r=()=>output,output={tag:!0,inner:e,fold:(t,n)=>n(e),isValue:j,isError:k,map:t=>Ds.value(t(e)),mapError:r,bind:t,exists:t,forall:t,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:t=>{t(e)},toOptional:()=>T.some(e)};return output},Is=e=>{const t=()=>output,output={tag:!1,inner:e,fold:(t,n)=>t(e),isValue:k,isError:j,map:t,mapError:t=>Ds.error(t(e)),bind:t,exists:k,forall:j,getOr:x,or:x,getOrThunk:S,orThunk:S,getOrDie:(n=String(e),()=>{throw new Error(n)}),each:w,toOptional:T.none};var n;return output},Ds={value:Ts,error:Is,fromOption:(e,t)=>e.fold((()=>Is(t)),Ts)},Es=(e,t)=>({rowDelta:0,colDelta:Gn(e[0])-Gn(t[0])}),Rs=(e,t)=>({rowDelta:e.length-t.length,colDelta:0}),Bs=(e,t,n,r)=>{const o="colgroup"===t.section?n.col:n.cell;return M(e,(e=>tt(o(),!0,r(e))))},Ms=(e,t,n,r)=>{const o=e[e.length-1];return e.concat(M(t,(()=>{const e="colgroup"===o.section?n.colgroup:n.row,t=Xn(o,e,x),l=Bs(t.cells.length,t,n,(e=>ie(r,e.toString())));return Qn(t,l)})))},Ps=(e,t,n,r)=>P(e,(e=>{const o=Bs(t,e,n,k);return Hn(e,r,o)})),Ls=(e,t,n)=>{const r=t.colDelta<0?Ps:x,o=t.rowDelta<0?Ms:x,l=er(e),c=Gn(e[0]),d=B(l,(e=>e===c-1)),h=r(e,Math.abs(t.colDelta),n,d?c-1:c),m=er(h);return o(h,Math.abs(t.rowDelta),n,Y(m,j))},Fs=(e,t,col,n)=>{const r=C(n,Un(e[t],col).element),o=e[t];return e.length>1&&Gn(o)>1&&(col>0&&r(Yn(o,col-1))||col<o.cells.length-1&&r(Yn(o,col+1))||t>0&&r(Yn(e[t-1],col))||t<e.length-1&&r(Yn(e[t+1],col)))},$s=(e,t,n)=>$(n,(n=>n>=e.column&&n<=Gn(t[0])+e.column)),Ns=(e,t,n,r,o)=>{const l=er(t),c=((e,t,n)=>{const r=Gn(t[0]),o=Kn(t).cols.length+e.row,l=M(r-e.column,(t=>t+e.column)),c=V(l,(e=>U(n,(col=>col!==e)))).getOr(r-1);return{row:o,column:c}})(e,t,l),d=Kn(n).rows,h=$s(c,d,l),m=((e,t,n)=>{if(e.row>=t.length||e.column>Gn(t[0]))return Ds.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);const r=t.slice(e.row),o=r[0].cells.slice(e.column),l=Gn(n[0]),c=n.length;return Ds.value({rowDelta:r.length-c,colDelta:o.length-l})})(c,t,d);return m.map((e=>{const n={...e,colDelta:e.colDelta-h.length},l=Ls(t,n,r),m=er(l),f=$s(c,d,m);return((e,t,n,r,o,l)=>{const c=e.row,d=e.column,h=c+n.length,m=d+Gn(n[0])+l.length,f=Y(l,j);for(let e=c;e<h;e++){let l=0;for(let h=d;h<m;h++){if(f[h]){l++;continue}Fs(t,e,h,o)&&ks(t,Yn(t[e],h),o,r.cell);const m=h-d-l,v=Un(n[e-c],m),y=v.element,w=r.replace(y);qn(t[e],h,tt(w,!0,v.isLocked))}}return t})(c,l,d,r,o,f)}))},zs=(e,t,n,r,o)=>{((e,t,n,r)=>{t>0&&t<e[0].cells.length&&L(e,(e=>{const o=e.cells[t-1];let l=0;const c=r();for(;e.cells.length>t+l&&n(o.element,e.cells[t+l].element);)qn(e,t+l,tt(c,!0,e.cells[t+l].isLocked)),l++}))})(t,e,o,r.cell);const l=Rs(n,t),c=Ls(n,l,r),d=Rs(t,c),h=Ls(t,d,r);return P(h,((t,i)=>Hn(t,e,c[i].cells)))},Vs=(e,t,n,r,o)=>{js(t,e,o,r.cell);const l=er(t),c=Es(t,n),d={...c,colDelta:c.colDelta-l.length},h=Ls(t,d,r),{cols:m,rows:f}=Kn(h),v=er(h),y=Es(n,t),w={...y,colDelta:y.colDelta+v.length},A=((e,t,n)=>P(e,(e=>z(n,((n,r)=>{const o=Bs(1,e,t,j)[0];return Wn(n,r,o)}),e))))(n,r,v),x=Ls(A,w,r);return[...m,...f.slice(0,e),...x,...f.slice(e,f.length)]},Hs=(e,t,n,r,o)=>{const{rows:l,cols:c}=Kn(e),d=l.slice(0,t),h=l.slice(t),m=((e,t,n,r)=>Xn(e,(e=>r(e,n)),t))(l[n],((e,n)=>t>0&&t<l.length&&r(Yn(l[t-1],n),Yn(l[t],n))?Un(l[t],n):tt(o(e.element,r),!0,e.isLocked)),r,o);return[...c,...d,m,...h]},Ws=(e,t,n,r,o)=>P(e,(e=>{const l=t>0&&t<Gn(e)&&r(Yn(e,t-1),Yn(e,t)),sub=((e,t,section,n,r,o,l)=>{if("colgroup"!==section&&n)return Un(e,t);{const t=Un(e,r);return tt(l(t.element,o),!0,!1)}})(e,t,e.section,l,n,r,o);return Wn(e,t,sub)})),qs=(e,t,n,r)=>((e,t,n,r)=>void 0!==Yn(e[t],n)&&t>0&&r(Yn(e[t-1],n),Yn(e[t],n)))(e,t,n,r)||((e,t,n)=>t>0&&n(Yn(e,t-1),Yn(e,t)))(e[t],n,r),Qs=(e,t,n,r)=>{const o=e=>(e=>"row"===e?Ht(t):Vt(t))(e)?`${e}group`:e;if(e)return Gi(t)?o(n):null;if(r&&Gi(t)){return o("row"===n?"col":"row")}return null},Us=(e,t,n)=>tt(n(e.element,t),!0,e.isLocked),Ys=(e,t,n,r,o,l,c)=>P(e,((e,d)=>((e,t)=>{const n=e.cells,r=P(n,t);return nt(e.element,r,e.section,e.isNew)})(e,((e,h)=>{if((e=>B(t,(t=>n(e.element,t.element))))(e)){const t=c(e,d,h)?o(e,n,r):e;return l(t,d,h).each((e=>{var element,n;element=t.element,n={scope:T.from(e)},ee(n,((e,t)=>{e.fold((()=>{we(element,t)}),(e=>{fe(element.dom,t,e)}))}))})),t}return e})))),Gs=(e,t,n)=>Q(e,((r,i)=>qs(e,i,t,n)?[]:[Un(r,t)])),Ks=(e,t,n,r,o)=>{const l=Kn(e).rows,c=Q(t,(e=>Gs(l,e,r))),d=P(l,(e=>Ki(e.cells))),h=((e,t)=>U(t,x)&&Ki(e)?j:(e,n,r)=>!("th"===se(e.element)&&t[n]))(c,d),m=((e,t)=>(n,r)=>T.some(Qs(e,n.element,"row",t[r])))(n,d);return Ys(e,c,r,o,Us,m,h)},Xs=(e,t,section,n,r,o,l)=>{const{cols:c,rows:d}=Kn(e),h=d[t[0]],m=Q(t,(e=>((e,t,n)=>{const r=e[t];return Q(r.cells,((r,i)=>qs(e,t,i,n)?[]:[r]))})(d,e,r))),f=P(h.cells,((e,t)=>Ki(Gs(d,t,r)))),v=[...d];L(t,(e=>{v[e]=l.transformRow(d[e],section)}));const y=[...c,...v],w=((e,t)=>U(t,x)&&Ki(e.cells)?j:(e,n,r)=>!("th"===se(e.element)&&t[r]))(h,f),A=((e,t)=>(n,r,o)=>T.some(Qs(e,n.element,"col",t[o])))(n,f);return Ys(y,m,r,o,l.transformCell,A,w)},Zs=(e,details,t,n)=>{const r=Kn(e).rows,o=P(details,(e=>Un(r[e.row],e.column)));return Ys(e,o,t,n,Us,T.none,j)},Js=e=>{if(!c(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return L(e,((r,o)=>{const l=Z(r);if(1!==l.length)throw new Error("one and only one name per case");const d=l[0],h=r[d];if(void 0!==n[d])throw new Error("duplicate key detected:"+d);if("cata"===d)throw new Error("cannot have a case named cata (sorry)");if(!c(h))throw new Error("case arguments must be an array");t.push(d),n[d]=(...n)=>{const r=n.length;if(r!==h.length)throw new Error("Wrong number of arguments to case "+d+". Expected "+h.length+" ("+h+"), got "+r);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[o].apply(null,n)},match:e=>{const r=Z(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!U(t,(e=>R(r,e))))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[d].apply(null,n)},log:label=>{console.log(label,{constructors:t,constructor:d,params:n})}}}})),n},ea={...Js([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},ta=(input,e,t,n,r)=>{const o=input.slice(0),l=((input,e)=>0===input.length?ea.none():1===input.length?ea.only(0):0===e?ea.left(0,1):e===input.length-1?ea.right(e-1,e):e>0&&e<input.length-1?ea.middle(e-1,e,e+1):ea.none())(input,e),c=A(P(o,A(0)));return l.fold(c,(e=>n.singleColumnWidth(o[e],t)),((e,l)=>r.calcLeftEdgeDeltas(o,e,l,t,n.minCellWidth(),n.isRelative)),((e,l,c)=>r.calcMiddleDeltas(o,e,l,c,t,n.minCellWidth(),n.isRelative)),((e,l)=>r.calcRightEdgeDeltas(o,e,l,t,n.minCellWidth(),n.isRelative)))},na=(e,t,n)=>{let r=0;for(let i=e;i<t;i++)r+=void 0!==n[i]?n[i]:0;return r},ra=(e,t)=>{const n=ir.justCells(e);return P(n,(e=>{const n=na(e.row,e.row+e.rowspan,t);return{element:e.element,height:n,rowspan:e.rowspan}}))},oa=(e,t)=>ir.hasColumns(e)?((e,t)=>{const n=ir.justColumns(e);return P(n,((e,n)=>({element:e.element,width:t[n],colspan:e.colspan})))})(e,t):((e,t)=>{const n=ir.justCells(e);return P(n,(e=>{const n=na(e.column,e.column+e.colspan,t);return{element:e.element,width:n,colspan:e.colspan}}))})(e,t),ia=(e,t,n)=>{const r=oa(e,t);L(r,(e=>{n.setElementWidth(e.element,e.width)}))},sa=(table,e,t,n,r)=>{const o=ir.fromTable(table),l=r.getCellDelta(e),c=r.getWidths(o,r),d=t===o.grid.columns-1,h=n.clampTableDelta(c,t,l,r.minCellWidth(),d),m=ta(c,t,h,r,n),f=P(m,((e,i)=>e+c[i]));ia(o,f,r),n.resizeTable(r.adjustTableWidth,h,d)},aa=(table,e,t,n)=>{const r=ir.fromTable(table),o=((e,table,t)=>lo(e,table,t,Xr,(e=>e.getOrThunk(Qt))))(r,table,n),l=P(o,((n,i)=>t===i?Math.max(e+n,Qt()):n)),c=ra(r,l),d=((e,t)=>P(e.all,((e,i)=>({element:e.element,height:t[i]}))))(r,l);L(d,(e=>{Wr(e.element,e.height)})),L(c,(e=>{Wr(e.element,e.height)}));const h=N(l,((b,a)=>b+a),0);Wr(table,h)},la=details=>z(details,((e,t)=>B(e,(e=>e.column===t.column))?e:e.concat([t])),[]).sort(((e,t)=>e.column-t.column)),ca=me("col"),ua=me("colgroup"),da=element=>"tr"===se(element)||ua(element),ha=element=>({element:element,colspan:Nt(element,"colspan",1),rowspan:Nt(element,"rowspan",1)}),pa=e=>ye(e,"scope").map((e=>e.substr(0,3))),ma=(e,t=ha)=>{const n=element=>{if(da(element))return ua((data={element:element}).element)?e.colgroup(data):e.row(data);{const n=element,o=(data=>ca(data.element)?e.col(data):e.cell(data))(t(n));return r=T.some({item:n,replacement:o}),o}var data};let r=T.none();return{getOrInit:(element,e)=>r.fold((()=>n(element)),(p=>e(element,p.item)?p.replacement:n(element)))}},fa=e=>t=>{const n=[],r=element=>{const r="td"===e?{scope:null}:{},o=t.replace(element,e,r);return n.push({item:element,sub:o}),o};return{replaceOrInit:(element,e)=>{if(da(element)||ca(element))return element;{const t=element;return((element,e)=>V(n,(t=>e(t.item,element))))(t,e).fold((()=>r(t)),(p=>e(element,p.item)?p.sub:r(t)))}}}},ga=e=>({unmerge:t=>{const n=pa(t);return n.each((e=>ge(t,"scope",e))),()=>{const r=e.cell({element:t,colspan:1,rowspan:1});return $t(r,"width"),$t(t,"width"),n.each((e=>ge(r,"scope",e))),r}},merge:e=>($t(e[0],"width"),(()=>{const t=Ct(P(e,pa));if(0===t.length)return T.none();{const e=t[0],n=["row","col"];return B(t,(t=>t!==e&&R(n,t)))?T.none():T.from(e)}})().fold((()=>we(e[0],"scope")),(t=>ge(e[0],"scope",t+"group"))),A(e[0]))}),ba=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],va=ti(),ya=element=>((e,t)=>{const n=e.property().name(t);return R(ba,n)})(va,element),wa=element=>((e,t)=>{const n=e.property().name(t);return R(["ol","ul"],n)})(va,element),Aa=element=>((e,t)=>R(["br","img","hr","input"],e.property().name(t)))(va,element),xa=e=>{const t=me("br"),n=e=>ko(e).bind((n=>{const r=Me(n).map((e=>!!ya(e)||!!Aa(e)&&"img"!==se(e))).getOr(!1);return Ee(n).map((o=>!0===r||(e=>"li"===se(e)||vt(e,wa).isSome())(o)||t(n)||ya(o)&&!ke(e,o)?[]:[Oe.fromTag("br")]))})).getOr([]),r=(()=>{const content=Q(e,(e=>{const r=Pe(e);return(e=>U(e,(e=>t(e)||de(e)&&0===wo(e).trim().length)))(r)?[]:r.concat(n(e))}));return 0===content.length?[Oe.fromTag("br")]:content})();qe(e[0]),We(e[0],r)},Oa=e=>us(e,!0),Ca=table=>{0===Kt(table).length&&Qe(table)},_a=(e,cursor)=>({grid:e,cursor:cursor}),Sa=(e,t,n)=>{var r,o;const l=Kn(e).rows;return T.from(null===(o=null===(r=l[t])||void 0===r?void 0:r.cells[n])||void 0===o?void 0:o.element).filter(Oa).orThunk((()=>(e=>X(e,(e=>X(e.cells,(e=>{const t=e.element;return _t(Oa(t),t)})))))(l)))},ka=(e,t,n)=>{const r=Sa(e,t,n);return _a(e,r)},ja=details=>z(details,((e,t)=>B(e,(e=>e.row===t.row))?e:e.concat([t])),[]).sort(((e,t)=>e.row-t.row)),Ta=(section,e)=>(t,details,n,r,o)=>{const l=ja(details),c=P(l,(e=>e.row)),d=Xs(t,c,section,e,n,r.replaceOrInit,o);return ka(d,details[0].row,details[0].column)},Ia=Ta("thead",!0),Da=Ta("tbody",!1),Ea=Ta("tfoot",!1),Ra=(e,t,n)=>{const r=((e,section)=>en(e,(()=>section)))(e,n.section),o=ir.generate(r);return vs(o,t,!0)},Ba=(table,e,details,t)=>((e,t,n,r)=>{const o=ir.generate(t),l=r.getWidths(o,r);ia(o,l,r)})(0,e,0,t.sizing),Ma=(table,e,details,t)=>((e,t,details,n,r)=>{const o=ir.generate(t),l=n.getWidths(o,n),c=n.pixelWidth(),{newSizes:d,delta:h}=r.calcRedestributedWidths(l,c,details.pixelDelta,n.isRelative);ia(o,d,n),n.adjustTableWidth(h)})(0,e,details,t.sizing,t.resize),Pa=(e,details)=>B(details,(e=>0===e.column&&e.isLocked)),La=(e,details)=>B(details,(t=>t.column+t.colspan>=e.grid.columns&&t.isLocked)),Fa=(e,details)=>{const t=sr(e),n=la(details);return z(n,((e,n)=>e+t[n.column].map(Nn).getOr(0)),0)},$a=e=>(t,n)=>Cs(t,n).filter((details=>!(e?Pa:La)(t,details))).map((details=>({details:details,pixelDelta:Fa(t,details)}))),Na=e=>(t,n)=>Os(t,n).filter((details=>!(e?Pa:La)(t,details.cells))),za=fa("th"),Va=fa("td"),Ha=xs(((e,details,t,n)=>{const r=details[0].row,o=ja(details),l=N(o,((e,o)=>({grid:Hs(e.grid,r,o.row+e.delta,t,n.getOrInit),delta:e.delta+1})),{grid:e,delta:0}).grid;return ka(l,r,details[0].column)}),Cs,w,w,ma),Wa=xs(((e,details,t,n)=>{const r=ja(details),o=r[r.length-1],l=o.row+o.rowspan,c=N(r,((e,r)=>Hs(e,l,r.row,t,n.getOrInit)),e);return ka(c,l,details[0].column)}),Cs,w,w,ma),qa=xs(((e,t,n,r)=>{const details=t.details,o=la(details),l=o[0].column,c=N(o,((e,col)=>({grid:Ws(e.grid,l,col.column+e.delta,n,r.getOrInit),delta:e.delta+1})),{grid:e,delta:0}).grid;return ka(c,details[0].row,l)}),$a(!0),Ma,w,ma),Qa=xs(((e,t,n,r)=>{const details=t.details,o=details[details.length-1],l=o.column+o.colspan,c=la(details),d=N(c,((e,col)=>Ws(e,l,col.column,n,r.getOrInit)),e);return ka(d,details[0].row,l)}),$a(!1),Ma,w,ma),Ua=xs(((e,t,n,r)=>{const o=la(t.details),l=((e,t)=>Q(e,(e=>{const n=e.cells,r=N(t,((e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e),n);return r.length>0?[nt(e.element,r,e.section,e.isNew)]:[]})))(e,P(o,(e=>e.column))),c=l.length>0?l[0].cells.length-1:0;return ka(l,o[0].row,Math.min(o[0].column,c))}),((e,t)=>_s(e,t).map((details=>({details:details,pixelDelta:-Fa(e,details)})))),Ma,Ca,ma),Ya=xs(((e,details,t,n)=>{const r=ja(details),o=((e,t,n)=>{const{rows:r,cols:o}=Kn(e);return[...o,...r.slice(0,t),...r.slice(n+1)]})(e,r[0].row,r[r.length-1].row),l=o.length>0?o.length-1:0;return ka(o,Math.min(details[0].row,l),details[0].column)}),Cs,w,Ca,ma),Ga=xs(((e,details,t,n)=>{const r=la(details),o=P(r,(e=>e.column)),l=Ks(e,o,!0,t,n.replaceOrInit);return ka(l,details[0].row,details[0].column)}),_s,w,w,za),Ka=xs(((e,details,t,n)=>{const r=la(details),o=P(r,(e=>e.column)),l=Ks(e,o,!1,t,n.replaceOrInit);return ka(l,details[0].row,details[0].column)}),_s,w,w,Va),Xa=xs(Ia,_s,w,w,za),Za=xs(Da,_s,w,w,Va),Ja=xs(Ea,_s,w,w,Va),el=xs(((e,details,t,n)=>{const r=Zs(e,details,t,n.replaceOrInit);return ka(r,details[0].row,details[0].column)}),_s,w,w,za),tl=xs(((e,details,t,n)=>{const r=Zs(e,details,t,n.replaceOrInit);return ka(r,details[0].row,details[0].column)}),_s,w,w,Va),nl=xs(((e,t,n,r)=>{const o=t.cells;xa(o);const l=((e,t,n,r)=>{const o=Kn(e).rows;if(0===o.length)return e;for(let i=t.startRow;i<=t.finishRow;i++)for(let e=t.startCol;e<=t.finishCol;e++){const t=o[i],n=Un(t,e).isLocked;qn(t,e,tt(r(),!1,n))}return e})(e,t.bounds,0,r.merge(o));return _a(l,T.from(o[0]))}),((e,t)=>((e,t)=>t.mergable)(0,t).filter((t=>Ss(e,t.cells)))),Ba,w,ga),rl=xs(((e,t,n,r)=>{const o=N(t,((b,e)=>ks(b,e,n,r.unmerge(e))),e);return _a(o,T.from(t[0]))}),((e,t)=>((e,t)=>t.unmergable)(0,t).filter((t=>Ss(e,t)))),Ba,w,ga),il=xs(((e,t,n,r)=>{const o=((table,e)=>{const t=ir.fromTable(table);return vs(t,e,!0)})(t.clipboard,t.generators),l=((e,t)=>({row:e,column:t}))(t.row,t.column);return Ns(l,e,o,t.generators,n).fold((()=>_a(e,T.some(t.element))),(e=>ka(e,t.row,t.column)))}),((e,t)=>Gt(t.element).bind((n=>ws(e,n).map((details=>({...details,generators:t.generators,clipboard:t.clipboard})))))),Ba,w,ma),sl=xs(((e,t,n,r)=>{const o=Kn(e).rows,l=t.cells[0].column,c=o[t.cells[0].row],d=Ra(t.clipboard,t.generators,c),h=zs(l,e,d,t.generators,n);return ka(h,t.cells[0].row,t.cells[0].column)}),Na(!0),w,w,ma),al=xs(((e,t,n,r)=>{const o=Kn(e).rows,l=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,c=o[t.cells[0].row],d=Ra(t.clipboard,t.generators,c),h=zs(l,e,d,t.generators,n);return ka(h,t.cells[0].row,t.cells[0].column)}),Na(!1),w,w,ma),ll=xs(((e,t,n,r)=>{const o=Kn(e).rows,l=t.cells[0].row,c=o[l],d=Ra(t.clipboard,t.generators,c),h=Vs(l,e,d,t.generators,n);return ka(h,t.cells[0].row,t.cells[0].column)}),Os,w,w,ma),cl=xs(((e,t,n,r)=>{const o=Kn(e).rows,l=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,c=o[t.cells[0].row],d=Ra(t.clipboard,t.generators,c),h=Vs(l,e,d,t.generators,n);return ka(h,t.cells[0].row,t.cells[0].column)}),Os,w,w,ma),hl=(table,e)=>{const t=ir.fromTable(table);return Cs(t,e).bind((e=>{const n=e[e.length-1],r=e[0].column,o=n.column+n.colspan,l=W(P(t.all,(e=>$(e.cells,(e=>e.column>=r&&e.column<o)))));return Ji(l)})).getOr("")},pl=(table,e)=>{const t=ir.fromTable(table);return Cs(t,e).bind(Ji).getOr("")},ml=(table,e)=>{const t=ir.fromTable(table);return Cs(t,e).bind((e=>{const n=e[e.length-1],r=e[0].row,o=n.row+n.rowspan;return(e=>{const t=P(e,(e=>Zi(e).type)),n=R(t,"header"),r=R(t,"footer");if(n||r){const e=R(t,"body");return!n||e||r?n||e||!r?T.none():T.some("footer"):T.some("header")}return T.some("body")})(t.all.slice(r,o))})).getOr("")},fl=(e,t)=>e.dispatch("NewRow",{node:t}),gl=(e,t)=>e.dispatch("NewCell",{node:t}),bl=(e,table,data)=>{e.dispatch("TableModified",{...data,table:table})},vl={structure:!1,style:!0},yl={structure:!0,style:!1},wl={structure:!0,style:!0},option=e=>t=>t.options.get(e),Al="100%",xl=e=>{var t;const n=e.dom,r=null!==(t=n.getParent(e.selection.getStart(),n.isBlock))&&void 0!==t?t:e.getBody();return zn(Oe.fromDom(r))+"px"},Ol=e=>T.from(e.options.get("table_clone_elements")),Cl=option("table_header_type"),_l=option("table_column_resizing"),Sl=e=>"preservetable"===_l(e),kl=e=>"resizetable"===_l(e),jl=option("table_sizing_mode"),Tl=e=>"relative"===jl(e),Il=e=>"fixed"===jl(e),Dl=e=>"responsive"===jl(e),El=option("table_resize_bars"),Rl=option("table_style_by_css"),Bl=e=>{const t=e.options,n=t.get("table_default_attributes");return t.isSet("table_default_attributes")?n:((e,t)=>Dl(e)||Rl(e)?t:Il(e)?{...t,width:xl(e)}:{...t,width:Al})(e,n)},Ml=e=>{const t=e.options,n=t.get("table_default_styles");return t.isSet("table_default_styles")?n:((e,t)=>Dl(e)||!Rl(e)?t:Il(e)?{...t,width:xl(e)}:{...t,width:Al})(e,n)},Pl=option("table_use_colgroups"),Ll=(e,table)=>Tl(e)?go(table):Il(e)?fo(table):mo(table),Fl=(e,t,n)=>{const r=e=>"table"===se(Fo(e)),o=Ol(e),l=kl(e)?w:Ni,c=table=>{switch(Cl(e)){case"section":return is();case"sectionCells":return ss();case"cells":return as();default:return os(table,"section")}},d=(table,t)=>t.cursor.fold((()=>{const t=Kt(table);return head(t).filter(ut).map((t=>{n.clearSelectedCells(table.dom);const r=e.dom.createRng();return r.selectNode(t.dom),e.selection.setRng(r),ge(t,"data-mce-selected","1"),r}))}),(t=>{const r=Fi($i,t);const o=e.dom.createRng();return o.setStart(r.element.dom,r.offset),o.setEnd(r.element.dom,r.offset),e.selection.setRng(o),n.clearSelectedCells(table.dom),T.some(o)})),h=(n,r,l,h)=>(table,m,f=!1)=>{No(table);const v=Oe.fromDom(e.getDoc()),y=Po(l,v,o),w={sizing:Ll(e,table),resize:kl(e)?Qi():Ui(),section:c(table)};return r(table)?n(table,m,y,w).bind((n=>{t.refresh(table.dom),L(n.newRows,(t=>{fl(e,t.dom)})),L(n.newCells,(t=>{gl(e,t.dom)}));const r=d(table,n);return ut(table)&&(No(table),f||bl(e,table.dom,h)),r.map((e=>({rng:e,effect:h})))})):T.none()},m=h(Ya,(table=>!r(e)||Yi(table).rows>1),w,yl),f=h(Ua,(table=>!r(e)||Yi(table).columns>1),w,yl);return{deleteRow:m,deleteColumn:f,insertRowsBefore:h(Ha,j,w,yl),insertRowsAfter:h(Wa,j,w,yl),insertColumnsBefore:h(qa,j,l,yl),insertColumnsAfter:h(Qa,j,l,yl),mergeCells:h(nl,j,w,yl),unmergeCells:h(rl,j,w,yl),pasteColsBefore:h(sl,j,w,yl),pasteColsAfter:h(al,j,w,yl),pasteRowsBefore:h(ll,j,w,yl),pasteRowsAfter:h(cl,j,w,yl),pasteCells:h(il,j,w,wl),makeCellsHeader:h(el,j,w,yl),unmakeCellsHeader:h(tl,j,w,yl),makeColumnsHeader:h(Ga,j,w,yl),unmakeColumnsHeader:h(Ka,j,w,yl),makeRowsHeader:h(Xa,j,w,yl),makeRowsBody:h(Za,j,w,yl),makeRowsFooter:h(Ja,j,w,yl),getTableRowType:ml,getTableCellType:pl,getTableColType:hl}},$l=(element,e,t)=>{const n=Nt(element,e,1);1===t||n<=1?we(element,e):ge(element,e,Math.min(t,n))},Nl=(e,t)=>n=>{const r=n.column+n.colspan-1,o=n.column;return r>=e&&o<t},zl=(table,e)=>{const t=ir.fromTable(table);return _s(t,e).map((e=>{const n=e[e.length-1],r=e[0].column,o=n.column+n.colspan,l=((e,t,n)=>{if(ir.hasColumns(e)){const r=$(ir.justColumns(e),Nl(t,n)),o=P(r,(e=>{const r=Ke(e.element);return $l(r,"span",n-t),r})),l=Oe.fromTag("colgroup");return We(l,o),[l]}return[]})(t,r,o),c=((e,t,n)=>P(e.all,(e=>{const r=$(e.cells,Nl(t,n)),o=P(r,(e=>{const r=Ke(e.element);return $l(r,"colspan",n-t),r})),l=Oe.fromTag("tr");return We(l,o),l})))(t,r,o);return[...l,...c]}))},Vl=(table,e,t)=>{const n=ir.fromTable(table);return Cs(n,e).bind((e=>{const r=vs(n,t,!1),o=Kn(r).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),l=Q(o,(e=>{const t=$(e.cells,(e=>!e.isLocked));return t.length>0?[{...e,cells:t}]:[]})),c=ys(l);return _t(c.length>0,c)})).map((e=>(e=>P(e,(e=>{const tr=Ge(e.element);return L(e.cells,(e=>{const t=Ke(e.element);hs(t,"colspan",e.colspan,1),hs(t,"rowspan",e.rowspan,1),ze(tr,t)})),tr})))(e)))},Hl=Js([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Wl=(e,t,n)=>{const r=n.substring(0,n.length-e.length),o=parseFloat(r);return r===o.toString()?t(o):Hl.invalid(n)},ql={...Hl,from:e=>Tt(e,"%")?Wl("%",Hl.percent,e):Tt(e,"px")?Wl("px",Hl.pixels,e):Hl.invalid(e)},Ql=(e,t,n)=>e.fold((()=>t),(e=>((e,t,n)=>{const r=n/t;return P(e,(e=>ql.from(e).fold((()=>e),(e=>e*r+"px"),(e=>e/100*n+"px"))))})(t,n,e)),(e=>((e,t)=>P(e,(e=>ql.from(e).fold((()=>e),(e=>e/t*100+"%"),(e=>e+"%")))))(t,n))),Ul=(e,t,n)=>{const r=ql.from(n),o=U(e,(s=>"0px"===s))?((e,t)=>{const n=e.fold((()=>A("")),(e=>A(e/t+"px")),(()=>A(100/t+"%")));return M(t,n)})(r,e.length):Ql(r,e,t);return Kl(o)},Yl=(e,t)=>0===e.length?t:N(e,((e,t)=>ql.from(t).fold(A(0),x,x)+e),0),Gl=(e,t)=>ql.from(e).fold(A(e),(e=>e+t+"px"),(e=>e+t+"%")),Kl=e=>{if(0===e.length)return e;const t=N(e,((e,t)=>{const n=ql.from(t).fold((()=>({value:t,remainder:0})),(e=>((e,t)=>{const n=Math.floor(e);return{value:n+t,remainder:e-n}})(e,"px")),(e=>({value:e+"%",remainder:0})));return{output:[n.value].concat(e.output),remainder:e.remainder+n.remainder}}),{output:[],remainder:0}),n=t.output;return n.slice(0,n.length-1).concat([Gl(n[n.length-1],Math.round(t.remainder))])},Xl=ql.from,Zl=e=>Xl(e).fold(A("px"),A("px"),A("%")),Jl=(table,e,t)=>{const n=ir.fromTable(table),r=n.all,o=ir.justCells(n),l=ir.justColumns(n);e.each((e=>{const t=Zl(e),r=$n(table),c=((e,table)=>io(e,table,no,so))(n,table),d=Ul(c,r,e);ir.hasColumns(n)?((e,t,n)=>{L(t,((t,r)=>{const o=Yl([e[r]],qt());Bt(t.element,"width",o+n)}))})(d,l,t):((e,t,n)=>{L(t,(t=>{const r=e.slice(t.column,t.colspan+t.column),o=Yl(r,qt());Bt(t.element,"width",o+n)}))})(d,o,t),Bt(table,"width",e)})),t.each((e=>{const t=Zl(e),l=mr(table),c=((e,table,t)=>lo(e,table,t,ro,so))(n,table,Rr);((e,t,n,r)=>{L(n,(t=>{const n=e.slice(t.row,t.rowspan+t.row),o=Yl(n,Qt());Bt(t.element,"height",o+r)})),L(t,((t,i)=>{Bt(t.element,"height",e[i])}))})(Ul(c,l,e),r,o,t),Bt(table,"height",e)}))},ec=table=>Yr(table).exists((e=>Fr.test(e))),tc=table=>Yr(table).exists((e=>$r.test(e))),nc=table=>Yr(table).isNone(),rc=element=>{we(element,"width")},oc=table=>{const e=Jr(table);Jl(table,T.some(e),T.none()),rc(table)},ic=table=>{const e=(table=>$n(table)+"px")(table);Jl(table,T.some(e),T.none()),rc(table)},sc=table=>{$t(table,"width");const e=Xt(table),t=e.length>0?e:Kt(table);L(t,(e=>{$t(e,"width"),rc(e)})),rc(table)},ac={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},lc=e=>{const t=Oe.fromTag("colgroup");return M(e,(()=>ze(t,Oe.fromTag("col")))),t},cc=(e,t,n,r)=>M(e,(e=>((e,t,n,r)=>{const tr=Oe.fromTag("tr");for(let o=0;o<e;o++){const td=r<t||o<n?Oe.fromTag("th"):Oe.fromTag("td");o<n&&ge(td,"scope","row"),r<t&&ge(td,"scope","col"),ze(td,Oe.fromTag("br")),ze(tr,td)}return tr})(t,n,r,e))),uc=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},dc=(e,t,n,r,l)=>{const c=Ml(e),d={styles:c,attributes:Bl(e),colGroups:Pl(e)};return e.undoManager.ignore((()=>{const table=((e,t,n,r,o,l=ac)=>{const table=Oe.fromTag("table"),c="cells"!==o;Mt(table,l.styles),be(table,l.attributes),l.colGroups&&ze(table,lc(t));const d=Math.min(e,n);if(c&&n>0){const thead=Oe.fromTag("thead");ze(table,thead);const e=cc(n,t,"sectionCells"===o?d:0,r);We(thead,e)}const tbody=Oe.fromTag("tbody");ze(table,tbody);const h=cc(c?e-d:e,t,c?0:n,r);return We(tbody,h),table})(n,t,l,r,Cl(e),d);ge(table,"data-mce-id","__mce");const html=(element=>{const e=Oe.fromTag("div"),t=Oe.fromDom(element.dom.cloneNode(!0));return ze(e,t),(element=>element.dom.innerHTML)(e)})(table);e.insertContent(html),e.addVisual()})),At(Fo(e),'table[data-mce-id="__mce"]').map((table=>(Il(e)?ic(table):Dl(e)?sc(table):(Tl(e)||(e=>o(e)&&-1!==e.indexOf("%"))(c.width))&&oc(table),No(table),we(table,"data-mce-id"),((e,table)=>{L(gt(table,"tr"),(t=>{fl(e,t.dom),L(gt(t,"th,td"),(t=>{gl(e,t.dom)}))}))})(e,table),((e,t)=>{At(t,"td,th").each(C(uc,e))})(e,table),table.dom))).getOrNull()};var hc=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const pc="x-tinymce/dom-table-",mc=pc+"rows",fc=pc+"columns",gc=e=>{const t=hc.FakeClipboardItem(e);hc.write([t])},bc=e=>{var t;const n=null!==(t=hc.read())&&void 0!==t?t:[];return X(n,(t=>T.from(t.getType(e))))},vc=e=>{bc(e).isSome()&&hc.clear()},yc=e=>{e.fold(Ac,(e=>gc({[mc]:e})))},wc=()=>bc(mc),Ac=()=>vc(mc),xc=e=>{e.fold(Cc,(e=>gc({[fc]:e})))},Oc=()=>bc(fc),Cc=()=>vc(fc),_c=e=>Ii(zo(e),$o(e)),Sc=(e,t)=>{const n=$o(e),r=e=>table(e,n),c=t=>(e=>Di(zo(e),$o(e)))(e).bind((e=>r(e).map((table=>t(table,e))))),d=t=>{e.focus()},h=(t,n=!1)=>c(((table,r)=>{const o=ji(Ei(e),table,r);t(table,o,n).each(d)})),m=()=>c(((table,t)=>{const n=ji(Ei(e),table,t),r=Po(w,Oe.fromDom(e.getDoc()),T.none());return Vl(table,n,r)})),f=()=>c(((table,t)=>{const n=ji(Ei(e),table,t);return zl(table,n)})),v=(t,n)=>n().each((n=>{const r=P(n,(e=>Ke(e)));c(((table,n)=>{const o=Lo(Oe.fromDom(e.getDoc())),l=((e,t,n,r)=>({selection:gi(e),clipboard:n,generators:r}))(Ei(e),0,r,o);t(table,l).each(d)}))})),A=e=>(t,n)=>((e,t)=>ie(e,t)?T.from(e[t]):T.none())(n,"type").each((t=>{h(e(t),n.no_events)}));ee({mceTableSplitCells:()=>h(t.unmergeCells),mceTableMergeCells:()=>h(t.mergeCells),mceTableInsertRowBefore:()=>h(t.insertRowsBefore),mceTableInsertRowAfter:()=>h(t.insertRowsAfter),mceTableInsertColBefore:()=>h(t.insertColumnsBefore),mceTableInsertColAfter:()=>h(t.insertColumnsAfter),mceTableDeleteCol:()=>h(t.deleteColumn),mceTableDeleteRow:()=>h(t.deleteRow),mceTableCutCol:()=>f().each((e=>{xc(e),h(t.deleteColumn)})),mceTableCutRow:()=>m().each((e=>{yc(e),h(t.deleteRow)})),mceTableCopyCol:()=>f().each((e=>xc(e))),mceTableCopyRow:()=>m().each((e=>yc(e))),mceTablePasteColBefore:()=>v(t.pasteColsBefore,Oc),mceTablePasteColAfter:()=>v(t.pasteColsAfter,Oc),mceTablePasteRowBefore:()=>v(t.pasteRowsBefore,wc),mceTablePasteRowAfter:()=>v(t.pasteRowsAfter,wc),mceTableDelete:()=>_c(e).each((t=>{table(t,n).filter(_(n)).each((table=>{const cursor=Oe.fromText("");if($e(table,cursor),Qe(table),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{const t=e.dom.createRng();t.setStart(cursor.dom,0),t.setEnd(cursor.dom,0),e.selection.setRng(t),e.nodeChanged()}}))})),mceTableCellToggleClass:(t,n)=>{c((table=>{const t=Ei(e),r=U(t,(t=>e.formatter.match("tablecellclass",{value:n},t.dom))),o=r?e.formatter.remove:e.formatter.apply;L(t,(e=>o("tablecellclass",{value:n},e.dom))),bl(e,table.dom,vl)}))},mceTableToggleClass:(t,n)=>{c((table=>{e.formatter.toggle("tableclass",{value:n},table.dom),bl(e,table.dom,vl)}))},mceTableToggleCaption:()=>{_c(e).each((t=>{table(t,n).each((table=>{wt(table,"caption").fold((()=>{const caption=Oe.fromTag("caption");ze(caption,Oe.fromText("Caption")),((e,element,t)=>{Le(e,t).fold((()=>{ze(e,element)}),(e=>{Fe(e,element)}))})(table,caption,0),e.selection.setCursorLocation(caption.dom,0)}),(caption=>{me("caption")(t)&&Se("td",table).each((td=>e.selection.setCursorLocation(td.dom,0))),Qe(caption)})),bl(e,table.dom,yl)}))}))},mceTableSizingMode:(t,r)=>(t=>_c(e).each((r=>{Dl(e)||Il(e)||Tl(e)||table(r,n).each((table=>{"relative"!==t||ec(table)?"fixed"!==t||tc(table)?"responsive"!==t||nc(table)||sc(table):ic(table):oc(table),No(table),bl(e,table.dom,yl)}))})))(r),mceTableCellType:A((e=>"th"===e?t.makeCellsHeader:t.unmakeCellsHeader)),mceTableColType:A((e=>"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader)),mceTableRowType:A((e=>{switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}}))},((t,n)=>e.addCommand(n,t))),e.addCommand("mceInsertTable",((t,n)=>{((e,t,n,r={})=>{const o=e=>y(e)&&e>0;if(o(t)&&o(n)){const o=r.headerRows||0,l=r.headerColumns||0;return dc(e,n,t,l,o)}console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table.")})(e,n.rows,n.columns,n.options)})),e.addCommand("mceTableApplyCellStyle",((t,n)=>{const c=style=>"tablecell"+style.toLowerCase().replace("-","");if(!l(n))return;const d=Ei(e);if(0===d.length)return;const h=ne(n,((t,style)=>e.formatter.has(c(style))&&o(t)));(e=>{for(const t in e)if(J.call(e,t))return!1;return!0})(h)||(ee(h,((t,style)=>{const n=c(style);L(d,(r=>{""===t?e.formatter.remove(n,{value:null},r.dom,!0):e.formatter.apply(n,{value:t},r.dom)}))})),r(d[0]).each((table=>bl(e,table.dom,vl))))}))},kc=Js([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),jc={before:kc.before,on:kc.on,after:kc.after,cata:(e,t,n,r)=>e.fold(t,n,r),getStart:e=>e.fold(x,x,x)},Tc=(e,t)=>({selection:e,kill:t}),Ic=(e,element)=>{const t=e.document.createRange();return t.selectNode(element.dom),t},Dc=(e,element)=>{const t=e.document.createRange();return Ec(t,element),t},Ec=(e,element)=>e.selectNodeContents(element.dom),Rc=(e,t,n)=>{const r=e.document.createRange();var o;return o=r,t.fold((e=>{o.setStartBefore(e.dom)}),((e,t)=>{o.setStart(e.dom,t)}),(e=>{o.setStartAfter(e.dom)})),((e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,n)=>{e.setEnd(t.dom,n)}),(t=>{e.setEndAfter(t.dom)}))})(r,n),r},Bc=(e,t,n,r,o)=>{const l=e.document.createRange();return l.setStart(t.dom,n),l.setEnd(r.dom,o),l},Mc=rect=>({left:rect.left,top:rect.top,right:rect.right,bottom:rect.bottom,width:rect.width,height:rect.height}),Pc=Js([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Lc=(e,t,n)=>t(Oe.fromDom(n.startContainer),n.startOffset,Oe.fromDom(n.endContainer),n.endOffset),Fc=(e,t)=>{const n=((e,t)=>t.match({domRange:e=>({ltr:A(e),rtl:T.none}),relative:(t,n)=>({ltr:rn((()=>Rc(e,t,n))),rtl:rn((()=>T.some(Rc(e,n,t))))}),exact:(t,n,r,o)=>({ltr:rn((()=>Bc(e,t,n,r,o))),rtl:rn((()=>T.some(Bc(e,r,o,t,n))))})}))(e,t);return((e,t)=>{const n=t.ltr();if(n.collapsed)return t.rtl().filter((e=>!1===e.collapsed)).map((e=>Pc.rtl(Oe.fromDom(e.endContainer),e.endOffset,Oe.fromDom(e.startContainer),e.startOffset))).getOrThunk((()=>Lc(0,Pc.ltr,n)));return Lc(0,Pc.ltr,n)})(0,n)},$c=(e,t)=>Fc(e,t).match({ltr:(t,n,r,o)=>{const l=e.document.createRange();return l.setStart(t.dom,n),l.setEnd(r.dom,o),l},rtl:(t,n,r,o)=>{const l=e.document.createRange();return l.setStart(r.dom,o),l.setEnd(t.dom,n),l}});Pc.ltr,Pc.rtl;const Nc=(e,t,n,r)=>({start:e,soffset:t,finish:n,foffset:r}),zc=(e,t,n,r)=>({start:jc.on(e,t),finish:jc.on(n,r)}),Vc=(e,t)=>{const n=$c(e,t);return Nc(Oe.fromDom(n.startContainer),n.startOffset,Oe.fromDom(n.endContainer),n.endOffset)},Hc=zc,Wc=(e,t,n,r,o)=>ke(n,r)?T.none():ui(n,r,t).bind((t=>{const r=t.boxes.getOr([]);return r.length>1?(o(e,r,t.start,t.finish),T.some(Tc(T.some(Hc(n,0,n,Oo(n))),!0))):T.none()})),qc=(e,t)=>({item:e,mode:t}),Qc=(e,t,n,r=Uc)=>e.property().parent(t).map((p=>qc(p,r))),Uc=(e,t,n,r=Yc)=>n.sibling(e,t).map((p=>qc(p,r))),Yc=(e,t,n,r=Yc)=>{const o=e.property().children(t);return n.first(o).map((e=>qc(e,r)))},Gc=[{current:Qc,next:Uc,fallback:T.none()},{current:Uc,next:Yc,fallback:T.some(Qc)},{current:Yc,next:Yc,fallback:T.some(Uc)}],Kc=(e,t,n,r,o=Gc)=>V(o,(e=>e.current===n)).bind((n=>n.current(e,t,r,n.next).orThunk((()=>n.fallback.bind((n=>Kc(e,t,n,r))))))),Xc=()=>({sibling:(e,t)=>e.query().prevSibling(t),first:e=>e.length>0?T.some(e[e.length-1]):T.none()}),Zc=()=>({sibling:(e,t)=>e.query().nextSibling(t),first:e=>e.length>0?T.some(e[0]):T.none()}),Jc=(e,t,n,r,o,l)=>Kc(e,t,r,o).bind((t=>l(t.item)?T.none():n(t.item)?T.some(t.item):Jc(e,t.item,n,t.mode,o,l))),eu=e=>element=>0===e.property().children(element).length,tu=(e,t,n,r)=>Jc(e,t,n,Uc,Xc(),r),nu=(e,t,n,r)=>Jc(e,t,n,Uc,Zc(),r),ru=ti(),ou=(element,e)=>((e,t,n)=>tu(e,t,eu(e),n))(ru,element,e),iu=(element,e)=>((e,t,n)=>nu(e,t,eu(e),n))(ru,element,e),su=Js([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),au=e=>xt(e,"tr"),lu={...su,verify:(e,t,n,r,o,l,c)=>xt(r,"td,th",c).bind((n=>xt(t,"td,th",c).map((t=>ke(n,t)?ke(r,n)&&Oo(n)===o?l(t):su.none("in same cell"):ai(au,[n,t]).fold((()=>((e,t,n)=>{const r=e.getRect(t),o=e.getRect(n);return o.right>r.left&&o.left<r.right})(e,t,n)?su.success():l(t)),(e=>l(t))))))).getOr(su.none("default")),cata:(e,t,n,r,o)=>e.fold(t,n,r,o)},cu=(e,element)=>H(e,C(ke,element)),uu=me("br"),du=(e,t,n)=>t(e,n).bind((e=>de(e)&&0===wo(e).trim().length?du(e,t,n):T.some(e))),hu=(e,element,t,n)=>((element,e)=>Le(element,e).filter(uu).orThunk((()=>Le(element,e-1).filter(uu))))(element,t).bind((br=>n.traverse(br).fold((()=>du(br,n.gather,e).map(n.relative)),(e=>(element=>Ee(element).bind((e=>{const t=Pe(e);return cu(t,element).map((n=>((e,t,element,n)=>({parent:e,children:t,element:element,index:n}))(e,t,element,n)))})))(e).map((e=>jc.on(e.parent,e.index))))))),pu=(e,element,t,n)=>{const r=uu(element)?((e,element,t)=>t.traverse(element).orThunk((()=>du(element,t.gather,e))).map(t.relative))(e,element,n):hu(e,element,t,n);return r.map((e=>({start:e,finish:e})))},mu=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),fu=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),gu=(e,t,n)=>({left:e.left+t,top:e.top+n,right:e.right+t,bottom:e.bottom+n}),bu=rect=>({left:rect.left,top:rect.top,right:rect.right,bottom:rect.bottom}),vu=(e,element)=>T.some(e.getRect(element)),yu=(e,element,t)=>ue(element)?vu(e,element).map(bu):de(element)?((e,element,t)=>t>=0&&t<Oo(element)?e.getRangedRect(element,t,element,t+1):t>0?e.getRangedRect(element,t-1,element,t):T.none())(e,element,t).map(bu):T.none(),wu=(e,element)=>ue(element)?vu(e,element).map(bu):de(element)?e.getRangedRect(element,0,element,Oo(element)).map(bu):T.none(),Au=Js([{none:[]},{retry:["caret"]}]),xu=(e,element,t)=>{return(n=element,r=ya,bt(((s,e)=>e(s)),vt,n,r,o)).fold(k,(n=>wu(e,n).exists((e=>((e,t)=>e.left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right)(t,e)))));var n,r,o},Ou={point:e=>e.bottom,adjuster:(e,element,t,n,r)=>{const o=mu(r,5);return Math.abs(t.bottom-n.bottom)<1||t.top>r.bottom?Au.retry(o):t.top===r.bottom?Au.retry(mu(r,1)):xu(e,element,r)?Au.retry(gu(o,5,0)):Au.none()},move:mu,gather:iu},Cu=(e,t,n,r,o)=>0===o?T.some(r):((e,t,n)=>e.elementFromPoint(t,n).filter((e=>"table"===se(e))).isSome())(e,r.left,t.point(r))?((e,t,n,r,o)=>Cu(e,t,n,t.move(r,5),o))(e,t,n,r,o-1):e.situsFromPoint(r.left,t.point(r)).bind((l=>l.start.fold(T.none,(element=>wu(e,element).bind((l=>t.adjuster(e,element,l,n,r).fold(T.none,(r=>Cu(e,t,n,r,o-1))))).orThunk((()=>T.some(r)))),T.none))),_u=(e,t,n)=>{const r=e.move(n,5),o=Cu(t,e,n,r,100).getOr(r);return((e,t,n)=>e.point(t)>n.getInnerHeight()?T.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?T.some(-e.point(t)):T.none())(e,o,t).fold((()=>t.situsFromPoint(o.left,e.point(o))),(n=>(t.scrollBy(0,n),t.situsFromPoint(o.left,e.point(o)-n))))},Su={tryUp:C(_u,{point:e=>e.top,adjuster:(e,element,t,n,r)=>{const o=fu(r,5);return Math.abs(t.top-n.top)<1||t.bottom<r.top?Au.retry(o):t.bottom===r.top?Au.retry(fu(r,1)):xu(e,element,r)?Au.retry(gu(o,5,0)):Au.none()},move:fu,gather:ou}),tryDown:C(_u,Ou),getJumpSize:A(5)},ku=(e,t,n)=>e.getSelection().bind((r=>pu(t,r.finish,r.foffset,n).fold((()=>T.some(Bi(r.finish,r.foffset))),(o=>{const l=e.fromSitus(o);return(e=>lu.cata(e,(e=>T.none()),(()=>T.none()),(e=>T.some(Bi(e,0))),(e=>T.some(Bi(e,Oo(e))))))(lu.verify(e,r.finish,r.foffset,l.finish,l.foffset,n.failure,t))})))),ju=(e,t,element,n,r,o)=>0===o?T.none():Du(e,t,element,n,r).bind((l=>{const c=e.fromSitus(l),d=lu.verify(e,element,n,c.finish,c.foffset,r.failure,t);return lu.cata(d,(()=>T.none()),(()=>T.some(l)),(l=>ke(element,l)&&0===n?Tu(e,element,n,fu,r):ju(e,t,l,0,r,o-1)),(l=>ke(element,l)&&n===Oo(l)?Tu(e,element,n,mu,r):ju(e,t,l,Oo(l),r,o-1)))})),Tu=(e,element,t,n,r)=>yu(e,element,t).bind((t=>Iu(e,r,n(t,Su.getJumpSize())))),Iu=(e,t,n)=>{const r=Rn().browser;return r.isChromium()||r.isSafari()||r.isFirefox()?t.retry(e,n):T.none()},Du=(e,t,element,n,r)=>yu(e,element,n).bind((t=>Iu(e,r,t))),Eu=(e,table)=>{return vt(e,(e=>Ee(e).exists((p=>ke(p,table)))),t).isSome();var t},Ru=(e,t,n,r,o)=>xt(r,"td,th",t).bind((r=>xt(r,"table",t).bind((table=>Eu(o,table)?((e,t,n)=>ku(e,t,n).bind((r=>ju(e,t,r.element,r.offset,n,20).map(e.fromSitus))))(e,t,n).bind((e=>xt(e.finish,"td,th",t).map((t=>({start:r,finish:t,range:e}))))):T.none())))),Bu=(e,t,n,r,o,l)=>l(r,t).orThunk((()=>Ru(e,t,n,r,o).map((e=>{const t=e.range;return Tc(T.some(Hc(t.start,t.soffset,t.finish,t.foffset)),!0)})))),Mu=(e,t)=>xt(e,"tr",t).bind((e=>xt(e,"table",t).bind((table=>{const n=gt(table,"tr");return ke(e,n[0])?((element,e,t)=>tu(ru,element,e,t))(table,(element=>ko(element).isSome()),t).map((e=>{const t=Oo(e);return Tc(T.some(Hc(e,t,e,t)),!0)})):T.none()})))),Pu=(e,t)=>xt(e,"tr",t).bind((e=>xt(e,"table",t).bind((table=>{const n=gt(table,"tr");return ke(e,n[n.length-1])?((element,e,t)=>nu(ru,element,e,t))(table,(element=>So(element).isSome()),t).map((e=>Tc(T.some(Hc(e,0,e,0)),!0))):T.none()})))),select=(e,t,n,r,o,l,c)=>Ru(e,n,r,o,l).bind((e=>Wc(t,n,e.start,e.finish,c))),Lu=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Fu=()=>{const e=(e=>{const t=Lu(T.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(T.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:s=>{n(),t.set(T.some(s))}}})(w);return{...e,on:t=>e.get().each(t)}},$u=(e,t)=>xt(e,"td,th",t),Nu={traverse:Me,gather:iu,relative:jc.before,retry:Su.tryDown,failure:lu.failedDown},zu={traverse:Be,gather:ou,relative:jc.before,retry:Su.tryUp,failure:lu.failedUp},Vu=e=>t=>t===e,Hu=Vu(38),Wu=Vu(40),qu=e=>e>=37&&e<=40,Qu={isBackward:Vu(37),isForward:Vu(39)},Uu={isBackward:Vu(39),isForward:Vu(37)},Yu=Js([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Gu={domRange:Yu.domRange,relative:Yu.relative,exact:Yu.exact,exactFromRange:e=>Yu.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(e=>e.match({domRange:e=>Oe.fromDom(e.startContainer),relative:(e,t)=>jc.getStart(e),exact:(e,t,n,r)=>e}))(e);return element=t,Oe.fromDom(De(element).dom.defaultView);var element},range:Nc},Ku=(e,t,n)=>{var r,o;return T.from(null===(o=(r=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,t,n)).bind((t=>{if(null===t.offsetNode)return T.none();const n=e.dom.createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),T.some(n)}))},Xu=(e,t,n)=>{var r,o;return T.from(null===(o=(r=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,t,n))},Zu=document.caretPositionFromPoint?Ku:document.caretRangeFromPoint?Xu:T.none,Ju=(element,e)=>{const t=se(element);return"input"===t?jc.after(element):R(["br","img"],t)?0===e?jc.before(element):jc.after(element):jc.on(element,e)},ed=(e,t,n,r)=>{const o=((e,t,n,r)=>{const o=Ie(e).dom.createRange();return o.setStart(e.dom,t),o.setEnd(n.dom,r),o})(e,t,n,r),l=ke(e,n)&&t===r;return o.collapsed&&!l},nd=e=>T.from(e.getSelection()),rd=(e,t)=>{nd(e).each((e=>{e.removeAllRanges(),e.addRange(t)}))},od=(e,t,n,r,o)=>{const l=Bc(e,t,n,r,o);rd(e,l)},id=(e,t)=>Fc(e,t).match({ltr:(t,n,r,o)=>{od(e,t,n,r,o)},rtl:(t,n,r,o)=>{nd(e).each((l=>{if(l.setBaseAndExtent)l.setBaseAndExtent(t.dom,n,r.dom,o);else if(l.extend)try{((e,t,n,r,o,l)=>{t.collapse(n.dom,r),t.extend(o.dom,l)})(0,l,t,n,r,o)}catch(l){od(e,r,o,t,n)}else od(e,r,o,t,n)}))}}),sd=(e,t,n,r,o)=>{const l=((e,t,n,r)=>{const o=Ju(e,t),l=Ju(n,r);return Gu.relative(o,l)})(t,n,r,o);id(e,l)},ad=(e,t,n)=>{const r=((e,t)=>{const n=e.fold(jc.before,Ju,jc.after),r=t.fold(jc.before,Ju,jc.after);return Gu.relative(n,r)})(t,n);id(e,r)},ld=e=>{if(e.rangeCount>0){const t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return T.some(Nc(Oe.fromDom(t.startContainer),t.startOffset,Oe.fromDom(n.endContainer),n.endOffset))}return T.none()},cd=e=>{if(null===e.anchorNode||null===e.focusNode)return ld(e);{const t=Oe.fromDom(e.anchorNode),n=Oe.fromDom(e.focusNode);return ed(t,e.anchorOffset,n,e.focusOffset)?T.some(Nc(t,e.anchorOffset,n,e.focusOffset)):ld(e)}},ud=(e,element,t=!0)=>{const n=(t?Dc:Ic)(e,element);rd(e,n)},hd=e=>(e=>nd(e).filter((e=>e.rangeCount>0)).bind(cd))(e).map((e=>Gu.exact(e.start,e.soffset,e.finish,e.foffset))),pd=(e,t)=>(e=>{const t=e.getClientRects(),rect=t.length>0?t[0]:e.getBoundingClientRect();return rect.width>0||rect.height>0?T.some(rect).map(Mc):T.none()})($c(e,t)),md=(e,t,n)=>((e,t,n)=>{const r=Oe.fromDom(e.document);return Zu(r,t,n).map((e=>Nc(Oe.fromDom(e.startContainer),e.startOffset,Oe.fromDom(e.endContainer),e.endOffset)))})(e,t,n),fd=e=>({elementFromPoint:(t,n)=>Oe.fromPoint(Oe.fromDom(e.document),t,n),getRect:element=>element.dom.getBoundingClientRect(),getRangedRect:(t,n,r,o)=>{const l=Gu.exact(t,n,r,o);return pd(e,l)},getSelection:()=>hd(e).map((t=>Vc(e,t))),fromSitus:t=>{const n=Gu.relative(t.start,t.finish);return Vc(e,n)},situsFromPoint:(t,n)=>md(e,t,n).map((e=>zc(e.start,e.soffset,e.finish,e.foffset))),clearSelection:()=>{(e=>{nd(e).each((e=>e.removeAllRanges()))})(e)},collapseSelection:(t=!1)=>{hd(e).each((n=>n.fold((e=>e.collapse(t)),((n,r)=>{const o=t?n:r;ad(e,o,o)}),((n,r,o,l)=>{const c=t?n:o,d=t?r:l;sd(e,c,d,c,d)}))))},setSelection:t=>{sd(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:(t,n)=>{ad(e,t,n)},selectNode:element=>{ud(e,element,!1)},selectContents:element=>{ud(e,element)},getInnerHeight:()=>e.innerHeight,getScrollY:()=>(e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return yr(n,r)})(Oe.fromDom(e.document)).top,scrollBy:(t,n)=>{((e,t,n)=>{const r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollBy(e,t)})(t,n,Oe.fromDom(e.document))}}),gd=(e,t)=>({rows:e,cols:t}),bd=(e,t,n,r)=>{const o=((e,t,n,r)=>{const cursor=Fu(),o=cursor.clear,l=o=>{cursor.on((l=>{r.clearBeforeUpdate(t),$u(o.target,n).each((c=>{ui(l,c,n).each((n=>{const l=n.boxes.getOr([]);if(1===l.length){const n=l[0],c="false"===ds(n),d=Ot(cs(o.target),n,ke);c&&d&&(r.selectRange(t,l,n,n),e.selectContents(n))}else l.length>1&&(r.selectRange(t,l,n.start,n.finish),e.selectContents(c))}))}))}))};return{clearstate:o,mousedown:e=>{r.clear(t),$u(e.target,n).each(cursor.set)},mouseover:e=>{l(e)},mouseup:e=>{l(e),o()}}})(fd(e),t,n,r);return{clearstate:o.clearstate,mousedown:o.mousedown,mouseover:o.mouseover,mouseup:o.mouseup}},vd=(e,t,n,r)=>{const o=fd(e),l=()=>(r.clear(t),T.none());return{keydown:(e,c,d,h,m,f)=>{const v=e.raw,y=v.which,w=!0===v.shiftKey,A=di(t,r.selectedSelector).fold((()=>(qu(y)&&!w&&r.clearBeforeUpdate(t),Wu(y)&&w?C(select,o,t,n,Nu,h,c,r.selectRange):Hu(y)&&w?C(select,o,t,n,zu,h,c,r.selectRange):Wu(y)?C(Bu,o,n,Nu,h,c,Pu):Hu(y)?C(Bu,o,n,zu,h,c,Mu):T.none)),(e=>{const n=n=>()=>{const l=X(n,(n=>((e,t,n,r,o)=>pi(r,e,t,o.firstSelectedSelector,o.lastSelectedSelector).map((e=>(o.clearBeforeUpdate(n),o.selectRange(n,e.boxes,e.start,e.finish),e.boxes))))(n.rows,n.cols,t,e,r)));return l.fold((()=>hi(t,r.firstSelectedSelector,r.lastSelectedSelector).map((e=>{const n=Wu(y)||f.isForward(y)?jc.after:jc.before;return o.setRelativeSelection(jc.on(e.first,0),n(e.table)),r.clear(t),Tc(T.none(),!0)}))),(e=>T.some(Tc(T.none(),!0))))};return Wu(y)&&w?n([gd(1,0)]):Hu(y)&&w?n([gd(-1,0)]):f.isBackward(y)&&w?n([gd(0,-1),gd(-1,0)]):f.isForward(y)&&w?n([gd(0,1),gd(1,0)]):qu(y)&&!w?l:T.none}));return A()},keyup:(e,o,l,c,d)=>di(t,r.selectedSelector).fold((()=>{const h=e.raw,m=h.which;return!0===h.shiftKey&&qu(m)?((e,t,n,r,o,l,c)=>ke(n,o)&&r===l?T.none():xt(n,"td,th",t).bind((s=>xt(o,"td,th",t).bind((n=>Wc(e,t,s,n,c))))))(t,n,o,l,c,d,r.selectRange):T.none()}),T.none)}},yd=(element,e)=>{const t=ve(element,e);return void 0===t||""===t?[]:t.split(" ")},wd=element=>void 0!==element.dom.classList,Ad=(element,e)=>((element,e,t)=>{const n=yd(element,e).concat([t]);return ge(element,e,n.join(" ")),!0})(element,"class",e),xd=(element,e)=>{wd(element)?element.dom.classList.add(e):Ad(element,e)},Od=(element,e)=>wd(element)&&element.dom.classList.contains(e),Cd=(e,t,n)=>{const r=element=>{we(element,e.selected),we(element,e.firstSelected),we(element,e.lastSelected)},o=element=>{ge(element,e.selected,"1")},l=e=>{c(e),n()},c=t=>{const n=gt(t,`${e.selectedSelector},${e.firstSelectedSelector},${e.lastSelectedSelector}`);L(n,r)};return{clearBeforeUpdate:c,clear:l,selectRange:(n,r,c,d)=>{l(n),L(r,o),ge(c,e.firstSelected,"1"),ge(d,e.lastSelected,"1"),t(r,c,d)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},_d=()=>({tag:"none"}),Sd=e=>({tag:"multiple",elements:e}),kd=element=>({tag:"single",element:element}),jd=(table,e,t)=>{const n=ir.fromTable(table);return Cs(n,e).map((e=>{const r=vs(n,t,!1),{rows:o}=Kn(r),l=((e,t)=>{const n=e.slice(0,t[t.length-1].row+1),r=ys(n);return Q(r,(e=>{const n=e.cells.slice(0,t[t.length-1].column+1);return P(n,(e=>e.element))}))})(o,e),c=((e,t)=>{const n=e.slice(t[0].row+t[0].rowspan-1,e.length),r=ys(n);return Q(r,(e=>{const n=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return P(n,(e=>e.element))}))})(o,e);return{upOrLeftCells:l,downOrRightCells:c}}))},Td=e=>{const t=Oe.fromDom((e=>{if(it()&&f(e.target)){const t=Oe.fromDom(e.target);if(ue(t)&&ct(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return head(t)}}return T.from(e.target)})(e).getOr(e.target)),n=()=>e.stopPropagation(),r=()=>e.preventDefault(),o=(l=r,c=n,(...e)=>l(c.apply(null,e)));var l,c;return((e,t,n,r,o,l,c)=>({target:e,x:t,y:n,stop:r,prevent:o,kill:l,raw:c}))(t,e.clientX,e.clientY,n,r,o,e)},Id=(element,e,filter,t,n)=>{const r=((filter,e)=>t=>{filter(t)&&e(Td(t))})(filter,t);return element.dom.addEventListener(e,r,n),{unbind:C(Dd,element,e,r,n)}},Dd=(element,e,t,n)=>{element.dom.removeEventListener(e,t,n)},filter=j,Ed=(element,e,t)=>((element,e,filter,t)=>Id(element,e,filter,t,!1))(element,e,filter,t),Rd=Td,Bd=e=>!Od(Oe.fromDom(e.target),"ephox-snooker-resizer-bar"),Md=(e,t)=>{const n=((e,t,n)=>({get:()=>mi(e(),n).fold((()=>t().fold(_d,kd)),Sd)}))((()=>Oe.fromDom(e.getBody())),(()=>Di(zo(e),$o(e))),ki.selectedSelector),r=Cd(ki,((t,n,r)=>{table(n).each((table=>{const o=Ol(e),l=Po(w,Oe.fromDom(e.getDoc()),o),c=Ei(e),d=jd(table,{selection:c},l);((e,t,n,r,o)=>{e.dispatch("TableSelectionChange",{cells:t,start:n,finish:r,otherCells:o})})(e,t,n,r,d)}))}),(()=>(e=>{e.dispatch("TableSelectionClear")})(e)));e.on("init",(n=>{const o=e.getWin(),body=Fo(e),l=$o(e),c=bd(o,body,l,r),d=vd(o,body,l,r),h=((e,t,n,r)=>{const o=fd(e);return(e,l)=>{r.clearBeforeUpdate(t),ui(e,l,n).each((e=>{const n=e.boxes.getOr([]);r.selectRange(t,n,e.start,e.finish),o.selectContents(l),o.collapseSelection()}))}})(o,body,l,r);e.on("TableSelectorChange",(e=>h(e.start,e.finish)));const m=(t,n)=>{(e=>!0===e.raw.shiftKey)(t)&&(n.kill&&t.kill(),n.selection.each((t=>{const n=Gu.relative(t.start,t.finish),r=$c(o,n);e.selection.setRng(r)})))},f=e=>0===e.button,v=(()=>{const e=Lu(Oe.fromDom(body)),t=Lu(0);return{touchEnd:n=>{const r=Oe.fromDom(n.target);if(me("td")(r)||me("th")(r)){const o=e.get(),l=t.get();ke(o,r)&&n.timeStamp-l<300&&(n.preventDefault(),h(r,r))}e.set(r),t.set(n.timeStamp)}}})();e.on("dragstart",(e=>{c.clearstate()})),e.on("mousedown",(e=>{f(e)&&Bd(e)&&c.mousedown(Rd(e))})),e.on("mouseover",(e=>{var t;void 0!==(t=e).buttons&&0==(1&t.buttons)||!Bd(e)||c.mouseover(Rd(e))})),e.on("mouseup",(e=>{f(e)&&Bd(e)&&c.mouseup(Rd(e))})),e.on("touchend",v.touchEnd),e.on("keyup",(t=>{const n=Rd(t);if(n.raw.shiftKey&&qu(n.raw.which)){const t=e.selection.getRng(),r=Oe.fromDom(t.startContainer),o=Oe.fromDom(t.endContainer);d.keyup(n,r,t.startOffset,o,t.endOffset).each((e=>{m(n,e)}))}})),e.on("keydown",(n=>{const r=Rd(n);t.hide();const o=e.selection.getRng(),l=Oe.fromDom(o.startContainer),c=Oe.fromDom(o.endContainer),h=ur(Qu,Uu)(Oe.fromDom(e.selection.getStart()));d.keydown(r,l,o.startOffset,c,o.endOffset,h).each((e=>{m(r,e)})),t.show()})),e.on("NodeChange",(()=>{const t=e.selection,n=Oe.fromDom(t.getStart()),o=Oe.fromDom(t.getEnd());ai(table,[n,o]).fold((()=>r.clear(body)),w)}))})),e.on("PreInit",(()=>{e.serializer.addTempAttr(ki.firstSelected),e.serializer.addTempAttr(ki.lastSelected)}));return{getSelectedCells:()=>((e,t,n,r)=>{switch(e.tag){case"none":return t();case"single":return r(e.element);case"multiple":return n(e.elements)}})(n.get(),A([]),(e=>P(e,(e=>e.dom))),(e=>[e.dom])),clearSelectedCells:e=>r.clear(Oe.fromDom(e))}},Pd=e=>{let t=[];return{bind:e=>{if(void 0===e)throw new Error("Event bind error: undefined handler");t.push(e)},unbind:e=>{t=$(t,(t=>t!==e))},trigger:(...n)=>{const r={};L(e,((e,i)=>{r[e]=n[i]})),L(t,(e=>{e(r)}))}}},Ld=e=>({registry:map(e,(e=>({bind:e.bind,unbind:e.unbind}))),trigger:map(e,(e=>e.trigger))}),Fd=e=>e.slice(0).sort(),$d=(e,t,n)=>{if(0===t.length)throw new Error("You must specify at least one required field.");return((label,e)=>{if(!c(e))throw new Error("The "+label+" fields must be an array. Was: "+e+".");L(e,(a=>{if(!o(a))throw new Error("The value "+a+" in the "+label+" fields was not a string.")}))})("required",t),(e=>{const t=Fd(e);V(t,((s,i)=>i<t.length-1&&s===t[i+1])).each((e=>{throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}))})(t),r=>{const o=Z(r);U(t,(e=>R(o,e)))||((e,t)=>{throw new Error("All required keys ("+Fd(e).join(", ")+") were not specified. Specified keys were: "+Fd(t).join(", ")+".")})(t,o),e(t,o);const l=$(t,(e=>!n.validate(r[e],e)));return l.length>0&&((e,t)=>{throw new Error("All values need to be of type: "+t+". Keys ("+Fd(e).join(", ")+") were not.")})(l,n.label),r}},Nd=(e,t)=>{const n=$(t,(t=>!R(e,t)));n.length>0&&(e=>{throw new Error("Unsupported keys for object: "+Fd(e).join(", "))})(n)},zd=e=>((e,t)=>$d(e,t,{validate:v,label:"function"}))(Nd,e),Vd=zd(["compare","extract","mutate","sink"]),Hd=zd(["element","start","stop","destroy"]),Wd=zd(["forceDrop","drop","move","delayDrop"]),qd=()=>{let e=T.none();const t=Ld({move:Pd(["info"])});return{onEvent:(n,r)=>{r.extract(n).each((data=>{const n=((t,n)=>{const r=e.map((e=>t.compare(e,n)));return e=T.some(n),r})(r,data);n.each((e=>{t.trigger.move(e)}))}))},reset:()=>{e=T.none()},events:t.registry}},Qd=()=>{const e=(()=>{const e=Ld({move:Pd(["info"])});return{onEvent:w,reset:w,events:e.registry}})(),t=qd();let n=e;return{on:()=>{n.reset(),n=t},off:()=>{n.reset(),n=e},isOn:()=>n===t,onEvent:(e,t)=>{n.onEvent(e,t)},events:t.events}},Ud=(e,t,n)=>{let r=!1;const o=Ld({start:Pd([]),stop:Pd([])}),l=Qd(),c=()=>{f.stop(),l.isOn()&&(l.off(),o.trigger.stop())},h=((e,t)=>{let n=null;const r=()=>{d(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...o)=>{r(),n=setTimeout((()=>{n=null,e.apply(null,o)}),t)}}})(c,200);l.events.move.bind((n=>{t.mutate(e,n.info)}));const m=e=>(...t)=>{r&&e.apply(null,t)},f=t.sink(Wd({forceDrop:c,drop:m(c),move:m((e=>{h.cancel(),l.onEvent(e,t)})),delayDrop:m(h.throttle)}),n);return{element:f.element,go:e=>{f.start(e),l.on(),o.trigger.start()},on:()=>{r=!0},off:()=>{r=!1},destroy:()=>{f.destroy()},events:o.registry}},Yd=e=>{const t=e.replace(/\./g,"-");return{resolve:e=>t+"-"+e}},Gd=Yd("ephox-dragster").resolve;var Kd=Vd({compare:(e,t)=>yr(t.left-e.left,t.top-e.top),extract:e=>T.some(yr(e.x,e.y)),sink:(e,t)=>{const n=(e=>{const t={layerClass:Gd("blocker"),...e},div=Oe.fromTag("div");return ge(div,"role","presentation"),Mt(div,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),xd(div,Gd("blocker")),xd(div,t.layerClass),{element:A(div),destroy:()=>{Qe(div)}}})(t),r=Ed(n.element(),"mousedown",e.forceDrop),o=Ed(n.element(),"mouseup",e.drop),l=Ed(n.element(),"mousemove",e.move),c=Ed(n.element(),"mouseout",e.delayDrop);return Hd({element:n.element,start:e=>{ze(e,n.element())},stop:()=>{Qe(n.element())},destroy:()=>{n.destroy(),o.unbind(),l.unbind(),c.unbind(),r.unbind()}})},mutate:(e,t)=>{e.mutate(t.left,t.top)}});const Xd=Yd("ephox-snooker").resolve,Zd=()=>{const e=Ld({drag:Pd(["xDelta","yDelta","target"])});let t=T.none();const n=(()=>{const e=Ld({drag:Pd(["xDelta","yDelta"])});return{mutate:(t,n)=>{e.trigger.drag(t,n)},events:e.registry}})();n.events.drag.bind((n=>{t.each((t=>{e.trigger.drag(n.xDelta,n.yDelta,t)}))}));return{assign:e=>{t=T.some(e)},get:()=>t,mutate:n.mutate,events:e.registry}},Jd=Xd("resizer-bar"),eh=Xd("resizer-rows"),nh=Xd("resizer-cols"),rh=e=>{const t=gt(e.parent(),"."+Jd);L(t,Qe)},oh=(e,t,n)=>{const r=e.origin();L(t,(t=>{t.each((t=>{const o=n(r,t);xd(o,Jd),ze(e.parent(),o)}))}))},ih=(e,t,n,r)=>{oh(e,t,((e,t)=>{const o=((e,t,n,r,o)=>{const l=Oe.fromTag("div");return Mt(l,{position:"absolute",left:t-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),be(l,{"data-column":e,role:"presentation"}),l})(t.col,t.x-e.left,n.top-e.top,7,r);return xd(o,nh),o}))},sh=(e,t,n,r)=>{oh(e,t,((e,t)=>{const o=((e,t,n,r,o)=>{const l=Oe.fromTag("div");return Mt(l,{position:"absolute",left:t+"px",top:n-o/2+"px",height:o+"px",width:r+"px"}),be(l,{"data-row":e,role:"presentation"}),l})(t.row,n.left-e.left,t.y-e.top,r,7);return xd(o,eh),o}))},ah=(e,t,table,n,r)=>{const o=Ar(table),l=t.isResizable,c=n.length>0?Rr.positions(n,table):[],d=c.length>0?((e,t)=>Q(e.all,((e,i)=>t(e.element)?[i]:[])))(e,l):[],h=$(c,((e,i)=>B(d,(e=>i===e))));sh(t,h,o,Nn(table));const m=r.length>0?Mr.positions(r,table):[],f=m.length>0?((e,t)=>{const n=[];return M(e.grid.columns,(r=>{const o=ir.getColumnAt(e,r).map((col=>col.element));o.forall(t)&&n.push(r)})),$(n,(n=>{const r=ir.filterItems(e,(e=>e.column===n));return U(r,(e=>t(e.element)))}))})(e,l):[],v=$(m,((e,i)=>B(f,(e=>i===e))));ih(t,v,o,fr(table))},lh=(e,table)=>{if(rh(e),e.isResizable(table)){const t=ir.fromTable(table),n=lr(t),r=sr(t);ah(t,e,table,n,r)}},ch=(e,t)=>{const n=gt(e.parent(),"."+Jd);L(n,t)},uh=e=>{ch(e,(e=>{Bt(e,"display","none")}))},dh=e=>{ch(e,(e=>{Bt(e,"display","block")}))},hh=Xd("resizer-bar-dragging"),ph=e=>{const t=Zd(),n=((e,t={})=>{var n;const r=null!==(n=t.mode)&&void 0!==n?n:Kd;return Ud(e,r,t)})(t,{});let r=T.none();const o=(element,e)=>T.from(ve(element,e));t.events.drag.bind((e=>{o(e.target,"data-row").each((t=>{const n=Wt(e.target,"top");Bt(e.target,"top",n+e.yDelta+"px")})),o(e.target,"data-column").each((t=>{const n=Wt(e.target,"left");Bt(e.target,"left",n+e.xDelta+"px")}))}));const l=(e,t)=>Wt(e,t)-Nt(e,"data-initial-"+t,0);n.events.stop.bind((()=>{t.get().each((t=>{r.each((table=>{o(t,"data-row").each((e=>{const n=l(t,"top");we(t,"data-initial-top"),f.trigger.adjustHeight(table,n,parseInt(e,10))})),o(t,"data-column").each((e=>{const n=l(t,"left");we(t,"data-initial-left"),f.trigger.adjustWidth(table,n,parseInt(e,10))})),lh(e,table)}))}))}));const c=(r,o)=>{f.trigger.startAdjust(),t.assign(r),ge(r,"data-initial-"+o,Wt(r,o)),xd(r,hh),Bt(r,"opacity","0.2"),n.go(e.parent())},d=Ed(e.parent(),"mousedown",(e=>{var element;element=e.target,Od(element,eh)&&c(e.target,"top"),(element=>Od(element,nh))(e.target)&&c(e.target,"left")})),h=t=>ke(t,e.view()),m=Ed(e.view(),"mouseover",(t=>{var n;(n=t.target,xt(n,"table",h).filter(us)).fold((()=>{ut(t.target)&&rh(e)}),(table=>{r=T.some(table),lh(e,table)}))})),f=Ld({adjustHeight:Pd(["table","delta","row"]),adjustWidth:Pd(["table","delta","column"]),startAdjust:Pd([])});return{destroy:()=>{d.unbind(),m.unbind(),n.destroy(),rh(e)},refresh:t=>{lh(e,t)},on:n.on,off:n.off,hideBars:C(uh,e),showBars:C(dh,e),events:f.registry}},mh=(e,t,n)=>{const r=Rr,o=Mr,l=ph(e),c=Ld({beforeResize:Pd(["table","type"]),afterResize:Pd(["table","type"]),startDrag:Pd([])});return l.events.adjustHeight.bind((e=>{const table=e.table;c.trigger.beforeResize(table,"row");const t=r.delta(e.delta,table);aa(table,t,e.row,r),c.trigger.afterResize(table,"row")})),l.events.startAdjust.bind((e=>{c.trigger.startDrag()})),l.events.adjustWidth.bind((e=>{const table=e.table;c.trigger.beforeResize(table,"col");const r=o.delta(e.delta,table),l=n(table);sa(table,r,e.column,t,l),c.trigger.afterResize(table,"col")})),{on:l.on,off:l.off,refreshBars:l.refresh,hideBars:l.hideBars,showBars:l.showBars,destroy:l.destroy,events:c.registry}},fh=(element,e)=>{const t=he(element)?(element=>Oe.fromDom(De(element).dom.documentElement))(element):element;return{parent:A(t),view:A(element),origin:A(yr(0,0)),isResizable:e}},gh=(e,t,n)=>({parent:A(t),view:A(e),origin:A(yr(0,0)),isResizable:n}),bh=()=>{const e=Oe.fromTag("div");return Mt(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),ze(ht(Oe.fromDom(document)),e),e},vh=e=>f(e)&&"TABLE"===e.nodeName,yh="bar-",wh=e=>"false"!==ve(e,"data-mce-resize"),Ah=e=>{const t=Fu(),n=Fu(),r=Fu();let o,l;const c=table=>Ll(e,table),d=()=>Sl(e)?Ui():Qi(),h=(table,t,n)=>{const r=Tt(t,"e");if(""===l&&oc(table),n!==o&&""!==l){Bt(table,"width",l);const t=d(),h=c(table),col=Sl(e)||r?(table=>Yi(table).columns)(table)-1:0;sa(table,n-o,col,t,h)}else if((e=>/^(\d+(\.\d+)?)%$/.test(e))(l)){const e=parseFloat(l.replace("%",""));Bt(table,"width",n*e/o+"%")}(e=>/^(\d+(\.\d+)?)px$/.test(e))(l)&&(table=>{const e=ir.fromTable(table);ir.hasColumns(e)||L(Kt(table),(e=>{const t=Pt(e,"width");Bt(e,"width",t),we(e,"width")}))})(table)},m=()=>{n.on((e=>{e.destroy()})),r.on((t=>{((e,t)=>{e.inline&&Qe(t.parent())})(e,t)}))};e.on("init",(()=>{const o=((e,t)=>e.inline?gh(Oe.fromDom(e.getBody()),bh(),t):fh(Oe.fromDom(e.getDoc()),t))(e,wh);if(r.set(o),(e=>{const t=e.options.get("object_resizing");return R(t.split(","),"table")})(e)&&El(e)){const r=d(),l=mh(o,r,c);l.on(),l.events.startDrag.bind((n=>{t.set(e.selection.getRng())})),l.events.beforeResize.bind((t=>{const n=t.table.dom;((e,t,n,r,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:r,origin:o})})(e,n,Vo(n),Ho(n),yh+t.type)})),l.events.afterResize.bind((n=>{const table=n.table,r=table.dom;No(table),t.on((t=>{e.selection.setRng(t),e.focus()})),((e,t,n,r,o)=>{e.dispatch("ObjectResized",{target:t,width:n,height:r,origin:o})})(e,r,Vo(r),Ho(r),yh+n.type),e.undoManager.add()})),n.set(l)}})),e.on("ObjectResizeStart",(t=>{const n=t.target;if(vh(n)){const table=Oe.fromDom(n);L(e.dom.select(".mce-clonedresizable"),(t=>{e.dom.addClass(t,"mce-"+_l(e)+"-columns")})),!tc(table)&&Il(e)?ic(table):!ec(table)&&Tl(e)&&oc(table),nc(table)&&jt(t.origin,yh)&&oc(table),o=t.width,l=Dl(e)?"":((e,t)=>{const n=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width");return T.from(n).filter(Dt)})(e,n).getOr("")}})),e.on("ObjectResized",(t=>{const n=t.target;if(vh(n)){const table=Oe.fromDom(n),r=t.origin;jt(r,"corner-")&&h(table,r,t.width),No(table),bl(e,table.dom,vl)}})),e.on("SwitchMode",(()=>{n.on((t=>{e.mode.isReadOnly()?t.hideBars():t.showBars()}))})),e.on("remove",(()=>{m()}));return{refresh:table=>{n.on((e=>e.refreshBars(Oe.fromDom(table))))},hide:()=>{n.on((e=>e.hideBars()))},show:()=>{n.on((e=>e.showBars()))}}},xh=e=>{(e=>{const t=e.options.register;t("table_clone_elements",{processor:"string[]"}),t("table_use_colgroups",{processor:"boolean",default:!0}),t("table_header_type",{processor:e=>{const t=R(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),t("table_sizing_mode",{processor:"string",default:"auto"}),t("table_default_attributes",{processor:"object",default:{border:"1"}}),t("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),t("table_column_resizing",{processor:e=>{const t=R(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),t("table_resize_bars",{processor:"boolean",default:!0}),t("table_style_by_css",{processor:"boolean",default:!0})})(e);const t=Ah(e),n=Md(e,t),r=Fl(e,t,n);return Sc(e,r),((e,t)=>{const n=$o(e),r=t=>Di(zo(e)).bind((r=>table(r,n).map((table=>{const n=ji(Ei(e),table,r);return t(table,n)})))).getOr("");ee({mceTableRowType:()=>r(t.getTableRowType),mceTableCellType:()=>r(t.getTableCellType),mceTableColType:()=>r(t.getTableColType)},((t,n)=>e.addQueryValueHandler(n,t)))})(e,r),Ri(e,r),{getSelectedCells:n.getSelectedCells,clearSelectedCells:n.clearSelectedCells}},Oh=e=>({table:xh(e)});e.add("dom",Oh)}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=Object.getPrototypeOf,n=(e,t,n)=>{var r;return!!n(e,t.prototype)||(null===(r=e.constructor)||void 0===r?void 0:r.name)===t.name},r=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&n(e,String,((e,t)=>t.isPrototypeOf(e)))?"string":t})(t)===e,o=e=>t=>typeof t===e,l=r("string"),c=r("object"),d=e=>((e,r)=>c(e)&&n(e,r,((e,n)=>t(e)===n)))(e,Object),h=r("array"),m=(f=null,a=>f===a);var f;const v=o("boolean"),y=a=>!(a=>null==a)(a),w=o("function"),A=o("number"),x=()=>{};class O{constructor(e,t){this.tag=e,this.value=t}static some(e){return new O(!0,e)}static none(){return O.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?O.some(e(this.value)):O.none()}bind(e){return this.tag?e(this.value):O.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:O.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return y(e)?O.some(e):O.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}O.singletonNone=new O(!1);const C=Object.keys,_=Object.hasOwnProperty,S=(e,t,n,r)=>{((e,t)=>{const n=C(e);for(let r=0,o=n.length;r<o;r++){const i=n[r];t(e[i],i)}})(e,((e,i)=>{(t(e,i)?n:r)(e,i)}))},k=(e,t)=>_.call(e,t),j=Array.prototype.push,T=e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!h(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);j.apply(t,e[i])}return t},head=e=>((e,i)=>i>=0&&i<e.length?O.some(e[i]):O.none())(e,0);"undefined"!=typeof window?window:Function("return this;")();const I=(element,e,t)=>{((e,t,n)=>{if(!(l(n)||v(n)||A(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(element.dom,e,t)},D=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},E={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return D(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return D(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return D(t)},fromDom:D,fromPoint:(e,t,n)=>O.from(e.dom.elementFromPoint(t,n)).map(D)};var R=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),B=tinymce.util.Tools.resolve("tinymce.util.URI");const M=s=>s.length>0,option=e=>t=>t.options.get(e),P=e=>{const t=e.options.register;t("image_dimensions",{processor:"boolean",default:!0}),t("image_advtab",{processor:"boolean",default:!1}),t("image_uploadtab",{processor:"boolean",default:!0}),t("image_prepend_url",{processor:"string",default:""}),t("image_class_list",{processor:"object[]"}),t("image_description",{processor:"boolean",default:!0}),t("image_title",{processor:"boolean",default:!1}),t("image_caption",{processor:"boolean",default:!1}),t("image_list",{processor:e=>{const t=!1===e||l(e)||((e,t)=>{if(h(e)){for(let i=0,n=e.length;i<n;++i)if(!t(e[i]))return!1;return!0}return!1})(e,c)||w(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},L=option("image_dimensions"),F=option("image_advtab"),$=option("image_uploadtab"),N=option("image_prepend_url"),z=option("image_class_list"),V=option("image_description"),H=option("image_title"),W=option("image_caption"),Q=option("image_list"),U=option("a11y_advanced_options"),Y=option("automatic_uploads"),G=(e,t)=>Math.max(parseInt(e,10),parseInt(t,10)),K=e=>(e&&(e=e.replace(/px$/,"")),e),X=e=>(e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e),Z=e=>"IMG"===e.nodeName&&(e.hasAttribute("data-mce-object")||e.hasAttribute("data-mce-placeholder")),J=(e,t)=>{const n=e.options.get;return B.isDomSafe(t,"img",{allow_html_data_urls:n("allow_html_data_urls"),allow_script_urls:n("allow_script_urls"),allow_svg_data_urls:n("allow_svg_data_urls")})},ee=R.DOM,te=image=>image.style.marginLeft&&image.style.marginRight&&image.style.marginLeft===image.style.marginRight?K(image.style.marginLeft):"",ne=image=>image.style.marginTop&&image.style.marginBottom&&image.style.marginTop===image.style.marginBottom?K(image.style.marginTop):"",re=image=>image.style.borderWidth?K(image.style.borderWidth):"",oe=(image,e)=>{var t;return image.hasAttribute(e)&&null!==(t=image.getAttribute(e))&&void 0!==t?t:""},ie=image=>null!==image.parentNode&&"FIGURE"===image.parentNode.nodeName,se=(image,e,t)=>{""===t||null===t?image.removeAttribute(e):image.setAttribute(e,t)},ae=image=>{ie(image)?(image=>{const e=image.parentNode;y(e)&&(ee.insertAfter(image,e),ee.remove(e))})(image):(image=>{const e=ee.create("figure",{class:"image"});ee.insertAfter(e,image),e.appendChild(image),e.appendChild(ee.create("figcaption",{contentEditable:"true"},"Caption")),e.contentEditable="false"})(image)},le=(image,e)=>{const t=image.getAttribute("style"),n=e(null!==t?t:"");n.length>0?(image.setAttribute("style",n),image.setAttribute("data-mce-style",n)):image.removeAttribute("style")},ce=(e,t)=>(image,e,n)=>{const r=image.style;r[e]?(r[e]=X(n),le(image,t)):se(image,e,n)},ue=(image,e)=>image.style[e]?K(image.style[e]):oe(image,e),de=(image,e)=>{const t=X(e);image.style.marginLeft=t,image.style.marginRight=t},he=(image,e)=>{const t=X(e);image.style.marginTop=t,image.style.marginBottom=t},pe=(image,e)=>{const t=X(e);image.style.borderWidth=t},me=(image,e)=>{image.style.borderStyle=e},fe=image=>{var e;return null!==(e=image.style.borderStyle)&&void 0!==e?e:""},ge=e=>y(e)&&"FIGURE"===e.nodeName,be=image=>0===ee.getAttrib(image,"alt").length&&"presentation"===ee.getAttrib(image,"role"),ve=image=>be(image)?"":oe(image,"alt"),ye=(e,data)=>{var t;const image=document.createElement("img");return se(image,"style",data.style),(te(image)||""!==data.hspace)&&de(image,data.hspace),(ne(image)||""!==data.vspace)&&he(image,data.vspace),(re(image)||""!==data.border)&&pe(image,data.border),(fe(image)||""!==data.borderStyle)&&me(image,data.borderStyle),e(null!==(t=image.getAttribute("style"))&&void 0!==t?t:"")},we=(e,image)=>({src:oe(image,"src"),alt:ve(image),title:oe(image,"title"),width:ue(image,"width"),height:ue(image,"height"),class:oe(image,"class"),style:e(oe(image,"style")),caption:ie(image),hspace:te(image),vspace:ne(image),border:re(image),borderStyle:fe(image),isDecorative:be(image)}),Ae=(image,e,t,n,r)=>{t[n]!==e[n]&&r(image,n,String(t[n]))},xe=(image,e,t)=>{if(t){ee.setAttrib(image,"role","presentation");const e=E.fromDom(image);I(e,"alt","")}else{if(m(e)){const e=E.fromDom(image);n="alt",e.dom.removeAttribute(n)}else{const t=E.fromDom(image);I(t,"alt",e)}"presentation"===ee.getAttrib(image,"role")&&ee.setAttrib(image,"role","")}var n},Oe=(e,t)=>(image,n,r)=>{e(image,r),le(image,t)},Ce=(e,t,image)=>{const n=we(e,image);Ae(image,n,t,"caption",((image,e,t)=>ae(image))),Ae(image,n,t,"src",se),Ae(image,n,t,"title",se),Ae(image,n,t,"width",ce(0,e)),Ae(image,n,t,"height",ce(0,e)),Ae(image,n,t,"class",se),Ae(image,n,t,"style",Oe(((image,e)=>se(image,"style",e)),e)),Ae(image,n,t,"hspace",Oe(de,e)),Ae(image,n,t,"vspace",Oe(he,e)),Ae(image,n,t,"border",Oe(pe,e)),Ae(image,n,t,"borderStyle",Oe(me,e)),((image,e,t)=>{t.alt===e.alt&&t.isDecorative===e.isDecorative||xe(image,t.alt,t.isDecorative)})(image,n,t)},_e=(e,t)=>{const n=(e=>{if(e.margin){const t=String(e.margin).split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e})(e.dom.styles.parse(t)),r=e.dom.styles.parse(e.dom.styles.serialize(n));return e.dom.styles.serialize(r)},Se=e=>{const t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||Z(t))?null:t},ke=(e,figure)=>{var t;const n=e.dom,r=((e,t)=>{const n={};var r;return S(e,t,(r=n,(e,i)=>{r[i]=e}),x),n})(e.schema.getTextBlockElements(),((t,n)=>!e.schema.isValidChild(n,"figure"))),o=n.getParent(figure.parentNode,(e=>{return t=r,n=e.nodeName,k(t,n)&&void 0!==t[n]&&null!==t[n];var t,n}),e.getBody());return o&&null!==(t=n.split(o,figure))&&void 0!==t?t:figure},je=(e,data)=>{const t=((e,data)=>{const image=document.createElement("img");if(Ce(e,{...data,caption:!1},image),xe(image,data.alt,data.isDecorative),data.caption){const figure=ee.create("figure",{class:"image"});return figure.appendChild(image),figure.appendChild(ee.create("figcaption",{contentEditable:"true"},"Caption")),figure.contentEditable="false",figure}return image})((t=>_e(e,t)),data);e.dom.setAttrib(t,"data-mce-id","__mcenew"),e.focus(),e.selection.setContent(t.outerHTML);const n=e.dom.select('*[data-mce-id="__mcenew"]')[0];if(e.dom.setAttrib(n,"data-mce-id",null),ge(n)){const figure=ke(e,n);e.selection.select(figure)}else e.selection.select(n)},Te=(e,data)=>{const image=Se(e);if(image)if(Ce((t=>_e(e,t)),data,image),((e,image)=>{e.dom.setAttrib(image,"src",image.getAttribute("src"))})(e,image),ge(image.parentNode)){const figure=image.parentNode;ke(e,figure),e.selection.select(image.parentNode)}else e.selection.select(image),((e,data,t)=>{const n=()=>{t.onload=t.onerror=null,e.selection&&(e.selection.select(t),e.nodeChanged())};t.onload=()=>{data.width||data.height||!L(e)||e.dom.setAttribs(t,{width:String(t.clientWidth),height:String(t.clientHeight)}),n()},t.onerror=n})(e,data,image)},Ie=(e,t)=>{const image=Se(e);if(image){const data={...we((t=>_e(e,t)),image),...t},n=((e,data)=>{const t=data.src;return{...data,src:J(e,t)?t:""}})(e,data);data.src?Te(e,n):((e,image)=>{if(image){const t=e.dom.is(image.parentNode,"figure.image")?image.parentNode:image;e.dom.remove(t),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}})(e,image)}else t.src&&je(e,{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1,...t})},De=(Ee=(e,t)=>d(e)&&d(t)?De(e,t):t,(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)k(r,e)&&(t[e]=Ee(t[e],r[e]))}return t});var Ee,Re=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Be=tinymce.util.Tools.resolve("tinymce.util.Tools");const Me=e=>l(e.value)?e.value:"",Pe=(e,t)=>{const n=[];return Be.each(e,(e=>{const text=(e=>l(e.text)?e.text:l(e.title)?e.title:"")(e);if(void 0!==e.menu){const r=Pe(e.menu,t);n.push({text:text,items:r})}else{const r=t(e);n.push({text:text,value:r})}})),n},Le=(e=Me)=>t=>t?O.from(t).map((t=>Pe(t,e))):O.none(),Fe=(e,t)=>((e,t)=>{for(let i=0;i<e.length;i++){const n=t(e[i],i);if(n.isSome())return n}return O.none()})(e,(e=>(e=>k(e,"items"))(e)?Fe(e.items,t):e.value===t?O.some(e):O.none())),$e=Le,Ne=e=>Le(Me)(e),ze=(e,t)=>e.bind((e=>Fe(e,t))),Ve=e=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}),He=e=>{const t=$e((t=>e.convertURL(t.value||t.url||"","src"))),n=new Promise((n=>{((e,t)=>{const n=Q(e);l(n)?fetch(n).then((e=>{e.ok&&e.json().then(t)})):w(n)?n(t):t(n)})(e,(e=>{n(t(e).map((e=>T([[{text:"None",value:""}],e]))))}))})),r=Ne(z(e)),o=F(e),c=$(e),d=(e=>M(e.options.get("images_upload_url")))(e),h=(e=>y(e.options.get("images_upload_handler")))(e),image=(e=>{const image=Se(e);return image?we((t=>_e(e,t)),image):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}})(e),m=V(e),f=H(e),v=L(e),A=W(e),x=U(e),C=Y(e),_=O.some(N(e)).filter((e=>l(e)&&e.length>0));return n.then((e=>({image:image,imageList:e,classList:r,hasAdvTab:o,hasUploadTab:c,hasUploadUrl:d,hasUploadHandler:h,hasDescription:m,hasImageTitle:f,hasDimensions:v,hasImageCaption:A,prependURL:_,hasAccessibilityOptions:x,automaticUploads:C})))},We=e=>{const t=e.imageList.map((e=>({name:"images",type:"listbox",label:"Image list",items:e}))),n={name:"alt",type:"input",label:"Alternative description",enabled:!(e.hasAccessibilityOptions&&e.image.isDecorative)},r=e.classList.map((e=>({name:"classes",type:"listbox",label:"Class",items:e})));return T([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],t.toArray(),e.hasAccessibilityOptions&&e.hasDescription?[{type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]}]:[],e.hasDescription?[n]:[],e.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],e.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[{...(o=e.classList.isSome()&&e.hasImageCaption,o?{type:"grid",columns:2}:{type:"panel"}),items:T([r.toArray(),e.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])}]]);var o},qe=e=>({title:"General",name:"general",items:We(e)}),Qe=We,Ue=e=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}),Ye=image=>({src:{value:image.src,meta:{}},images:image.src,alt:image.alt,title:image.title,dimensions:{width:image.width,height:image.height},classes:image.class,caption:image.caption,style:image.style,vspace:image.vspace,border:image.border,hspace:image.hspace,borderstyle:image.borderStyle,fileinput:[],isDecorative:image.isDecorative}),Ge=(data,e)=>({src:data.src.value,alt:null!==data.alt&&0!==data.alt.length||!e?data.alt:null,title:data.title,width:data.dimensions.width,height:data.dimensions.height,class:data.classes,style:data.style,caption:data.caption,hspace:data.hspace,vspace:data.vspace,border:data.border,borderStyle:data.borderstyle,isDecorative:data.isDecorative}),Ke=(e,t)=>{const data=t.getData();((e,t)=>/^(?:[a-zA-Z]+:)?\/\//.test(t)?O.none():e.prependURL.bind((e=>t.substring(0,e.length)!==e?O.some(e+t):O.none())))(e,data.src.value).each((e=>{t.setData({src:{value:e,meta:data.src.meta}})}))},Xe=(e,t)=>{const data=t.getData(),meta=data.src.meta;if(void 0!==meta){const n=De({},data);((e,data,meta)=>{e.hasDescription&&l(meta.alt)&&(data.alt=meta.alt),e.hasAccessibilityOptions&&(data.isDecorative=meta.isDecorative||data.isDecorative||!1),e.hasImageTitle&&l(meta.title)&&(data.title=meta.title),e.hasDimensions&&(l(meta.width)&&(data.dimensions.width=meta.width),l(meta.height)&&(data.dimensions.height=meta.height)),l(meta.class)&&ze(e.classList,meta.class).each((e=>{data.classes=e.value})),e.hasImageCaption&&v(meta.caption)&&(data.caption=meta.caption),e.hasAdvTab&&(l(meta.style)&&(data.style=meta.style),l(meta.vspace)&&(data.vspace=meta.vspace),l(meta.border)&&(data.border=meta.border),l(meta.hspace)&&(data.hspace=meta.hspace),l(meta.borderstyle)&&(data.borderstyle=meta.borderstyle))})(e,n,meta),t.setData(n)}},Ze=(e,t,n,r)=>{Ke(t,r),Xe(t,r),((e,t,n,r)=>{const data=r.getData(),o=data.src.value,meta=data.src.meta||{};meta.width||meta.height||!t.hasDimensions||(M(o)?e.imageSize(o).then((e=>{n.open&&r.setData({dimensions:e})})).catch((e=>console.error(e))):r.setData({dimensions:{width:"",height:""}}))})(e,t,n,r),((e,t,n)=>{const data=n.getData(),image=ze(e.imageList,data.src.value);t.prevImage=image,n.setData({images:image.map((e=>e.value)).getOr("")})})(t,n,r)},Je=(e,t,n,r)=>{const data=r.getData();r.block("Uploading image"),head(data.fileinput).fold((()=>{r.unblock()}),(o=>{const l=URL.createObjectURL(o),c=()=>{r.unblock(),URL.revokeObjectURL(l)},d=o=>{r.setData({src:{value:o,meta:{}}}),r.showTab("general"),Ze(e,t,n,r)};var h;(h=o,new Promise(((e,t)=>{const n=new FileReader;n.onload=()=>{e(n.result)},n.onerror=()=>{var e;t(null===(e=n.error)||void 0===e?void 0:e.message)},n.readAsDataURL(h)}))).then((n=>{const h=e.createBlobCache(o,l,n);t.automaticUploads?e.uploadImage(h).then((e=>{d(e.url),c()})).catch((t=>{c(),e.alertErr(t)})):(e.addToBlobCache(h),d(h.blobUri()),r.unblock())}))}))},et=(e,t,n)=>(r,o)=>{"src"===o.name?Ze(e,t,n,r):"images"===o.name?((e,t,n,r)=>{const data=r.getData(),image=ze(t.imageList,data.images);image.each((img=>{const e=""===data.alt||n.prevImage.map((image=>image.text===data.alt)).getOr(!1);e?""===img.value?r.setData({src:img,alt:n.prevAlt}):r.setData({src:img,alt:img.text}):r.setData({src:img})})),n.prevImage=image,Ze(e,t,n,r)})(e,t,n,r):"alt"===o.name?n.prevAlt=r.getData().alt:"fileinput"===o.name?Je(e,t,n,r):"isDecorative"===o.name&&r.setEnabled("alt",!r.getData().isDecorative)},tt=e=>()=>{e.open=!1},nt=e=>{if(e.hasAdvTab||e.hasUploadUrl||e.hasUploadHandler){return{type:"tabpanel",tabs:T([[qe(e)],e.hasAdvTab?[Ve(e)]:[],e.hasUploadTab&&(e.hasUploadUrl||e.hasUploadHandler)?[Ue(e)]:[]])}}return{type:"panel",items:Qe(e)}},ot=(e,t,n)=>r=>{const data=De(Ye(t.image),r.getData()),o={...data,style:ye(n.normalizeCss,Ge(data,!1))};e.execCommand("mceUpdateImage",!1,Ge(o,t.hasAccessibilityOptions)),e.editorUpload.uploadImagesAuto(),r.close()},it=e=>t=>J(e,t)?(e=>new Promise((t=>{const img=document.createElement("img"),n=e=>{img.onload=img.onerror=null,img.parentNode&&img.parentNode.removeChild(img),t(e)};img.onload=()=>{const e={width:G(img.width,img.clientWidth),height:G(img.height,img.clientHeight)};n(Promise.resolve(e))},img.onerror=()=>{n(Promise.reject(`Failed to get image dimensions for: ${e}`))};const style=img.style;style.visibility="hidden",style.position="fixed",style.bottom=style.left="0px",style.width=style.height="auto",document.body.appendChild(img),img.src=e})))(e.documentBaseURI.toAbsolute(t)).then((e=>({width:String(e.width),height:String(e.height)}))):Promise.resolve({width:"",height:""}),st=e=>(t,n,r)=>{var o;return e.editorUpload.blobCache.create({blob:t,blobUri:n,name:null===(o=t.name)||void 0===o?void 0:o.replace(/\.[^\.]+$/,""),filename:t.name,base64:r.split(",")[1]})},at=e=>t=>{e.editorUpload.blobCache.add(t)},lt=e=>t=>{e.windowManager.alert(t)},ct=e=>t=>_e(e,t),ut=e=>t=>e.dom.parseStyle(t),ht=e=>(t,n)=>e.dom.serializeStyle(t,n),pt=e=>t=>Re(e).upload([t],!1).then((e=>{var t;return 0===e.length?Promise.reject("Failed to upload image"):!1===e[0].status?Promise.reject(null===(t=e[0].error)||void 0===t?void 0:t.message):e[0]})),mt=e=>{const t={imageSize:it(e),addToBlobCache:at(e),createBlobCache:st(e),alertErr:lt(e),normalizeCss:ct(e),parseStyle:ut(e),serializeStyle:ht(e),uploadImage:pt(e)};return{open:()=>{He(e).then((n=>{const r=(e=>({prevImage:ze(e.imageList,e.image.src),prevAlt:e.image.alt,open:!0}))(n);return{title:"Insert/Edit Image",size:"normal",body:nt(n),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ye(n.image),onSubmit:ot(e,n,t),onChange:et(t,n,r),onClose:tt(r)}})).then(e.windowManager.open)}}},ft=e=>{const t=e.attr("class");return y(t)&&/\bimage\b/.test(t)},gt=e=>t=>{let i=t.length;const n=t=>{t.attr("contenteditable",e?"true":null)};for(;i--;){const r=t[i];ft(r)&&(r.attr("contenteditable",e?"false":null),Be.each(r.getAll("figcaption"),n))}};e.add("image",(e=>{P(e),(e=>{e.on("PreInit",(()=>{e.parser.addNodeFilter("figure",gt(!0)),e.serializer.addNodeFilter("figure",gt(!1))}))})(e),(e=>{e.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:mt(e).open,onSetup:t=>(t.setActive(y(Se(e))),e.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",t.setActive).unbind)}),e.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:mt(e).open}),e.ui.registry.addContextMenu("image",{update:element=>ge(element)||"IMG"===element.nodeName&&!Z(element)?["image"]:[]})})(e),(e=>{e.addCommand("mceImage",mt(e).open),e.addCommand("mceUpdateImage",((t,data)=>{e.undoManager.transact((()=>Ie(e,data)))}))})(e)}))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,r=(l=String).prototype,r.isPrototypeOf(n)||(null===(c=o.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,r;var o,l,c})(t)===e,n=t("string"),r=t("object"),o=t("array"),l=a=>!(a=>null==a)(a);class c{constructor(e,t){this.tag=e,this.value=t}static some(e){return new c(!0,e)}static none(){return c.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?c.some(e(this.value)):c.none()}bind(e){return this.tag?e(this.value):c.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:c.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return l(e)?c.some(e):c.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}c.singletonNone=new c(!1);const d=Array.prototype.push,h=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},m=e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!o(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);d.apply(t,e[i])}return t},f=Object.keys,v=Object.hasOwnProperty,y=(e,t)=>w(e,t)?c.from(e[t]):c.none(),w=(e,t)=>v.call(e,t),option=e=>t=>t.options.get(e),A=option("audio_template_callback"),x=option("video_template_callback"),O=option("iframe_template_callback"),C=option("media_live_embeds"),_=option("media_filter_html"),S=option("media_url_resolver"),k=option("media_alt_source"),j=option("media_poster"),T=option("media_dimensions");var I=tinymce.util.Tools.resolve("tinymce.util.Tools"),D=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),E=tinymce.util.Tools.resolve("tinymce.html.DomParser");const R=D.DOM,B=e=>e.replace(/px$/,""),M=e=>{const style=e.attr("style"),t=style?R.parseStyle(style):{};return{type:"ephox-embed-iri",source:e.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:y(t,"max-width").map(B).getOr(""),height:y(t,"max-height").map(B).getOr("")}},P=(html,e)=>{let data={};for(let t=E({validate:!1,forced_root_block:!1},e).parse(html);t;t=t.walk())if(1===t.type){const e=t.name;if(t.attr("data-ephox-embed-iri")){data=M(t);break}data.source||"param"!==e||(data.source=t.attr("movie")),"iframe"!==e&&"object"!==e&&"embed"!==e&&"video"!==e&&"audio"!==e||(data.type||(data.type=e),data=I.extend(t.attributes.map,data)),"script"===e&&(data={type:"script",source:t.attr("src")}),"source"===e&&(data.source?data.altsource||(data.altsource=t.attr("src")):data.source=t.attr("src")),"img"!==e||data.poster||(data.poster=t.attr("src"))}return data.source=data.source||data.src||"",data.altsource=data.altsource||"",data.poster=data.poster||"",data},L=e=>{var t;const n=null!==(t=e.toLowerCase().split(".").pop())&&void 0!==t?t:"";return y({mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},n).getOr("")};var F=tinymce.util.Tools.resolve("tinymce.html.Node"),$=tinymce.util.Tools.resolve("tinymce.html.Serializer");const N=(e,t={})=>E({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...t},e),z=D.DOM,V=e=>/^[0-9.]+$/.test(e)?e+"px":e,H=(data,e)=>{const style=e.attr("style"),t=style?z.parseStyle(style):{};l(data.width)&&(t["max-width"]=V(data.width)),l(data.height)&&(t["max-height"]=V(data.height)),e.attr("style",z.serializeStyle(t))},W=["source","altsource"],Q=(html,data,e,t)=>{let n=0,r=0;const o=N(t);o.addNodeFilter("source",(e=>n=e.length));const l=o.parse(html);for(let t=l;t;t=t.walk())if(1===t.type){const o=t.name;if(t.attr("data-ephox-embed-iri")){H(data,t);break}switch(o){case"video":case"object":case"embed":case"img":case"iframe":void 0!==data.height&&void 0!==data.width&&(t.attr("width",data.width),t.attr("height",data.height))}if(e)switch(o){case"video":t.attr("poster",data.poster),t.attr("src",null);for(let e=n;e<2;e++)if(data[W[e]]){const source=new F("source",1);source.attr("src",data[W[e]]),source.attr("type",data[W[e]+"mime"]||null),t.append(source)}break;case"iframe":t.attr("src",data.source);break;case"object":const e=t.getAll("img").length>0;if(data.poster&&!e){t.attr("src",data.poster);const img=new F("img",1);img.attr("src",data.poster),img.attr("width",data.width),img.attr("height",data.height),t.append(img)}break;case"source":if(r<2&&(t.attr("src",data[W[r]]),t.attr("type",data[W[r]+"mime"]||null),!data[W[r]])){t.remove();continue}r++;break;case"img":data.poster||t.remove()}}return $({},t).serialize(l)},U=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],Y=(pattern,e)=>{const t=(e=>{const t=e.match(/^(https?:\/\/|www\.)(.+)$/i);return t&&t.length>1?"www."===t[1]?"https://":t[1]:"https://"})(e),n=pattern.regex.exec(e);let r=t+pattern.url;if(l(n))for(let i=0;i<n.length;i++)r=r.replace("$"+i,(()=>n[i]?n[i]:""));return r.replace(/\?$/,"")},G=(e,t)=>{var n;const data=I.extend({},t);if(!data.source&&(I.extend(data,P(null!==(n=data.embed)&&void 0!==n?n:"",e.schema)),!data.source))return"";data.altsource||(data.altsource=""),data.poster||(data.poster=""),data.source=e.convertURL(data.source,"source"),data.altsource=e.convertURL(data.altsource,"source"),data.sourcemime=L(data.source),data.altsourcemime=L(data.altsource),data.poster=e.convertURL(data.poster,"poster");const pattern=(e=>{const t=U.filter((pattern=>pattern.regex.test(e)));return t.length>0?I.extend({},t[0],{url:Y(t[0],e)}):null})(data.source);if(pattern&&(data.source=pattern.url,data.type=pattern.type,data.allowfullscreen=pattern.allowFullscreen,data.width=data.width||String(pattern.w),data.height=data.height||String(pattern.h)),data.embed)return Q(data.embed,data,!0,e.schema);{const t=A(e),n=x(e),r=O(e);return data.width=data.width||"300",data.height=data.height||"150",I.each(data,((t,n)=>{data[n]=e.dom.encode(""+t)})),"iframe"===data.type?((data,e)=>{if(e)return e(data);{const e=data.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+data.source+'" width="'+data.width+'" height="'+data.height+'"'+e+"></iframe>"}})(data,r):"application/x-shockwave-flash"===data.sourcemime?(data=>{let html='<object data="'+data.source+'" width="'+data.width+'" height="'+data.height+'" type="application/x-shockwave-flash">';return data.poster&&(html+='<img src="'+data.poster+'" width="'+data.width+'" height="'+data.height+'" />'),html+="</object>",html})(data):-1!==data.sourcemime.indexOf("audio")?((data,e)=>e?e(data):'<audio controls="controls" src="'+data.source+'">'+(data.altsource?'\n<source src="'+data.altsource+'"'+(data.altsourcemime?' type="'+data.altsourcemime+'"':"")+" />\n":"")+"</audio>")(data,t):"script"===data.type?(data=>'<script src="'+data.source+'"><\/script>')(data):((data,e)=>e?e(data):'<video width="'+data.width+'" height="'+data.height+'"'+(data.poster?' poster="'+data.poster+'"':"")+' controls="controls">\n<source src="'+data.source+'"'+(data.sourcemime?' type="'+data.sourcemime+'"':"")+" />\n"+(data.altsource?'<source src="'+data.altsource+'"'+(data.altsourcemime?' type="'+data.altsourcemime+'"':"")+" />\n":"")+"</video>")(data,n)}},K=element=>element.hasAttribute("data-mce-object")||element.hasAttribute("data-ephox-embed-iri"),X={},Z=e=>data=>G(e,data),J=(e,data)=>{const t=S(e);return t?((data,e,t)=>new Promise(((n,r)=>{const o=t=>(t.html&&(X[data.source]=t),n({url:data.source,html:t.html?t.html:e(data)}));X[data.source]?o(X[data.source]):t({url:data.source},o,r)})))(data,Z(e),t):((data,e)=>Promise.resolve({html:e(data),url:data.source}))(data,Z(e))},ee=(data,e)=>{const t={};return y(data,"dimensions").each((n=>{h(["width","height"],(r=>{y(e,r).orThunk((()=>y(n,r))).each((e=>t[r]=e))}))})),t},te=(data,e)=>{const t=e&&"dimensions"!==e?((e,data)=>y(data,e).bind((e=>y(e,"meta"))))(e,data).getOr({}):{},n=((data,e,t)=>n=>{const o=()=>y(data,n),l=()=>y(e,n),d=e=>y(e,"value").bind((e=>e.length>0?c.some(e):c.none()));return{[n]:(n===t?o().bind((e=>r(e)?d(e).orThunk(l):l().orThunk((()=>c.from(e))))):l().orThunk((()=>o().bind((e=>r(e)?d(e):c.from(e)))))).getOr("")}})(data,t,e);return{...n("source"),...n("altsource"),...n("poster"),...n("embed"),...ee(data,t)}},ne=data=>{const e={...data,source:{value:y(data,"source").getOr("")},altsource:{value:y(data,"altsource").getOr("")},poster:{value:y(data,"poster").getOr("")}};return h(["width","height"],(t=>{y(data,t).each((n=>{const r=e.dimensions||{};r[t]=n,e.dimensions=r}))})),e},re=e=>t=>{const n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})},oe=(e,t)=>r=>{if(n(r.url)&&r.url.trim().length>0){const html=r.html,n={...P(html,t.schema),source:r.url,embed:html};e.setData(ne(n))}},ie=(e,html)=>{const t=e.dom.select("*[data-mce-object]");e.insertContent(html),((e,t)=>{const n=e.dom.select("*[data-mce-object]");for(let i=0;i<t.length;i++)for(let e=n.length-1;e>=0;e--)t[i]===n[e]&&n.splice(e,1);e.selection.select(n[0])})(e,t),e.nodeChanged()},se=(e,t,n)=>{var r,o;t.embed=Q(null!==(r=t.embed)&&void 0!==r?r:"",t,!1,n.schema),t.embed&&(e.source===t.source||(o=t.source,w(X,o)))?ie(n,t.embed):J(n,t).then((e=>{ie(n,e.html)})).catch(re(n))},ae=e=>{const t=(e=>{const element=e.selection.getNode(),t=K(element)?e.serializer.serialize(element,{selection:!0}):"";return{embed:t,...P(t,e.schema)}})(e),n=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})(t),r=ne(t),o=T(e)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],l={title:"General",name:"general",items:m([[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],o])},c={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},d=[];k(e)&&d.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),j(e)&&d.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const h={title:"Advanced",name:"advanced",items:d},f=[l,c];d.length>0&&f.push(h);const body={type:"tabpanel",tabs:f},v=e.windowManager.open({title:"Insert/Edit Media",size:"normal",body:body,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{const r=te(t.getData());se(n.get(),r,e),t.close()},onChange:(t,r)=>{switch(r.name){case"source":((t,n)=>{const r=te(n.getData(),"source");t.source!==r.source&&(oe(v,e)({url:r.source,html:""}),J(e,r).then(oe(v,e)).catch(re(e)))})(n.get(),t);break;case"embed":(t=>{var n;const data=te(t.getData()),r=P(null!==(n=data.embed)&&void 0!==n?n:"",e.schema);t.setData(ne(r))})(t);break;case"dimensions":case"altsource":case"poster":((t,n)=>{const data=te(t.getData(),n),embed=G(e,data);t.setData(ne({...data,embed:embed}))})(t,r.name)}n.set(te(t.getData()))},initialData:r})};var le=tinymce.util.Tools.resolve("tinymce.Env");const ce=e=>{const t=e.name;return"iframe"===t||"video"===t||"audio"===t},ue=(e,t,n,r=null)=>{const o=e.attr(n);return l(o)?o:w(t,n)?null:r},de=(e,t,n)=>{const r="img"===t.name||"video"===e.name,o=r?"300":null,l="audio"===e.name?"30":"150",c=r?l:null;t.attr({width:ue(e,n,"width",o),height:ue(e,n,"height",c)})},he=(e,t)=>{const n=t.name,r=new F("img",1);return me(e,t,r),de(t,r,{}),r.attr({style:t.attr("style"),src:le.transparentSrc,"data-mce-object":n,class:"mce-object mce-object-"+n}),r},pe=(e,t)=>{var n;const r=t.name,o=new F("span",1);o.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":r,class:"mce-preview-object mce-object-"+r}),me(e,t,o);const c=e.dom.parseStyle(null!==(n=t.attr("style"))&&void 0!==n?n:""),d=new F(r,1);if(de(t,d,c),d.attr({src:t.attr("src"),style:t.attr("style"),class:t.attr("class")}),"iframe"===r)d.attr({allowfullscreen:t.attr("allowfullscreen"),frameborder:"0"});else{h(["controls","crossorigin","currentTime","loop","muted","poster","preload"],(e=>{d.attr(e,t.attr(e))}));const n=o.attr("data-mce-html");l(n)&&((e,t,n,html)=>{const r=N(e.schema).parse(html,{context:t});for(;r.firstChild;)n.append(r.firstChild)})(e,r,d,unescape(n))}const m=new F("span",1);return m.attr("class","mce-shim"),o.append(d),o.append(m),o},me=(e,t,n)=>{var r;const o=null!==(r=t.attributes)&&void 0!==r?r:[];let l=o.length;for(;l--;){const t=o[l].name;let r=o[l].value;"width"===t||"height"===t||"style"===t||((e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t)(t,"data-mce-",0)||("data"!==t&&"src"!==t||(r=e.convertURL(r,t)),n.attr("data-mce-p-"+t,r))}const c=$({inner:!0},e.schema),d=new F("div",1);h(t.children(),(e=>d.append(e)));const m=c.serialize(d);m&&(n.attr("data-mce-html",escape(m)),n.empty())},fe=e=>{const t=e.attr("class");return n(t)&&/\btiny-pageembed\b/.test(t)},ge=e=>{let t=e;for(;t=t.parent;)if(t.attr("data-ephox-embed-iri")||fe(t))return!0;return!1},be=(e,t,html)=>{const n=_(e);return N(e.schema,{validate:n}).parse(html,{context:t})},ve=e=>{e.on("PreInit",(()=>{const{schema:t,serializer:n,parser:r}=e,o=t.getBoolAttrs();h("webkitallowfullscreen mozallowfullscreen".split(" "),(e=>{o[e]={}})),((e,t)=>{const n=f(e);for(let r=0,o=n.length;r<o;r++){const i=n[r];t(e[i],i)}})({embed:["wmode"]},((e,n)=>{const r=t.getElementRule(n);r&&h(e,(e=>{r.attributes[e]={},r.attributesOrder.push(e)}))})),r.addNodeFilter("iframe,video,audio,object,embed,script",(e=>t=>{let n,i=t.length;for(;i--;)n=t[i],n.parent&&(n.parent.attr("data-mce-object")||(ce(n)&&C(e)?ge(n)||n.replace(pe(e,n)):ge(n)||n.replace(he(e,n))))})(e)),n.addAttributeFilter("data-mce-object",((t,n)=>{var r;let i=t.length;for(;i--;){const o=t[i];if(!o.parent)continue;const l=o.attr(n),c=new F(l,1);if("audio"!==l&&"script"!==l){const e=o.attr("class");e&&-1!==e.indexOf("mce-preview-object")&&o.firstChild?c.attr({width:o.firstChild.attr("width"),height:o.firstChild.attr("height")}):c.attr({width:o.attr("width"),height:o.attr("height")})}c.attr({style:o.attr("style")});const d=null!==(r=o.attributes)&&void 0!==r?r:[];let m=d.length;for(;m--;){const e=d[m].name;0===e.indexOf("data-mce-p-")&&c.attr(e.substr(11),d[m].value)}"script"===l&&c.attr("type","text/javascript");const f=o.attr("data-mce-html");if(f){const t=be(e,l,unescape(f));h(t.children(),(e=>c.append(e)))}o.replace(c)}}))})),e.on("SetContent",(()=>{const t=e.dom;h(t.select("span.mce-preview-object"),(e=>{0===t.select("span.mce-shim",e).length&&t.add(e,"span",{class:"mce-shim"})}))}))};e.add("media",(e=>((e=>{const t=e.options.register;t("audio_template_callback",{processor:"function"}),t("video_template_callback",{processor:"function"}),t("iframe_template_callback",{processor:"function"}),t("media_live_embeds",{processor:"boolean",default:!0}),t("media_filter_html",{processor:"boolean",default:!0}),t("media_url_resolver",{processor:"function"}),t("media_alt_source",{processor:"boolean",default:!0}),t("media_poster",{processor:"boolean",default:!0}),t("media_dimensions",{processor:"boolean",default:!0})})(e),(e=>{e.addCommand("mceMedia",(()=>{ae(e)}))})(e),(e=>{const t=()=>e.execCommand("mceMedia");e.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:t,onSetup:t=>{const n=e.selection;return t.setActive(K(n.getNode())),n.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",t.setActive).unbind}}),e.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:t})})(e),(e=>{e.on("ResolveName",(e=>{let t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}))})(e),ve(e),(e=>{e.on("click keyup touchend",(()=>{const t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")})),e.on("ObjectSelected",(e=>{"script"===e.target.getAttribute("data-mce-object")&&e.preventDefault()})),e.on("ObjectResized",(t=>{const n=t.target;if(n.getAttribute("data-mce-object")){let html=n.getAttribute("data-mce-html");html&&(html=unescape(html),n.setAttribute("data-mce-html",escape(Q(html,{width:String(t.width),height:String(t.height)},!1,e.schema))))}}))})(e),(e=>({showDialog:()=>{ae(e)}}))(e))))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,r=(l=String).prototype,r.isPrototypeOf(n)||(null===(c=o.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,r;var o,l,c})(t)===e,n=e=>t=>typeof t===e,r=t("string"),o=t("array"),l=n("boolean"),c=(d=void 0,a=>d===a);var d;const h=a=>!(a=>null==a)(a),m=n("function"),f=n("number"),v=()=>{},y=e=>()=>e,w=e=>e,A=(a,b)=>a===b;function x(e,...t){return(...n)=>{const r=t.concat(n);return e.apply(null,r)}}const O=e=>{e()},C=y(!1),_=y(!0);class S{constructor(e,t){this.tag=e,this.value=t}static some(e){return new S(!0,e)}static none(){return S.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?S.some(e(this.value)):S.none()}bind(e){return this.tag?e(this.value):S.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:S.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return h(e)?S.some(e):S.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}S.singletonNone=new S(!1);const k=Object.keys,j=Object.hasOwnProperty,T=(e,t)=>{const n=k(e);for(let r=0,o=n.length;r<o;r++){const i=n[r];t(e[i],i)}},I=(e,t)=>{const n={};var r;return((e,t,n,r)=>{T(e,((e,i)=>{(t(e,i)?n:r)(e,i)}))})(e,t,(r=n,(e,i)=>{r[i]=e}),v),n},D=e=>((e,t)=>{const n=[];return T(e,((e,r)=>{n.push(t(e,r))})),n})(e,w),E=e=>k(e).length,R=(e,t)=>B(e,t)?S.from(e[t]):S.none(),B=(e,t)=>j.call(e,t),M=(e,t)=>B(e,t)&&void 0!==e[t]&&null!==e[t],P=Array.prototype.indexOf,L=Array.prototype.push,F=(e,t)=>((e,t)=>P.call(e,t))(e,t)>-1,$=(e,t)=>{for(let i=0,n=e.length;i<n;i++){if(t(e[i],i))return!0}return!1},N=(e,t)=>{const n=[];for(let i=0;i<e;i++)n.push(t(i));return n},map=(e,t)=>{const n=e.length,r=new Array(n);for(let i=0;i<n;i++){const n=e[i];r[i]=t(n,i)}return r},z=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},filter=(e,t)=>{const n=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];t(r,i)&&n.push(r)}return n},V=(e,t,n)=>(z(e,((e,i)=>{n=t(n,e,i)})),n),H=(e,t)=>((e,t,n)=>{for(let i=0,r=e.length;i<r;i++){const r=e[i];if(t(r,i))return S.some(r);if(n(r,i))break}return S.none()})(e,t,C),W=(e,t)=>(e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!o(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);L.apply(t,e[i])}return t})(map(e,t)),Q=(e,t)=>{for(let i=0,n=e.length;i<n;++i){if(!0!==t(e[i],i))return!1}return!0},U=(e,i)=>i>=0&&i<e.length?S.some(e[i]):S.none(),Y=(e,t)=>{for(let i=0;i<e.length;i++){const n=t(e[i],i);if(n.isSome())return n}return S.none()},G=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},K={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return G(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return G(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return G(t)},fromDom:G,fromPoint:(e,t,n)=>S.from(e.dom.elementFromPoint(t,n)).map(G)};"undefined"!=typeof window?window:Function("return this;")();const X=element=>element.dom.nodeName.toLowerCase(),Z=element=>element.dom.nodeType,J=e=>element=>Z(element)===e,ee=element=>8===Z(element)||"#comment"===X(element),te=J(1),ne=J(3),re=J(9),oe=J(11),ie=e=>t=>te(t)&&X(t)===e,se=(element,e)=>{const t=element.dom;if(1!==t.nodeType)return!1;{const n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},ae=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,le=(e,t)=>e.dom===t.dom,ce=se,ue=e=>{return re(e)?e:(element=e,K.fromDom(element.dom.ownerDocument));var element},de=element=>S.from(element.dom.parentNode).map(K.fromDom),he=(element,e)=>{const t=m(e)?e:C;let n=element.dom;const r=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,p=K.fromDom(e);if(r.push(p),!0===t(p))break;n=e}return r},pe=element=>S.from(element.dom.previousSibling).map(K.fromDom),me=element=>S.from(element.dom.nextSibling).map(K.fromDom),fe=element=>map(element.dom.childNodes,K.fromDom),ge=element=>((element,e)=>{const t=element.dom.childNodes;return S.from(t[e]).map(K.fromDom)})(element,0),be=m(Element.prototype.attachShadow)&&m(Node.prototype.getRootNode)?e=>K.fromDom(e.dom.getRootNode()):ue,ve=e=>{const t=be(e);return oe(n=t)&&h(n.dom.host)?S.some(t):S.none();var n},ye=e=>K.fromDom(e.dom.host),we=element=>{const e=ne(element)?element.dom.parentNode:element.dom;if(null==e||null===e.ownerDocument)return!1;const t=e.ownerDocument;return ve(K.fromDom(e)).fold((()=>t.body.contains(e)),(n=we,r=ye,a=>n(r(a))));var n,r},Ae=(e,t)=>{let n=[];return z(fe(e),(e=>{t(e)&&(n=n.concat([e])),n=n.concat(Ae(e,t))})),n},xe=(e,t)=>((e,t)=>filter(fe(e),t))(e,(e=>se(e,t))),Oe=(e,t)=>((e,t)=>{const base=void 0===t?document:t.dom;return ae(base)?[]:map(base.querySelectorAll(e),K.fromDom)})(t,e);const Ce=(e,t,n)=>{let element=e.dom;const r=m(n)?n:C;for(;element.parentNode;){element=element.parentNode;const e=K.fromDom(element);if(t(e))return S.some(e);if(r(e))break}return S.none()},_e=(e,t,n)=>Ce(e,(e=>se(e,t)),n),Se=(e,t)=>((e,t)=>H(e.dom.childNodes,(e=>t(K.fromDom(e)))).map(K.fromDom))(e,(e=>se(e,t))),ke=(e,t)=>((e,t)=>{const base=void 0===t?document:t.dom;return ae(base)?S.none():S.from(base.querySelector(e)).map(K.fromDom)})(t,e),je=(e,t,n)=>((e,t,n,a,r)=>e(n,a)?S.some(n):m(r)&&r(n)?S.none():t(n,a,r))(((element,e)=>se(element,e)),_e,e,t,n),Te=(e,t,n)=>{if(!(r(n)||l(n)||f(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Ie=(element,e,t)=>{Te(element.dom,e,t)},De=(element,e)=>{const t=element.dom.getAttribute(e);return null===t?void 0:t},Ee=(element,e)=>S.from(De(element,e)),Re=(element,e)=>{element.dom.removeAttribute(e)},Be=(e,t,n=A)=>e.exists((e=>n(e,t))),Me=(e,t,n)=>e.isSome()&&t.isSome()?S.some(n(e.getOrDie(),t.getOrDie())):S.none(),Pe=(e,t)=>((e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t)(e,t,0),Le=(Fe=/^\s+|\s+$/g,s=>s.replace(Fe,""));var Fe;const $e=s=>s.length>0,Ne=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?S.none():S.some(n)},ze=e=>void 0!==e.style&&m(e.style.getPropertyValue),Ve=(element,e,t)=>{((e,t,n)=>{if(!r(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);ze(e)&&e.style.setProperty(t,n)})(element.dom,e,t)},He=(element,e)=>{const t=element.dom,n=window.getComputedStyle(t).getPropertyValue(e);return""!==n||we(element)?n:We(t,e)},We=(e,t)=>ze(e)?e.style.getPropertyValue(t):"",qe=(element,e)=>{const t=element.dom,n=We(t,e);return S.from(n).filter((e=>e.length>0))},Qe=(element,e)=>{((e,t)=>{ze(e)&&e.style.removeProperty(t)})(element.dom,e),Be(Ee(element,"style").map(Le),"")&&Re(element,"style")},Ue=(e,t,n=0)=>Ee(e,t).map((e=>parseInt(e,10))).getOr(n),Ye=(e,t)=>Ge(e,t,_),Ge=(e,t,n)=>W(fe(e),(e=>se(e,t)?n(e)?[e]:[]:Ge(e,t,n))),Ke=["tfoot","thead","tbody","colgroup"],Xe=(element,e,t)=>({element:element,rowspan:e,colspan:t}),Ze=(element,e,section)=>({element:element,cells:e,section:section}),Je=(element,e)=>((e,element,t=C)=>t(element)?S.none():F(e,X(element))?S.some(element):_e(element,e.join(","),(e=>se(e,"table")||t(e))))(["td","th"],element,e),table=(element,e)=>je(element,"table",e),et=e=>Ye(e,"tr"),tt=e=>table(e).fold(y([]),(table=>xe(table,"colgroup"))),nt=(e,t)=>map(e,(e=>{if("colgroup"===X(e)){const t=map((e=>se(e,"colgroup")?xe(e,"col"):W(tt(e),(e=>xe(e,"col"))))(e),(e=>{const t=Ue(e,"span",1);return Xe(e,1,t)}));return Ze(e,t,"colgroup")}{const n=map((e=>Ye(e,"th,td"))(e),(e=>{const t=Ue(e,"rowspan",1),n=Ue(e,"colspan",1);return Xe(e,t,n)}));return Ze(e,n,t(e))}})),ot=e=>de(e).map((e=>{const t=X(e);return(e=>F(Ke,e))(t)?t:"tbody"})).getOr("tbody"),it=table=>Ee(table,"data-snooker-locked-cols").bind((e=>S.from(e.match(/\d+/g)))).map((e=>((e,t)=>{const n={};for(let i=0,r=e.length;i<r;i++){const r=e[i];n[String(r)]=t(r,i)}return n})(e,_))),st=(e,t)=>e+","+t,at=(e,t)=>{const n=W(e.all,(e=>e.cells));return filter(n,t)},lt=e=>{const t={},n=[];var r;const o=(r=e,U(r,0)).map((e=>e.element)).bind(table).bind(it).getOr({});let l=0,c=0,d=0;const{pass:h,fail:m}=((e,t)=>{const n=[],r=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];(t(o,i)?n:r).push(o)}return{pass:n,fail:r}})(e,(e=>"colgroup"===e.section));z(m,(e=>{const r=[];z(e.cells,(e=>{let n=0;for(;void 0!==t[st(d,n)];)n++;const l=M(o,n.toString()),h=((element,e,t,n,r,o)=>({element:element,rowspan:e,colspan:t,row:n,column:r,isLocked:o}))(e.element,e.rowspan,e.colspan,d,n,l);for(let r=0;r<e.colspan;r++)for(let o=0;o<e.rowspan;o++){const e=n+r,l=st(d+o,e);t[l]=h,c=Math.max(c,e+1)}r.push(h)})),l++,n.push(Ze(e.element,r,e.section)),d++}));const{columns:f,colgroups:v}=(e=>U(e,e.length-1))(h).map((e=>{const t=(e=>{const t={};let n=0;return z(e.cells,(e=>{const r=e.colspan;N(r,(o=>{const l=n+o;t[l]=((element,e,t)=>({element:element,colspan:e,column:t}))(e.element,r,l)})),n+=r})),t})(e),n=((element,e)=>({element:element,columns:e}))(e.element,D(t));return{colgroups:[n],columns:t}})).getOrThunk((()=>({colgroups:[],columns:{}}))),y=((e,t)=>({rows:e,columns:t}))(l,c);return{grid:y,access:t,all:n,columns:f,colgroups:v}},ct=table=>{const e=(table=>{const e=et(table),t=[...tt(table),...e];return nt(t,ot)})(table);return lt(e)},ut=(e,t,n)=>S.from(e.access[st(t,n)]),ht=(e,t,n)=>{const r=at(e,(e=>n(t,e.element)));return r.length>0?S.some(r[0]):S.none()},pt=e=>W(e.all,(e=>e.cells)),mt=(e,t)=>S.from(e.columns[t]);var ft=tinymce.util.Tools.resolve("tinymce.util.Tools");const gt=(e,t,n)=>{const r=e.select("td,th",t);let o;for(let i=0;i<r.length;i++){const t=e.getStyle(r[i],n);if(c(o)&&(o=t),o!==t)return""}return o},bt=(e,t,n)=>{ft.each("left center right".split(" "),(r=>{r!==n&&e.formatter.remove("align"+r,{},t)})),n&&e.formatter.apply("align"+n,{},t)},vt=(e,table,data)=>{e.dispatch("TableModified",{...data,table:table})},yt=(e,t)=>(e=>{const t=parseFloat(e);return isNaN(t)?S.none():S.some(t)})(e).getOr(t),wt=(element,e,t)=>yt(He(element,e),t),At=(element,e)=>{const t=element.dom,n=t.getBoundingClientRect().width||t.offsetWidth;return"border-box"===e?n:((element,e,t,n)=>e-wt(element,`padding-${t}`,0)-wt(element,`padding-${n}`,0)-wt(element,`border-${t}-width`,0)-wt(element,`border-${n}-width`,0))(element,n,"left","right")},xt=element=>At(element,"content-box");var Ot=tinymce.util.Tools.resolve("tinymce.Env");const Ct=N(5,(i=>{const e=`${i+1}px`;return{title:e,value:e}})),_t=map(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],(e=>({title:e,value:e.toLowerCase()}))),St="100%",kt=e=>{var t;const n=e.dom,r=null!==(t=n.getParent(e.selection.getStart(),n.isBlock))&&void 0!==t?t:e.getBody();return xt(K.fromDom(r))+"px"},option=e=>t=>t.options.get(e),jt=option("table_sizing_mode"),Tt=option("table_border_widths"),It=option("table_border_styles"),Dt=option("table_cell_advtab"),Et=option("table_row_advtab"),Rt=option("table_advtab"),Bt=option("table_appearance_options"),Mt=option("table_grid"),Pt=option("table_style_by_css"),Lt=option("table_cell_class_list"),Ft=option("table_row_class_list"),$t=option("table_class_list"),Nt=option("table_toolbar"),zt=option("table_background_color_map"),Vt=option("table_border_color_map"),Ht=e=>"fixed"===jt(e),Wt=e=>"responsive"===jt(e),qt=e=>{const t=e.options,n=t.get("table_default_styles");return t.isSet("table_default_styles")?n:((e,t)=>Wt(e)||!Pt(e)?t:Ht(e)?{...t,width:kt(e)}:{...t,width:St})(e,n)},Qt=e=>{const t=e.options,n=t.get("table_default_attributes");return t.isSet("table_default_attributes")?n:((e,t)=>Wt(e)||Pt(e)?t:Ht(e)?{...t,width:kt(e)}:{...t,width:St})(e,n)},Ut=e=>element=>le(element,(e=>K.fromDom(e.getBody()))(e)),Yt=e=>/^\d+(\.\d+)?$/.test(e)?e+"px":e,Gt=e=>K.fromDom(e.selection.getStart()),Kt=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Xt=(e,t,n)=>{const r=ht(e,t,le),o=ht(e,n,le);return r.bind((e=>o.map((t=>{return n=e,r=t,o=Math.min(n.row,r.row),l=Math.min(n.column,r.column),c=Math.max(n.row+n.rowspan-1,r.row+r.rowspan-1),d=Math.max(n.column+n.colspan-1,r.column+r.colspan-1),{startRow:o,startCol:l,finishRow:c,finishCol:d};var n,r,o,l,c,d}))))},Zt=(e,t,n)=>Xt(e,t,n).bind((t=>((e,t)=>{let n=!0;const r=x(Kt,t);for(let i=t.startRow;i<=t.finishRow;i++)for(let o=t.startCol;o<=t.finishCol;o++)n=n&&ut(e,i,o).exists(r);return n?S.some(t):S.none()})(e,t))),Jt=ct,en=(marker,element)=>{de(marker).each((e=>{e.dom.insertBefore(element.dom,marker.dom)}))},tn=(marker,element)=>{me(marker).fold((()=>{de(marker).each((e=>{rn(e,element)}))}),(e=>{en(e,element)}))},nn=(e,element)=>{ge(e).fold((()=>{rn(e,element)}),(t=>{e.dom.insertBefore(element.dom,t.dom)}))},rn=(e,element)=>{e.dom.appendChild(element.dom)},on=(element,e)=>{en(element,e),rn(e,element)},sn=(marker,e)=>{z(e,((t,i)=>{const n=0===i?marker:e[i-1];tn(n,t)}))},an=(e,t)=>{z(t,(t=>{rn(e,t)}))},ln=element=>{const e=element.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},cn=e=>{const t=fe(e);t.length>0&&sn(e,t),ln(e)},un=((e,t)=>{const n=element=>e(element)?S.from(element.dom.nodeValue):S.none();return{get:element=>{if(!e(element))throw new Error("Can only get "+t+" value of a "+t+" node");return n(element).getOr("")},getOption:n,set:(element,n)=>{if(!e(element))throw new Error("Can only set raw "+t+" value of a "+t+" node");element.dom.nodeValue=n}}})(ne,"text"),dn=element=>un.get(element),hn=(element,e)=>un.set(element,e);var pn=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const mn=(e,t,head,n)=>{const r=t(e,head);return o=(b,a)=>{const n=t(e,a);return fn(e,b,n)},l=r,((e,t)=>{for(let i=e.length-1;i>=0;i--)t(e[i],i)})(n,((e,i)=>{l=o(l,e,i)})),l;var o,l},fn=(e,t,n)=>t.bind((s=>n.filter(x(e.eq,s)))),gn=(e,t,n)=>n.length>0?((e,t,n,r)=>r(e,t,n[0],n.slice(1)))(e,t,n,mn):S.none(),bn={up:y({selector:_e,closest:je,predicate:Ce,all:he}),down:y({selector:Oe,predicate:Ae}),styles:y({get:He,getRaw:qe,set:Ve,remove:Qe}),attrs:y({get:De,set:Ie,remove:Re,copyTo:(source,e)=>{((element,e)=>{const t=element.dom;T(e,((e,n)=>{Te(t,n,e)}))})(e,V(source.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}))}}),insert:y({before:en,after:tn,afterAll:sn,append:rn,appendAll:an,prepend:nn,wrap:on}),remove:y({unwrap:cn,remove:ln}),create:y({nu:K.fromTag,clone:element=>K.fromDom(element.dom.cloneNode(!1)),text:K.fromText}),query:y({comparePosition:(element,e)=>element.dom.compareDocumentPosition(e.dom),prevSibling:pe,nextSibling:me}),property:y({children:fe,name:X,parent:de,document:element=>ue(element).dom,isText:ne,isComment:ee,isElement:te,isSpecial:element=>{const e=X(element);return F(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],e)},getLanguage:element=>te(element)?Ee(element,"lang"):S.none(),getText:dn,setText:hn,isBoundary:element=>!!te(element)&&("body"===X(element)||F(pn,X(element))),isEmptyTag:element=>!!te(element)&&F(["br","img","hr","input"],X(element)),isNonEditable:element=>te(element)&&"false"===De(element,"contenteditable")}),eq:le,is:ce},vn=e=>_e(e,"table"),yn=(e,t,n)=>ke(e,t).bind((t=>ke(e,n).bind((e=>{return(n=vn,r=[t,e],gn(bn,((e,element)=>n(element)),r)).map((table=>({first:t,last:e,table:table})));var n,r})))),wn=(e,t)=>((e,t)=>{const n=Oe(e,t);return n.length>0?S.some(n):S.none()})(e,t),An=(e,t,n)=>yn(e,t,n).bind((t=>{const n=t=>le(e,t),r="thead,tfoot,tbody,table",o=_e(t.first,r,n),l=_e(t.last,r,n);return o.bind((e=>l.bind((n=>le(e,n)?((table,e,t)=>{const n=Jt(table);return Zt(n,e,t)})(t.table,t.first,t.last):S.none()))))})),xn=e=>map(e,K.fromDom),On="data-mce-selected",Cn="data-mce-first-selected",_n="data-mce-last-selected",Sn={selected:On,selectedSelector:"td["+On+"],th["+On+"]",firstSelected:Cn,firstSelectedSelector:"td["+Cn+"],th["+Cn+"]",lastSelected:_n,lastSelectedSelector:"td["+_n+"],th["+_n+"]"},kn=e=>(t,n)=>{const r=X(t),o="col"===r||"colgroup"===r?table(element=t).bind((table=>wn(table,Sn.firstSelectedSelector))).fold(y(element),(e=>e[0])):t;var element;return je(o,e,n)},jn=kn("th,td,caption"),Tn=kn("th,td"),In=e=>xn(e.model.table.getSelectedCells()),Dn=(e,t)=>{const n=Tn(e),r=n.bind((e=>table(e))).map((table=>et(table)));return Me(n,r,((e,n)=>filter(n,(n=>$(xn(n.dom.cells),(n=>"1"===De(n,t)||le(n,e))))))).getOr([])},En=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Rn=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Bn=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Mn=e=>{return(t=e,n="#",Pe(t,n)?((e,t)=>e.substring(t))(t,n.length):t).toUpperCase();var t,n},Pn=e=>(e=>Rn.test(e)||Bn.test(e))(e)?S.some({value:Mn(e)}):S.none(),Ln=component=>{const e=component.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},Fn=e=>(e=>({value:e}))(Ln(e.red)+Ln(e.green)+Ln(e.blue)),$n=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Nn=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,zn=(e,t,n,r)=>({red:e,green:t,blue:n,alpha:r}),Vn=(e,t,n,r)=>{const o=parseInt(e,10),g=parseInt(t,10),b=parseInt(n,10),a=parseFloat(r);return zn(o,g,b,a)},Hn=e=>{if("transparent"===e)return S.some(zn(0,0,0,0));const t=$n.exec(e);if(null!==t)return S.some(Vn(t[1],t[2],t[3],"1"));const n=Nn.exec(e);return null!==n?S.some(Vn(n[1],n[2],n[3],n[4])):S.none()},Wn=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},qn=()=>(e=>{const t=Wn(S.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(S.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:s=>{n(),t.set(S.some(s))}}})((s=>s.unbind())),Qn=(e,t,n)=>r=>{const o=qn(),l=!$e(n);const c=()=>{const c=In(e),d=r=>e.formatter.match(t,{value:n},r.dom,l);l?(r.setActive(!$(c,d)),o.set(e.formatter.formatChanged(t,(e=>r.setActive(!e)),!0))):(r.setActive(Q(c,d)),o.set(e.formatter.formatChanged(t,r.setActive,!1,{value:n})))};return e.initialized?c():e.on("init",c),o.clear},Un=e=>M(e,"menu"),Yn=e=>map(e,(e=>{const text=e.text||e.title||"";return Un(e)?{text:text,items:Yn(e.menu)}:{text:text,value:e.value}})),Gn=(e,t,n,r)=>map(t,(t=>{const text=t.text||t.title;return Un(t)?{type:"nestedmenuitem",text:text,getSubmenuItems:()=>Gn(e,t.menu,n,r)}:{text:text,type:"togglemenuitem",onAction:()=>r(t.value),onSetup:Qn(e,n,t.value)}})),Kn=(e,style)=>t=>{e.execCommand("mceTableApplyCellStyle",!1,{[style]:t})},Xn=e=>W(e,(e=>Un(e)?[{...e,menu:Xn(e.menu)}]:$e(e.value)?[e]:[])),Zn=(e,t,n,r)=>o=>o(Gn(e,t,n,r)),Jn=(e,t,style)=>{const n=map(t,(e=>{return{text:e.title,value:"#"+(t=e.value,Pn(t).orThunk((()=>Hn(t).map(Fn))).getOrThunk((()=>{const canvas=document.createElement("canvas");canvas.height=1,canvas.width=1;const e=canvas.getContext("2d");e.clearRect(0,0,canvas.width,canvas.height),e.fillStyle="#FFFFFF",e.fillStyle=t,e.fillRect(0,0,1,1);const n=e.getImageData(0,0,1,1).data,r=n[0],g=n[1],b=n[2],a=n[3];return Fn(zn(r,g,b,a))}))).value,type:"choiceitem"};var t}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:n.length>0?n:void 0,allowCustomColors:!1},onAction:data=>{const t="remove"===data.value?"":data.value;e.execCommand("mceTableApplyCellStyle",!1,{[style]:t})}}]},er=e=>()=>{const t="header"===e.queryCommandValue("mceTableRowType")?"body":"header";e.execCommand("mceTableRowType",!1,{type:t})},nr=e=>()=>{const t="th"===e.queryCommandValue("mceTableColType")?"td":"th";e.execCommand("mceTableColType",!1,{type:t})},rr=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:En}],or=e=>rr.concat((e=>{const t=Yn(Lt(e));return t.length>0?S.some({name:"class",type:"listbox",label:"Class",items:t}):S.none()})(e).toArray()),ir=(e,t)=>{const n=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Yn(It(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(n):n}},sr=(e,element)=>{const t=e.dom;return{setAttrib:(e,n)=>{t.setAttrib(element,e,n)},setStyle:(e,n)=>{t.setStyle(element,e,n)},setFormat:(t,n)=>{""===n?e.formatter.remove(t,{value:null},element,!0):e.formatter.apply(t,{value:n},element)}}},ar=ie("th"),lr=(e,t)=>e&&t?"sectionCells":e?"section":"cells",cr=e=>{const t=filter(e,(e=>ar(e.element)));return 0===t.length?S.some("td"):t.length===e.length?S.some("th"):S.none()},ur=e=>{const t=map(e,(e=>(e=>{const t="thead"===e.section,n=Be(cr(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||n?{type:"header",subType:lr(t,n)}:{type:"body"}})(e).type)),n=F(t,"header"),r=F(t,"footer");if(n||r){const e=F(t,"body");return!n||e||r?n||e||!r?S.none():S.some("footer"):S.some("header")}return S.some("body")},dr=(e,element)=>Y(e.all,(e=>H(e.cells,(e=>le(element,e.element))))),pr=(e,t,n)=>{const r=(e=>{const t=[],n=e=>{t.push(e)};for(let i=0;i<e.length;i++)e[i].each(n);return t})(map(t.selection,(t=>Je(t).bind((t=>dr(e,t))).filter(n))));return b=r.length>0,a=r,b?S.some(a):S.none();var b,a},mr=(e,t)=>pr(e,t,_),fr=(e,t)=>Q(t,(t=>((e,t)=>dr(e,t).exists((e=>!e.isLocked)))(e,t))),gr=(e,t)=>((e,t)=>t.mergable)(0,t).filter((t=>fr(e,t.cells))),vr=(e,t)=>((e,t)=>t.unmergable)(0,t).filter((t=>fr(e,t))),yr=e=>{if(!o(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return z(e,((r,l)=>{const c=k(r);if(1!==c.length)throw new Error("one and only one name per case");const d=c[0],h=r[d];if(void 0!==n[d])throw new Error("duplicate key detected:"+d);if("cata"===d)throw new Error("cannot have a case named cata (sorry)");if(!o(h))throw new Error("case arguments must be an array");t.push(d),n[d]=(...n)=>{const r=n.length;if(r!==h.length)throw new Error("Wrong number of arguments to case "+d+". Expected "+h.length+" ("+h+"), got "+r);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[l].apply(null,n)},match:e=>{const r=k(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!Q(t,(e=>F(r,e))))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[d].apply(null,n)},log:label=>{console.log(label,{constructors:t,constructor:d,params:n})}}}})),n},wr=(yr([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),(table,e)=>{const t=ct(table);return mr(t,e).bind((e=>{const n=e[e.length-1],r=e[0].row,o=n.row+n.rowspan,l=t.all.slice(r,o);return ur(l)})).getOr("")}),Ar=e=>{return Pe(e,"rgb")?Hn(t=e).map(Fn).map((e=>"#"+e.value)).getOr(t):e;var t},xr=e=>{const element=K.fromDom(e);return{borderwidth:qe(element,"border-width").getOr(""),borderstyle:qe(element,"border-style").getOr(""),bordercolor:qe(element,"border-color").map(Ar).getOr(""),backgroundcolor:qe(element,"background-color").map(Ar).getOr("")}},Or=data=>{const e=data[0],t=data.slice(1);return z(t,(t=>{z(k(e),(n=>{T(t,((t,r)=>{const o=e[n];""!==o&&n===r&&o!==t&&(e[n]="")}))}))})),e},Cr=(e,t,n,r)=>H(e,(e=>!c(n.formatter.matchNode(r,t+e)))).getOr(""),_r=x(Cr,["left","center","right"],"align"),Sr=x(Cr,["top","middle","bottom"],"valign"),kr=e=>table(K.fromDom(e)).map((table=>{const t={selection:xn(e.cells)};return wr(table,t)})).getOr(""),jr=(table,e)=>{const t=ct(table),n=pt(t),r=filter(n,(t=>$(e,(e=>le(t.element,e)))));return map(r,(e=>({element:e.element.dom,column:mt(t,e.column).map((col=>col.element.dom))})))},Tr=(e,t,data,n)=>{const r=1===t.length;z(t,(t=>{const o=t.element,l=r?_:n,c=sr(e,o);((e,t,data,n)=>{n("scope")&&e.setAttrib("scope",data.scope),n("class")&&e.setAttrib("class",data.class),n("height")&&e.setStyle("height",Yt(data.height)),n("width")&&t.setStyle("width",Yt(data.width))})(c,t.column.map((col=>sr(e,col))).getOr(c),data,l),Dt(e)&&((e,data,t)=>{t("backgroundcolor")&&e.setFormat("tablecellbackgroundcolor",data.backgroundcolor),t("bordercolor")&&e.setFormat("tablecellbordercolor",data.bordercolor),t("borderstyle")&&e.setFormat("tablecellborderstyle",data.borderstyle),t("borderwidth")&&e.setFormat("tablecellborderwidth",Yt(data.borderwidth))})(c,data,l),n("halign")&&bt(e,o,data.halign),n("valign")&&((e,t,n)=>{ft.each("top middle bottom".split(" "),(r=>{r!==n&&e.formatter.remove("valign"+r,{},t)})),n&&e.formatter.apply("valign"+n,{},t)})(e,o,data.valign)}))},Ir=(e,t,n,r)=>{const data=r.getData();r.close(),e.undoManager.transact((()=>{((e,t,n,data)=>{const r=I(data,((e,t)=>n[t]!==e));E(r)>0&&t.length>=1&&table(t[0]).each((table=>{const n=jr(table,t),o=E(I(r,((e,t)=>"scope"!==t&&"celltype"!==t)))>0,l=B(r,"celltype");(o||B(r,"scope"))&&Tr(e,n,data,x(B,r)),l&&((e,data)=>{e.execCommand("mceTableCellType",!1,{type:data.celltype,no_events:!0})})(e,data),vt(e,table.dom,{structure:l,style:o})}))})(e,t,n,data),e.focus()}))},Dr=(e,t)=>{const n=table(t[0]).map((table=>map(jr(table,t),(t=>((e,t,n,r)=>{const o=e.dom,l=(element,style)=>o.getStyle(element,style)||o.getAttrib(element,style);return{width:l(r.getOr(t),"width"),height:l(t,"height"),scope:o.getAttrib(t,"scope"),celltype:(c=t,c.nodeName.toLowerCase()),class:o.getAttrib(t,"class",""),halign:_r(e,t),valign:Sr(e,t),...n?xr(t):{}};var c})(e,t.element,Dt(e),t.column)))));return Or(n.getOrDie())},Er=e=>{const t=In(e);if(0===t.length)return;const data=Dr(e,t),n={type:"tabpanel",tabs:[{title:"General",name:"general",items:or(e)},ir(e,"cell")]},r={type:"panel",items:[{type:"grid",columns:2,items:or(e)}]};e.windowManager.open({title:"Cell Properties",size:"normal",body:Dt(e)?n:r,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:data,onSubmit:x(Ir,e,t,data)})},Rr=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Br=e=>Rr.concat((e=>{const t=Yn(Ft(e));return t.length>0?S.some({name:"class",type:"listbox",label:"Class",items:t}):S.none()})(e).toArray()),Mr=(e,t,data,n)=>{const r=1===t.length?_:n;z(t,(t=>{const o=sr(e,t);((e,data,t)=>{t("class")&&e.setAttrib("class",data.class),t("height")&&e.setStyle("height",Yt(data.height))})(o,data,r),Et(e)&&((e,data,t)=>{t("backgroundcolor")&&e.setStyle("background-color",data.backgroundcolor),t("bordercolor")&&e.setStyle("border-color",data.bordercolor),t("borderstyle")&&e.setStyle("border-style",data.borderstyle)})(o,data,r),n("align")&&bt(e,t,data.align)}))},Pr=(e,t,n,r)=>{const data=r.getData();r.close(),e.undoManager.transact((()=>{((e,t,n,data)=>{const r=I(data,((e,t)=>n[t]!==e));if(E(r)>0){const n=B(r,"type"),o=!n||E(r)>1;o&&Mr(e,t,data,x(B,r)),n&&((e,data)=>{e.execCommand("mceTableRowType",!1,{type:data.type,no_events:!0})})(e,data),table(K.fromDom(t[0])).each((table=>vt(e,table.dom,{structure:n,style:o})))}})(e,t,n,data),e.focus()}))},Lr=e=>{const t=Dn(Gt(e),Sn.selected);if(0===t.length)return;const n=map(t,(t=>((e,t,n)=>{const r=e.dom;return{height:r.getStyle(t,"height")||r.getAttrib(t,"height"),class:r.getAttrib(t,"class",""),type:kr(t),align:_r(e,t),...n?xr(t):{}}})(e,t.dom,Et(e)))),data=Or(n),r={type:"tabpanel",tabs:[{title:"General",name:"general",items:Br(e)},ir(e,"row")]},o={type:"panel",items:[{type:"grid",columns:2,items:Br(e)}]};e.windowManager.open({title:"Row Properties",size:"normal",body:Et(e)?r:o,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:data,onSubmit:x(Pr,e,map(t,(e=>e.dom)),data)})},Fr=(e,t,n)=>{const r=n?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],o=Bt(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],l=t.length>0?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return r.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(o).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(l)},$r=(e,t,n,o)=>{if("TD"===t.tagName||"TH"===t.tagName)r(n)&&h(o)?e.setStyle(t,n,o):e.setStyles(t,n);else if(t.children)for(let i=0;i<t.children.length;i++)$r(e,t.children[i],n,o)},Nr=(e,t,n,r)=>{const o=e.dom,data=r.getData(),l=I(data,((e,t)=>n[t]!==e));r.close(),""===data.class&&delete data.class,e.undoManager.transact((()=>{if(!t){const n=Ne(data.cols).getOr(1),r=Ne(data.rows).getOr(1);e.execCommand("mceInsertTable",!1,{rows:r,columns:n}),t=Tn(Gt(e),Ut(e)).bind((t=>table(t,Ut(e)))).map((table=>table.dom)).getOrDie()}if(E(l)>0){((e,t,data)=>{const n=e.dom,r={},o={};if(c(data.class)||(r.class=data.class),o.height=Yt(data.height),Pt(e)?o.width=Yt(data.width):n.getAttrib(t,"width")&&(r.width=(e=>e?e.replace(/px$/,""):"")(data.width)),Pt(e)?(o["border-width"]=Yt(data.border),o["border-spacing"]=Yt(data.cellspacing)):(r.border=data.border,r.cellpadding=data.cellpadding,r.cellspacing=data.cellspacing),Pt(e)&&t.children)for(let i=0;i<t.children.length;i++)$r(n,t.children[i],{"border-width":Yt(data.border),padding:Yt(data.cellpadding)}),Rt(e)&&$r(n,t.children[i],{"border-color":data.bordercolor});if(Rt(e)){const e=data;o["background-color"]=e.backgroundcolor,o["border-color"]=e.bordercolor,o["border-style"]=e.borderstyle}r.style=n.serializeStyle({...qt(e),...o}),n.setAttribs(t,{...Qt(e),...r})})(e,t,data);const n=o.select("caption",t)[0];(n&&!data.caption||!n&&data.caption)&&e.execCommand("mceTableToggleCaption"),bt(e,t,data.align)}if(e.focus(),e.addVisual(),E(l)>0){const n=B(l,"caption"),r=!n||E(l)>1;vt(e,t,{structure:n,style:r})}}))},zr=(e,t)=>{const n=e.dom;let r,data=((e,t)=>{const style=qt(e),n=Qt(e),r=t?{borderstyle:R(style,"border-style").getOr(""),bordercolor:Ar(R(style,"border-color").getOr("")),backgroundcolor:Ar(R(style,"background-color").getOr(""))}:{};return{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:"",...style,...n,...r,...(()=>{const t=style["border-width"];return Pt(e)&&t?{border:t}:R(n,"border").fold((()=>({})),(e=>({border:e})))})(),...{...R(style,"border-spacing").or(R(n,"cellspacing")).fold((()=>({})),(e=>({cellspacing:e}))),...R(style,"border-padding").or(R(n,"cellpadding")).fold((()=>({})),(e=>({cellpadding:e})))}}})(e,Rt(e));t?(data.cols="1",data.rows="1",Rt(e)&&(data.borderstyle="",data.bordercolor="",data.backgroundcolor="")):(r=n.getParent(e.selection.getStart(),"table",e.getBody()),r?data=((e,t,n)=>{const r=e.dom,o=Pt(e)?r.getStyle(t,"border-spacing")||r.getAttrib(t,"cellspacing"):r.getAttrib(t,"cellspacing")||r.getStyle(t,"border-spacing"),l=Pt(e)?gt(r,t,"padding")||r.getAttrib(t,"cellpadding"):r.getAttrib(t,"cellpadding")||gt(r,t,"padding");return{width:r.getStyle(t,"width")||r.getAttrib(t,"width"),height:r.getStyle(t,"height")||r.getAttrib(t,"height"),cellspacing:null!=o?o:"",cellpadding:null!=l?l:"",border:((t,n)=>{const r=qe(K.fromDom(n),"border-width");return Pt(e)&&r.isSome()?r.getOr(""):t.getAttrib(n,"border")||gt(e.dom,n,"border-width")||gt(e.dom,n,"border")||""})(r,t),caption:!!r.select("caption",t)[0],class:r.getAttrib(t,"class",""),align:_r(e,t),...n?xr(t):{}}})(e,r,Rt(e)):Rt(e)&&(data.borderstyle="",data.bordercolor="",data.backgroundcolor=""));const o=Yn($t(e));o.length>0&&data.class&&(data.class=data.class.replace(/\s*mce\-item\-table\s*/g,""));const l={type:"grid",columns:2,items:Fr(e,o,t)},c=Rt(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[l]},ir(e,"table")]}:{type:"panel",items:[l]};e.windowManager.open({title:"Table Properties",size:"normal",body:c,onSubmit:x(Nr,e,r,data),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:data})},Vr=w,Hr=e=>{const t=(e,t)=>Ee(e,t).exists((span=>parseInt(span,10)>1));return e.length>0&&Q(e,(e=>t(e,"rowspan")||t(e,"colspan")))?S.some(e):S.none()},Wr=(table,e,t)=>e.length<=1?S.none():An(table,t.firstSelectedSelector,t.lastSelectedSelector).map((t=>({bounds:t,cells:e}))),qr=e=>{const t=Wn(S.none()),n=Wn([]);let r=S.none();const o=ie("caption"),l=e=>r.forall((details=>!details[e])),c=()=>jn((e=>K.fromDom(e.selection.getEnd()))(e),Ut(e)),d=()=>jn(Gt(e),Ut(e)).bind((t=>{return n=Me(table(t),c().bind(table),((n,r)=>le(n,r)?o(t)?S.some((e=>({element:e,mergable:S.none(),unmergable:S.none(),selection:[e]}))(t)):S.some(((e,table,t)=>({element:t,mergable:Wr(table,e,Sn),unmergable:Hr(e),selection:Vr(e)}))(In(e),n,t)):S.none())),n.bind(w);var n})),h=e=>table(e.element).map((table=>{const t=ct(table),n=mr(t,e).getOr([]),r=V(n,((e,n)=>(n.isLocked&&(e.onAny=!0,0===n.column?e.onFirst=!0:n.column+n.colspan>=t.grid.columns&&(e.onLast=!0)),e)),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:gr(t,e).isSome(),unmergeable:vr(t,e).isSome(),locked:r}})),m=()=>{t.set((e=>{let t,n=!1;return(...r)=>(n||(n=!0,t=e.apply(null,r)),t)})(d)()),r=t.get().bind(h),z(n.get(),O)},f=e=>(e(),n.set(n.get().concat([e])),()=>{n.set(filter(n.get(),(t=>t!==e)))}),v=(e,n)=>f((()=>t.get().fold((()=>{e.setEnabled(!1)}),(t=>{e.setEnabled(!n(t))})))),y=(e,n,r)=>f((()=>t.get().fold((()=>{e.setEnabled(!1),e.setActive(!1)}),(t=>{e.setEnabled(!n(t)),e.setActive(r(t))})))),A=e=>r.exists((details=>details.locked[e])),x=(t,n)=>r=>y(r,(e=>o(e.element)),(()=>e.queryCommandValue(t)===n)),_=x("mceTableRowType","header"),k=x("mceTableColType","th");return e.on("NodeChange ExecCommand TableSelectorChange",m),{onSetupTable:e=>v(e,(e=>!1)),onSetupCellOrRow:e=>v(e,(e=>o(e.element))),onSetupColumn:e=>t=>v(t,(t=>o(t.element)||A(e))),onSetupPasteable:e=>t=>v(t,(t=>o(t.element)||e().isNone())),onSetupPasteableColumn:(e,t)=>n=>v(n,(n=>o(n.element)||e().isNone()||A(t))),onSetupMergeable:e=>v(e,(e=>l("mergeable"))),onSetupUnmergeable:e=>v(e,(e=>l("unmergeable"))),resetTargets:m,onSetupTableWithCaption:t=>y(t,C,(t=>table(t.element,Ut(e)).exists((table=>Se(table,"caption").isSome())))),onSetupTableRowHeaders:_,onSetupTableColumnHeaders:k,targets:t.get}};var Qr=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Ur="x-tinymce/dom-table-",Yr=Ur+"rows",Gr=Ur+"columns",Kr=e=>{var t;const n=null!==(t=Qr.read())&&void 0!==t?t:[];return Y(n,(t=>S.from(t.getType(e))))},Xr=()=>Kr(Yr),Zr=()=>Kr(Gr),Jr=e=>{const t=qr(e);(e=>{const t=e.options.register;t("table_border_widths",{processor:"object[]",default:Ct}),t("table_border_styles",{processor:"object[]",default:_t}),t("table_cell_advtab",{processor:"boolean",default:!0}),t("table_row_advtab",{processor:"boolean",default:!0}),t("table_advtab",{processor:"boolean",default:!0}),t("table_appearance_options",{processor:"boolean",default:!0}),t("table_grid",{processor:"boolean",default:!Ot.deviceType.isTouch()}),t("table_cell_class_list",{processor:"object[]",default:[]}),t("table_row_class_list",{processor:"object[]",default:[]}),t("table_class_list",{processor:"object[]",default:[]}),t("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),t("table_background_color_map",{processor:"object[]",default:[]}),t("table_border_color_map",{processor:"object[]",default:[]})})(e),(e=>{T({mceTableProps:x(zr,e,!1),mceTableRowProps:x(Lr,e),mceTableCellProps:x(Er,e)},((t,n)=>e.addCommand(n,(()=>t())))),e.addCommand("mceInsertTableDialog",(t=>{zr(e,!0)}))})(e),((e,t)=>{const n=t=>()=>e.execCommand(t),r=(t,r)=>!!e.queryCommandSupported(r.command)&&(e.ui.registry.addMenuItem(t,{...r,onAction:m(r.onAction)?r.onAction:n(r.command)}),!0),o=(t,r)=>{e.queryCommandSupported(r.command)&&e.ui.registry.addToggleMenuItem(t,{...r,onAction:m(r.onAction)?r.onAction:n(r.command)})},l=data=>{e.execCommand("mceInsertTable",!1,{rows:data.numRows,columns:data.numColumns})},c=[r("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:t.onSetupCellOrRow}),r("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:t.onSetupCellOrRow}),r("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:t.onSetupCellOrRow}),r("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:t.onSetupCellOrRow}),r("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:t.onSetupCellOrRow}),r("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:t.onSetupCellOrRow}),r("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:t.onSetupPasteable(Xr)}),r("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:t.onSetupPasteable(Xr)})],d=[r("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:t.onSetupColumn("onFirst")}),r("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:t.onSetupColumn("onLast")}),r("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:t.onSetupColumn("onAny")}),r("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:t.onSetupColumn("onAny")}),r("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:t.onSetupColumn("onAny")}),r("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:t.onSetupPasteableColumn(Zr,"onFirst")}),r("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:t.onSetupPasteableColumn(Zr,"onLast")})],h=[r("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:t.onSetupCellOrRow}),r("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:t.onSetupMergeable}),r("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:t.onSetupUnmergeable})];Mt(e)?e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:l}]}):e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:n("mceInsertTableDialog")}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:n("mceInsertTableDialog")}),r("tableprops",{text:"Table properties",onSetup:t.onSetupTable,command:"mceTableProps"}),r("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,command:"mceTableDelete"}),F(c,!0)&&e.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:y("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),F(d,!0)&&e.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:y("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),F(h,!0)&&e.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:y("tablecellprops tablemergecells tablesplitcells")}),e.ui.registry.addContextMenu("table",{update:()=>(t.resetTargets(),t.targets().fold(y(""),(e=>"caption"===X(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable")))});const f=Xn($t(e));0!==f.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Gn(e,f,"tableclass",(t=>e.execCommand("mceTableToggleClass",!1,t))),onSetup:t.onSetupTable});const v=Xn(Lt(e));0!==v.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Gn(e,v,"tablecellclass",(t=>e.execCommand("mceTableCellToggleClass",!1,t))),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Gn(e,En,"tablecellverticalalign",Kn(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Gn(e,Tt(e),"tablecellborderwidth",Kn(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Gn(e,It(e),"tablecellborderstyle",Kn(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Jn(e,zt(e),"background-color"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Jn(e,Vt(e),"border-color"),onSetup:t.onSetupCellOrRow})),o("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),o("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:er(e),onSetup:t.onSetupTableRowHeaders}),o("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:nr(e),onSetup:t.onSetupTableRowHeaders})})(e,t),((e,t)=>{e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:e=>e("inserttable | cell row column | advtablesort | tableprops deletetable")});const n=t=>()=>e.execCommand(t),r=(t,r)=>{e.queryCommandSupported(r.command)&&e.ui.registry.addButton(t,{...r,onAction:m(r.onAction)?r.onAction:n(r.command)})},o=(t,r)=>{e.queryCommandSupported(r.command)&&e.ui.registry.addToggleButton(t,{...r,onAction:m(r.onAction)?r.onAction:n(r.command)})};r("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:t.onSetupTable}),r("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:t.onSetupTable}),r("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),r("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:t.onSetupMergeable}),r("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),r("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),r("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),r("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),r("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),r("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),r("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),r("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),r("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:t.onSetupCellOrRow}),r("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:t.onSetupCellOrRow}),r("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:t.onSetupPasteable(Xr)}),r("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:t.onSetupPasteable(Xr)}),r("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:t.onSetupColumn("onAny")}),r("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:t.onSetupColumn("onAny")}),r("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:t.onSetupPasteableColumn(Zr,"onFirst")}),r("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:t.onSetupPasteableColumn(Zr,"onLast")}),r("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table"});const l=Xn($t(e));0!==l.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Zn(e,l,"tableclass",(t=>e.execCommand("mceTableToggleClass",!1,t))),onSetup:t.onSetupTable});const c=Xn(Lt(e));0!==c.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Zn(e,c,"tablecellclass",(t=>e.execCommand("mceTableCellToggleClass",!1,t))),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Zn(e,En,"tablecellverticalalign",Kn(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Zn(e,Tt(e),"tablecellborderwidth",Kn(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Zn(e,It(e),"tablecellborderstyle",Kn(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:t=>t(Jn(e,zt(e),"background-color")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:t=>t(Jn(e,Vt(e),"border-color")),onSetup:t.onSetupCellOrRow})),o("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),o("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:er(e),onSetup:t.onSetupTableRowHeaders}),o("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:nr(e),onSetup:t.onSetupTableColumnHeaders})})(e,t),(e=>{const t=table=>e.dom.is(table,"table")&&e.getBody().contains(table),n=Nt(e);n.length>0&&e.ui.registry.addContextToolbar("table",{predicate:t,items:n,scope:"node",position:"node"})})(e)};e.add("table",Jr)}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,r=(l=String).prototype,r.isPrototypeOf(n)||(null===(c=o.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,r;var o,l,c})(t)===e,n=e=>t=>typeof t===e,r=t("string"),o=t("object"),l=t("array"),c=n("boolean"),d=a=>!(a=>null==a)(a),h=n("function"),m=n("number"),f=()=>{},v=(a,b)=>a===b,y=e=>t=>!e(t),w=(A=!1,()=>A);var A;class x{constructor(e,t){this.tag=e,this.value=t}static some(e){return new x(!0,e)}static none(){return x.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?x.some(e(this.value)):x.none()}bind(e){return this.tag?e(this.value):x.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:x.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return d(e)?x.some(e):x.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}x.singletonNone=new x(!1);const O=Array.prototype.slice,C=Array.prototype.indexOf,_=Array.prototype.push,S=(e,t)=>{return n=e,r=t,C.call(n,r)>-1;var n,r},k=(e,t)=>{for(let i=0,n=e.length;i<n;i++){if(t(e[i],i))return!0}return!1},map=(e,t)=>{const n=e.length,r=new Array(n);for(let i=0;i<n;i++){const n=e[i];r[i]=t(n,i)}return r},j=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},T=(e,t)=>{const n=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];t(r,i)&&n.push(r)}return n},I=(e,t,n)=>(j(e,((e,i)=>{n=t(n,e,i)})),n),D=(e,t,n)=>{for(let i=0,r=e.length;i<r;i++){const r=e[i];if(t(r,i))return x.some(r);if(n(r,i))break}return x.none()},E=(e,t)=>D(e,t,w),R=(e,t)=>(e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!l(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);_.apply(t,e[i])}return t})(map(e,t)),B=e=>{const t=O.call(e,0);return t.reverse(),t},M=(e,i)=>i>=0&&i<e.length?x.some(e[i]):x.none(),head=e=>M(e,0),P=e=>M(e,e.length-1),L=(e,t)=>{const n=[],r=h(t)?e=>k(n,(i=>t(i,e))):e=>S(n,e);for(let i=0,t=e.length;i<t;i++){const t=e[i];r(t)||n.push(t)}return n},F=(e,t,n=v)=>e.exists((e=>n(e,t))),$=(e,t,n)=>e.isSome()&&t.isSome()?x.some(n(e.getOrDie(),t.getOrDie())):x.none(),N=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},z={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return N(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return N(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return N(t)},fromDom:N,fromPoint:(e,t,n)=>x.from(e.dom.elementFromPoint(t,n)).map(N)},V=(e,t)=>e.dom===t.dom,H=(element,e)=>{const t=element.dom;if(1!==t.nodeType)return!1;{const n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}};"undefined"!=typeof window?window:Function("return this;")();const W=element=>element.dom.nodeName.toLowerCase(),Q=(U=1,element=>(element=>element.dom.nodeType)(element)===U);var U;const Y=e=>t=>Q(t)&&W(t)===e,G=element=>x.from(element.dom.parentNode).map(z.fromDom),K=element=>map(element.dom.childNodes,z.fromDom),X=(element,e)=>{const t=element.dom.childNodes;return x.from(t[e]).map(z.fromDom)},Z=element=>X(element,0),J=element=>X(element,element.dom.childNodes.length-1),ee=(e,t,n)=>{let element=e.dom;const r=h(n)?n:w;for(;element.parentNode;){element=element.parentNode;const e=z.fromDom(element);if(t(e))return x.some(e);if(r(e))break}return x.none()},te=(e,t,n)=>((e,t,n,a,r)=>e(n,a)?x.some(n):h(r)&&r(n)?x.none():t(n,a,r))(((s,e)=>e(s)),ee,e,t,n),ne=(marker,element)=>{G(marker).each((e=>{e.dom.insertBefore(element.dom,marker.dom)}))},re=(marker,element)=>{const e=(element=>x.from(element.dom.nextSibling).map(z.fromDom))(marker);e.fold((()=>{G(marker).each((e=>{oe(e,element)}))}),(e=>{ne(e,element)}))},oe=(e,element)=>{e.dom.appendChild(element.dom)},ie=(e,t)=>{j(t,(t=>{oe(e,t)}))},se=element=>{element.dom.textContent="",j(K(element),(e=>{ae(e)}))},ae=element=>{const e=element.dom;null!==e.parentNode&&e.parentNode.removeChild(e)};var le=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ce=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ue=tinymce.util.Tools.resolve("tinymce.util.VK");const de=e=>map(e,z.fromDom),he=Object.keys,pe=(e,t)=>{const n=he(e);for(let r=0,o=n.length;r<o;r++){const i=n[r];t(e[i],i)}},filter=(e,t)=>{const n={};var r;return((e,t,n,r)=>{pe(e,((e,i)=>{(t(e,i)?n:r)(e,i)}))})(e,t,(r=n,(e,i)=>{r[i]=e}),f),n},me=(element,e)=>{const t=element.dom;pe(e,((e,n)=>{((e,t,n)=>{if(!(r(n)||c(n)||m(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(t,n,e)}))},fe=element=>I(element.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),ge=e=>((e,t)=>z.fromDom(e.dom.cloneNode(t)))(e,!0),be=(e,t)=>{const n=((e,t)=>{const n=z.fromTag(t),r=fe(e);return me(n,r),n})(e,t);re(e,n);const r=K(e);return ie(n,r),ae(e),n};var ve=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ye=tinymce.util.Tools.resolve("tinymce.util.Tools");const we=e=>t=>d(t)&&t.nodeName.toLowerCase()===e,Ae=e=>t=>d(t)&&e.test(t.nodeName),xe=e=>d(e)&&3===e.nodeType,Oe=e=>d(e)&&1===e.nodeType,Ce=Ae(/^(OL|UL|DL)$/),_e=Ae(/^(OL|UL)$/),Se=we("ol"),ke=Ae(/^(LI|DT|DD)$/),je=Ae(/^(DT|DD)$/),Te=Ae(/^(TH|TD)$/),Ie=we("br"),De=(e,t)=>d(t)&&t.nodeName in e.schema.getTextBlockElements(),Ee=(e,t)=>d(e)&&e.nodeName in t,Re=(e,t,n)=>{const r=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&r},Be=(e,t)=>e.isChildOf(t,e.getRoot()),option=e=>t=>t.options.get(e),Me=option("lists_indent_on_tab"),Pe=option("forced_root_block"),Le=option("forced_root_block_attrs"),Fe=(e,t)=>{const n=e.dom,r=e.schema.getBlockElements(),o=n.createFragment(),l=Pe(e),c=Le(e);let d,h,m=!1;for(h=n.create(l,c),Ee(t.firstChild,r)||o.appendChild(h);d=t.firstChild;){const e=d.nodeName;m||"SPAN"===e&&"bookmark"===d.getAttribute("data-mce-type")||(m=!0),Ee(d,r)?(o.appendChild(d),h=null):(h||(h=n.create(l,c),o.appendChild(h)),h.appendChild(d))}return!m&&h&&h.appendChild(n.create("br",{"data-mce-bogus":"1"})),o},$e=ve.DOM,Ne=(e,t,li)=>{const n=$e.select('span[data-mce-type="bookmark"]',t),r=Fe(e,li),o=$e.createRng();o.setStartAfter(li),o.setEndAfter(t);const l=o.extractContents();for(let t=l.firstChild;t;t=t.firstChild)if("LI"===t.nodeName&&e.dom.isEmpty(t)){$e.remove(t);break}e.dom.isEmpty(l)||$e.insertAfter(l,t),$e.insertAfter(r,t);const c=li.parentElement;c&&Re(e.dom,c)&&(e=>{const t=e.parentNode;t&&ye.each(n,(e=>{t.insertBefore(e,li.parentNode)})),$e.remove(e)})(c),$e.remove(li),Re(e.dom,t)&&$e.remove(t)},ze=Y("dd"),Ve=Y("dt"),He=(e,t)=>{var element;ze(t)?be(t,"dt"):Ve(t)&&(element=t,x.from(element.dom.parentElement).map(z.fromDom)).each((dl=>Ne(e,dl.dom,t.dom)))},We=e=>{Ve(e)&&be(e,"dd")},qe=(e,t)=>{if(xe(e))return{container:e,offset:t};const n=le.getNode(e,t);return xe(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&xe(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&xe(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},Qe=e=>{const t=e.cloneRange(),n=qe(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);const r=qe(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},Ue=["OL","UL","DL"],Ye=Ue.join(","),Ge=(e,t)=>{const n=t||e.selection.getStart(!0);return e.dom.getParent(n,Ye,Je(e,n))},Ke=e=>{const t=Ge(e),n=e.selection.getSelectedBlocks();return((e,t)=>d(e)&&1===t.length&&t[0]===e)(t,n)?(e=>T(e.querySelectorAll(Ye),Ce))(t):T(n,(e=>Ce(e)&&t!==e))},Xe=e=>{const t=e.selection.getSelectedBlocks();return T(((e,t)=>{const n=ye.map(t,(t=>e.dom.getParent(t,"li,dd,dt",Je(e,t))||t));return L(n)})(e,t),ke)},Ze=(e,t)=>{const n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},Je=(e,t)=>{const n=e.dom.getParents(t,e.dom.isBlock),r=E(n,(t=>{return n=e.schema,!Ce(r=t)&&!ke(r)&&k(Ue,(e=>n.isValidChild(r.nodeName,e)));var n,r}));return r.getOr(e.getBody())},et=(e,t)=>{const n=e.dom.getParents(t,"ol,ul",Je(e,t));return P(n)},tt=e=>{const t=(e=>{const t=et(e,e.selection.getStart()),n=T(e.selection.getSelectedBlocks(),_e);return t.toArray().concat(n)})(e);return nt(e,t)},nt=(e,t)=>{const n=map(t,(t=>et(e,t).getOr(t)));return L(n)},ot=e=>/\btox\-/.test(e.className),it=(e,t)=>D(e,Ce,Te).exists((e=>e.nodeName===t&&!ot(e))),st=(e,element)=>null!==element&&"false"===e.dom.getContentEditableParent(element),at=(e,element)=>{const t=e.dom.getParent(element,"ol,ul,dl");return st(e,t)},lt=(e,t)=>{const n=e.selection.getNode();return t({parents:e.dom.getParents(n),element:n}),e.on("NodeChange",t),()=>e.off("NodeChange",t)},ct=(e,t,element)=>e.dispatch("ListMutation",{action:t,element:element}),ut=(ht=/^\s+|\s+$/g,s=>s.replace(ht,""));var ht;const pt=(e,t,n)=>{if(!r(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);(e=>void 0!==e.style&&h(e.style.getPropertyValue))(e)&&e.style.setProperty(t,n)},mt=(element,e,t)=>{const n=element.dom;pt(n,e,t)},ft=(e,t)=>{oe(e.item,t.list)},gt=(e,t)=>{const n={list:z.fromTag(t,e),item:z.fromTag("li",e)};return oe(n.list,n.item),n},bt=(e,t,n)=>{const r=t.slice(0,n.depth);return P(r).each((t=>{const r=((e,t,content)=>{const n=z.fromTag("li",e);return me(n,t),ie(n,content),n})(e,n.itemAttributes,n.content);((e,t)=>{oe(e.list,t),e.item=t})(t,r),((e,t)=>{W(e.list)!==t.listType&&(e.list=be(e.list,t.listType)),me(e.list,t.listAttributes)})(t,n)})),r},vt=(e,t,n)=>{const r=((e,t,n)=>{const r=[];for(let i=0;i<n;i++)r.push(gt(e,t.listType));return r})(e,n,n.depth-t.length);var o;return(e=>{for(let i=1;i<e.length;i++)ft(e[i-1],e[i])})(r),((e,t)=>{for(let i=0;i<e.length-1;i++)mt(e[i].item,"list-style-type","none");P(e).each((e=>{me(e.list,t.listAttributes),me(e.item,t.itemAttributes),ie(e.item,t.content)}))})(r,n),o=r,$(P(t),head(o),ft),t.concat(r)},yt=e=>H(e,"OL,UL"),wt=e=>Z(e).exists(yt),At=e=>e.depth>0,xt=e=>e.isSelected,Ot=li=>{const e=K(li),content=J(li).exists(yt)?e.slice(0,-1):e;return map(content,ge)},Ct=e=>(j(e,((t,i)=>{((e,t)=>{const n=e[t].depth,r=e=>e.depth===n&&!e.dirty,o=e=>e.depth<n;return D(B(e.slice(0,t)),r,o).orThunk((()=>D(e.slice(t+1),r,o)))})(e,i).fold((()=>{t.dirty&&(e=>{e.listAttributes=filter(e.listAttributes,((e,t)=>"start"!==t))})(t)}),(e=>{return source=e,(n=t).listType=source.listType,void(n.listAttributes={...source.listAttributes});var n,source}))})),e),_t=(e,t,n,r)=>Z(r).filter(yt).fold((()=>{t.each((e=>{V(e.start,r)&&n.set(!0)}));const o=((li,e,t)=>G(li).filter(Q).map((n=>({depth:e,dirty:!1,isSelected:t,content:Ot(li),itemAttributes:fe(li),listAttributes:fe(n),listType:W(n)}))))(r,e,n.get());t.each((e=>{V(e.end,r)&&n.set(!1)}));const l=J(r).filter(yt).map((r=>St(e,t,n,r))).getOr([]);return o.toArray().concat(l)}),(r=>St(e,t,n,r))),St=(e,t,n,r)=>R(K(r),(element=>(yt(element)?St:_t)(e+1,t,n,element))),kt=(e,t)=>{const n=Ct(t);return map(n,(t=>{const content=((e,t)=>{const n=(t||document).createDocumentFragment();return j(e,(element=>{n.appendChild(element.dom)})),z.fromDom(n)})(t.content);return z.fromDom(Fe(e,content.dom))}))},jt=(e,t)=>{const n=Ct(t);return((e,t)=>{const n=I(t,((t,n)=>n.depth>t.length?vt(e,t,n):bt(e,t,n)),[]);return head(n).map((e=>e.list))})(e.contentDocument,n).toArray()},Tt=(e,t,n)=>{const r=((e,t)=>{const n=(e=>{let t=!1;return{get:()=>t,set:e=>{t=e}}})();return map(e,(e=>({sourceList:e,entries:St(0,t,n,e)})))})(t,(e=>{const t=map(Xe(e),z.fromDom);return $(E(t,y(wt)),E(B(t),y(wt)),((e,t)=>({start:e,end:t})))})(e));j(r,(t=>{((e,t)=>{j(T(e,xt),(e=>((e,t)=>{switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0})(t,e)))})(t.entries,n);const r=((e,t)=>R(((e,t)=>{if(0===e.length)return[];{let n=t(e[0]);const r=[];let o=[];for(let i=0,l=e.length;i<l;i++){const l=e[i],c=t(l);c!==n&&(r.push(o),o=[]),n=c,o.push(l)}return 0!==o.length&&r.push(o),r}})(t,At),(t=>head(t).exists(At)?jt(e,t):kt(e,t))))(e,t.entries);var marker;j(r,(t=>{ct(e,"Indent"===n?"IndentList":"OutdentList",t.dom)})),marker=t.sourceList,j(r,(e=>{ne(marker,e)})),ae(t.sourceList)}))},It=(e,t)=>{const n=de(tt(e)),r=de((e=>T(Xe(e),je))(e));let o=!1;if(n.length||r.length){const l=e.selection.getBookmark();Tt(e,n,t),((e,t,n)=>{j(n,"Indent"===t?We:t=>He(e,t))})(e,t,r),e.selection.moveToBookmark(l),e.selection.setRng(Qe(e.selection.getRng())),e.nodeChanged(),o=!0}return o},Dt=(e,t)=>!(e=>{const t=Ge(e);return st(e,t)})(e)&&It(e,t),Et=e=>Dt(e,"Indent"),Rt=e=>Dt(e,"Outdent"),Bt=e=>Dt(e,"Flatten");var Mt=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Pt=ve.DOM,Lt=e=>{const t={},n=n=>{let r=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"];if(Oe(r)){const e=Pt.create("span",{"data-mce-type":"bookmark"});r.hasChildNodes()?(o=Math.min(o,r.childNodes.length-1),n?r.insertBefore(e,r.childNodes[o]):Pt.insertAfter(e,r.childNodes[o])):r.appendChild(e),r=e,o=0}t[n?"startContainer":"endContainer"]=r,t[n?"startOffset":"endOffset"]=o};return n(!0),e.collapsed||n(),t},Ft=e=>{const t=t=>{let n=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"];if(n){if(Oe(n)&&n.parentNode){const e=n;r=(e=>{var t;let n=null===(t=e.parentNode)||void 0===t?void 0:t.firstChild,r=0;for(;n;){if(n===e)return r;Oe(n)&&"bookmark"===n.getAttribute("data-mce-type")||r++,n=n.nextSibling}return-1})(n),n=n.parentNode,Pt.remove(e),!n.hasChildNodes()&&Pt.isBlock(n)&&n.appendChild(Pt.create("br"))}e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=r}};t(!0),t();const n=Pt.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),Qe(n)},$t=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Nt=(e,t)=>{ye.each(t,((t,n)=>{e.setAttribute(n,t)}))},zt=(e,t,n)=>{((e,t,n)=>{const r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)})(e,t,n),((e,t,n)=>{Nt(t,n["list-attributes"]),ye.each(e.select("li",t),(li=>{Nt(li,n["list-item-attributes"])}))})(e,t,n)},Vt=(e,t,n,r)=>{let o=t[n?"startContainer":"endContainer"];const l=t[n?"startOffset":"endOffset"];for(Oe(o)&&(o=o.childNodes[Math.min(l,o.childNodes.length-1)]||o),!n&&Ie(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){const t=o.parentNode;if(De(e,o))return o;if(/^(TD|TH)$/.test(t.nodeName))return o;o=t}return o},Ht=(e,t,n)=>{const r=e.selection.getRng();let o="LI";const l=Je(e,e.selection.getStart(!0)),c=e.dom;if("false"===c.getContentEditable(e.selection.getNode()))return;"DL"===(t=t.toUpperCase())&&(o="DT");const d=Lt(r),h=((e,t,n)=>{const r=[],o=e.dom,l=Vt(e,t,!0,n),c=Vt(e,t,!1,n);let d;const h=[];for(let e=l;e&&(h.push(e),e!==c);e=e.nextSibling);return ye.each(h,(t=>{var l;if(De(e,t))return r.push(t),void(d=null);if(o.isBlock(t)||Ie(t))return Ie(t)&&o.remove(t),void(d=null);const c=t.nextSibling;Mt.isBookmarkNode(t)&&(Ce(c)||De(e,c)||!c&&t.parentNode===n)?d=null:(d||(d=o.create("p"),null===(l=t.parentNode)||void 0===l||l.insertBefore(d,t),r.push(d)),d.appendChild(t))})),r})(e,r,l);ye.each(h,(r=>{let l;const d=r.previousSibling,h=r.parentNode;ke(h)||(d&&Ce(d)&&d.nodeName===t&&((e,t,n)=>{const r=e.getStyle(t,"list-style-type");let o=n?n["list-style-type"]:"";return o=null===o?"":o,r===o})(c,d,n)?(l=d,r=c.rename(r,o),d.appendChild(r)):(l=c.create(t),h.insertBefore(l,r),l.appendChild(r),r=c.rename(r,o)),((e,element,t)=>{ye.each(t,(style=>e.setStyle(element,style,"")))})(c,r,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),zt(c,l,n),qt(e.dom,l))})),e.selection.setRng(Ft(d))},Wt=(e,t,n)=>{return((e,t)=>Ce(e)&&e.nodeName===(null==t?void 0:t.nodeName))(t,n)&&((e,t,n)=>e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0))(e,t,n)&&(r=n,t.className===r.className);var r},qt=(e,t)=>{let n,r=t.nextSibling;if(Wt(e,t,r)){const o=r;for(;n=o.firstChild;)t.appendChild(n);e.remove(o)}if(r=t.previousSibling,Wt(e,t,r)){const o=r;for(;n=o.lastChild;)t.insertBefore(n,t.firstChild);e.remove(o)}},Qt=(e,t,n,r,o)=>{const l=Ce(t);if(l&&t.nodeName===r&&!Ut(o))Bt(e);else{Ht(e,r,o);const c=Lt(e.selection.getRng()),d=l?[t,...n]:n;ye.each(d,(t=>{((e,t,n,r)=>{if(t.nodeName!==n){const o=e.dom.rename(t,n);zt(e.dom,o,r),ct(e,$t(n),o)}else zt(e.dom,t,r),ct(e,$t(n),t)})(e,t,r,o)})),e.selection.setRng(Ft(c))}},Ut=e=>"list-style-type"in e,Yt=(e,t,n)=>{const r=Ge(e);if(at(e,r))return;const l=Ke(e),c=o(n)?n:{};l.length>0?Qt(e,r,l,t,c):((e,t,n,r)=>{if(t!==e.getBody())if(t)if(t.nodeName!==n||Ut(r)||ot(t)){const o=Lt(e.selection.getRng());zt(e.dom,t,r);const l=e.dom.rename(t,n);qt(e.dom,l),e.selection.setRng(Ft(o)),Ht(e,n,r),ct(e,$t(n),l)}else Bt(e);else Ht(e,n,r),ct(e,$t(n),t)})(e,r,t,c)},Gt=ve.DOM,Kt=(e,element)=>{const t=ye.grep(e.select("ol,ul",element));ye.each(t,(t=>{((e,t)=>{const n=t.parentElement;if(n&&"LI"===n.nodeName&&n.firstChild===t){const r=n.previousSibling;r&&"LI"===r.nodeName?(r.appendChild(t),Re(e,n)&&Gt.remove(n)):Gt.setStyle(n,"listStyleType","none")}if(Ce(n)){const e=n.previousSibling;e&&"LI"===e.nodeName&&e.appendChild(t)}})(e,t)}))},Xt=(e,t,n,r)=>{let o=t.startContainer;const l=t.startOffset;if(xe(o)&&(n?l<o.data.length:l>0))return o;const c=e.schema.getNonEmptyElements();Oe(o)&&(o=le.getNode(o,l));const d=new ce(o,r);n&&((e,t)=>!!Ie(t)&&e.isBlock(t.nextSibling)&&!Ie(t.previousSibling))(e.dom,o)&&d.next();const h=n?d.next.bind(d):d.prev2.bind(d);for(;o=h();){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(c[o.nodeName])return o;if(xe(o)&&o.data.length>0)return o}return null},Zt=(e,t)=>{const n=t.childNodes;return 1===n.length&&!Ce(n[0])&&e.isBlock(n[0])},Jt=(e,t,n)=>{let r;const o=Zt(e,n)?n.firstChild:n;if(((e,t)=>{Zt(e,t)&&e.remove(t.firstChild,!0)})(e,t),!Re(e,t,!0))for(;r=t.firstChild;)o.appendChild(r)},en=(e,t,n)=>{let r;const ul=t.parentNode;if(!Be(e,t)||!Be(e,n))return;Ce(n.lastChild)&&(r=n.lastChild),ul===n.lastChild&&Ie(ul.previousSibling)&&e.remove(ul.previousSibling);const o=n.lastChild;o&&Ie(o)&&t.hasChildNodes()&&e.remove(o),Re(e,n,!0)&&se(z.fromDom(n)),Jt(e,t,n),r&&n.appendChild(r);const l=((e,t)=>{const n=e.dom,r=t.dom;return n!==r&&n.contains(r)})(z.fromDom(n),z.fromDom(t))?e.getParents(t,Ce,n):[];e.remove(t),j(l,(t=>{Re(e,t)&&t!==e.getRoot()&&e.remove(t)}))},tn=(e,t,n,r)=>{const o=e.dom;if(o.isEmpty(r))((e,t,n)=>{se(z.fromDom(n)),en(e.dom,t,n),e.selection.setCursorLocation(n,0)})(e,n,r);else{const l=Lt(t);en(o,n,r),e.selection.setRng(Ft(l))}},nn=(e,t)=>{const n=e.dom,r=e.selection,o=r.getStart(),l=Ze(e,o),li=n.getParent(r.getStart(),"LI",l);if(li){const ul=li.parentElement;if(ul===e.getBody()&&Re(n,ul))return!0;const o=Qe(r.getRng()),c=n.getParent(Xt(e,o,t,l),"LI",l);if(c&&c!==li)return e.undoManager.transact((()=>{var n,r;t?tn(e,o,c,li):(null===(r=(n=li).parentNode)||void 0===r?void 0:r.firstChild)===n?Rt(e):((e,t,n,r)=>{const o=Lt(t);en(e.dom,n,r);const l=Ft(o);e.selection.setRng(l)})(e,o,li,c)})),!0;if(!c&&!t&&0===o.startOffset&&0===o.endOffset)return e.undoManager.transact((()=>{Bt(e)})),!0}return!1},rn=(e,t)=>{const n=e.dom,r=e.selection.getStart(),o=Ze(e,r),l=n.getParent(r,n.isBlock,o);if(l&&n.isEmpty(l)){const r=Qe(e.selection.getRng()),c=n.getParent(Xt(e,r,t,o),"LI",o);if(c){const d=element=>S(["td","th","caption"],W(element)),h=e=>e.dom===o;return!!((e,t,n=v)=>$(e,t,n).getOr(e.isNone()&&t.isNone()))(te(z.fromDom(c),d,h),te(z.fromDom(r.startContainer),d,h),V)&&(e.undoManager.transact((()=>{((e,t,n)=>{const r=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)})(n,l,o),qt(n,c.parentNode),e.selection.select(c,!0),e.selection.collapse(t)})),!0)}}return!1},on=e=>{const t=e.selection.getStart(),n=Ze(e,t);return e.dom.getParent(t,"LI,DT,DD",n)||Xe(e).length>0},sn=(e,t)=>{const n=e.selection;return!at(e,n.getNode())&&(n.isCollapsed()?((e,t)=>nn(e,t)||rn(e,t))(e,t):(e=>!!on(e)&&(e.undoManager.transact((()=>{e.execCommand("Delete"),Kt(e.dom,e.getBody())})),!0))(e))},an=e=>{const t=B(ut(e).split("")),n=map(t,((e,i)=>{const t=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,i)*t}));return I(n,((e,t)=>e+t),0)},ln=e=>{if(--e<0)return"";{const t=e%26,n=Math.floor(e/26);return ln(n)+String.fromCharCode("A".charCodeAt(0)+t)}},cn=e=>{const t=parseInt(e.start,10);return F(e.listStyleType,"upper-alpha")?ln(t):F(e.listStyleType,"lower-alpha")?ln(t).toLowerCase():e.start},un=e=>{const t=Ge(e);Se(t)&&!at(e,t)&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:cn({start:e.dom.getAttrib(t,"start","1"),listStyleType:x.from(e.dom.getStyle(t,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{(e=>{switch((e=>/^[0-9]+$/.test(e)?2:/^[A-Z]+$/.test(e)?0:(e=>/^[a-z]+$/.test(e))(e)?1:e.length>0?4:3)(e)){case 2:return x.some({listStyleType:x.none(),start:e});case 0:return x.some({listStyleType:x.some("upper-alpha"),start:an(e).toString()});case 1:return x.some({listStyleType:x.some("lower-alpha"),start:an(e).toString()});case 3:return x.some({listStyleType:x.none(),start:""});case 4:return x.none()}})(t.getData().start).each((t=>{e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})})),t.close()}})},dn=(e,t)=>()=>{const n=Ge(e);return d(n)&&n.nodeName===t},hn=e=>{e.addCommand("mceListProps",(()=>{un(e)}))},pn=e=>{e.on("BeforeExecCommand",(t=>{const n=t.command.toLowerCase();"indent"===n?Et(e):"outdent"===n&&Rt(e)})),e.addCommand("InsertUnorderedList",((t,n)=>{Yt(e,"UL",n)})),e.addCommand("InsertOrderedList",((t,n)=>{Yt(e,"OL",n)})),e.addCommand("InsertDefinitionList",((t,n)=>{Yt(e,"DL",n)})),e.addCommand("RemoveList",(()=>{Bt(e)})),hn(e),e.addCommand("mceListUpdate",((t,n)=>{o(n)&&((e,t)=>{const n=Ge(e);null===n||at(e,n)||e.undoManager.transact((()=>{o(t.styles)&&e.dom.setStyles(n,t.styles),o(t.attrs)&&pe(t.attrs,((t,r)=>e.dom.setAttrib(n,r,t)))}))})(e,n)})),e.addQueryStateHandler("InsertUnorderedList",dn(e,"UL")),e.addQueryStateHandler("InsertOrderedList",dn(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",dn(e,"DL"))},mn=e=>{Me(e)&&(e=>{e.on("keydown",(t=>{t.keyCode!==ue.TAB||ue.metaKeyPressed(t)||e.undoManager.transact((()=>{(t.shiftKey?Rt(e):Et(e))&&t.preventDefault()}))}))})(e),(e=>{e.on("ExecCommand",(t=>{const n=t.command.toLowerCase();"delete"!==n&&"forwarddelete"!==n||!on(e)||Kt(e.dom,e.getBody())})),e.on("keydown",(t=>{t.keyCode===ue.BACKSPACE?sn(e,!1)&&t.preventDefault():t.keyCode===ue.DELETE&&sn(e,!0)&&t.preventDefault()}))})(e)},fn=(e,t)=>n=>lt(e,(r=>{n.setActive(it(r.parents,t)),n.setEnabled(!at(e,r.element))})),gn=(e,t)=>n=>lt(e,(r=>n.setEnabled(it(r.parents,t)&&!at(e,r.element))));e.add("lists",(e=>((e=>{(0,e.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0})})(e),e.hasPlugin("rtc",!0)?hn(e):(mn(e),pn(e)),(e=>{const t=t=>()=>e.execCommand(t);e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:fn(e,"OL")}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:fn(e,"UL")}))})(e),(e=>{const t={text:"List properties...",icon:"ordered-list",onAction:()=>e.execCommand("mceListProps"),onSetup:gn(e,"OL")};e.ui.registry.addMenuItem("listprops",t),e.ui.registry.addContextMenu("lists",{update:t=>{const n=Ge(e,t);return Se(n)?["listprops"]:[]}})})(e),(e=>({backspaceDelete:t=>{sn(e,t)}}))(e))))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=(e,t,n)=>{const r="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(r,!1,!1===n?null:{"list-style-type":n})},option=e=>t=>t.options.get(e),n=option("advlist_number_styles"),r=option("advlist_bullet_styles"),o=a=>null==a,l=a=>!o(a);var c=tinymce.util.Tools.resolve("tinymce.util.Tools");class d{constructor(e,t){this.tag=e,this.value=t}static some(e){return new d(!0,e)}static none(){return d.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?d.some(e(this.value)):d.none()}bind(e){return this.tag?e(this.value):d.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:d.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return l(e)?d.some(e):d.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}d.singletonNone=new d(!1);const h=e=>l(e)&&/^(TH|TD)$/.test(e.nodeName),m=e=>o(e)||"default"===e?"":e,f=(e,t,n)=>{const r=((e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n]))return n;return-1})(t.parents,h),o=-1!==r?t.parents.slice(0,r):t.parents,d=c.grep(o,(e=>t=>l(t)&&/^(OL|UL|DL)$/.test(t.nodeName)&&((e,t)=>e.dom.isChildOf(t,e.getBody()))(e,t))(e));return d.length>0&&d[0].nodeName===n},v=(e,t)=>n=>{const r=r=>{n.setActive(f(e,r,t)),n.setEnabled(!((e,element)=>{const t=e.dom.getParent(element,"ol,ul,dl");return((e,element)=>null!==element&&"false"===e.dom.getContentEditableParent(element))(e,t)})(e,r.element))};return e.on("NodeChange",r),()=>e.off("NodeChange",r)},y=(e,n,r,o,l,h)=>{e.ui.registry.addSplitButton(n,{tooltip:r,icon:"OL"===l?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:e=>{e(c.map(h,(e=>{const t="OL"===l?"num":"bull",n="disc"===e||"decimal"===e?"default":e,r=m(e),o=(e=>e.replace(/\-/g," ").replace(/\b\w/g,(e=>e.toUpperCase())))(e);return{type:"choiceitem",value:r,icon:"list-"+t+"-"+n,text:o}})))},onAction:()=>e.execCommand(o),onItemAction:(n,r)=>{t(e,l,r)},select:t=>{const n=(e=>{const t=e.dom.getParent(e.selection.getNode(),"ol,ul"),style=e.dom.getStyle(t,"listStyleType");return d.from(style)})(e);return n.map((e=>t===e)).getOr(!1)},onSetup:v(e,l)})},w=(e,n,r,o,l,c)=>{c.length>1?y(e,n,r,o,l,c):((e,n,r,o,l,c)=>{e.ui.registry.addToggleButton(n,{active:!1,tooltip:r,icon:"OL"===l?"ordered-list":"unordered-list",onSetup:v(e,l),onAction:()=>e.queryCommandState(o)||""===c?e.execCommand(o):t(e,l,c)})})(e,n,r,o,l,m(c[0]))};e.add("advlist",(e=>{e.hasPlugin("lists")?((e=>{const t=e.options.register;t("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),t("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})})(e),(e=>{w(e,"numlist","Numbered list","InsertOrderedList","OL",n(e)),w(e,"bullist","Bullet list","InsertUnorderedList","UL",r(e))})(e),(e=>{e.addCommand("ApplyUnorderedListStyle",((n,r)=>{t(e,"UL",r["list-style-type"])})),e.addCommand("ApplyOrderedListStyle",((n,r)=>{t(e,"OL",r["list-style-type"])}))})(e)):console.error("Please use the Lists plugin together with the Advanced List plugin.")}))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,r=(l=String).prototype,r.isPrototypeOf(n)||(null===(c=o.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,r;var o,l,c})(t)===e,n=e=>t=>typeof t===e,r=t("string"),o=t("object"),l=t("array"),c=(d=null,a=>d===a);var d;const h=n("boolean"),m=a=>!(a=>null==a)(a),f=n("function"),v=(e,t)=>{if(l(e)){for(let i=0,n=e.length;i<n;++i)if(!t(e[i]))return!1;return!0}return!1},y=()=>{},w=(a,b)=>a===b;class A{constructor(e,t){this.tag=e,this.value=t}static some(e){return new A(!0,e)}static none(){return A.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?A.some(e(this.value)):A.none()}bind(e){return this.tag?e(this.value):A.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:A.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return m(e)?A.some(e):A.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}A.singletonNone=new A(!1);const x=Array.prototype.indexOf,O=Array.prototype.push,C=(e,t)=>((e,t)=>x.call(e,t))(e,t)>-1,_=e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!l(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);O.apply(t,e[i])}return t},S=(e,t)=>_(((e,t)=>{const n=e.length,r=new Array(n);for(let i=0;i<n;i++){const n=e[i];r[i]=t(n,i)}return r})(e,t)),k=(e,t)=>{for(let i=0;i<e.length;i++){const n=t(e[i],i);if(n.isSome())return n}return A.none()},j=(e,t,n=w)=>e.exists((e=>n(e,t))),T=e=>{const t=[],n=e=>{t.push(e)};for(let i=0;i<e.length;i++)e[i].each(n);return t},I=(b,a)=>b?A.some(a):A.none(),option=e=>t=>t.options.get(e),D=option("link_assume_external_targets"),E=option("link_context_toolbar"),R=option("link_list"),B=option("link_default_target"),M=option("link_default_protocol"),P=option("link_target_list"),L=option("link_rel_list"),F=option("link_class_list"),$=option("link_title"),N=option("allow_unsafe_link_target"),z=option("link_quicklink");var V=tinymce.util.Tools.resolve("tinymce.util.Tools");const H=e=>r(e.value)?e.value:"",W=(e,t)=>{const n=[];return V.each(e,(e=>{const text=(e=>r(e.text)?e.text:r(e.title)?e.title:"")(e);if(void 0!==e.menu){const r=W(e.menu,t);n.push({text:text,items:r})}else{const r=t(e);n.push({text:text,value:r})}})),n},Q=(e=H)=>t=>A.from(t).map((t=>W(t,e))),U={sanitize:e=>Q(H)(e),sanitizeWith:Q,createUi:(e,label)=>t=>({name:e,type:"listbox",label:label,items:t}),getValue:H},Y=Object.keys,G=Object.hasOwnProperty,K=(e,t,n,r)=>{((e,t)=>{const n=Y(e);for(let r=0,o=n.length;r<o;r++){const i=n[r];t(e[i],i)}})(e,((e,i)=>{(t(e,i)?n:r)(e,i)}))},X=(e,t)=>G.call(e,t);var Z=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),J=tinymce.util.Tools.resolve("tinymce.util.URI");const ee=e=>m(e)&&"a"===e.nodeName.toLowerCase(),te=e=>ee(e)&&!!oe(e),ne=(e,t)=>{if(e.collapsed)return[];{const n=e.cloneContents(),r=n.firstChild,o=new Z(r,n),l=[];let c=r;do{t(c)&&l.push(c)}while(c=o.next());return l}},re=e=>/^\w+:/i.test(e),oe=e=>{var t,n;return null!==(n=null!==(t=e.getAttribute("data-mce-href"))&&void 0!==t?t:e.getAttribute("href"))&&void 0!==n?n:""},ie=(e,t)=>{const n=["noopener"],r=e?e.split(/\s+/):[],o=e=>e.filter((e=>-1===V.inArray(n,e))),l=t?(e=>(e=o(e)).length>0?e.concat(n):n)(r):o(r);return l.length>0?(e=>V.trim(e.sort().join(" ")))(l):""},se=(e,t)=>(t=t||e.selection.getNode(),de(t)?A.from(e.dom.select("a[href]",t)[0]):A.from(e.dom.getParent(t,"a[href]"))),ae=(e,t)=>se(e,t).isSome(),le=(e,t)=>(text=>text.replace(/\uFEFF/g,""))(t.fold((()=>e.getContent({format:"text"})),(e=>e.innerText||e.textContent||""))),ce=e=>V.grep(e,te).length>0,ue=e=>{const t=e.schema.getTextInlineElements(),n=e=>1===e.nodeType&&!ee(e)&&!X(t,e.nodeName.toLowerCase());if(se(e).exists((e=>e.hasAttribute("data-mce-block"))))return!1;const r=e.selection.getRng();if(r.collapsed)return!0;return 0===ne(r,n).length},de=e=>m(e)&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className),he=(e,t)=>{const n={...t};if(0===L(e).length&&!N(e)){const e=ie(n.rel,"_blank"===n.target);n.rel=e||null}return A.from(n.target).isNone()&&!1===P(e)&&(n.target=B(e)),n.href=((e,t)=>"http"!==t&&"https"!==t||re(e)?e:t+"://"+e)(n.href,D(e)),n},pe=(e,t,data)=>{const n=e.selection.getNode(),r=se(e,n),o=he(e,(data=>{return e=["title","rel","class","target"],t=(e,t)=>(data[t].each((n=>{e[t]=n.length>0?n:null})),e),n={href:data.href},((e,t)=>{for(let i=0,n=e.length;i<n;i++)t(e[i],i)})(e,((e,i)=>{n=t(n,e,i)})),n;var e,t,n})(data));e.undoManager.transact((()=>{data.href===t.href&&t.attach(),r.fold((()=>{((e,t,text,n)=>{const r=e.dom;de(t)?be(r,t,n):text.fold((()=>{e.execCommand("mceInsertLink",!1,n)}),(text=>{e.insertContent(r.createHTML("a",n,r.encode(text)))}))})(e,n,data.text,o)}),(t=>{e.focus(),((e,t,text,n)=>{text.each((text=>{X(t,"innerText")?t.innerText=text:t.textContent=text})),e.dom.setAttribs(t,n),e.selection.select(t)})(e,t,data.text,o)}))}))},me=data=>{const{class:e,href:t,rel:n,target:r,text:text,title:title}=data;return((e,t)=>{const n={};var r;return K(e,t,(r=n,(e,i)=>{r[i]=e}),y),n})({class:e.getOrNull(),href:t,rel:n.getOrNull(),target:r.getOrNull(),text:text.getOrNull(),title:title.getOrNull()},((e,t)=>!1===c(e)))},link=(e,t,data)=>{const n=((e,data)=>{const t=e.options.get,n={allow_html_data_urls:t("allow_html_data_urls"),allow_script_urls:t("allow_script_urls"),allow_svg_data_urls:t("allow_svg_data_urls")},r=data.href;return{...data,href:J.isDomSafe(r,"a",n)?r:""}})(e,data);e.hasPlugin("rtc",!0)?e.execCommand("createlink",!1,me(n)):pe(e,t,n)},fe=e=>{e.hasPlugin("rtc",!0)?e.execCommand("unlink"):(e=>{e.undoManager.transact((()=>{const t=e.selection.getNode();de(t)?ge(e,t):(e=>{const t=e.dom,n=e.selection,r=n.getBookmark(),o=n.getRng().cloneRange(),l=t.getParent(o.startContainer,"a[href]",e.getBody()),c=t.getParent(o.endContainer,"a[href]",e.getBody());l&&o.setStartBefore(l),c&&o.setEndAfter(c),n.setRng(o),e.execCommand("unlink"),n.moveToBookmark(r)})(e),e.focus()}))})(e)},ge=(e,t)=>{var n;const img=e.dom.select("img",t)[0];if(img){const a=e.dom.getParents(img,"a[href]",t)[0];a&&(null===(n=a.parentNode)||void 0===n||n.insertBefore(img,a),e.dom.remove(a))}},be=(e,t,n)=>{var r;const img=e.select("img",t)[0];if(img){const a=e.create("a",n);null===(r=img.parentNode)||void 0===r||r.insertBefore(a,img),a.appendChild(img)}},ve=e=>{return X(t=e,n="items")&&void 0!==t[n]&&null!==t[n];var t,n},ye=(e,t)=>k(t,(t=>ve(t)?ye(e,t.items):I(t.value===e,t))),we=(e,t,n,data)=>{const r=data[t],o=e.length>0;return void 0!==r?ye(r,n).map((i=>({url:{value:i.value,meta:{text:o?e:i.text,attach:y}},text:o?e:i.text}))):A.none()},Ae=(e,t)=>{const n={text:e.text,title:e.title},r=data=>{const text=(e=data.url,I(n.text.length<=0,A.from(null===(t=e.meta)||void 0===t?void 0:t.text).getOr(e.value)));var e,t;const title=(e=>{var t;return I(n.title.length<=0,A.from(null===(t=e.meta)||void 0===t?void 0:t.title).getOr(""))})(data.url);return text.isSome()||title.isSome()?A.some({...text.map((text=>({text:text}))).getOr({}),...title.map((title=>({title:title}))).getOr({})}):A.none()},o=(data,e)=>{const r=(o=t,l=e,"link"===l?o.link:"anchor"===l?o.anchor:A.none()).getOr([]);var o,l;return we(n.text,e,r,data)};return{onChange:(e,t)=>{const l=t.name;return"url"===l?r(e()):C(["anchor","link"],l)?o(e(),l):"text"===l||"title"===l?(n[l]=e()[l],A.none()):A.none()}}};var xe=tinymce.util.Tools.resolve("tinymce.util.Delay");const Oe=data=>{const e=data.href;return e.indexOf("@")>0&&-1===e.indexOf("/")&&-1===e.indexOf("mailto:")?A.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:t=>({...t,href:"mailto:"+e})}):A.none()},Ce=(e,t)=>data=>{const n=data.href;return 1===e&&!re(n)||0===e&&/^\s*www(\.|\d\.)/i.test(n)?A.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${t}:// prefix?`,preprocess:e=>({...e,href:t+"://"+n})}):A.none()},_e=(e,data)=>k([Oe,Ce(D(e),M(e))],(e=>e(data))).fold((()=>Promise.resolve(data)),(t=>new Promise((n=>{((e,t,n)=>{const r=e.selection.getRng();xe.setEditorTimeout(e,(()=>{e.windowManager.confirm(t,(t=>{e.selection.setRng(r),n(t)}))}))})(e,t.message,(e=>{n(e?t.preprocess(data):data)}))})))),Se=e=>{const t=e.dom.select("a:not([href])"),n=S(t,(e=>{const t=e.name||e.id;return t?[{text:t,value:"#"+t}]:[]}));return n.length>0?A.some([{text:"None",value:""}].concat(n)):A.none()},ke=e=>{const t=F(e);return t.length>0?U.sanitize(t):A.none()},je=text=>{try{return A.some(JSON.parse(text))}catch(e){return A.none()}},Te=e=>{const t=t=>e.convertURL(t.value||t.url||"","href"),n=R(e);return new Promise((e=>{r(n)?fetch(n).then((e=>e.ok?e.text().then(je):Promise.reject())).then(e,(()=>e(A.none()))):f(n)?n((output=>e(A.some(output)))):e(A.from(n))})).then((e=>e.bind(U.sanitizeWith(t)).map((e=>{if(e.length>0){return[{text:"None",value:""}].concat(e)}return e}))))},Ie=(e,t)=>{const n=L(e);if(n.length>0){const r=j(t,"_blank"),o=e=>ie(U.getValue(e),r);return(!1===N(e)?U.sanitizeWith(o):U.sanitize)(n)}return A.none()},De=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Ee=e=>{const t=P(e);return l(t)?U.sanitize(t).orThunk((()=>A.some(De))):!1===t?A.none():A.some(De)},Re=(e,t,n)=>{const r=e.getAttrib(t,n);return null!==r&&r.length>0?A.some(r):A.none()},Be=(e,t)=>Te(e).then((n=>{const r=((e,t)=>{const n=e.dom,text=ue(e)?A.some(le(e.selection,t)):A.none(),r=t.bind((e=>A.from(n.getAttrib(e,"href")))),o=t.bind((e=>A.from(n.getAttrib(e,"target")))),l=t.bind((e=>Re(n,e,"rel"))),c=t.bind((e=>Re(n,e,"class")));return{url:r,text:text,title:t.bind((e=>Re(n,e,"title"))),target:o,rel:l,linkClass:c}})(e,t);return{anchor:r,catalogs:{targets:Ee(e),rels:Ie(e,r.target),classes:ke(e),anchor:Se(e),link:n},optNode:t,flags:{titleEnabled:$(e)}}})),Me=e=>{const data=(e=>{const t=se(e);return Be(e,t)})(e);data.then((t=>{const n=((e,t)=>n=>{const data=n.getData();if(!data.url.value)return fe(e),void n.close();const r=e=>A.from(data[e]).filter((n=>!j(t.anchor[e],n))),o={href:data.url.value,text:r("text"),target:r("target"),rel:r("rel"),class:r("linkClass"),title:r("title")},l={href:data.url.value,attach:void 0!==data.url.meta&&data.url.meta.attach?data.url.meta.attach:y};_e(e,o).then((t=>{link(e,l,t)})),n.close()})(e,t);return((e,t,n)=>{const r=e.anchor.text.map((()=>({name:"text",type:"input",label:"Text to display"}))).toArray(),o=e.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],l=((e,t)=>{const n=e.anchor,r=n.url.getOr("");return{url:{value:r,meta:{original:{value:r}}},text:n.text.getOr(""),title:n.title.getOr(""),anchor:r,link:r,rel:n.rel.getOr(""),target:n.target.or(t).getOr(""),linkClass:n.linkClass.getOr("")}})(e,A.from(B(n))),c=e.catalogs,d=Ae(l,c);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:_([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],r,o,T([c.anchor.map(U.createUi("anchor","Anchors")),c.rels.map(U.createUi("rel","Rel")),c.targets.map(U.createUi("target","Open link in...")),c.link.map(U.createUi("link","Link list")),c.classes.map(U.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:l,onChange:(e,{name:t})=>{d.onChange(e.getData,{name:t}).each((t=>{e.setData(t)}))},onSubmit:t}})(t,n,e)})).then((t=>{e.windowManager.open(t)}))};var Pe=tinymce.util.Tools.resolve("tinymce.util.VK");const Le=e=>{const link=document.createElement("a");link.target="_blank",link.href=e,link.rel="noreferrer noopener";const t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),((link,e)=>{document.body.appendChild(link),link.dispatchEvent(e),document.body.removeChild(link)})(link,t)},Fe=(e,t)=>e.dom.getParent(t,"a[href]"),$e=e=>Fe(e,e.selection.getStart()),Ne=(e,a)=>{if(a){const t=oe(a);if(/^#/.test(t)){const n=e.dom.select(t);n.length&&e.selection.scrollIntoView(n[0],!0)}else Le(a.href)}},ze=e=>()=>{e.execCommand("mceLink",!1,{dialog:!0})},Ve=e=>()=>{Ne(e,$e(e))},He=(e,t)=>(e.on("NodeChange",t),()=>e.off("NodeChange",t)),We=e=>t=>{const n=()=>t.setActive(!e.mode.isReadOnly()&&ae(e,e.selection.getNode()));return n(),He(e,n)},qe=e=>t=>{const n=()=>t.setEnabled(ae(e,e.selection.getNode()));return n(),He(e,n)},Qe=e=>t=>{const n=t=>{return ce(t)||(n=e.selection.getRng(),ne(n,te).length>0);var n},r=e.dom.getParents(e.selection.getStart());return t.setEnabled(n(r)),He(e,(e=>t.setEnabled(n(e.parents))))},Ue=e=>{const t=t=>{const n=e.selection.getNode();return t.setEnabled(ae(e,n)),y};e.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:We(e)},label:"Link",predicate:t=>E(e)&&ae(e,t),initValue:()=>{return se(e).fold((t="",()=>t),oe);var t},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:t=>{const n=e.selection.getNode();return t.setActive(ae(e,n)),We(e)(t)},onAction:t=>{const n=t.getValue(),text=(t=>{const n=se(e),r=ue(e);if(n.isNone()&&r){const text=le(e.selection,n);return A.some(text.length>0?text:t)}return A.none()})(n);link(e,{href:n,attach:y},{href:n,text:text,title:A.none(),rel:A.none(),target:A.none(),class:A.none()}),(e=>{e.selection.collapse(!1)})(e),t.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:t,onAction:t=>{fe(e),t.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:t,onAction:t=>{Ve(e)(),t.hide()}}]})};e.add("link",(e=>{(e=>{const t=e.options.register;t("link_assume_external_targets",{processor:e=>{const t=r(e)||h(e);return t?!0===e?{value:1,valid:t}:"http"===e||"https"===e?{value:e,valid:t}:{value:0,valid:t}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),t("link_context_toolbar",{processor:"boolean",default:!1}),t("link_list",{processor:e=>r(e)||f(e)||v(e,o)}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"}),t("link_target_list",{processor:e=>h(e)||v(e,o),default:!0}),t("link_rel_list",{processor:"object[]",default:[]}),t("link_class_list",{processor:"object[]",default:[]}),t("link_title",{processor:"boolean",default:!0}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("link_quicklink",{processor:"boolean",default:!1})})(e),(e=>{e.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:ze(e),onSetup:We(e)}),e.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Ve(e),onSetup:qe(e)}),e.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>fe(e),onSetup:Qe(e)})})(e),(e=>{e.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Ve(e),onSetup:qe(e)}),e.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:ze(e)}),e.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>fe(e),onSetup:Qe(e)})})(e),(e=>{e.ui.registry.addContextMenu("link",{update:element=>ce(e.dom.getParents(element,"a"))?"link unlink openlink":"link"})})(e),Ue(e),(e=>{e.on("click",(t=>{const link=Fe(e,t.target);link&&Pe.metaKeyPressed(t)&&(t.preventDefault(),Ne(e,link))})),e.on("keydown",(t=>{if(!t.isDefaultPrevented()&&13===t.keyCode&&(e=>!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey)(t)){const link=$e(e);link&&(t.preventDefault(),Ne(e,link))}}))})(e),(e=>{e.addCommand("mceLink",((t,n)=>{!0!==(null==n?void 0:n.dialog)&&z(e)?e.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"}):Me(e)}))})(e),(e=>{e.addShortcut("Meta+K","",(()=>{e.execCommand("mceLink")}))})(e)}))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const option=e=>t=>t.options.get(e),t=option("autolink_pattern"),n=option("link_default_target"),r=option("link_default_protocol"),o=option("allow_unsafe_link_target"),l=(c="string",e=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,(o=String).prototype.isPrototypeOf(n)||(null===(l=r.constructor)||void 0===l?void 0:l.name)===o.name)?"string":t;var n,r,o,l})(e)===c);var c;const d=(h=void 0,a=>h===a);var h;const m=a=>!(a=>null==a)(a),f=Object.hasOwnProperty,v=e=>"\ufeff"===e;var y=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const w=e=>3===e.nodeType,A=e=>/^[(\[{ \u00a0]$/.test(e),x=(text,e,t)=>{for(let i=e-1;i>=0;i--){const e=text.charAt(i);if(!v(e)&&t(e))return i}return-1},O=(e,n)=>{var o;const l=e.schema.getVoidElements(),c=t(e),{dom:h,selection:m}=e;if(null!==h.getParent(m.getNode(),"a[href]"))return null;const v=m.getRng(),O=y(h,(e=>{return h.isBlock(e)||(t=l,n=e.nodeName.toLowerCase(),f.call(t,n))||"false"===h.getContentEditable(e);var t,n})),{container:C,offset:_}=((e,t)=>{let n=e,r=t;for(;1===n.nodeType&&n.childNodes[r];)n=n.childNodes[r],r=w(n)?n.data.length:n.childNodes.length;return{container:n,offset:r}})(v.endContainer,v.endOffset),S=null!==(o=h.getParent(C,h.isBlock))&&void 0!==o?o:h.getRoot(),k=O.backwards(C,_+n,((e,t)=>{const text=e.data,n=x(text,t,(r=A,e=>!r(e)));var r,o;return-1===n||(o=text[n],/[?!,.;:]/.test(o))?n:n+1}),S);if(!k)return null;let j=k.container;const T=O.backwards(k.container,k.offset,((e,t)=>{j=e;const n=x(e.data,t,A);return-1===n?n:n+1}),S),I=h.createRng();T?I.setStart(T.container,T.offset):I.setStart(j,0),I.setEnd(k.container,k.offset);const D=I.toString().replace(/\uFEFF/g,"").match(c);if(D){let t=D[0];if(((e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t)(t,"www.",0)){t=r(e)+"://"+t}else((e,t,n=0,r)=>{const o=e.indexOf(t,n);return-1!==o&&(!!d(r)||o+t.length<=r)})(t,"@")&&!(e=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(e))(t)&&(t="mailto:"+t);return{rng:I,url:t}}return null},C=(e,t)=>{const{dom:r,selection:c}=e,{rng:d,url:h}=t,m=c.getBookmark();c.setRng(d);const f="createlink",v={command:f,ui:!1,value:h};if(!e.dispatch("BeforeExecCommand",v).isDefaultPrevented()){e.getDoc().execCommand(f,!1,h),e.dispatch("ExecCommand",v);const t=n(e);if(l(t)){const n=c.getNode();r.setAttrib(n,"target",t),"_blank"!==t||o(e)||r.setAttrib(n,"rel","noopener")}}c.moveToBookmark(m),e.nodeChanged()},_=e=>{const t=O(e,-1);m(t)&&C(e,t)},S=_,k=e=>{e.on("keydown",(t=>{13!==t.keyCode||t.isDefaultPrevented()||(e=>{const t=O(e,0);m(t)&&C(e,t)})(e)})),e.on("keyup",(t=>{32===t.keyCode?_(e):(48===t.keyCode&&t.shiftKey||221===t.keyCode)&&S(e)}))};e.add("autolink",(e=>{(e=>{const t=e.options.register;t("autolink_pattern",{processor:"regexp",default:new RegExp("^"+/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g.source+"$","i")}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"})})(e),k(e)}))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=(e,t)=>{const n=((e,t)=>e.dispatch("insertCustomChar",{chr:t}))(e,t).chr;e.execCommand("mceInsertContent",!1,n)},n=e=>a=>e===a,r=(o="array",e=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,(o=String).prototype.isPrototypeOf(n)||(null===(l=r.constructor)||void 0===l?void 0:l.name)===o.name)?"string":t;var n,r,o,l})(e)===o);var o;const l=n(null),c=n(void 0),d=(e=>t=>typeof t===e)("function"),h=(m=!1,()=>m);var m;class f{constructor(e,t){this.tag=e,this.value=t}static some(e){return new f(!0,e)}static none(){return f.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?f.some(e(this.value)):f.none()}bind(e){return this.tag?e(this.value):f.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:f.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(a=>null==a)(e)?f.none():f.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}f.singletonNone=new f(!1);const v=Array.prototype.push,map=(e,t)=>{const n=e.length,r=new Array(n);for(let i=0;i<n;i++){const n=e[i];r[i]=t(n,i)}return r},y=(e,t)=>((e,t,n)=>{for(let i=0,r=e.length;i<r;i++){const r=e[i];if(t(r,i))return f.some(r);if(n(r,i))break}return f.none()})(e,t,h),w=(e,t)=>(e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!r(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);v.apply(t,e[i])}return t})(map(e,t));var A=tinymce.util.Tools.resolve("tinymce.util.Tools");const option=e=>t=>t.options.get(e),x=option("charmap"),O=option("charmap_append"),C=A.isArray,_="User Defined",S=e=>{return C(e)?(t=e,A.grep(t,(e=>C(e)&&2===e.length))):"function"==typeof e?e():[];var t},k=e=>{const t=((e,t)=>{const n=x(e);n&&(t=[{name:_,characters:S(n)}]);const r=O(e);if(r){const e=A.grep(t,(e=>e.name===_));return e.length?(e[0].characters=[...e[0].characters,...S(r)],t):t.concat({name:_,characters:S(r)})}return t})(e,[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}]);return t.length>1?[{name:"All",characters:w(t,(g=>g.characters))}].concat(t):t},j=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},T=(e,t,n=0,r)=>{const o=e.indexOf(t,n);return-1!==o&&(!!c(r)||o+t.length<=r)},I=String.fromCodePoint,D=(e,pattern)=>{const t=[],n=pattern.toLowerCase();return((e,t)=>{for(let i=0,n=e.length;i<n;i++)t(e[i],i)})(e.characters,(g=>{((e,t,n)=>!!T(I(e).toLowerCase(),n)||T(t.toLowerCase(),n)||T(t.toLowerCase().replace(/\s+/g,""),n))(g[0],g[1],n)&&t.push(g)})),map(t,(e=>({text:e[1],value:I(e[0]),icon:I(e[0])})))},E="pattern",R=(e,n)=>{const r=()=>[{label:"Search",type:"input",name:E},{type:"collection",name:"results"}],o=1===n.length?j(_):j("All"),c=((e,t)=>{let n=null;const r=()=>{l(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...o)=>{r(),n=setTimeout((()=>{n=null,e.apply(null,o)}),t)}}})((e=>{const pattern=e.getData().pattern;((e,pattern)=>{y(n,(e=>e.name===o.get())).each((t=>{const n=D(t,pattern);e.setData({results:n})}))})(e,pattern)}),40),d={title:"Special Character",size:"normal",body:1===n.length?{type:"panel",items:r()}:{type:"tabpanel",tabs:map(n,(e=>({title:e.name,name:e.name,items:r()})))},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{pattern:"",results:D(n[0],"")},onAction:(n,details)=>{"results"===details.name&&(t(e,details.value),n.close())},onTabChange:(e,details)=>{o.set(details.newTabName),c.throttle(e)},onChange:(e,t)=>{t.name===E&&c.throttle(e)}};e.windowManager.open(d).focus(E)};e.add("charmap",(e=>{(e=>{const t=e.options.register,n=e=>d(e)||r(e);t("charmap",{processor:n}),t("charmap_append",{processor:n})})(e);const n=k(e);return((e,t)=>{e.addCommand("mceShowCharmap",(()=>{R(e,t)}))})(e,n),(e=>{const t=()=>e.execCommand("mceShowCharmap");e.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:t}),e.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:t})})(e),((e,t)=>{e.ui.registry.addAutocompleter("charmap",{trigger:":",columns:"auto",minChars:2,fetch:(pattern,e)=>new Promise(((e,n)=>{e(D(t,pattern))})),onAction:(t,n,r)=>{e.selection.setRng(n),e.insertContent(r),t.hide()}})})(e,n[0]),(e=>({getCharMap:()=>k(e),insertChar:n=>{t(e,n)}}))(e)}))}()},function(e,t){!function(){"use strict";const e=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var t=tinymce.util.Tools.resolve("tinymce.PluginManager");const n=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,r=(l=String).prototype,r.isPrototypeOf(n)||(null===(c=o.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,r;var o,l,c})(t)===e,r=e=>t=>typeof t===e,o=n("string"),l=n("array"),c=r("boolean"),d=r("number"),h=()=>{},m=e=>()=>e,f=m(!0),v=m("[!-#%-*,-\\/:;?@\\[-\\]_{}Â¡Â«Â·Â»Â¿;Â·Õš-ÕŸÖ‰ÖŠÖ¾×€×ƒ×†×³×´Ø‰ØŠØŒØØ›ØžØŸÙª-Ù­Û”Ü€-Üß·-ß¹à °-à ¾à¡žà¥¤à¥¥à¥°à·´à¹à¹šà¹›à¼„-à¼’à¼º-à¼½à¾…à¿-à¿”à¿™à¿šáŠ-ááƒ»á¡-á¨á€á™­á™®áš›ášœá›«-á›­áœµáœ¶áŸ”-áŸ–áŸ˜-áŸšá €-á Šá¥„á¥…á¨žá¨Ÿáª -áª¦áª¨-áª­á­š-á­ á¯¼-á¯¿á°»-á°¿á±¾á±¿á³“â€-â€§â€°-âƒâ…-â‘â“-âžâ½â¾â‚â‚Žã€ˆã€‰â¨-âµâŸ…âŸ†âŸ¦-âŸ¯â¦ƒ-â¦˜â§˜-â§›â§¼â§½â³¹-â³¼â³¾â³¿âµ°â¸€-â¸®â¸°â¸±ã€-ã€ƒã€ˆ-ã€‘ã€”-ã€Ÿã€°ã€½ã‚ ãƒ»ê“¾ê“¿ê˜-ê˜ê™³ê™¾ê›²-ê›·ê¡´-ê¡·ê£Žê£ê£¸-ê£ºê¤®ê¤¯ê¥Ÿê§-ê§ê§žê§Ÿê©œ-ê©Ÿê«žê«Ÿê¯«ï´¾ï´¿ï¸-ï¸™ï¸°-ï¹’ï¹”-ï¹¡ï¹£ï¹¨ï¹ªï¹«ï¼-ï¼ƒï¼…-ï¼Šï¼Œ-ï¼ï¼šï¼›ï¼Ÿï¼ ï¼»-ï¼½ï¼¿ï½›ï½ï½Ÿ-ï½¥]");class y{constructor(e,t){this.tag=e,this.value=t}static some(e){return new y(!0,e)}static none(){return y.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?y.some(e(this.value)):y.none()}bind(e){return this.tag?e(this.value):y.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:y.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(a=>null==a)(e)?y.none():y.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}y.singletonNone=new y(!1);const w=v;var A=tinymce.util.Tools.resolve("tinymce.Env"),x=tinymce.util.Tools.resolve("tinymce.util.Tools");const O=Array.prototype.slice,C=Array.prototype.push,map=(e,t)=>{const n=e.length,r=new Array(n);for(let i=0;i<n;i++){const n=e[i];r[i]=t(n,i)}return r},_=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},S=(e,t)=>{for(let i=e.length-1;i>=0;i--){t(e[i],i)}},k=(e,t)=>(e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!l(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);C.apply(t,e[i])}return t})(map(e,t)),j=Object.hasOwnProperty,T=(e,t)=>j.call(e,t);"undefined"!=typeof window?window:Function("return this;")();const I=(D=3,element=>(element=>element.dom.nodeType)(element)===D);var D;const E=(element,e,t)=>{((e,t,n)=>{if(!(o(n)||c(n)||d(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(element.dom,e,t)},R=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},B={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return R(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return R(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return R(t)},fromDom:R,fromPoint:(e,t,n)=>y.from(e.dom.elementFromPoint(t,n)).map(R)},M=(element,e)=>({element:element,offset:e}),P=(element,e)=>{const t=(element=>map(element.dom.childNodes,B.fromDom))(element);return t.length>0&&e<t.length?M(t[e],0):M(element,e)},L=(marker,element)=>{const e=(element=>y.from(element.dom.parentNode).map(B.fromDom))(marker);e.each((e=>{e.dom.insertBefore(element.dom,marker.dom)}))},F=(element,e)=>{L(element,e),((e,element)=>{e.dom.appendChild(element.dom)})(e,element)},$=((e,t)=>{const n=element=>e(element)?y.from(element.dom.nodeValue):y.none();return{get:element=>{if(!e(element))throw new Error("Can only get "+t+" value of a "+t+" node");return n(element).getOr("")},getOption:n,set:(element,n)=>{if(!e(element))throw new Error("Can only set raw "+t+" value of a "+t+" node");element.dom.nodeValue=n}}})(I,"text"),N=element=>$.get(element),z=(e,t)=>((e,t)=>{const base=void 0===t?document:t.dom;return 1!==(n=base).nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount?[]:map(base.querySelectorAll(e),B.fromDom);var n})(t,e);var V=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const H=(e,t)=>e.isBlock(t)||T(e.schema.getVoidElements(),t.nodeName),W=(e,t)=>"false"===e.getContentEditable(t),Q=(e,t)=>!e.isBlock(t)&&T(e.schema.getWhitespaceElements(),t.nodeName),U=(e,t)=>P(B.fromDom(e),t),Y=(e,t,n,r,o,l=!0)=>{let c=l?t(!1):n;for(;c;){const n=W(e,c);if(n||Q(e,c)){if(n?r.cef(c):r.boundary(c))break;c=t(!0)}else{if(H(e,c)){if(r.boundary(c))break}else 3===c.nodeType&&r.text(c);if(c===o)break;c=t(!1)}}},G=(e,section,t,n,r)=>{var o;if(((e,t)=>H(e,t)||W(e,t)||Q(e,t)||((e,t)=>"true"===e.getContentEditable(t)&&t.parentNode&&"false"===e.getContentEditableParent(t.parentNode))(e,t))(e,t))return;const l=null!==(o=e.getParent(n,e.isBlock))&&void 0!==o?o:e.getRoot(),c=new V(t,l),d=r?c.next.bind(c):c.prev.bind(c);Y(e,d,t,{boundary:f,cef:f,text:e=>{r?section.fOffset+=e.length:section.sOffset+=e.length,section.elements.push(B.fromDom(e))}})},K=(e,t,n,r,o,l=!0)=>{const c=new V(n,t),d=[];let h={sOffset:0,fOffset:0,elements:[]};G(e,h,n,t,!1);const m=()=>(h.elements.length>0&&(d.push(h),h={sOffset:0,fOffset:0,elements:[]}),!1);return Y(e,c.next.bind(c),n,{boundary:m,cef:e=>(m(),o&&d.push(...o.cef(e)),!1),text:e=>{h.elements.push(B.fromDom(e)),o&&o.text(e,h)}},r,l),r&&G(e,h,r,t,!0),m(),d},X=(e,t)=>{const n=U(t.startContainer,t.startOffset),r=n.element.dom,o=U(t.endContainer,t.endOffset),l=o.element.dom;return K(e,t.commonAncestorContainer,r,l,{text:(e,section)=>{e===l?section.fOffset+=e.length-o.offset:e===r&&(section.sOffset+=n.offset)},cef:t=>((e,t)=>{const n=O.call(e,0);return n.sort(t),n})(k(z(B.fromDom(t),"*[contenteditable=true]"),(t=>{const n=t.dom;return K(e,n,n)})),((a,b)=>((a,b)=>((a,b,e)=>0!=(a.compareDocumentPosition(b)&e))(a,b,Node.DOCUMENT_POSITION_PRECEDING))(a.elements[0].dom,b.elements[0].dom)?1:-1))},!1)},Z=(e,t)=>t.collapsed?[]:X(e,t),J=(e,t)=>{const n=e.createRng();return n.selectNode(t),Z(e,n)},ee=(e,t)=>{const n=(r=e,o=(e,element)=>{const content=N(element),n=e.last,r=n+content.length,o=k(t,((e,t)=>e.start<r&&e.finish>n?[{element:element,start:Math.max(n,e.start)-n,finish:Math.min(r,e.finish)-n,matchId:t}]:[]));return{results:e.results.concat(o),last:r}},l={results:[],last:0},_(r,((e,i)=>{l=o(l,e,i)})),l).results;var r,o,l;return((e,t)=>{if(0===e.length)return[];{let n=t(e[0]);const r=[];let o=[];for(let i=0,l=e.length;i<l;i++){const l=e[i],c=t(l);c!==n&&(r.push(o),o=[]),n=c,o.push(l)}return 0!==o.length&&r.push(o),r}})(n,(e=>e.matchId))},te=(pattern,e)=>k(e,(section=>{const e=section.elements,content=map(e,N).join(""),t=((text,pattern,e=0,t=text.length)=>{const n=pattern.regex;n.lastIndex=e;const r=[];let o;for(;o=n.exec(text);){const e=o[pattern.matchIndex],l=o.index+o[0].indexOf(e),c=l+e.length;if(c>t)break;r.push({start:l,finish:c}),n.lastIndex=c}return r})(content,pattern,section.sOffset,content.length-section.fOffset);return ee(e,t)})),mark=(e,t)=>{S(e,((e,n)=>{S(e,(e=>{const r=B.fromDom(t.cloneNode(!1));E(r,"data-mce-index",n);const o=e.element.dom;if(o.length===e.finish&&0===e.start)F(e.element,r);else{o.length!==e.finish&&o.splitText(e.finish);const t=o.splitText(e.start);F(B.fromDom(t),r)}}))}))},ne=(e,pattern,t,n)=>{const r=t.getBookmark(),o=e.select("td[data-mce-selected],th[data-mce-selected]"),l=o.length>0?((e,t)=>k(t,(t=>J(e,t))))(e,o):Z(e,t.getRng()),c=te(pattern,l);return mark(c,n),t.moveToBookmark(r),c.length},re=e=>e.getAttribute("data-mce-index"),oe=(e,t,pattern,n)=>{const marker=e.dom.create("span",{"data-mce-bogus":1});marker.className="mce-match-marker";const r=e.getBody();return me(e,t,!1),n?ne(e.dom,pattern,e.selection,marker):((e,pattern,t,n)=>{const r=J(e,t),o=te(pattern,r);return mark(o,n),o.length})(e.dom,pattern,r,marker)},ie=e=>{var t;const n=e.parentNode;e.firstChild&&n.insertBefore(e.firstChild,e),null===(t=e.parentNode)||void 0===t||t.removeChild(e)},se=(e,t)=>{const n=[],r=x.toArray(e.getBody().getElementsByTagName("span"));if(r.length)for(let i=0;i<r.length;i++){const e=re(r[i]);null!==e&&e.length&&(e===t.toString()&&n.push(r[i]))}return n},ae=(e,t,n)=>{const r=t.get();let o=r.index;const l=e.dom;n?o+1===r.count?o=0:o++:o-1==-1?o=r.count-1:o--,l.removeClass(se(e,r.index),"mce-match-marker-selected");const c=se(e,o);return c.length?(l.addClass(se(e,o),"mce-match-marker-selected"),e.selection.scrollIntoView(c[0]),o):-1},le=(e,t)=>{const n=t.parentNode;e.remove(t),n&&e.isEmpty(n)&&e.remove(n)},ce=(e,t,text,n,r,o)=>{const l=e.selection,c=((text,e)=>{const t="("+text.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return e?`(?:^|\\s|${w()})`+t+`(?=$|\\s|${w()})`:t})(text,r),d=l.isForward(),pattern={regex:new RegExp(c,n?"g":"gi"),matchIndex:1},h=oe(e,t,pattern,o);if(A.browser.isSafari()&&l.setRng(l.getRng(),d),h){const l=ae(e,t,!0);t.set({index:l,count:h,text:text,matchCase:n,wholeWord:r,inSelection:o})}return h},ue=(e,t)=>{const n=ae(e,t,!0);t.set({...t.get(),index:n})},de=(e,t)=>{const n=ae(e,t,!1);t.set({...t.get(),index:n})},he=e=>{const t=re(e);return null!==t&&t.length>0},pe=(e,t,text,n,r)=>{const o=t.get(),l=o.index;let c,d=l;n=!1!==n;const h=e.getBody(),m=x.grep(x.toArray(h.getElementsByTagName("span")),he);for(let i=0;i<m.length;i++){const t=re(m[i]);let h=c=parseInt(t,10);if(r||h===o.index){for(text.length?(m[i].innerText=text,ie(m[i])):le(e.dom,m[i]);m[++i];){if(h=parseInt(re(m[i]),10),h!==c){i--;break}le(e.dom,m[i])}n&&d--}else c>l&&m[i].setAttribute("data-mce-index",String(c-1))}return t.set({...o,count:r?0:o.count-1,index:d}),n?ue(e,t):de(e,t),!r&&t.get().count>0},me=(e,t,n)=>{let r,o;const l=t.get(),c=x.toArray(e.getBody().getElementsByTagName("span"));for(let i=0;i<c.length;i++){const e=re(c[i]);null!==e&&e.length&&(e===l.index.toString()&&(r||(r=c[i].firstChild),o=c[i].firstChild),ie(c[i]))}if(t.set({...l,index:-1,count:0,text:""}),r&&o){const t=e.dom.createRng();return t.setStart(r,0),t.setEnd(o,o.data.length),!1!==n&&e.selection.setRng(t),t}},fe=()=>{const t=(t=>{const n=e(y.none()),r=()=>n.get().each(t);return{clear:()=>{r(),n.set(y.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:s=>{r(),n.set(y.some(s))}}})(h);return{...t,on:e=>t.get().each(e)}},ge=(e,t)=>{const n=fe();e.undoManager.add();const r=x.trim(e.selection.getContent({format:"text"})),o=e=>{e.setEnabled("next",((e,t)=>t.get().count>1)(0,t)),e.setEnabled("prev",((e,t)=>t.get().count>1)(0,t))},l=(e,t)=>{_(["replace","replaceall","prev","next"],(n=>e.setEnabled(n,!t)))},c=(e,t)=>{A.browser.isSafari()&&A.deviceType.isTouch()&&("find"===t||"replace"===t||"replaceall"===t)&&e.focus(t)},d=n=>{me(e,t,!1),l(n,!0),o(n)},h=n=>{const data=n.getData(),r=t.get();if(data.findtext.length){if(r.text===data.findtext&&r.matchCase===data.matchcase&&r.wholeWord===data.wholewords)ue(e,t);else{const r=ce(e,t,data.findtext,data.matchcase,data.wholewords,data.inselection);r<=0&&(t=>{e.windowManager.alert("Could not find the specified string.",(()=>{t.focus("findtext")}))})(n),l(n,0===r)}o(n)}else d(n)},m=t.get(),f={title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:{findtext:r,replacetext:"",wholewords:m.wholeWord,matchcase:m.matchCase,inselection:m.inSelection},onChange:(e,details)=>{"findtext"===details.name&&t.get().count>0&&d(e)},onAction:(n,details)=>{const data=n.getData();switch(details.name){case"find":h(n);break;case"replace":pe(e,t,data.replacetext)?o(n):d(n);break;case"replaceall":pe(e,t,data.replacetext,!0,!0),d(n);break;case"prev":de(e,t),o(n);break;case"next":ue(e,t),o(n);break;case"matchcase":case"wholewords":case"inselection":(e=>{const data=e.getData(),n=t.get();t.set({...n,matchCase:data.matchcase,wholeWord:data.wholewords,inSelection:data.inselection})})(n),d(n)}c(n,details.name)},onSubmit:e=>{h(e),c(e,"find")},onClose:()=>{e.focus(),me(e,t),e.undoManager.add()}};n.set(e.windowManager.open(f,{inline:"toolbar"}))},be=(e,t)=>()=>{ge(e,t)};t.add("searchreplace",(t=>{const n=e({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return((e,t)=>{e.addCommand("SearchReplace",(()=>{ge(e,t)}))})(t,n),((e,t)=>{e.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:be(e,t),icon:"search"}),e.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:be(e,t),icon:"search"}),e.shortcuts.add("Meta+F","",be(e,t))})(t,n),((e,t)=>({done:n=>me(e,t,n),find:(text,n,r,o=!1)=>ce(e,t,text,n,r,o),next:()=>ue(e,t),prev:()=>de(e,t),replace:(text,n,r)=>pe(e,t,text,n,r)}))(t,n)}))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=(e,t,n)=>{e.dom.toggleClass(e.getBody(),"mce-visualblocks"),n.set(!n.get()),((e,t)=>{e.dispatch("VisualBlocks",{state:t})})(e,n.get())},n=(r="visualblocks_default_state",e=>e.options.get(r));var r;const o=(e,t)=>n=>{n.setActive(t.get());const r=e=>n.setActive(e.state);return e.on("VisualBlocks",r),()=>e.off("VisualBlocks",r)};e.add("visualblocks",((e,r)=>{(e=>{(0,e.options.register)("visualblocks_default_state",{processor:"boolean",default:!1})})(e);const l=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})(!1);((e,n,r)=>{e.addCommand("mceVisualBlocks",(()=>{t(e,0,r)}))})(e,0,l),((e,t)=>{const n=()=>e.execCommand("mceVisualBlocks");e.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:n,onSetup:o(e,t)}),e.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:n,onSetup:o(e,t)})})(e,l),((e,r,o)=>{e.on("PreviewFormats AfterPreviewFormats",(t=>{o.get()&&e.dom.toggleClass(e.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)})),e.on("init",(()=>{n(e)&&t(e,0,o)}))})(e,0,l)}))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");e.add("code",(e=>((e=>{e.addCommand("mceCodeEditor",(()=>{(e=>{const t=(e=>e.getContent({source_view:!0}))(e);e.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:t},onSubmit:t=>{((e,html)=>{e.focus(),e.undoManager.transact((()=>{e.setContent(html)})),e.selection.setCursorLocation(),e.nodeChanged()})(e,t.getData().code),t.close()}})})(e)}))})(e),(e=>{const t=()=>e.execCommand("mceCodeEditor");e.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:t}),e.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:t})})(e),{})))}()},function(e,t){!function(){"use strict";const e=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var t=tinymce.util.Tools.resolve("tinymce.PluginManager");const n=e=>({isFullscreen:()=>null!==e.get()}),r=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,r=(l=String).prototype,r.isPrototypeOf(n)||(null===(c=o.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,r;var o,l,c})(t)===e,o=e=>t=>typeof t===e,l=e=>a=>e===a,c=r("string"),d=r("array"),h=l(null),m=o("boolean"),f=l(void 0),v=a=>!(a=>null==a)(a),y=o("function"),w=o("number"),A=()=>{},x=e=>()=>e;function O(e,...t){return(...n)=>{const r=t.concat(n);return e.apply(null,r)}}const C=x(!1),_=x(!0);class S{constructor(e,t){this.tag=e,this.value=t}static some(e){return new S(!0,e)}static none(){return S.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?S.some(e(this.value)):S.none()}bind(e){return this.tag?e(this.value):S.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:S.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return v(e)?S.some(e):S.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}S.singletonNone=new S(!1);const k=t=>{const n=e(S.none()),r=()=>n.get().each(t);return{clear:()=>{r(),n.set(S.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:s=>{r(),n.set(S.some(s))}}},j=()=>k((s=>s.unbind())),T=Array.prototype.push,map=(e,t)=>{const n=e.length,r=new Array(n);for(let i=0;i<n;i++){const n=e[i];r[i]=t(n,i)}return r},I=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},D=(e,t)=>{const n=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];t(r,i)&&n.push(r)}return n},E=(e,t)=>((e,t,n)=>{for(let i=0,r=e.length;i<r;i++){const r=e[i];if(t(r,i))return S.some(r);if(n(r,i))break}return S.none()})(e,t,C),R=(e,t)=>(e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!d(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);T.apply(t,e[i])}return t})(map(e,t)),head=e=>((e,i)=>i>=0&&i<e.length?S.some(e[i]):S.none())(e,0),B=Object.keys,M=(e,t,n=0,r)=>{const o=e.indexOf(t,n);return-1!==o&&(!!f(r)||o+t.length<=r)},P=e=>void 0!==e.style&&y(e.style.getPropertyValue),L=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},F={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return L(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return L(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return L(t)},fromDom:L,fromPoint:(e,t,n)=>S.from(e.dom.elementFromPoint(t,n)).map(L)};"undefined"!=typeof window?window:Function("return this;")();const $=e=>element=>(element=>element.dom.nodeType)(element)===e,N=$(1),z=$(3),V=$(9),H=$(11),W=(element,e)=>{const t=element.dom;if(1!==t.nodeType)return!1;{const n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},Q=element=>F.fromDom(element.dom.ownerDocument),U=element=>(element=>S.from(element.dom.parentNode).map(F.fromDom))(element).map(Y).map((e=>D(e,(e=>{return t=e,!(element.dom===t.dom);var t})))).getOr([]),Y=element=>map(element.dom.childNodes,F.fromDom),G=y(Element.prototype.attachShadow)&&y(Node.prototype.getRootNode),K=x(G),X=G?e=>F.fromDom(e.dom.getRootNode()):e=>V(e)?e:Q(e),Z=e=>{const t=X(e);return H(n=t)&&v(n.dom.host)?S.some(t):S.none();var n},J=e=>F.fromDom(e.dom.host),ee=element=>v(element.dom.shadowRoot),te=element=>{const e=z(element)?element.dom.parentNode:element.dom;if(null==e||null===e.ownerDocument)return!1;const t=e.ownerDocument;return Z(F.fromDom(e)).fold((()=>t.body.contains(e)),(n=te,r=J,a=>n(r(a))));var n,r},ne=(element,e,t)=>{((e,t,n)=>{if(!(c(n)||m(n)||w(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(element.dom,e,t)},re=(element,e)=>{const t=element.dom.getAttribute(e);return null===t?void 0:t},oe=(element,e)=>{element.dom.removeAttribute(e)},ie=(element,e)=>{const t=element.dom;((e,t)=>{const n=B(e);for(let r=0,o=n.length;r<o;r++){const i=n[r];t(e[i],i)}})(e,((e,n)=>{((e,t,n)=>{if(!c(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);P(e)&&e.style.setProperty(t,n)})(t,n,e)}))},se=(e,t)=>P(e)?e.style.getPropertyValue(t):"",ae=e=>{const t=F.fromDom((e=>{if(K()&&v(e.target)){const t=F.fromDom(e.target);if(N(t)&&ee(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return head(t)}}return S.from(e.target)})(e).getOr(e.target)),n=()=>e.stopPropagation(),r=()=>e.preventDefault(),o=(l=r,c=n,(...e)=>l(c.apply(null,e)));var l,c;return((e,t,n,r,o,l,c)=>({target:e,x:t,y:n,stop:r,prevent:o,kill:l,raw:c}))(t,e.clientX,e.clientY,n,r,o,e)},le=(element,e,filter,t,n)=>{const r=((filter,e)=>t=>{filter(t)&&e(ae(t))})(filter,t);return element.dom.addEventListener(e,r,n),{unbind:O(ce,element,e,r,n)}},ce=(element,e,t,n)=>{element.dom.removeEventListener(e,t,n)},filter=_,ue=(element,e,t)=>((element,e,filter,t)=>le(element,e,filter,t,!1))(element,e,filter,t),de=()=>he(0,0),he=(e,t)=>({major:e,minor:t}),pe={nu:he,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?de():((e,t)=>{const n=((e,s)=>{for(let i=0;i<e.length;i++){const t=e[i];if(t.test(s))return t}})(e,t);if(!n)return{major:0,minor:0};const r=i=>Number(t.replace(n,"$"+i));return he(r(1),r(2))})(e,n)},unknown:de},me=(e,t)=>((e,t)=>{for(let i=0;i<e.length;i++){const n=t(e[i],i);if(n.isSome())return n}return S.none()})(t.brands,(t=>{const n=t.brand.toLowerCase();return E(e,(e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:pe.nu(parseInt(t.version,10),0)})))})),fe=(e,t)=>{const n=String(t).toLowerCase();return E(e,(e=>e.search(n)))},ge=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,be=e=>t=>M(t,e),ve=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>M(e,"edge/")&&M(e,"chrome")&&M(e,"safari")&&M(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ge],search:e=>M(e,"chrome")&&!M(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>M(e,"msie")||M(e,"trident")},{name:"Opera",versionRegexes:[ge,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:be("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:be("firefox")},{name:"Safari",versionRegexes:[ge,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(M(e,"safari")||M(e,"mobile/"))&&M(e,"applewebkit")}],ye=[{name:"Windows",search:be("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>M(e,"iphone")||M(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:be("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:be("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:be("linux"),versionRegexes:[]},{name:"Solaris",search:be("sunos"),versionRegexes:[]},{name:"FreeBSD",search:be("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:be("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],we={browsers:x(ve),oses:x(ye)},Ae="Edge",xe="Chromium",Oe="Opera",Ce="Firefox",_e="Safari",Se=e=>{const t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isEdge:r(Ae),isChromium:r(xe),isIE:r("IE"),isOpera:r(Oe),isFirefox:r(Ce),isSafari:r(_e)}},ke={unknown:()=>Se({current:void 0,version:pe.unknown()}),nu:Se,edge:x(Ae),chromium:x(xe),ie:x("IE"),opera:x(Oe),firefox:x(Ce),safari:x(_e)},je="Windows",Te="Android",Ie="Linux",De="macOS",Ee="Solaris",Re="FreeBSD",Be="ChromeOS",Me=e=>{const t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isWindows:r(je),isiOS:r("iOS"),isAndroid:r(Te),isMacOS:r(De),isLinux:r(Ie),isSolaris:r(Ee),isFreeBSD:r(Re),isChromeOS:r(Be)}},Pe={unknown:()=>Me({current:void 0,version:pe.unknown()}),nu:Me,windows:x(je),ios:x("iOS"),android:x(Te),linux:x(Ie),macos:x(De),solaris:x(Ee),freebsd:x(Re),chromeos:x(Be)},Le=(e,t,n)=>{const r=we.browsers(),o=we.oses(),l=t.bind((e=>me(r,e))).orThunk((()=>((e,t)=>fe(e,t).map((e=>{const n=pe.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(r,e))).fold(ke.unknown,ke.nu),c=((e,t)=>fe(e,t).map((e=>{const n=pe.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(o,e).fold(Pe.unknown,Pe.nu),d=((e,t,n,r)=>{const o=e.isiOS()&&!0===/ipad/i.test(n),l=e.isiOS()&&!o,c=e.isiOS()||e.isAndroid(),d=c||r("(pointer:coarse)"),h=o||!l&&c&&r("(min-device-width:768px)"),m=l||c&&!h,f=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),v=!m&&!h&&!f;return{isiPad:x(o),isiPhone:x(l),isTablet:x(h),isPhone:x(m),isTouch:x(d),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:x(f),isDesktop:x(v)}})(c,l,e,n);return{browser:l,os:c,deviceType:d}},Fe=e=>window.matchMedia(e).matches;let $e=(e=>{let t,n=!1;return(...r)=>(n||(n=!0,t=e.apply(null,r)),t)})((()=>Le(navigator.userAgent,S.from(navigator.userAgentData),Fe)));const Ne=(e,t)=>({left:e,top:t,translate:(n,r)=>Ne(e+n,t+r)}),ze=Ne,Ve=e=>{const t=void 0===e?window:e;return $e().browser.isFirefox()?S.none():S.from(t.visualViewport)},He=(e,t,n,r)=>({x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}),We=e=>{const t=void 0===e?window:e,n=t.document,r=(e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return ze(n,r)})(F.fromDom(n));return Ve(t).fold((()=>{const html=t.document.documentElement,e=html.clientWidth,n=html.clientHeight;return He(r.left,r.top,e,n)}),(e=>He(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height)))},qe=(e,t,n)=>Ve(n).map((n=>{const r=e=>t(ae(e));return n.addEventListener(e,r),{unbind:()=>n.removeEventListener(e,r)}})).getOrThunk((()=>({unbind:A})));var Qe=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ue=tinymce.util.Tools.resolve("tinymce.Env");const Ye=(e,t)=>{e.dispatch("FullscreenStateChanged",{state:t}),e.dispatch("ResizeEditor")},Ge=(Ke="fullscreen_native",e=>e.options.get(Ke));var Ke;const Xe=e=>{const t=F.fromDom(e.getElement());return Z(t).map(J).getOrThunk((()=>(e=>{const b=e.dom.body;if(null==b)throw new Error("Body is not available yet");return F.fromDom(b)})(Q(t))))},Ze=e=>{return e.dom===(void 0!==(t=Q(e).dom).fullscreenElement?t.fullscreenElement:void 0!==t.msFullscreenElement?t.msFullscreenElement:void 0!==t.webkitFullscreenElement?t.webkitFullscreenElement:null);var t},Je=(e,t,n)=>D(((element,e)=>{const t=y(e)?e:C;let n=element.dom;const r=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,p=F.fromDom(e);if(r.push(p),!0===t(p))break;n=e}return r})(e,n),t),et=e=>((e,t)=>{const base=void 0===t?document:t.dom;return 1!==(n=base).nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount?[]:map(base.querySelectorAll(e),F.fromDom);var n})(e),tt=(e,t,n)=>Je(e,(e=>W(e,t)),n),nt=(e,t)=>((e,t)=>D(U(e),t))(e,(e=>W(e,t))),ot="data-ephox-mobile-fullscreen-style",it="position:absolute!important;",st="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",at=Ue.os.isAndroid(),lt=e=>{const t=((element,e)=>{const t=element.dom,n=window.getComputedStyle(t).getPropertyValue(e);return""!==n||te(element)?n:se(t,e)})(e,"background-color");return void 0!==t&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;"},ct=Qe.DOM,ut=Ve().fold((()=>({bind:A,unbind:A})),(e=>{const t=(()=>{const e=k(A);return{...e,on:t=>e.get().each(t)}})(),n=j(),r=j(),o=((e,t)=>{let n=null;return{cancel:()=>{h(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{h(n)&&(n=setTimeout((()=>{n=null,e.apply(null,r)}),t))}}})((()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame((()=>{t.on((t=>ie(t,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"})))}))}),50);return{bind:element=>{t.set(element),o.throttle(),n.set(qe("resize",o.throttle)),r.set(qe("scroll",o.throttle))},unbind:()=>{t.on((()=>{n.clear(),r.clear()})),t.clear()}}})),ht=(e,t)=>{const body=document.body,n=document.documentElement,r=e.getContainer(),o=F.fromDom(r),l=Xe(e),c=t.get(),d=F.fromDom(e.getBody()),h=Ue.deviceType.isTouch(),m=r.style,iframe=e.iframeElement,f=null==iframe?void 0:iframe.style,v=e=>{e(body,"tox-fullscreen"),e(n,"tox-fullscreen"),e(r,"tox-fullscreen"),Z(o).map((e=>J(e).dom)).each((t=>{e(t,"tox-fullscreen"),e(t,"tox-shadowhost")}))},y=()=>{h&&(e=>{const t=et("["+ot+"]");I(t,(element=>{const t=re(element,ot);t&&"no-styles"!==t?ie(element,e.parseStyle(t)):oe(element,"style"),oe(element,ot)}))})(e.dom),v(ct.removeClass),ut.unbind(),S.from(t.get()).each((e=>e.fullscreenChangeHandler.unbind()))};if(c)c.fullscreenChangeHandler.unbind(),Ge(e)&&Ze(l)&&(e=>{const t=e.dom;t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()})(Q(l)),f.width=c.iframeWidth,f.height=c.iframeHeight,m.width=c.containerWidth,m.height=c.containerHeight,m.top=c.containerTop,m.left=c.containerLeft,y(),w=c.scrollPos,window.scrollTo(w.x,w.y),t.set(null),Ye(e,!1),e.off("remove",y);else{const n=ue(Q(l),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",(n=>{Ge(e)&&(Ze(l)||null===t.get()||ht(e,t))})),r={scrollPos:We(window),containerWidth:m.width,containerHeight:m.height,containerTop:m.top,containerLeft:m.left,iframeWidth:f.width,iframeHeight:f.height,fullscreenChangeHandler:n};h&&((e,t,n)=>{const r=t=>element=>{const n=re(element,"style"),r=void 0===n?"no-styles":n.trim();r!==t&&(ne(element,ot,r),ie(element,e.parseStyle(t)))},o=tt(t,"*"),l=R(o,(element=>nt(element,"*:not(.tox-silver-sink)"))),c=lt(n);I(l,r("display:none!important;")),I(o,r(it+st+c)),r((!0===at?"":it)+st+c)(t)})(e.dom,o,d),f.width=f.height="100%",m.width=m.height="",v(ct.addClass),ut.bind(o),e.on("remove",y),t.set(r),Ge(e)&&(e=>{const t=e.dom;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()})(l),Ye(e,!0)}var w},pt=(e,t)=>n=>{n.setActive(null!==t.get());const r=e=>n.setActive(e.state);return e.on("FullscreenStateChanged",r),()=>e.off("FullscreenStateChanged",r)};t.add("fullscreen",(t=>{const r=e(null);return t.inline||((e=>{(0,e.options.register)("fullscreen_native",{processor:"boolean",default:!1})})(t),((e,t)=>{e.addCommand("mceFullScreen",(()=>{ht(e,t)}))})(t,r),((e,t)=>{const n=()=>e.execCommand("mceFullScreen");e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:n,onSetup:pt(e,t)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:n,onSetup:pt(e,t)})})(t,r),t.addShortcut("Meta+Shift+F","","mceFullScreen")),n(r)}))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=tinymce.util.Tools.resolve("tinymce.util.Tools");const option=e=>t=>t.options.get(e),r=option("content_style"),o=option("content_css_cors"),l=option("body_class"),c=option("body_id"),d=e=>{const content=(e=>{var d;let h="";const m=e.dom.encode,f=null!==(d=r(e))&&void 0!==d?d:"";h+='<base href="'+m(e.documentBaseURI.getURI())+'">';const v=o(e)?' crossorigin="anonymous"':"";n.each(e.contentCSS,(t=>{h+='<link type="text/css" rel="stylesheet" href="'+m(e.documentBaseURI.toAbsolute(t))+'"'+v+">"})),f&&(h+='<style type="text/css">'+f+"</style>");const y=c(e),w=l(e),A='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(t.os.isMacOS()||t.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",x=e.getBody().dir,O=x?' dir="'+m(x)+'"':"";return"<!DOCTYPE html><html><head>"+h+'</head><body id="'+m(y)+'" class="mce-content-body '+m(w)+'"'+O+">"+e.getContent()+A+"</body></html>"})(e);e.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:content}}).focus("close")};e.add("preview",(e=>{(e=>{e.addCommand("mcePreview",(()=>{d(e)}))})(e),(e=>{const t=()=>e.execCommand("mcePreview");e.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:t}),e.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:t})})(e)}))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),n=tinymce.util.Tools.resolve("tinymce.util.Tools");const r=(o="allow_html_in_named_anchor",e=>e.options.get(o));var o;const l="a:not([href])",c=e=>!e,d=e=>e.getAttribute("id")||e.getAttribute("name")||"",h=e=>(e=>"a"===e.nodeName.toLowerCase())(e)&&!e.getAttribute("href")&&""!==d(e),m=e=>{const r=e.dom;t(r).walk(e.selection.getRng(),(e=>{n.each(e,(e=>{var t;h(t=e)&&!t.firstChild&&r.remove(e,!1)}))}))},f=e=>e.dom.getParent(e.selection.getStart(),l),v=(e,t)=>{const n=f(e);n?((e,t,n)=>{n.removeAttribute("name"),n.id=t,e.addVisual(),e.undoManager.add()})(e,t,n):((e,t)=>{e.undoManager.transact((()=>{r(e)||e.selection.collapse(!0),e.selection.isCollapsed()?e.insertContent(e.dom.createHTML("a",{id:t})):(m(e),e.formatter.remove("namedAnchor",void 0,void 0,!0),e.formatter.apply("namedAnchor",{value:t}),e.addVisual())}))})(e,t),e.focus()},y=e=>{const t=(e=>{const t=f(e);return t?d(t):""})(e);e.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:t},onSubmit:t=>{((e,t)=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(t)?(v(e,t),!0):(e.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1))(e,t.getData().id)&&t.close()}})},w=e=>(e=>c(e.attr("href"))&&!c(e.attr("id")||e.attr("name")))(e)&&!e.firstChild,A=e=>t=>{for(let i=0;i<t.length;i++){const n=t[i];w(n)&&n.attr("contenteditable",e)}};e.add("anchor",(e=>{(e=>{(0,e.options.register)("allow_html_in_named_anchor",{processor:"boolean",default:!1})})(e),(e=>{e.on("PreInit",(()=>{e.parser.addNodeFilter("a",A("false")),e.serializer.addNodeFilter("a",A(null))}))})(e),(e=>{e.addCommand("mceAnchor",(()=>{y(e)}))})(e),(e=>{const t=()=>e.execCommand("mceAnchor");e.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:t,onSetup:t=>e.selection.selectorChangedWithUnbind("a:not([href])",t.setActive).unbind}),e.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:t})})(e),e.on("PreInit",(()=>{(e=>{e.formatter.register("namedAnchor",{inline:"a",selector:l,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(e,t,n)=>h(e)})})(e)}))}))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const option=e=>t=>t.options.get(e),t=option("insertdatetime_dateformat"),n=option("insertdatetime_timeformat"),r=option("insertdatetime_formats"),o=option("insertdatetime_element"),l="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),c="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),d="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),h="January February March April May June July August September October November December".split(" "),m=(e,t)=>{if((e=""+e).length<t)for(let i=0;i<t-e.length;i++)e="0"+e;return e},f=(e,t,n=new Date)=>t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",m(n.getMonth()+1,2))).replace("%d",m(n.getDate(),2))).replace("%H",""+m(n.getHours(),2))).replace("%M",""+m(n.getMinutes(),2))).replace("%S",""+m(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(h[n.getMonth()]))).replace("%b",""+e.translate(d[n.getMonth()]))).replace("%A",""+e.translate(c[n.getDay()]))).replace("%a",""+e.translate(l[n.getDay()]))).replace("%%","%"),v=(e,t)=>{if(o(e)){const n=f(e,t);let r;r=/%[HMSIp]/.test(t)?f(e,"%Y-%m-%dT%H:%M"):f(e,"%Y-%m-%d");const o=e.dom.getParent(e.selection.getStart(),"time");o?((e,t,n,r)=>{const o=e.dom.create("time",{datetime:n},r);e.dom.replace(o,t),e.selection.select(o,!0),e.selection.collapse(!1)})(e,o,r,n):e.insertContent('<time datetime="'+r+'">'+n+"</time>")}else e.insertContent(f(e,t))};var y=tinymce.util.Tools.resolve("tinymce.util.Tools");const w=e=>{const t=r(e),o=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})((e=>{const t=r(e);return t.length>0?t[0]:n(e)})(e)),l=t=>e.execCommand("mceInsertDate",!1,t);e.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:e=>e===o.get(),fetch:n=>{n(y.map(t,(t=>({type:"choiceitem",text:f(e,t),value:t}))))},onAction:e=>{l(o.get())},onItemAction:(e,t)=>{o.set(t),l(t)}});const c=e=>()=>{o.set(e),l(e)};e.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>y.map(t,(t=>({type:"menuitem",text:f(e,t),onAction:c(t)})))})};e.add("insertdatetime",(e=>{(e=>{const t=e.options.register;t("insertdatetime_dateformat",{processor:"string",default:e.translate("%Y-%m-%d")}),t("insertdatetime_timeformat",{processor:"string",default:e.translate("%H:%M:%S")}),t("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),t("insertdatetime_element",{processor:"boolean",default:!1})})(e),(e=>{e.addCommand("mceInsertDate",((n,r)=>{v(e,null!=r?r:t(e))})),e.addCommand("mceInsertTime",((t,r)=>{v(e,null!=r?r:n(e))}))})(e),w(e)}))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let t=0;const n=e=>{const time=(new Date).getTime(),n=Math.floor(1e9*Math.random());return t++,e+"_"+n+t+String(time)},option=e=>t=>t.options.get(e),r=option("help_tabs"),o=option("forced_plugins"),l=(c="string",e=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,(o=String).prototype.isPrototypeOf(n)||(null===(l=r.constructor)||void 0===l?void 0:l.name)===o.name)?"string":t;var n,r,o,l})(e)===c);var c;const d=(h=void 0,a=>h===a);var h;const m=(e=>t=>typeof t===e)("function"),f=(v=!1,()=>v);var v;class y{constructor(e,t){this.tag=e,this.value=t}static some(e){return new y(!0,e)}static none(){return y.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?y.some(e(this.value)):y.none()}bind(e){return this.tag?e(this.value):y.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:y.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(a=>null==a)(e)?y.none():y.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}y.singletonNone=new y(!1);const w=Array.prototype.slice,A=Array.prototype.indexOf,x=(e,t)=>((e,t)=>A.call(e,t))(e,t)>-1,map=(e,t)=>{const n=e.length,r=new Array(n);for(let i=0;i<n;i++){const n=e[i];r[i]=t(n,i)}return r},filter=(e,t)=>{const n=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];t(r,i)&&n.push(r)}return n},O=(e,t)=>((e,t,n)=>{for(let i=0,r=e.length;i<r;i++){const r=e[i];if(t(r,i))return y.some(r);if(n(r,i))break}return y.none()})(e,t,f),C=(e,t)=>{const n=w.call(e,0);return n.sort(t),n},_=Object.keys,S=Object.hasOwnProperty,k=(e,t)=>S.call(e,t);var j=tinymce.util.Tools.resolve("tinymce.Env");const T=source=>{const e=j.os.isMacOS()||j.os.isiOS(),t=e?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl ",access:"Shift + Alt "},n=source.split("+"),r=map(n,(e=>{const n=e.toLowerCase().trim();return k(t,n)?t[n]:e}));return e?r.join("").replace(/\s/,""):r.join("+")},I=[{shortcuts:["Meta + B"],action:"Bold"},{shortcuts:["Meta + I"],action:"Italic"},{shortcuts:["Meta + U"],action:"Underline"},{shortcuts:["Meta + A"],action:"Select all"},{shortcuts:["Meta + Y","Meta + Shift + Z"],action:"Redo"},{shortcuts:["Meta + Z"],action:"Undo"},{shortcuts:["Access + 1"],action:"Heading 1"},{shortcuts:["Access + 2"],action:"Heading 2"},{shortcuts:["Access + 3"],action:"Heading 3"},{shortcuts:["Access + 4"],action:"Heading 4"},{shortcuts:["Access + 5"],action:"Heading 5"},{shortcuts:["Access + 6"],action:"Heading 6"},{shortcuts:["Access + 7"],action:"Paragraph"},{shortcuts:["Access + 8"],action:"Div"},{shortcuts:["Access + 9"],action:"Address"},{shortcuts:["Alt + 0"],action:"Open help dialog"},{shortcuts:["Alt + F9"],action:"Focus to menubar"},{shortcuts:["Alt + F10"],action:"Focus to toolbar"},{shortcuts:["Alt + F11"],action:"Focus to element path"},{shortcuts:["Ctrl + F9"],action:"Focus to contextual toolbar"},{shortcuts:["Shift + Enter"],action:"Open popup menu for split buttons"},{shortcuts:["Meta + K"],action:"Insert link (if link plugin activated)"},{shortcuts:["Meta + S"],action:"Save (if save plugin activated)"},{shortcuts:["Meta + F"],action:"Find (if searchreplace plugin activated)"},{shortcuts:["Meta + Shift + F"],action:"Switch to or from fullscreen mode"}],D=()=>({name:"shortcuts",title:"Handy Shortcuts",items:[{type:"table",header:["Action","Shortcut"],cells:map(I,(e=>{const t=map(e.shortcuts,T).join(" or ");return[e.action,t]}))}]});var E=tinymce.util.Tools.resolve("tinymce.util.I18n");const R=map([{key:"advlist",name:"Advanced List"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"image",name:"Image"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"pagebreak",name:"Page Break"},{key:"preview",name:"Preview"},{key:"quickbars",name:"Quick Toolbars"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"table",name:"Table"},{key:"template",name:"Template"},{key:"textcolor",name:"Text Color"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"},{key:"a11ychecker",name:"Accessibility Checker",type:"premium"},{key:"advcode",name:"Advanced Code Editor",type:"premium"},{key:"advtable",name:"Advanced Tables",type:"premium"},{key:"casechange",name:"Case Change",type:"premium"},{key:"checklist",name:"Checklist",type:"premium"},{key:"editimage",name:"Enhanced Image Editing",type:"premium"},{key:"footnotes",name:"Footnotes",type:"premium"},{key:"typography",name:"Advanced Typography",type:"premium"},{key:"mediaembed",name:"Enhanced Media Embed",type:"premium",slug:"introduction-to-mediaembed"},{key:"export",name:"Export",type:"premium"},{key:"formatpainter",name:"Format Painter",type:"premium"},{key:"inlinecss",name:"Inline CSS",type:"premium"},{key:"linkchecker",name:"Link Checker",type:"premium"},{key:"mentions",name:"Mentions",type:"premium"},{key:"mergetags",name:"Merge Tags",type:"premium"},{key:"pageembed",name:"Page Embed",type:"premium"},{key:"permanentpen",name:"Permanent Pen",type:"premium"},{key:"powerpaste",name:"PowerPaste",type:"premium",slug:"introduction-to-powerpaste"},{key:"rtc",name:"Real-Time Collaboration",type:"premium",slug:"rtc-introduction"},{key:"tinymcespellchecker",name:"Spell Checker Pro",type:"premium",slug:"introduction-to-tiny-spellchecker"},{key:"autocorrect",name:"Spelling Autocorrect",type:"premium"},{key:"tableofcontents",name:"Table of Contents",type:"premium"},{key:"tinycomments",name:"Tiny Comments",type:"premium",slug:"introduction-to-tiny-comments"},{key:"tinydrive",name:"Tiny Drive",type:"premium",slug:"tinydrive-introduction"}],(e=>({...e,type:e.type||"opensource",slug:e.slug||e.key}))),B=e=>{const t=p=>`<a href="${p.url}" target="_blank" rel="noopener">${p.name}</a>`,n=(e,n)=>O(R,(e=>e.key===n)).fold((()=>((e,n)=>{const r=e.plugins[n].getMetadata;if(m(r)){const e=r();return{name:e.name,html:t(e)}}return{name:n,html:n}})(e,n)),(e=>{const n="premium"===e.type?`${e.name}*`:e.name;return{name:n,html:t({name:n,url:`https://www.tiny.cloud/docs/tinymce/6/${e.slug}/`})}})),r=e=>{const t=(e=>{const t=_(e.plugins),n=o(e);return d(n)?t:filter(t,(e=>!x(n,e)))})(e),r=C(map(t,(t=>n(e,t))),((e,t)=>e.name.localeCompare(t.name))),l=map(r,(e=>"<li>"+e.html+"</li>")),c=l.length,h=l.join("");return"<p><b>"+E.translate(["Plugins installed ({0}):",c])+"</b></p><ul>"+h+"</ul>"},l={type:"htmlpanel",presets:"document",html:[(e=>null==e?"":'<div data-mce-tabstop="1" tabindex="-1">'+r(e)+"</div>")(e),(()=>{const e=filter(R,(({type:e})=>"premium"===e)),t=C(map(e,(p=>p.name)),((e,t)=>e.localeCompare(t))),n=map(t,(e=>`<li>${e}</li>`)).join("");return'<div data-mce-tabstop="1" tabindex="-1"><p><b>'+E.translate("Premium plugins:")+"</b></p><ul>"+n+'<li class="tox-help__more-link" "><a href="https://www.tiny.cloud/pricing/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" rel="noopener" target="_blank">'+E.translate("Learn more...")+"</a></li></ul></div>"})()].join("")};return{name:"plugins",title:"Plugins",items:[l]}};var M=tinymce.util.Tools.resolve("tinymce.EditorManager");const P=(e,t)=>{const o=D(),nav={name:"keyboardnav",title:"Keyboard Navigation",items:[{type:"htmlpanel",presets:"document",html:"<h1>Editor UI keyboard navigation</h1>\n\n<h2>Activating keyboard navigation</h2>\n\n<p>The sections of the outer UI of the editor - the menubar, toolbar, sidebar and footer - are all keyboard navigable. As such, there are multiple ways to activate keyboard navigation:</p>\n<ul>\n  <li>Focus the menubar: Alt + F9 (Windows) or &#x2325;F9 (MacOS)</li>\n  <li>Focus the toolbar: Alt + F10 (Windows) or &#x2325;F10 (MacOS)</li>\n  <li>Focus the footer: Alt + F11 (Windows) or &#x2325;F11 (MacOS)</li>\n</ul>\n\n<p>Focusing the menubar or toolbar will start keyboard navigation at the first item in the menubar or toolbar, which will be highlighted with a gray background. Focusing the footer will start keyboard navigation at the first item in the element path, which will be highlighted with an underline. </p>\n\n<h2>Moving between UI sections</h2>\n\n<p>When keyboard navigation is active, pressing tab will move the focus to the next major section of the UI, where applicable. These sections are:</p>\n<ul>\n  <li>the menubar</li>\n  <li>each group of the toolbar </li>\n  <li>the sidebar</li>\n  <li>the element path in the footer </li>\n  <li>the wordcount toggle button in the footer </li>\n  <li>the branding link in the footer </li>\n  <li>the editor resize handle in the footer</li>\n</ul>\n\n<p>Pressing shift + tab will move backwards through the same sections, except when moving from the footer to the toolbar. Focusing the element path then pressing shift + tab will move focus to the first toolbar group, not the last.</p>\n\n<h2>Moving within UI sections</h2>\n\n<p>Keyboard navigation within UI sections can usually be achieved using the left and right arrow keys. This includes:</p>\n<ul>\n  <li>moving between menus in the menubar</li>\n  <li>moving between buttons in a toolbar group</li>\n  <li>moving between items in the element path</li>\n</ul>\n\n<p>In all these UI sections, keyboard navigation will cycle within the section. For example, focusing the last button in a toolbar group then pressing right arrow will move focus to the first item in the same toolbar group. </p>\n\n<h1>Executing buttons</h1>\n\n<p>To execute a button, navigate the selection to the desired button and hit space or enter.</p>\n\n<h1>Opening, navigating and closing menus</h1>\n\n<p>When focusing a menubar button or a toolbar button with a menu, pressing space, enter or down arrow will open the menu. When the menu opens the first item will be selected. To move up or down the menu, press the up or down arrow key respectively. This is the same for submenus, which can also be opened and closed using the left and right arrow keys.</p>\n\n<p>To close any active menu, hit the escape key. When a menu is closed the selection will be restored to its previous selection. This also works for closing submenus.</p>\n\n<h1>Context toolbars and menus</h1>\n\n<p>To focus an open context toolbar such as the table context toolbar, press Ctrl + F9 (Windows) or &#x2303;F9 (MacOS).</p>\n\n<p>Context toolbar navigation is the same as toolbar navigation, and context menu navigation is the same as standard menu navigation.</p>\n\n<h1>Dialog navigation</h1>\n\n<p>There are two types of dialog UIs in TinyMCE: tabbed dialogs and non-tabbed dialogs.</p>\n\n<p>When a non-tabbed dialog is opened, the first interactive component in the dialog will be focused. Users can navigate between interactive components by pressing tab. This includes any footer buttons. Navigation will cycle back to the first dialog component if tab is pressed while focusing the last component in the dialog. Pressing shift + tab will navigate backwards.</p>\n\n<p>When a tabbed dialog is opened, the first button in the tab menu is focused. Pressing tab will navigate to the first interactive component in that tab, and will cycle through the tabâ€™s components, the footer buttons, then back to the tab button. To switch to another tab, focus the tab button for the current tab, then use the arrow keys to cycle through the tab buttons.</p>"}]},c=B(e),d=(()=>{var e,t;const n='<a href="https://www.tiny.cloud/docs/tinymce/6/changelog/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" rel="noopener" target="_blank">TinyMCE '+(e=M.majorVersion,t=M.minorVersion,(0===e.indexOf("@")?"X.X.X":e+"."+t)+"</a>");return{name:"versions",title:"Version",items:[{type:"htmlpanel",html:"<p>"+E.translate(["You are using {0}",n])+"</p>",presets:"document"}]}})(),h={[o.name]:o,[nav.name]:nav,[c.name]:c,[d.name]:d,...t.get()};return y.from(r(e)).fold((()=>(e=>{const t=_(e),n=t.indexOf("versions");return-1!==n&&(t.splice(n,1),t.push("versions")),{tabs:e,names:t}})(h)),(e=>((e,t)=>{const r={},o=map(e,(e=>{var o;if(l(e))return k(t,e)&&(r[e]=t[e]),e;{const t=null!==(o=e.name)&&void 0!==o?o:n("tab-name");return r[t]=e,t}}));return{tabs:r,names:o}})(e,h)))},L=(e,t)=>()=>{const{tabs:n,names:r}=P(e,t),body={type:"tabpanel",tabs:(e=>{const t=[],n=e=>{t.push(e)};for(let i=0;i<e.length;i++)e[i].each(n);return t})(map(r,(e=>{return k(t=n,r=e)?y.from(t[r]):y.none();var t,r})))};e.windowManager.open({title:"Help",size:"medium",body:body,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{}})};e.add("help",(e=>{const t=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})({}),r=(e=>({addTab:t=>{var r;const o=null!==(r=t.name)&&void 0!==r?r:n("tab-name"),l=e.get();l[o]=t,e.set(l)}}))(t);(e=>{(0,e.options.register)("help_tabs",{processor:"array"})})(e);const o=L(e,t);return((e,t)=>{e.ui.registry.addButton("help",{icon:"help",tooltip:"Help",onAction:t}),e.ui.registry.addMenuItem("help",{text:"Help",icon:"help",shortcut:"Alt+0",onAction:t})})(e,o),((e,t)=>{e.addCommand("mceHelp",t)})(e,o),e.shortcuts.add("Alt+0","Open help dialog","mceHelp"),r}))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,r=(l=String).prototype,r.isPrototypeOf(n)||(null===(c=o.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,r;var o,l,c})(t)===e,n=t("string"),r=t("object"),o=t("array"),l=(c="function",e=>typeof e===c);var c,d=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),h=tinymce.util.Tools.resolve("tinymce.EditorManager"),m=tinymce.util.Tools.resolve("tinymce.Env"),f=tinymce.util.Tools.resolve("tinymce.util.Tools");const option=e=>t=>t.options.get(e),v=option("importcss_merge_classes"),y=option("importcss_exclusive"),w=option("importcss_selector_converter"),A=option("importcss_selector_filter"),x=option("importcss_groups"),O=option("importcss_append"),C=option("importcss_file_filter"),_=option("skin"),S=option("skin_url"),k=Array.prototype.push,j=(e,t)=>(e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!o(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);k.apply(t,e[i])}return t})(((e,t)=>{const n=e.length,r=new Array(n);for(let i=0;i<n;i++){const n=e[i];r[i]=t(n,i)}return r})(e,t)),T=/^\.(?:ephox|tiny-pageembed|mce)(?:[.-]+\w+)+$/,I=filter=>n(filter)?e=>-1!==e.indexOf(filter):filter instanceof RegExp?e=>filter.test(e):filter,D=(e,t,r)=>{const o=[],l={},c=(t,l)=>{let d,v=t.href;if(v=(e=>{const t=m.cacheSuffix;return n(e)&&(e=e.replace("?"+t,"").replace("&"+t,"")),e})(v),v&&(!r||r(v,l))&&!((e,t)=>{const n=_(e);if(n){const r=S(e),o=r?e.documentBaseURI.toAbsolute(r):h.baseURL+"/skins/ui/"+n,l=h.baseURL+"/skins/content/";return t===o+"/content"+(e.inline?".inline":"")+".min.css"||-1!==t.indexOf(l)}return!1})(e,v)){f.each(t.imports,(e=>{c(e,!0)}));try{d=t.cssRules||t.rules}catch(e){}f.each(d,(e=>{e.styleSheet?c(e.styleSheet,!0):(e=>e.selectorText)(e)&&f.each(e.selectorText.split(","),(e=>{o.push(f.trim(e))}))}))}};f.each(e.contentCSS,(e=>{l[e]=!0})),r||(r=(e,t)=>t||l[e]);try{f.each(t.styleSheets,(e=>{c(e)}))}catch(e){}return o},E=(e,t)=>{let n={};const r=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(!r)return;const o=r[1],l=r[2].substr(1).split(".").join(" "),c=f.makeMap("a,img");return r[1]?(n={title:t},e.schema.getTextBlockElements()[o]?n.block=o:e.schema.getBlockElements()[o]||c[o.toLowerCase()]?n.selector=o:n.inline=o):r[2]&&(n={inline:"span",title:t.substr(1),classes:l}),v(e)?n.classes=l:n.attributes={class:l},n},R=(e,t)=>null===t||y(e),B=e=>{e.on("init",(()=>{const t=(()=>{const e=[],t=[],n={};return{addItemToGroup:(e,r)=>{n[e]?n[e].push(r):(t.push(e),n[e]=[r])},addItem:t=>{e.push(t)},toFormats:()=>j(t,(g=>{const e=n[g];return 0===e.length?[]:[{title:g,items:e}]})).concat(e)}})(),n={},r=I(A(e)),o=(e=>f.map(e,(e=>f.extend({},e,{original:e,selectors:{},filter:I(e.filter)}))))(x(e)),l=(t,r)=>{if(((e,t,n,r)=>!(R(e,n)?t in r:t in n.selectors))(e,t,r,n)){((e,t,n,r)=>{R(e,n)?r[t]=!0:n.selectors[t]=!0})(e,t,r,n);const o=((e,t,n,r)=>{let o;const l=w(e);return o=r&&r.selector_converter?r.selector_converter:l||(()=>E(e,n)),o.call(t,n,r)})(e,e.plugins.importcss,t,r);if(o){const t=o.name||d.DOM.uniqueId();return e.formatter.register(t,o),{title:o.title,format:t}}}return null};f.each(D(e,e.getDoc(),I(C(e))),(e=>{if(!T.test(e)&&(!r||r(e))){const n=((e,t)=>f.grep(e,(e=>!e.filter||e.filter(t))))(o,e);if(n.length>0)f.each(n,(n=>{const r=l(e,n);r&&t.addItemToGroup(n.title,r)}));else{const n=l(e,null);n&&t.addItem(n)}}}));const c=t.toFormats();e.dispatch("addStyleModifications",{items:c,replace:!O(e)})}))};e.add("importcss",(e=>((e=>{const t=e.options.register,o=e=>n(e)||l(e)||r(e);t("importcss_merge_classes",{processor:"boolean",default:!0}),t("importcss_exclusive",{processor:"boolean",default:!0}),t("importcss_selector_converter",{processor:"function"}),t("importcss_selector_filter",{processor:o}),t("importcss_file_filter",{processor:o}),t("importcss_groups",{processor:"object[]"}),t("importcss_append",{processor:"boolean",default:!1})})(e),B(e),(e=>({convertSelectorToFormat:t=>E(e,t)}))(e))))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>typeof t===e,n=(e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,r=(l=String).prototype,r.isPrototypeOf(n)||(null===(c=o.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,r;var o,l,c})(t)===e)("string"),r=t("boolean"),o=a=>!(a=>null==a)(a),l=t("function"),c=t("number"),d=(h=!1,()=>h);var h;class m{constructor(e,t){this.tag=e,this.value=t}static some(e){return new m(!0,e)}static none(){return m.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?m.some(e(this.value)):m.none()}bind(e){return this.tag?e(this.value):m.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:m.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return o(e)?m.some(e):m.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}m.singletonNone=new m(!1);const f=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},v=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},y={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return v(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return v(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return v(t)},fromDom:v,fromPoint:(e,t,n)=>m.from(e.dom.elementFromPoint(t,n)).map(v)},w=(element,e)=>{const t=element.dom;if(1!==t.nodeType)return!1;{const n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}};"undefined"!=typeof window?window:Function("return this;")();const A=e=>element=>(element=>element.dom.nodeType)(element)===e,x=A(1),O=A(3),C=A(9),_=A(11),S=element=>((e,t)=>{const n=e.length,r=new Array(n);for(let i=0;i<n;i++){const n=e[i];r[i]=t(n,i)}return r})(element.dom.childNodes,y.fromDom),k=(element,e,t)=>{((e,t,o)=>{if(!(n(o)||r(o)||c(o)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,o+"")})(element.dom,e,t)},j=(element,e)=>{element.dom.removeAttribute(e)},T=l(Element.prototype.attachShadow)&&l(Node.prototype.getRootNode)?e=>y.fromDom(e.dom.getRootNode()):e=>{return C(e)?e:(element=e,y.fromDom(element.dom.ownerDocument));var element},I=e=>{const t=T(e);return _(n=t)&&o(n.dom.host)?m.some(t):m.none();var n},D=e=>y.fromDom(e.dom.host),E=element=>{const e=O(element)?element.dom.parentNode:element.dom;if(null==e||null===e.ownerDocument)return!1;const t=e.ownerDocument;return I(y.fromDom(e)).fold((()=>t.body.contains(e)),(n=E,r=D,a=>n(r(a))));var n,r},R=(e,t,n)=>((e,t,n)=>{let element=e.dom;const r=l(n)?n:d;for(;element.parentNode;){element=element.parentNode;const e=y.fromDom(element);if(t(e))return m.some(e);if(r(e))break}return m.none()})(e,(e=>w(e,t)),n),B=(e,t)=>(e=>void 0!==e.style&&l(e.style.getPropertyValue))(e)?e.style.getPropertyValue(t):"",M=element=>"rtl"===((element,e)=>{const t=element.dom,n=window.getComputedStyle(t).getPropertyValue(e);return""!==n||E(element)?n:B(t,e)})(element,"direction")?"rtl":"ltr",P=(e,t)=>((e,t)=>((e,t)=>{const n=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];t(r,i)&&n.push(r)}return n})(S(e),t))(e,(e=>w(e,t))),L=element=>(element=>m.from(element.dom.parentNode).map(y.fromDom))(element).filter(x),F=($="li",e=>x(e)&&e.dom.nodeName.toLowerCase()===$);var $;const N=(e,t)=>{const n=e.selection.getSelectedBlocks();n.length>0&&(f(n,(e=>{const n=y.fromDom(e),r=F(n),o=((element,e)=>(e?R(element,"ol,ul"):m.some(element)).getOr(element))(n,r);L(o).each((e=>{if(M(e)!==t?k(o,"dir",t):M(o)!==t&&j(o,"dir"),r){const e=P(o,"li[dir]");f(e,(e=>j(e,"dir")))}}))})),e.nodeChanged())},z=(e,t)=>n=>{const r=e=>{const element=y.fromDom(e.element);n.setActive(M(element)===t)};return e.on("NodeChange",r),()=>e.off("NodeChange",r)};e.add("directionality",(e=>{(e=>{e.addCommand("mceDirectionLTR",(()=>{N(e,"ltr")})),e.addCommand("mceDirectionRTL",(()=>{N(e,"rtl")}))})(e),(e=>{e.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>e.execCommand("mceDirectionLTR"),onSetup:z(e,"ltr")}),e.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>e.execCommand("mceDirectionRTL"),onSetup:z(e,"rtl")})})(e)}))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>typeof t===e,n=(e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,r=(l=String).prototype,r.isPrototypeOf(n)||(null===(c=o.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,r;var o,l,c})(t)===e)("string"),r=(o=null,a=>o===a);var o;const l=t("boolean"),c=t("number");class d{constructor(e,t){this.tag=e,this.value=t}static some(e){return new d(!0,e)}static none(){return d.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?d.some(e(this.value)):d.none()}bind(e){return this.tag?e(this.value):d.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:d.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(a=>null==a)(e)?d.none():d.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}d.singletonNone=new d(!1);const h=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},m=Object.keys,f=(e,t)=>{const n=m(e);for(let r=0,o=n.length;r<o;r++){const i=n[r];t(e[i],i)}};"undefined"!=typeof window?window:Function("return this;")();const v=element=>element.dom.nodeValue,y=(e=>element=>(element=>element.dom.nodeType)(element)===e)(3),w=(element,e,t)=>{((e,t,r)=>{if(!(n(r)||l(r)||c(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")})(element.dom,e,t)},A=(element,e)=>{element.dom.removeAttribute(e)},x=(element,e)=>{const t=((element,e)=>{const t=element.dom.getAttribute(e);return null===t?void 0:t})(element,e);return void 0===t||""===t?[]:t.split(" ")},O=element=>void 0!==element.dom.classList,C=(element,e)=>((element,e,t)=>{const n=x(element,e).concat([t]);return w(element,e,n.join(" ")),!0})(element,"class",e),_=(element,e)=>((element,e,t)=>{const n=((e,t)=>{const n=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];t(r,i)&&n.push(r)}return n})(x(element,e),(e=>e!==t));return n.length>0?w(element,e,n.join(" ")):A(element,e),!1})(element,"class",e),S=element=>{const e=O(element)?element.dom.classList:(element=>x(element,"class"))(element);0===e.length&&A(element,"class")},k=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},j={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return k(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return k(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return k(t)},fromDom:k,fromPoint:(e,t,n)=>d.from(e.dom.elementFromPoint(t,n)).map(k)},T={"Â ":"nbsp","Â­":"shy"},I=(e,t)=>{let n="";return f(e,((e,t)=>{n+=t})),new RegExp("["+n+"]",t?"g":"")},D=I(T),E=I(T,!0),R=(e=>{let t="";return f(e,(e=>{t&&(t+=","),t+="span.mce-"+e})),t})(T),B="mce-nbsp",M=e=>'<span data-mce-bogus="1" class="mce-'+T[e]+'">'+e+"</span>",P=e=>{const t=v(e);return y(e)&&n(t)&&D.test(t)},L=(e,t)=>{let n=[];const r=((e,t)=>{const n=e.length,r=new Array(n);for(let i=0;i<n;i++){const n=e[i];r[i]=t(n,i)}return r})(e.dom.childNodes,j.fromDom);return h(r,(e=>{t(e)&&(n=n.concat([e])),n=n.concat(L(e,t))})),n},F=e=>"span"===e.nodeName.toLowerCase()&&e.classList.contains("mce-nbsp-wrap"),$=(e,t)=>{const n=e.dom,r=L(j.fromDom(t),P);h(r,(t=>{var r;const o=t.dom.parentNode;if(F(o))element=j.fromDom(o),l=B,O(element)?element.dom.classList.add(l):C(element,l);else{const o=n.encode(null!==(r=v(t))&&void 0!==r?r:"").replace(E,M),div=n.create("div",{},o);let l;for(;l=div.lastChild;)n.insertAfter(l,t.dom);e.dom.remove(t.dom)}var element,l}))},N=(e,t)=>{const n=e.dom.select(R,t);h(n,(t=>{F(t)?((element,e)=>{O(element)?element.dom.classList.remove(e):_(element,e);S(element)})(j.fromDom(t),B):e.dom.remove(t,!0)}))},z=e=>{const body=e.getBody(),t=e.selection.getBookmark();let n=((e,t)=>{for(;e.parentNode;){if(e.parentNode===t)return t;e=e.parentNode}})(e.selection.getNode(),body);n=void 0!==n?n:body,N(e,n),$(e,n),e.selection.moveToBookmark(t)},V=(e,t)=>{((e,t)=>{e.dispatch("VisualChars",{state:t})})(e,t.get());const body=e.getBody();!0===t.get()?$(e,body):N(e,body)},H=(e,t)=>{e.addCommand("mceVisualChars",(()=>{((e,t)=>{t.set(!t.get());const n=e.selection.getBookmark();V(e,t),e.selection.moveToBookmark(n)})(e,t)}))},W=(Q="visualchars_default_state",e=>e.options.get(Q));var Q;const U=(e,t)=>{const n=((e,t)=>{let n=null;return{cancel:()=>{r(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{r(n)&&(n=setTimeout((()=>{n=null,e.apply(null,o)}),t))}}})((()=>{z(e)}),300);e.on("keydown",(r=>{!0===t.get()&&(13===r.keyCode?z(e):n.throttle())})),e.on("remove",n.cancel)},Y=(e,t)=>n=>{n.setActive(t.get());const r=e=>n.setActive(e.state);return e.on("VisualChars",r),()=>e.off("VisualChars",r)};e.add("visualchars",(e=>{(e=>{(0,e.options.register)("visualchars_default_state",{processor:"boolean",default:!1})})(e);const t=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})(W(e));return H(e,t),((e,t)=>{const n=()=>e.execCommand("mceVisualChars");e.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:n,onSetup:Y(e,t)}),e.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:n,onSetup:Y(e,t)})})(e,t),U(e,t),((e,t)=>{e.on("init",(()=>{V(e,t)}))})(e,t),(e=>({isEnabled:()=>e.get()}))(t)}))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,r=(l=String).prototype,r.isPrototypeOf(n)||(null===(c=o.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,r;var o,l,c})(t)===e,n=t("string"),r=t("object"),o=t("array"),l=(c="function",e=>typeof e===c);var c;const d=(h=!1,()=>h);var h;var m=tinymce.util.Tools.resolve("tinymce.util.Tools");const option=e=>t=>t.options.get(e),f=e=>{const t=e.options.register;t("template_cdate_classes",{processor:"string",default:"cdate"}),t("template_mdate_classes",{processor:"string",default:"mdate"}),t("template_selected_content_classes",{processor:"string",default:"selcontent"}),t("template_preview_replace_values",{processor:"object"}),t("template_replace_values",{processor:"object"}),t("templates",{processor:e=>n(e)||((e,t)=>{if(o(e)){for(let i=0,n=e.length;i<n;++i)if(!t(e[i]))return!1;return!0}return!1})(e,r)||l(e),default:[]}),t("template_cdate_format",{processor:"string",default:e.translate("%Y-%m-%d")}),t("template_mdate_format",{processor:"string",default:e.translate("%Y-%m-%d")})},v=option("template_cdate_classes"),y=option("template_mdate_classes"),w=option("template_selected_content_classes"),A=option("template_preview_replace_values"),x=option("template_replace_values"),O=option("templates"),C=option("template_cdate_format"),_=option("template_mdate_format"),S=option("content_style"),k=option("content_css_cors"),j=option("body_class"),T=(e,t)=>{if((e=""+e).length<t)for(let i=0;i<t-e.length;i++)e="0"+e;return e},I=(e,t,n=new Date)=>{const r="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),o="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),l="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),c="January February March April May June July August September October November December".split(" ");return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",T(n.getMonth()+1,2))).replace("%d",T(n.getDate(),2))).replace("%H",""+T(n.getHours(),2))).replace("%M",""+T(n.getMinutes(),2))).replace("%S",""+T(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(c[n.getMonth()]))).replace("%b",""+e.translate(l[n.getMonth()]))).replace("%A",""+e.translate(o[n.getDay()]))).replace("%a",""+e.translate(r[n.getDay()]))).replace("%%","%")};class D{constructor(e,t){this.tag=e,this.value=t}static some(e){return new D(!0,e)}static none(){return D.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?D.some(e(this.value)):D.none()}bind(e){return this.tag?e(this.value):D.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:D.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(a=>null==a)(e)?D.none():D.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}D.singletonNone=new D(!1);const E=(e,t)=>((e,t,n)=>{for(let i=0,r=e.length;i<r;i++){const r=e[i];if(t(r,i))return D.some(r);if(n(r,i))break}return D.none()})(e,t,d),R=Object.hasOwnProperty,B=(e,t)=>R.call(e,t),M={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},P=html=>html.replace(/["'<>&]/g,(e=>{return(t=M,n=e,B(t,n)?D.from(t[n]):D.none()).getOr(e);var t,n})),L=(e,t,n)=>((e,t)=>{for(let i=0,n=e.length;i<n;i++)if(t(e[i],i))return!0;return!1})(n.split(/\s+/),(n=>e.hasClass(t,n))),F=(html,e)=>(m.each(e,((e,t)=>{l(e)&&(e=e(t)),html=html.replace(new RegExp("\\{\\$"+(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"\\}"),"g"),e)})),html),$=(e,t)=>{const n=e.dom,r=x(e);m.each(n.select("*",t),(e=>{m.each(r,((t,r)=>{n.hasClass(e,r)&&l(t)&&t(e)}))}))},N=(e,t,html)=>{const n=e.dom,r=e.selection.getContent();html=F(html,x(e));let o=n.create("div",{},html);const l=n.select(".mceTmpl",o);l&&l.length>0&&(o=n.create("div"),o.appendChild(l[0].cloneNode(!0))),m.each(n.select("*",o),(t=>{L(n,t,v(e))&&(t.innerHTML=I(e,C(e))),L(n,t,y(e))&&(t.innerHTML=I(e,_(e))),L(n,t,w(e))&&(t.innerHTML=r)})),$(e,o),e.execCommand("mceInsertContent",!1,o.innerHTML),e.addVisual()};var z=tinymce.util.Tools.resolve("tinymce.Env");const V=(e,t)=>{const n=e=>((e,t)=>{const n=e.length,r=new Array(n);for(let i=0;i<n;i++){const n=e[i];r[i]=t(n,i)}return r})(e,(e=>({text:e.text,value:e.text}))),r=(e,t)=>E(e,(e=>e.text===t)),o=t=>{e.windowManager.alert("Could not load the specified template.",(()=>t.focus("template")))},l=e=>e.value.url.fold((()=>Promise.resolve(e.value.content.getOr(""))),(e=>fetch(e).then((e=>e.ok?e.text():Promise.reject())))),c=(e,t)=>(n,c)=>{if("template"===c.name){const c=n.getData().template;r(e,c).each((e=>{n.block("Loading..."),l(e).then((r=>{t(n,e,r)})).catch((()=>{t(n,e,""),n.setEnabled("save",!1),o(n)}))}))}},d=t=>n=>{const data=n.getData();r(t,data.template).each((t=>{l(t).then((t=>{e.execCommand("mceInsertTemplate",!1,t),n.close()})).catch((()=>{n.setEnabled("save",!1),o(n)}))}))};(()=>{if(!t||0===t.length){const t=e.translate("No templates defined.");return e.notificationManager.open({text:t,type:"info"}),D.none()}return D.from(m.map(t,((template,e)=>{const t=e=>void 0!==e.url;return{selected:0===e,text:template.title,value:{url:t(template)?D.from(template.url):D.none(),content:t(template)?D.none():D.from(template.content),description:template.description}}})))})().each((t=>{const r=n(t),h=(e,n)=>({title:"Insert Template",size:"large",body:{type:"panel",items:e},initialData:n,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:d(t),onChange:c(t,f)}),f=(t,template,n)=>{const content=((e,html)=>{var t;if(-1===html.indexOf("<html>")){let n="";const r=null!==(t=S(e))&&void 0!==t?t:"",o=k(e)?' crossorigin="anonymous"':"";m.each(e.contentCSS,(t=>{n+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(t)+'"'+o+">"})),r&&(n+='<style type="text/css">'+r+"</style>");const l=j(e),c=e.dom.encode,d='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(z.os.isMacOS()||z.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",h=e.getBody().dir,f=h?' dir="'+c(h)+'"':"";html='<!DOCTYPE html><html><head><base href="'+c(e.documentBaseURI.getURI())+'">'+n+d+'</head><body class="'+c(l)+'"'+f+">"+html+"</body></html>"}return F(html,A(e))})(e,n),o=[{type:"selectbox",name:"template",label:"Templates",items:r},{type:"htmlpanel",html:`<p aria-live="polite">${P(template.value.description)}</p>`},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1,transparent:!1}],l={template:template.text,preview:content};t.unblock(),t.redial(h(o,l)),t.focus("template")},v=e.windowManager.open(h([],{template:"",preview:""}));v.block("Loading..."),l(t[0]).then((e=>{f(v,t[0],e)})).catch((()=>{f(v,t[0],""),v.setEnabled("save",!1),o(v)}))}))},H=e=>{e.addCommand("mceInsertTemplate",function(e,...t){return(...n)=>{const r=t.concat(n);return e.apply(null,r)}}(N,e)),e.addCommand("mceTemplate",((e,t)=>()=>{const r=O(e);l(r)?r(t):n(r)?fetch(r).then((e=>{e.ok&&e.json().then(t)})):t(r)})(e,(e=>t=>{V(e,t)})(e)))};e.add("template",(e=>{f(e),(e=>{const t=()=>e.execCommand("mceTemplate");e.ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onAction:t}),e.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onAction:t})})(e),H(e),(e=>{e.on("PreProcess",(t=>{const n=e.dom,r=_(e);m.each(n.select("div",t.node),(t=>{n.hasClass(t,"mceTmpl")&&(m.each(n.select("*",t),(t=>{L(n,t,y(e))&&(t.innerHTML=I(e,r))})),$(e,t))}))}))})(e)}))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=a=>!(a=>null==a)(a);class n{constructor(e,t){this.tag=e,this.value=t}static some(e){return new n(!0,e)}static none(){return n.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?n.some(e(this.value)):n.none()}bind(e){return this.tag?e(this.value):n.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:n.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return t(e)?n.some(e):n.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}n.singletonNone=new n(!1);const head=e=>((e,i)=>i>=0&&i<e.length?n.some(e[i]):n.none())(e,0);var r=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");const o="undefined"!=typeof window?window:Function("return this;")(),l=function(e,t,n){const r=window.Prism;window.Prism={manual:!0};var o=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,r={},o={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof l?new l(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var r,l;switch(n=n||{},o.util.type(t)){case"Object":if(l=o.util.objId(t),n[l])return n[l];for(var c in r={},n[l]=r,t)t.hasOwnProperty(c)&&(r[c]=e(t[c],n));return r;case"Array":return l=o.util.objId(t),n[l]?n[l]:(r=[],n[l]=r,t.forEach((function(t,i){r[i]=e(t,n)})),r);default:return t}},getLanguage:function(element){for(;element;){var e=t.exec(element.className);if(e)return e[1].toLowerCase();element=element.parentElement}return"none"},setLanguage:function(element,e){element.className=element.className.replace(RegExp(t,"gi"),""),element.classList.add("language-"+e)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(n){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(n.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var i in t)if(t[i].src==e)return t[i]}return null}},isActive:function(element,e,t){for(var n="no-"+e;element;){var r=element.classList;if(r.contains(e))return!0;if(r.contains(n))return!1;element=element.parentElement}return!!t}},languages:{plain:r,plaintext:r,text:r,txt:r,extend:function(e,t){var n=o.util.clone(o.languages[e]);for(var r in t)n[r]=t[r];return n},insertBefore:function(e,t,n,r){var l=(r=r||o.languages)[e],c={};for(var d in l)if(l.hasOwnProperty(d)){if(d==t)for(var h in n)n.hasOwnProperty(h)&&(c[h]=n[h]);n.hasOwnProperty(d)||(c[d]=l[d])}var m=r[e];return r[e]=c,o.languages.DFS(o.languages,(function(t,n){n===m&&t!=e&&(this[t]=c)})),c},DFS:function e(t,n,r,l){l=l||{};var c=o.util.objId;for(var i in t)if(t.hasOwnProperty(i)){n.call(t,i,t[i],r||i);var d=t[i],h=o.util.type(d);"Object"!==h||l[c(d)]?"Array"!==h||l[c(d)]||(l[c(d)]=!0,e(d,n,i,l)):(l[c(d)]=!0,e(d,n,null,l))}}},plugins:{},highlightAll:function(e,t){o.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var r={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),o.hooks.run("before-all-elements-highlight",r);for(var element,i=0;element=r.elements[i++];)o.highlightElement(element,!0===t,r.callback)},highlightElement:function(element,t,n){var r=o.util.getLanguage(element),l=o.languages[r];o.util.setLanguage(element,r);var c=element.parentElement;c&&"pre"===c.nodeName.toLowerCase()&&o.util.setLanguage(c,r);var d={element:element,language:r,grammar:l,code:element.textContent};function h(e){d.highlightedCode=e,o.hooks.run("before-insert",d),d.element.innerHTML=d.highlightedCode,o.hooks.run("after-highlight",d),o.hooks.run("complete",d),n&&n.call(d.element)}if(o.hooks.run("before-sanity-check",d),(c=d.element.parentElement)&&"pre"===c.nodeName.toLowerCase()&&!c.hasAttribute("tabindex")&&c.setAttribute("tabindex","0"),!d.code)return o.hooks.run("complete",d),void(n&&n.call(d.element));if(o.hooks.run("before-highlight",d),d.grammar)if(t&&e.Worker){var m=new Worker(o.filename);m.onmessage=function(e){h(e.data)},m.postMessage(JSON.stringify({language:d.language,code:d.code,immediateClose:!0}))}else h(o.highlight(d.code,d.grammar,d.language));else h(o.util.encode(d.code))},highlight:function(text,e,t){var n={code:text,grammar:e,language:t};if(o.hooks.run("before-tokenize",n),!n.grammar)throw new Error('The language "'+n.language+'" has no grammar.');return n.tokens=o.tokenize(n.code,n.grammar),o.hooks.run("after-tokenize",n),l.stringify(o.util.encode(n.tokens),n.language)},tokenize:function(text,e){var t=e.rest;if(t){for(var n in t)e[n]=t[n];delete e.rest}var r=new h;return m(r,r.head,text),d(text,r,e,r.head,0),function(e){var t=[],n=e.head.next;for(;n!==e.tail;)t.push(n.value),n=n.next;return t}(r)},hooks:{all:{},add:function(e,t){var n=o.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=o.hooks.all[e];if(n&&n.length)for(var r,i=0;r=n[i++];)r(t)}},Token:l};function l(e,content,t,n){this.type=e,this.content=content,this.alias=t,this.length=0|(n||"").length}function c(pattern,e,text,t){pattern.lastIndex=e;var n=pattern.exec(text);if(n&&t&&n[1]){var r=n[1].length;n.index+=r,n[0]=n[0].slice(r)}return n}function d(text,e,t,n,r,h){for(var v in t)if(t.hasOwnProperty(v)&&t[v]){var y=t[v];y=Array.isArray(y)?y:[y];for(var w=0;w<y.length;++w){if(h&&h.cause==v+","+w)return;var A=y[w],x=A.inside,O=!!A.lookbehind,C=!!A.greedy,_=A.alias;if(C&&!A.pattern.global){var S=A.pattern.toString().match(/[imsuy]*$/)[0];A.pattern=RegExp(A.pattern.source,S+"g")}for(var pattern=A.pattern||A,k=n.next,j=r;k!==e.tail&&!(h&&j>=h.reach);j+=k.value.length,k=k.next){var T=k.value;if(e.length>text.length)return;if(!(T instanceof l)){var I,D=1;if(C){if(!(I=c(pattern,j,text,O))||I.index>=text.length)break;var E=I.index,R=I.index+I[0].length,p=j;for(p+=k.value.length;E>=p;)p+=(k=k.next).value.length;if(j=p-=k.value.length,k.value instanceof l)continue;for(var B=k;B!==e.tail&&(p<R||"string"==typeof B.value);B=B.next)D++,p+=B.value.length;D--,T=text.slice(j,p),I.index-=j}else if(!(I=c(pattern,0,T,O)))continue;E=I.index;var M=I[0],P=T.slice(0,E),L=T.slice(E+M.length),F=j+T.length;h&&F>h.reach&&(h.reach=F);var $=k.prev;if(P&&($=m(e,$,P),j+=P.length),f(e,$,D),k=m(e,$,new l(v,x?o.tokenize(M,x):M,_,M)),L&&m(e,k,L),D>1){var N={cause:v+","+w,reach:F};d(text,e,t,k.prev,j,N),h&&N.reach>h.reach&&(h.reach=N.reach)}}}}}}function h(){var head={value:null,prev:null,next:null},e={value:null,prev:head,next:null};head.next=e,this.head=head,this.tail=e,this.length=0}function m(e,t,n){var r=t.next,o={value:n,prev:t,next:r};return t.next=o,r.prev=o,e.length++,o}function f(e,t,n){for(var r=t.next,i=0;i<n&&r!==e.tail;i++)r=r.next;t.next=r,r.prev=t,e.length-=i}if(e.Prism=o,l.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var s="";return t.forEach((function(t){s+=e(t,n)})),s}var r={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},l=t.alias;l&&(Array.isArray(l)?Array.prototype.push.apply(r.classes,l):r.classes.push(l)),o.hooks.run("wrap",r);var c="";for(var d in r.attributes)c+=" "+d+'="'+(r.attributes[d]||"").replace(/"/g,"&quot;")+'"';return"<"+r.tag+' class="'+r.classes.join(" ")+'"'+c+">"+r.content+"</"+r.tag+">"},!e.document)return e.addEventListener?(o.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),r=n.language,code=n.code,l=n.immediateClose;e.postMessage(o.highlight(code,o.languages[r],r)),l&&e.close()}),!1),o):o;var script=o.util.currentScript();function v(){o.manual||o.highlightAll()}if(script&&(o.filename=script.src,script.hasAttribute("data-manual")&&(o.manual=!0)),!o.manual){var y=document.readyState;"loading"===y||"interactive"===y&&script&&script.defer?document.addEventListener("DOMContentLoaded",v):window.requestAnimationFrame?window.requestAnimationFrame(v):window.setTimeout(v,16)}return o}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});return void 0!==t&&t.exports&&(t.exports=o),void 0!==e&&(e.Prism=o),o.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},function(e){function t(e,t){return"___"+e.toUpperCase()+t+"___"}Object.defineProperties(e.languages["markup-templating"]={},{buildPlaceholders:{value:function(n,r,o,l){if(n.language===r){var c=n.tokenStack=[];n.code=n.code.replace(o,(function(e){if("function"==typeof l&&!l(e))return e;for(var o,i=c.length;-1!==n.code.indexOf(o=t(r,i));)++i;return c[i]=e,o})),n.grammar=e.languages.markup}}},tokenizePlaceholders:{value:function(n,r){if(n.language===r&&n.tokenStack){n.grammar=e.languages[r];var o=0,l=Object.keys(n.tokenStack);!function c(d){for(var i=0;i<d.length&&!(o>=l.length);i++){var h=d[i];if("string"==typeof h||h.content&&"string"==typeof h.content){var m=l[o],f=n.tokenStack[m],s="string"==typeof h?h:h.content,v=t(r,m),y=s.indexOf(v);if(y>-1){++o;var w=s.substring(0,y),A=new e.Token(r,e.tokenize(f,n.grammar),"language-"+r,f),x=s.substring(y+v.length),O=[];w&&O.push.apply(O,c([w])),O.push(A),x&&O.push.apply(O,c([x])),"string"==typeof h?d.splice.apply(d,[i,1].concat(O)):h.content=O}}else h.content&&c(h.content)}return d}(n.tokens)}}}})}(o),o.languages.c=o.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),o.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),o.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},o.languages.c.string],char:o.languages.c.char,comment:o.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:o.languages.c}}}}),o.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete o.languages.c.boolean,function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,(function(){return t.source}));e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,(function(){return t.source}))),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,(function(){return n}))+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])}(o),function(e){function t(pattern,e){return pattern.replace(/<<(\d+)>>/g,(function(t,n){return"(?:"+e[+n]+")"}))}function n(pattern,e,n){return RegExp(t(pattern,e),n||"")}function r(pattern,e){for(var i=0;i<e;i++)pattern=pattern.replace(/<<self>>/g,(function(){return"(?:"+pattern+")"}));return pattern.replace(/<<self>>/g,"[^\\s\\S]")}var o="bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",l="class enum interface record struct",c="add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",d="abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield";function h(e){return"\\b(?:"+e.trim().replace(/ /g,"|")+")\\b"}var m=h(l),f=RegExp(h(o+" "+l+" "+c+" "+d)),v=h(l+" "+c+" "+d),y=h(o+" "+l+" "+d),w=r(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),A=r(/\((?:[^()]|<<self>>)*\)/.source,2),x=/@?\b[A-Za-z_]\w*\b/.source,O=t(/<<0>>(?:\s*<<1>>)?/.source,[x,w]),C=t(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[v,O]),_=/\[\s*(?:,\s*)*\]/.source,S=t(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[C,_]),k=t(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[w,A,_]),j=t(/\(<<0>>+(?:,<<0>>+)+\)/.source,[k]),T=t(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[j,C,_]),I={keyword:f,punctuation:/[<>()?,.:[\]]/},D=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,E=/"(?:\\.|[^\\"\r\n])*"/.source,R=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;e.languages.csharp=e.languages.extend("clike",{string:[{pattern:n(/(^|[^$\\])<<0>>/.source,[R]),lookbehind:!0,greedy:!0},{pattern:n(/(^|[^@$\\])<<0>>/.source,[E]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:n(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[C]),lookbehind:!0,inside:I},{pattern:n(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[x,T]),lookbehind:!0,inside:I},{pattern:n(/(\busing\s+)<<0>>(?=\s*=)/.source,[x]),lookbehind:!0},{pattern:n(/(\b<<0>>\s+)<<1>>/.source,[m,O]),lookbehind:!0,inside:I},{pattern:n(/(\bcatch\s*\(\s*)<<0>>/.source,[C]),lookbehind:!0,inside:I},{pattern:n(/(\bwhere\s+)<<0>>/.source,[x]),lookbehind:!0},{pattern:n(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[S]),lookbehind:!0,inside:I},{pattern:n(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[T,y,x]),inside:I}],keyword:f,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),e.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),e.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:n(/([(,]\s*)<<0>>(?=\s*:)/.source,[x]),lookbehind:!0,alias:"punctuation"}}),e.languages.insertBefore("csharp","class-name",{namespace:{pattern:n(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[x]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:n(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[A]),lookbehind:!0,alias:"class-name",inside:I},"return-type":{pattern:n(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[T,C]),inside:I,alias:"class-name"},"constructor-invocation":{pattern:n(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[T]),lookbehind:!0,inside:I,alias:"class-name"},"generic-method":{pattern:n(/<<0>>\s*<<1>>(?=\s*\()/.source,[x,w]),inside:{function:n(/^<<0>>/.source,[x]),generic:{pattern:RegExp(w),alias:"class-name",inside:I}}},"type-list":{pattern:n(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[m,O,x,T,f.source,A,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:n(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[O,A]),lookbehind:!0,greedy:!0,inside:e.languages.csharp},keyword:f,"class-name":{pattern:RegExp(T),greedy:!0,inside:I},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var B=E+"|"+D,M=t(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[B]),P=r(t(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[M]),2),L=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,F=t(/<<0>>(?:\s*\(<<1>>*\))?/.source,[C,P]);e.languages.insertBefore("csharp","class-name",{attribute:{pattern:n(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[L,F]),lookbehind:!0,greedy:!0,inside:{target:{pattern:n(/^<<0>>(?=\s*:)/.source,[L]),alias:"keyword"},"attribute-arguments":{pattern:n(/\(<<0>>*\)/.source,[P]),inside:e.languages.csharp},"class-name":{pattern:RegExp(C),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var $=/:[^}\r\n]+/.source,N=r(t(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[M]),2),z=t(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[N,$]),V=r(t(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[B]),2),H=t(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[V,$]);function W(t,r){return{interpolation:{pattern:n(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[t]),lookbehind:!0,inside:{"format-string":{pattern:n(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[r,$]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:e.languages.csharp}}},string:/[\s\S]+/}}e.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:n(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[z]),lookbehind:!0,greedy:!0,inside:W(z,N)},{pattern:n(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[H]),lookbehind:!0,greedy:!0,inside:W(H,V)}],char:{pattern:RegExp(D),greedy:!0}}),e.languages.dotnet=e.languages.cs=e.languages.csharp}(o),function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(o),function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,n=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,r={pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[r,{pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:r.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+n+/[A-Z]\w*\b/.source),lookbehind:!0,inside:r.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0}}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":r,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+n+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:r.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+n+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:r.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,(function(){return t.source}))),lookbehind:!0,inside:{punctuation:/\./}}})}(o),o.languages.javascript=o.languages.extend("clike",{"class-name":[o.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),o.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,o.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:o.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:o.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:o.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:o.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:o.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),o.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:o.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),o.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),o.languages.markup&&(o.languages.markup.tag.addInlined("script","javascript"),o.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),o.languages.js=o.languages.javascript,o.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},o.languages.markup.tag.inside["attr-value"].inside.entity=o.languages.markup.entity,o.languages.markup.doctype.inside["internal-subset"].inside=o.languages.markup,o.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(o.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:o.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};r["language-"+t]={pattern:/[\s\S]+/,inside:o.languages[t]};var l={};l[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:r},o.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(o.languages.markup.tag,"addAttribute",{value:function(e,t){o.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:o.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),o.languages.html=o.languages.markup,o.languages.mathml=o.languages.markup,o.languages.svg=o.languages.markup,o.languages.xml=o.languages.extend("markup",{}),o.languages.ssml=o.languages.xml,o.languages.atom=o.languages.xml,o.languages.rss=o.languages.xml,function(e){var t=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,n=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],r=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,o=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,l=/[{}\[\](),:;]/;e.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:t,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:n,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:r,operator:o,punctuation:l};var c={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:e.languages.php},d=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:c}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:c}}];e.languages.insertBefore("php","variable",{string:d,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:t,string:d,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:n,number:r,operator:o,punctuation:l}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),e.hooks.add("before-tokenize",(function(t){if(/<\?/.test(t.code)){e.languages["markup-templating"].buildPlaceholders(t,"php",/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g)}})),e.hooks.add("after-tokenize",(function(t){e.languages["markup-templating"].tokenizePlaceholders(t,"php")}))}(o),o.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},o.languages.python["string-interpolation"].inside.interpolation.inside.rest=o.languages.python,o.languages.py=o.languages.python,function(e){e.languages.ruby=e.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),e.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var t={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:e.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete e.languages.ruby.function;var n="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",r=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;e.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+n+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:t,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:t,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+r),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+r+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),e.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+n),greedy:!0,inside:{interpolation:t,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:t,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:t,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+n),greedy:!0,inside:{interpolation:t,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:t,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete e.languages.ruby.string,e.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),e.languages.rb=e.languages.ruby}(o),window.Prism=r,o}(void 0,void 0),option=e=>t=>t.options.get(e),c=option("codesample_languages"),d=option("codesample_global_prismjs"),h=e=>o.Prism&&d(e)?o.Prism:l,m=e=>t(e)&&"PRE"===e.nodeName&&-1!==e.className.indexOf("language-"),f=e=>{const t=e.selection?e.selection.getNode():null;return m(t)?n.some(t):n.none()},v=e=>{const t=(e=>{const t=c(e);return t||[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}]})(e),o=head(t).fold((l="",()=>l),(e=>e.value));var l;const d=((e,t)=>f(e).fold((()=>t),(e=>{const n=e.className.match(/language-(\w+)/);return n?n[1]:t})))(e,o),m=(e=>f(e).bind((e=>n.from(e.textContent))).getOr(""))(e);e.windowManager.open({title:"Insert/Edit Code Sample",size:"large",body:{type:"panel",items:[{type:"selectbox",name:"language",label:"Language",items:t},{type:"textarea",name:"code",label:"Code view"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{language:d,code:m},onSubmit:t=>{const data=t.getData();((e,t,code)=>{const n=e.dom;e.undoManager.transact((()=>{const o=f(e);return code=r.DOM.encode(code),o.fold((()=>{e.insertContent('<pre id="__new" class="language-'+t+'">'+code+"</pre>");const r=n.select("#__new")[0];n.setAttrib(r,"id",null),e.selection.select(r)}),(r=>{n.setAttrib(r,"class","language-"+t),r.innerHTML=code,h(e).highlightElement(r),e.selection.select(r)}))}))})(e,data.language,data.code),t.close()}})},y=(w=/^\s+|\s+$/g,s=>s.replace(w,""));var w,A=tinymce.util.Tools.resolve("tinymce.util.Tools");e.add("codesample",(e=>{(e=>{const t=e.options.register;t("codesample_languages",{processor:"object[]"}),t("codesample_global_prismjs",{processor:"boolean",default:!1})})(e),(e=>{e.on("PreProcess",(t=>{const n=e.dom,r=n.select("pre[contenteditable=false]",t.node);A.each(A.grep(r,m),(e=>{const code=e.textContent;let t;for(n.setAttrib(e,"class",y(n.getAttrib(e,"class"))),n.setAttrib(e,"contentEditable",null),n.setAttrib(e,"data-mce-highlighted",null);t=e.firstChild;)e.removeChild(t);n.add(e,"code").textContent=code}))})),e.on("SetContent",(()=>{const t=e.dom,n=A.grep(t.select("pre"),(e=>m(e)&&"true"!==t.getAttrib(e,"data-mce-highlighted")));n.length&&e.undoManager.transact((()=>{A.each(n,(n=>{var r;A.each(t.select("br",n),(n=>{t.replace(e.getDoc().createTextNode("\n"),n)})),n.innerHTML=t.encode(null!==(r=n.textContent)&&void 0!==r?r:""),h(e).highlightElement(n),t.setAttrib(n,"data-mce-highlighted",!0),n.className=y(n.className)}))}))})),e.on("PreInit",(()=>{e.parser.addNodeFilter("pre",(e=>{var t;for(let i=0,n=e.length;i<n;i++){const n=e[i];-1!==(null!==(t=n.attr("class"))&&void 0!==t?t:"").indexOf("language-")&&(n.attr("contenteditable","false"),n.attr("data-mce-highlighted","false"))}}))}))})(e),(e=>{const t=()=>e.execCommand("codesample");e.ui.registry.addToggleButton("codesample",{icon:"code-sample",tooltip:"Insert/edit code sample",onAction:t,onSetup:t=>{const n=()=>{t.setActive((e=>{const t=e.selection.getStart();return e.dom.is(t,'pre[class*="language-"]')})(e))};return e.on("NodeChange",n),()=>e.off("NodeChange",n)}}),e.ui.registry.addMenuItem("codesample",{text:"Code sample...",icon:"code-sample",onAction:t})})(e),(e=>{e.addCommand("codesample",(()=>{const t=e.selection.getNode();e.selection.isCollapsed()||m(t)?v(e):e.formatter.toggle("code")}))})(e),e.on("dblclick",(t=>{m(t.target)&&v(e)}))}))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env");const option=e=>t=>t.options.get(e),n=option("pagebreak_separator"),r=option("pagebreak_split_block"),o="mce-pagebreak",l=e=>{const html=`<img src="${t.transparentSrc}" class="${o}" data-mce-resize="false" data-mce-placeholder />`;return e?`<p>${html}</p>`:html};e.add("pagebreak",(e=>{(e=>{const t=e.options.register;t("pagebreak_separator",{processor:"string",default:"\x3c!-- pagebreak --\x3e"}),t("pagebreak_split_block",{processor:"boolean",default:!1})})(e),(e=>{e.addCommand("mcePageBreak",(()=>{e.insertContent(l(r(e)))}))})(e),(e=>{const t=()=>e.execCommand("mcePageBreak");e.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:t}),e.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:t})})(e),(e=>{const t=n(e),c=()=>r(e),d=new RegExp(t.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,(a=>"\\"+a)),"gi");e.on("BeforeSetContent",(e=>{e.content=e.content.replace(d,l(c()))})),e.on("PreInit",(()=>{e.serializer.addNodeFilter("img",(n=>{let r,l,i=n.length;for(;i--;)if(r=n[i],l=r.attr("class"),l&&-1!==l.indexOf(o)){const n=r.parent;if(n&&e.schema.getBlockElements()[n.name]&&c()){n.type=3,n.value=t,n.raw=!0,r.remove();continue}r.type=3,r.value=t,r.raw=!0}}))}))})(e),(e=>{e.on("ResolveName",(t=>{"IMG"===t.target.nodeName&&e.dom.hasClass(t.target,o)&&(t.name="pagebreak")}))})(e)}))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>typeof t===e,n=t("boolean"),r=t("number"),option=e=>t=>t.options.get(e),o=option("nonbreaking_force_tab"),l=option("nonbreaking_wrap"),c=(e,t)=>{let n="";for(let r=0;r<t;r++)n+=e;return n},d=(e,t)=>{const html=l(e)||e.plugins.visualchars?`<span class="${(e=>!!e.plugins.visualchars&&e.plugins.visualchars.isEnabled())(e)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap"}" contenteditable="false">${c("&nbsp;",t)}</span>`:c("&nbsp;",t);e.undoManager.transact((()=>e.insertContent(html)))};var h=tinymce.util.Tools.resolve("tinymce.util.VK");e.add("nonbreaking",(e=>{(e=>{const t=e.options.register;t("nonbreaking_force_tab",{processor:e=>n(e)?{value:e?3:0,valid:!0}:r(e)?{value:e,valid:!0}:{valid:!1,message:"Must be a boolean or number."},default:!1}),t("nonbreaking_wrap",{processor:"boolean",default:!0})})(e),(e=>{e.addCommand("mceNonBreaking",(()=>{d(e,1)}))})(e),(e=>{const t=()=>e.execCommand("mceNonBreaking");e.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:t}),e.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:t})})(e),(e=>{const t=o(e);t>0&&e.on("keydown",(n=>{if(n.keyCode===h.TAB&&!n.isDefaultPrevented()){if(n.shiftKey)return;n.preventDefault(),n.stopImmediatePropagation(),d(e,t)}}))})(e)}))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>a=>e===a,n=t(null),r=t(void 0),o=()=>{},l=(e=>()=>e)(!1);class c{constructor(e,t){this.tag=e,this.value=t}static some(e){return new c(!0,e)}static none(){return c.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?c.some(e(this.value)):c.none()}bind(e){return this.tag?e(this.value):c.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:c.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(a=>null==a)(e)?c.none():c.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}c.singletonNone=new c(!1);const d=(e,t)=>{const n=e.length,r=new Array(n);for(let i=0;i<n;i++){const n=e[i];r[i]=t(n,i)}return r},h=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},m=Object.keys,f=Object.hasOwnProperty,v=(e,t)=>{const n=m(e);for(let r=0,o=n.length;r<o;r++){const i=n[r];t(e[i],i)}},y=(e,t)=>{const n={};return v(e,((e,i)=>{const r=t(e,i);n[r.k]=r.v})),n},w=(e,t)=>f.call(e,t),A=(x=(e,t)=>t,(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)w(r,e)&&(t[e]=x(t[e],r[e]))}return t});var x;const O=()=>{const e=(e=>{const t=h(c.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(c.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:s=>{n(),t.set(c.some(s))}}})(o);return{...e,on:t=>e.get().each(t)}},C=(e,t,n=0,o)=>{const l=e.indexOf(t,n);return-1!==l&&(!!r(o)||l+t.length<=o)};var _=tinymce.util.Tools.resolve("tinymce.Resource");const option=e=>t=>t.options.get(e),S=option("emoticons_database"),k=option("emoticons_database_url"),j=option("emoticons_database_id"),T=option("emoticons_append"),I=option("emoticons_images_url"),D="All",E={symbols:"Symbols",people:"People",animals_and_nature:"Animals and Nature",food_and_drink:"Food and Drink",activity:"Activity",travel_and_places:"Travel and Places",objects:"Objects",flags:"Flags",user:"User Defined"},R=(e,t)=>w(e,t)?e[t]:t,B=e=>{const t=T(e);return n=e=>({keywords:[],category:"user",...e}),y(t,((e,i)=>({k:i,v:n(e,i)})));var n},M=(e,t,n)=>{const r=O(),o=O(),l=I(e),d=e=>((e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t)(e.char,"<img",0)?e.char.replace(/src="([^"]+)"/,((e,t)=>`src="${l}${t}"`)):e.char;e.on("init",(()=>{_.load(n,t).then((t=>{const n=B(e);(e=>{const t={},n=[];v(e,((e,title)=>{const r={title:title,keywords:e.keywords,char:d(e),category:R(E,e.category)},o=void 0!==t[r.category]?t[r.category]:[];t[r.category]=o.concat([r]),n.push(r)})),r.set(t),o.set(n)})(A(t,n))}),(e=>{console.log(`Failed to load emojis: ${e}`),r.set({}),o.set([])}))}));const h=()=>o.get().getOr([]),f=()=>r.isSet()&&o.isSet();return{listCategories:()=>[D].concat(m(r.get().getOr({}))),hasLoaded:f,waitForLoad:()=>f()?Promise.resolve(!0):new Promise(((e,n)=>{let r=15;const o=setInterval((()=>{f()?(clearInterval(o),e(!0)):(r--,r<0&&(console.log("Could not load emojis from url: "+t),clearInterval(o),n(!1)))}),100)})),listAll:h,listCategory:e=>e===D?h():r.get().bind((t=>c.from(t[e]))).getOr([])}},P=(e,t)=>C(e.title.toLowerCase(),t)||((e,t)=>{for(let i=0,n=e.length;i<n;i++)if(t(e[i],i))return!0;return!1})(e.keywords,(e=>C(e.toLowerCase(),t))),L=(e,pattern,t)=>{const n=[],r=pattern.toLowerCase(),o=t.fold((()=>l),(e=>t=>t>=e));for(let i=0;i<e.length&&(0!==pattern.length&&!P(e[i],r)||(n.push({value:e[i].char,text:e[i].title,icon:e[i].char}),!o(n.length)));i++);return n},F="pattern",$=(e,t)=>{const r={pattern:"",results:L(t.listAll(),"",c.some(300))},o=h(D),l=((e,t)=>{let r=null;const o=()=>{n(r)||(clearTimeout(r),r=null)};return{cancel:o,throttle:(...n)=>{o(),r=setTimeout((()=>{r=null,e.apply(null,n)}),t)}}})((e=>{(e=>{const n=e.getData(),r=o.get(),l=t.listCategory(r),d=L(l,n[F],r===D?c.some(300):c.none());e.setData({results:d})})(e)}),200),m={label:"Search",type:"input",name:F},f={type:"collection",name:"results"},v=()=>({title:"Emojis",size:"normal",body:{type:"tabpanel",tabs:d(t.listCategories(),(e=>({title:e,name:e,items:[m,f]})))},initialData:r,onTabChange:(e,details)=>{o.set(details.newTabName),l.throttle(e)},onChange:l.throttle,onAction:(t,n)=>{"results"===n.name&&(((e,t)=>{e.insertContent(t)})(e,n.value),t.close())},buttons:[{type:"cancel",text:"Close",primary:!0}]}),y=e.windowManager.open(v());y.focus(F),t.hasLoaded()||(y.block("Loading emojis..."),t.waitForLoad().then((()=>{y.redial(v()),l.throttle(y),y.focus(F),y.unblock()})).catch((e=>{y.redial({title:"Emojis",body:{type:"panel",items:[{type:"alertbanner",level:"error",icon:"warning",text:"Could not load emojis"}]},buttons:[{type:"cancel",text:"Close",primary:!0}],initialData:{pattern:"",results:[]}}),y.focus(F),y.unblock()})))};e.add("emoticons",((e,t)=>{((e,t)=>{const n=e.options.register;n("emoticons_database",{processor:"string",default:"emojis"}),n("emoticons_database_url",{processor:"string",default:`${t}/js/${S(e)}${e.suffix}.js`}),n("emoticons_database_id",{processor:"string",default:"tinymce.plugins.emoticons"}),n("emoticons_append",{processor:"object",default:{}}),n("emoticons_images_url",{processor:"string",default:"https://twemoji.maxcdn.com/v/13.0.1/72x72/"})})(e,t);const n=k(e),r=j(e),o=M(e,n,r);((e,t)=>{e.addCommand("mceEmoticons",(()=>$(e,t)))})(e,o),(e=>{const t=()=>e.execCommand("mceEmoticons");e.ui.registry.addButton("emoticons",{tooltip:"Emojis",icon:"emoji",onAction:t}),e.ui.registry.addMenuItem("emoticons",{text:"Emojis...",icon:"emoji",onAction:t})})(e),((e,t)=>{e.ui.registry.addAutocompleter("emoticons",{trigger:":",columns:"auto",minChars:2,fetch:(pattern,e)=>t.waitForLoad().then((()=>{const n=t.listAll();return L(n,pattern,c.some(e))})),onAction:(t,n,r)=>{e.selection.setRng(n),e.insertContent(r),t.hide()}})})(e,o),(e=>{e.on("PreInit",(()=>{e.parser.addAttributeFilter("data-emoticon",(e=>{((e,t)=>{for(let i=0,n=e.length;i<n;i++)t(e[i],i)})(e,(e=>{e.attr("data-mce-resize","false"),e.attr("data-mce-placeholder","1")}))}))}))})(e)}))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=(n="string",e=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,(o=String).prototype.isPrototypeOf(n)||(null===(l=r.constructor)||void 0===l?void 0:l.name)===o.name)?"string":t;var n,r,o,l})(e)===n);var n;const r=(o=void 0,a=>o===a);var o,l=tinymce.util.Tools.resolve("tinymce.util.Delay"),c=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),d=tinymce.util.Tools.resolve("tinymce.util.Tools");const h=e=>{const t=/^(\d+)([ms]?)$/.exec(e);return(t&&t[2]?{s:1e3,m:6e4}[t[2]]:1)*parseInt(e,10)},option=e=>t=>t.options.get(e),m=option("autosave_ask_before_unload"),f=option("autosave_restore_when_empty"),v=option("autosave_interval"),y=option("autosave_retention"),w=e=>{const t=document.location;return e.options.get("autosave_prefix").replace(/{path}/g,t.pathname).replace(/{query}/g,t.search).replace(/{hash}/g,t.hash).replace(/{id}/g,e.id)},A=(e,html)=>{if(r(html))return e.dom.isEmpty(e.getBody());{const t=d.trim(html);if(""===t)return!0;{const n=(new DOMParser).parseFromString(t,"text/html");return e.dom.isEmpty(n)}}},x=e=>{var t;const time=parseInt(null!==(t=c.getItem(w(e)+"time"))&&void 0!==t?t:"0",10)||0;return!((new Date).getTime()-time>y(e))||(O(e,!1),!1)},O=(e,t)=>{const n=w(e);c.removeItem(n+"draft"),c.removeItem(n+"time"),!1!==t&&(e=>{e.dispatch("RemoveDraft")})(e)},C=e=>{const t=w(e);!A(e)&&e.isDirty()&&(c.setItem(t+"draft",e.getContent({format:"raw",no_events:!0})),c.setItem(t+"time",(new Date).getTime().toString()),(e=>{e.dispatch("StoreDraft")})(e))},_=e=>{var t;const n=w(e);x(e)&&(e.setContent(null!==(t=c.getItem(n+"draft"))&&void 0!==t?t:"",{format:"raw"}),(e=>{e.dispatch("RestoreDraft")})(e))};var S=tinymce.util.Tools.resolve("tinymce.EditorManager");const k=e=>t=>{t.setEnabled(x(e));const n=()=>t.setEnabled(x(e));return e.on("StoreDraft RestoreDraft RemoveDraft",n),()=>e.off("StoreDraft RestoreDraft RemoveDraft",n)},j=e=>{(e=>{const t=v(e);l.setEditorInterval(e,(()=>{C(e)}),t)})(e);const t=()=>{(e=>{e.undoManager.transact((()=>{_(e),O(e)})),e.focus()})(e)};e.ui.registry.addButton("restoredraft",{tooltip:"Restore last draft",icon:"restore-draft",onAction:t,onSetup:k(e)}),e.ui.registry.addMenuItem("restoredraft",{text:"Restore last draft",icon:"restore-draft",onAction:t,onSetup:k(e)})};e.add("autosave",(e=>((e=>{const n=e.options.register,r=e=>{const n=t(e);return n?{value:h(e),valid:n}:{valid:!1,message:"Must be a string."}};n("autosave_ask_before_unload",{processor:"boolean",default:!0}),n("autosave_prefix",{processor:"string",default:"tinymce-autosave-{path}{query}{hash}-{id}-"}),n("autosave_restore_when_empty",{processor:"boolean",default:!1}),n("autosave_interval",{processor:r,default:"30s"}),n("autosave_retention",{processor:r,default:"20m"})})(e),(e=>{e.editorManager.on("BeforeUnload",(e=>{let t;d.each(S.get(),(e=>{e.plugins.autosave&&e.plugins.autosave.storeDraft(),!t&&e.isDirty()&&m(e)&&(t=e.translate("You have unsaved changes are you sure you want to navigate away?"))})),t&&(e.preventDefault(),e.returnValue=t)}))})(e),j(e),e.on("init",(()=>{f(e)&&e.dom.isEmpty(e.getBody())&&_(e)})),(e=>({hasDraft:()=>x(e),storeDraft:()=>C(e),restoreDraft:()=>_(e),removeDraft:t=>O(e,t),isEmpty:html=>A(e,html)}))(e))))}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=(n=null,a=>n===a);var n;const r=e=>e,o={aletter:"[A-Za-zÂªÂµÂºÃ€-Ã–Ã˜-Ã¶Ã¸-ËË†-Ë‘Ë -Ë¤Ë¬Ë®Í°-Í´Í¶Í·Íº-Í½Î†Îˆ-ÎŠÎŒÎŽ-Î¡Î£-ÏµÏ·-ÒÒŠ-Ô§Ô±-Õ–Õ™Õ¡-Ö‡×-×ª×°-×³Ø -ÙŠÙ®Ù¯Ù±-Û“Û•Û¥Û¦Û®Û¯Ûº-Û¼Û¿ÜÜ’-Ü¯Ý-Þ¥Þ±ßŠ-ßªß´ßµßºà €-à •à šà ¤à ¨à¡€-à¡˜à¤„-à¤¹à¤½à¥à¥˜-à¥¡à¥±-à¥·à¥¹-à¥¿à¦…-à¦Œà¦à¦à¦“-à¦¨à¦ª-à¦°à¦²à¦¶-à¦¹à¦½à§Žà§œà§à§Ÿ-à§¡à§°à§±à¨…-à¨Šà¨à¨à¨“-à¨¨à¨ª-à¨°à¨²à¨³à¨µà¨¶à¨¸à¨¹à©™-à©œà©žà©²-à©´àª…-àªàª-àª‘àª“-àª¨àªª-àª°àª²àª³àªµ-àª¹àª½à«à« à«¡à¬…-à¬Œà¬à¬à¬“-à¬¨à¬ª-à¬°à¬²à¬³à¬µ-à¬¹à¬½à­œà­à­Ÿ-à­¡à­±à®ƒà®…-à®Šà®Ž-à®à®’-à®•à®™à®šà®œà®žà®Ÿà®£à®¤à®¨-à®ªà®®-à®¹à¯à°…-à°Œà°Ž-à°à°’-à°¨à°ª-à°³à°µ-à°¹à°½à±˜à±™à± à±¡à²…-à²Œà²Ž-à²à²’-à²¨à²ª-à²³à²µ-à²¹à²½à³žà³ à³¡à³±à³²à´…-à´Œà´Ž-à´à´’-à´ºà´½àµŽàµ àµ¡àµº-àµ¿à¶…-à¶–à¶š-à¶±à¶³-à¶»à¶½à·€-à·†à¼€à½€-à½‡à½‰-à½¬à¾ˆ-à¾Œá‚ -áƒ…áƒ-áƒºáƒ¼á„€-á‰ˆá‰Š-á‰á‰-á‰–á‰˜á‰š-á‰á‰ -áŠˆáŠŠ-áŠáŠ-áŠ°áŠ²-áŠµáŠ¸-áŠ¾á‹€á‹‚-á‹…á‹ˆ-á‹–á‹˜-áŒáŒ’-áŒ•áŒ˜-ášáŽ€-áŽáŽ -á´á-á™¬á™¯-á™¿áš-áššáš -á›ªá›®-á›°áœ€-áœŒáœŽ-áœ‘áœ -áœ±á€-á‘á -á¬á®-á°á  -á¡·á¢€-á¢¨á¢ªá¢°-á£µá¤€-á¤œá¨€-á¨–á¬…-á¬³á­…-á­‹á®ƒ-á® á®®á®¯á¯€-á¯¥á°€-á°£á±-á±á±š-á±½á³©-á³¬á³®-á³±á´€-á¶¿á¸€-á¼•á¼˜-á¼á¼ -á½…á½ˆ-á½á½-á½—á½™á½›á½á½Ÿ-á½½á¾€-á¾´á¾¶-á¾¼á¾¾á¿‚-á¿„á¿†-á¿Œá¿-á¿“á¿–-á¿›á¿ -á¿¬á¿²-á¿´á¿¶-á¿¼â±â¿â‚-â‚œâ„‚â„‡â„Š-â„“â„•â„™-â„â„¤â„¦â„¨â„ª-â„­â„¯-â„¹â„¼-â„¿â……-â…‰â…Žâ… -â†ˆâ’¶-â“©â°€-â°®â°°-â±žâ± -â³¤â³«-â³®â´€-â´¥â´°-âµ¥âµ¯â¶€-â¶–â¶ -â¶¦â¶¨-â¶®â¶°-â¶¶â¶¸-â¶¾â·€-â·†â·ˆ-â·Žâ·-â·–â·˜-â·žâ¸¯ã€…ã€»ã€¼ã„…-ã„­ã„±-ã†Žã† -ã†ºê€€-ê’Œê“-ê“½ê”€-ê˜Œê˜-ê˜Ÿê˜ªê˜«ê™€-ê™®ê™¿-êš—êš -ê›¯êœ—-êœŸêœ¢-êžˆêž‹-êžŽêžêž‘êž -êž©êŸº-ê ê ƒ-ê …ê ‡-ê Šê Œ-ê ¢ê¡€-ê¡³ê¢‚-ê¢³ê£²-ê£·ê£»ê¤Š-ê¤¥ê¤°-ê¥†ê¥ -ê¥¼ê¦„-ê¦²ê§ê¨€-ê¨¨ê©€-ê©‚ê©„-ê©‹ê¬-ê¬†ê¬‰-ê¬Žê¬‘-ê¬–ê¬ -ê¬¦ê¬¨-ê¬®ê¯€-ê¯¢ê°€-íž£íž°-íŸ†íŸ‹-íŸ»ï¬€-ï¬†ï¬“-ï¬—ï¬ï¬Ÿ-ï¬¨ï¬ª-ï¬¶ï¬¸-ï¬¼ï¬¾ï­€ï­ï­ƒï­„ï­†-ï®±ï¯“-ï´½ïµ-ï¶ï¶’-ï·‡ï·°-ï·»ï¹°-ï¹´ï¹¶-ï»¼ï¼¡-ï¼ºï½-ï½šï¾ -ï¾¾ï¿‚-ï¿‡ï¿Š-ï¿ï¿’-ï¿—ï¿š-ï¿œ]",midnumlet:"[-'\\.â€˜â€™â€¤ï¹’ï¼‡ï¼Ž]",midletter:"[:Â·Â·×´â€§ï¸“ï¹•ï¼š]",midnum:"[Â±+*/,;;Ö‰ØŒØÙ¬ß¸â„ï¸ï¸”ï¹ï¹”ï¼Œï¼›]",numeric:"[0-9Ù -Ù©Ù«Û°-Û¹ß€-ß‰à¥¦-à¥¯à§¦-à§¯à©¦-à©¯à«¦-à«¯à­¦-à­¯à¯¦-à¯¯à±¦-à±¯à³¦-à³¯àµ¦-àµ¯à¹-à¹™à»-à»™à¼ -à¼©á€-á‰á‚-á‚™áŸ -áŸ©á -á ™á¥†-á¥á§-á§™áª€-áª‰áª-áª™á­-á­™á®°-á®¹á±€-á±‰á±-á±™ê˜ -ê˜©ê£-ê£™ê¤€-ê¤‰ê§-ê§™ê©-ê©™ê¯°-ê¯¹]",cr:"\\r",lf:"\\n",newline:"[\v\fÂ…\u2028\u2029]",extend:"[Ì€-Í¯Òƒ-Ò‰Ö‘-Ö½Ö¿××‚×„×…×‡Ø-ØšÙ‹-ÙŸÙ°Û–-ÛœÛŸ-Û¤Û§Û¨Ûª-Û­Ü‘Ü°-ÝŠÞ¦-Þ°ß«-ß³à –-à ™à ›-à £à ¥-à §à ©-à ­à¡™-à¡›à¤€-à¤ƒà¤º-à¤¼à¤¾-à¥à¥‘-à¥—à¥¢à¥£à¦-à¦ƒà¦¼à¦¾-à§„à§‡à§ˆà§‹-à§à§—à§¢à§£à¨-à¨ƒà¨¼à¨¾-à©‚à©‡à©ˆà©‹-à©à©‘à©°à©±à©µàª-àªƒàª¼àª¾-à«…à«‡-à«‰à«‹-à«à«¢à«£à¬-à¬ƒà¬¼à¬¾-à­„à­‡à­ˆà­‹-à­à­–à­—à­¢à­£à®‚à®¾-à¯‚à¯†-à¯ˆà¯Š-à¯à¯—à°-à°ƒà°¾-à±„à±†-à±ˆà±Š-à±à±•à±–à±¢à±£à²‚à²ƒà²¼à²¾-à³„à³†-à³ˆà³Š-à³à³•à³–à³¢à³£à´‚à´ƒà´¾-àµ„àµ†-àµˆàµŠ-àµàµ—àµ¢àµ£à¶‚à¶ƒà·Šà·-à·”à·–à·˜-à·Ÿà·²à·³à¸±à¸´-à¸ºà¹‡-à¹Žàº±àº´-àº¹àº»àº¼à»ˆ-à»à¼˜à¼™à¼µà¼·à¼¹à¼¾à¼¿à½±-à¾„à¾†à¾‡à¾-à¾—à¾™-à¾¼à¿†á€«-á€¾á–-á™áž-á á¢-á¤á§-á­á±-á´á‚‚-á‚á‚á‚š-á‚á-áŸáœ’-áœ”áœ²-áœ´á’á“á²á³áž¶-áŸ“áŸá ‹-á á¢©á¤ -á¤«á¤°-á¤»á¦°-á§€á§ˆá§‰á¨—-á¨›á©•-á©žá© -á©¼á©¿á¬€-á¬„á¬´-á­„á­«-á­³á®€-á®‚á®¡-á®ªá¯¦-á¯³á°¤-á°·á³-á³’á³”-á³¨á³­á³²á·€-á·¦á·¼-á·¿â€Œâ€âƒ-âƒ°â³¯-â³±âµ¿â· -â·¿ã€ª-ã€¯ã‚™ã‚šê™¯-ê™²ê™¼ê™½ê›°ê›±ê ‚ê †ê ‹ê £-ê §ê¢€ê¢ê¢´-ê£„ê£ -ê£±ê¤¦-ê¤­ê¥‡-ê¥“ê¦€-ê¦ƒê¦³-ê§€ê¨©-ê¨¶ê©ƒê©Œê©ê©»êª°êª²-êª´êª·êª¸êª¾êª¿ê«ê¯£-ê¯ªê¯¬ê¯­ï¬žï¸€-ï¸ï¸ -ï¸¦ï¾žï¾Ÿ]",format:"[Â­Ø€-ØƒÛÜáž´ážµâ€Žâ€â€ª-â€®â -â¤âª-â¯\ufeffï¿¹-ï¿»]",katakana:"[ã€±-ã€µã‚›ã‚œã‚ -ãƒºãƒ¼-ãƒ¿ã‡°-ã‡¿ã‹-ã‹¾ãŒ€-ã—ï½¦-ï¾]",extendnumlet:"[=_â€¿â€â”ï¸³ï¸´ï¹-ï¹ï¼¿âˆ€-â‹¿<>]",punctuation:"[!-#%-*,-\\/:;?@\\[-\\]_{}Â¡Â«Â·Â»Â¿;Â·Õš-ÕŸÖ‰ÖŠÖ¾×€×ƒ×†×³×´Ø‰ØŠØŒØØ›ØžØŸÙª-Ù­Û”Ü€-Üß·-ß¹à °-à ¾à¡žà¥¤à¥¥à¥°à·´à¹à¹šà¹›à¼„-à¼’à¼º-à¼½à¾…à¿-à¿”à¿™à¿šáŠ-ááƒ»á¡-á¨á€á™­á™®áš›ášœá›«-á›­áœµáœ¶áŸ”-áŸ–áŸ˜-áŸšá €-á Šá¥„á¥…á¨žá¨Ÿáª -áª¦áª¨-áª­á­š-á­ á¯¼-á¯¿á°»-á°¿á±¾á±¿á³“â€-â€§â€°-âƒâ…-â‘â“-âžâ½â¾â‚â‚Žã€ˆã€‰â¨-âµâŸ…âŸ†âŸ¦-âŸ¯â¦ƒ-â¦˜â§˜-â§›â§¼â§½â³¹-â³¼â³¾â³¿âµ°â¸€-â¸®â¸°â¸±ã€-ã€ƒã€ˆ-ã€‘ã€”-ã€Ÿã€°ã€½ã‚ ãƒ»ê“¾ê“¿ê˜-ê˜ê™³ê™¾ê›²-ê›·ê¡´-ê¡·ê£Žê£ê£¸-ê£ºê¤®ê¤¯ê¥Ÿê§-ê§ê§žê§Ÿê©œ-ê©Ÿê«žê«Ÿê¯«ï´¾ï´¿ï¸-ï¸™ï¸°-ï¹’ï¹”-ï¹¡ï¹£ï¹¨ï¹ªï¹«ï¼-ï¼ƒï¼…-ï¼Šï¼Œ-ï¼ï¼šï¼›ï¼Ÿï¼ ï¼»-ï¼½ï¼¿ï½›ï½ï½Ÿ-ï½¥]"},l=0,c=1,d=2,h=3,m=4,f=5,v=6,y=7,w=8,A=9,x=10,O=11,C=12,_=13,S=[new RegExp(o.aletter),new RegExp(o.midnumlet),new RegExp(o.midletter),new RegExp(o.midnum),new RegExp(o.numeric),new RegExp(o.cr),new RegExp(o.lf),new RegExp(o.newline),new RegExp(o.extend),new RegExp(o.format),new RegExp(o.katakana),new RegExp(o.extendnumlet),new RegExp("@")],k=new RegExp("^"+o.punctuation+"$"),j=S,T=_,I=e=>{let t=T;const n=j.length;for(let r=0;r<n;++r){const n=j[r];if(n&&n.test(e)){t=r;break}}return t},D=e=>((e,t)=>{const n=e.length,r=new Array(n);for(let i=0;i<n;i++){const n=e[i];r[i]=t(n,i)}return r})(e,(e=>{const t={};return n=>{if(t[n])return t[n];{const r=e(n);return t[n]=r,r}}})(I)),E=(map,e)=>{const t=map[e],n=map[e+1];if(e<0||e>map.length-1&&0!==e)return!1;if(t===l&&n===l)return!1;const r=map[e+2];if(t===l&&(n===d||n===c||n===C)&&r===l)return!1;const o=map[e-1];return(t!==d&&t!==c&&n!==C||n!==l||o!==l)&&((t!==m&&t!==l||n!==m&&n!==l)&&((t!==h&&t!==c||n!==m||o!==m)&&((t!==m||n!==h&&n!==c||r!==m)&&(t!==w&&t!==A&&o!==w&&o!==A&&n!==w&&n!==A&&((t!==f||n!==v)&&(t===y||t===f||t===v||(n===y||n===f||n===v||(t!==x||n!==x)&&((n!==O||t!==l&&t!==m&&t!==x&&t!==O)&&((t!==O||n!==l&&n!==m&&n!==x)&&t!==C)))))))))},R=/^\s+$/,B=k,M=e=>"http"===e||"https"===e,P=(e,t)=>{const n=((e,t)=>{let i;for(i=t;i<e.length&&!R.test(e[i]);i++);return i})(e,t+1);return"://"===e.slice(t+1,n).join("").substr(0,3)?n:t},L=(e,t,n)=>{n={includeWhitespace:!1,includePunctuation:!1,...n};const r=[],o=[];for(let i=0;i<e.length;i++){const n=t(e[i]);"\ufeff"!==n&&(r.push(e[i]),o.push(n))}return((e,t,n,r)=>{const o=[];let l=[];for(let i=0;i<n.length;++i)if(l.push(e[i]),E(n,i)){const n=t[i];if((r.includeWhitespace||!R.test(n))&&(r.includePunctuation||!B.test(n))){const n=i-l.length+1,r=i+1,c=t.slice(n,r).join("");if(M(c)){const n=P(t,i),o=e.slice(r,n);Array.prototype.push.apply(l,o),i=n}o.push(l)}l=[]}return o})(r,o,D(o),n)};var F=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const $=(e,t)=>{const n=t.getBlockElements(),r=t.getVoidElements(),o=e=>n[e.nodeName]||r[e.nodeName],l=[];let c="";const d=new F(e,e);let h;for(;h=d.next();)3===h.nodeType?c+=h.data.replace(/\uFEFF/g,""):o(h)&&c.length&&(l.push(c),c="");return c.length&&l.push(c),l},N=e=>e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,z=(e,t)=>{const text=(text=>text.replace(/\u200B/g,""))($(e,t).join("\n"));return L(text.split(""),r).length},V=(e,t)=>{const text=$(e,t).join("");return N(text)},H=(e,t)=>{const text=$(e,t).join("").replace(/\s/g,"");return N(text)},W=(e,t)=>()=>t(e.getBody(),e.schema),Q=(e,t)=>()=>t(e.selection.getRng().cloneContents(),e.schema),U=e=>W(e,z),Y=(e,t)=>{e.addCommand("mceWordCount",(()=>((e,t)=>{e.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(t.body.getWordCount()),String(t.selection.getWordCount())],["Characters (no spaces)",String(t.body.getCharacterCountWithoutSpaces()),String(t.selection.getCharacterCountWithoutSpaces())],["Characters",String(t.body.getCharacterCount()),String(t.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})})(e,t)))};var G=tinymce.util.Tools.resolve("tinymce.util.Delay");const K=(e,t)=>{((e,t)=>{e.dispatch("wordCountUpdate",{wordCount:{words:t.body.getWordCount(),characters:t.body.getCharacterCount(),charactersWithoutSpaces:t.body.getCharacterCountWithoutSpaces()}})})(e,t)},X=(e,n,r)=>{const o=((e,n)=>{let r=null;return{cancel:()=>{t(r)||(clearTimeout(r),r=null)},throttle:(...o)=>{t(r)&&(r=setTimeout((()=>{r=null,e.apply(null,o)}),n))}}})((()=>K(e,n)),r);e.on("init",(()=>{K(e,n),G.setEditorTimeout(e,(()=>{e.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",o.throttle)}),0),e.on("remove",o.cancel)}))};((t=300)=>{e.add("wordcount",(e=>{const n=(e=>({body:{getWordCount:U(e),getCharacterCount:W(e,V),getCharacterCountWithoutSpaces:W(e,H)},selection:{getWordCount:Q(e,z),getCharacterCount:Q(e,V),getCharacterCountWithoutSpaces:Q(e,H)},getCount:U(e)}))(e);return Y(e,n),(e=>{const t=()=>e.execCommand("mceWordCount");e.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:t}),e.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:t})})(e),X(e,n,t),n}))})()}()},function(e,t,n){"use strict";n.r(t);n(51);var r=n(9),o=n(603),l=n(604),c=n(605),d=n(606),h=n(607),m=n(608),f=n(609),v=n(565),y=n(610),w=n(566),A=n(611),x=n(666),O=n(612),C=n(613),_=n(630),S=n(614),k=n(667),j=n(615),T=n(616),I=n(668),D=n(665),E=n(669),R=n(670),B=n(671),M=n(672),P=n(617),L=n(618),F=n(619),$=n(631),N=n(620),z=n(582),V=n(621),H=n(622),W=n(623),Q=n(624),U=n(625),Y=n(626),G=n(627),K=n(628),X=n(629),Z={components:{LayoutInputCheckbox:m.default,LayoutInputDatePicker:v.default,LayoutInputDateTimePicker:y.default,LayoutInputTimePicker:w.default,LayoutInputContentBlocks:x.default,LayoutInputSlug:O.default,LayoutInputText:o.default,LayoutInputNumber:T.default,LayoutInputPassword:f.default,LayoutInputHidden:_.default,LayoutInputSlider:S.default,LayoutInputImage:A.default,LayoutTitle:P.default,LayoutTable:N.default,LayoutWidget:I.default,LayoutForm:D.default,LayoutText:L.default,LayoutBreadcrumb:H.default,LayoutNavigationItem:V.default,LayoutButton:F.default,LayoutDivider:$.default,LayoutPage:E.default,LayoutTags:z.default,LayoutRow:R.default,LayoutInputDropdown:d.default,LayoutBar:B.default,LayoutBarButton:W.default,LayoutPager:Q.default,LayoutSearchBox:U.default,LayoutPagerOptions:Y.default,LayoutInputTextArea:c.default,LayoutTabs:M.default,LayoutTab:G.default,LayoutInputEmail:l.default,LayoutInputTags:h.default,LayoutInputRepeatable:k.default,LayoutMessage:K.default,LayoutInputFile:C.default,LayoutNotImplemented:j.default,LayoutSiteBoss:X.default},props:{elements:{type:Array,default:function(){return[]}},bus:{type:r.default,required:!1,default:function(){return new r.default}}},methods:{updateValues:function(e){this.$emit("updateValues",e)},setFormOption:function(e,t){this.$emit("setFormOption",e,t)},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},componentName:function(element){if(element.type){var e=this.capitalizeFirstLetter(element.type);return"Layout".concat(e)}return console.log("[SITEBOSS] didn't set type in element."),""}}},J=n(63),component=Object(J.a)(Z,(function(){var e=this,t=e._self._c;return t("div",e._l(e.elements,(function(element,n){return t(e.componentName(element),{key:n,tag:"Component",attrs:{properties:element.properties,items:element.items,internal:element.internal,data:element.data,bus:e.bus},on:{updateValues:e.updateValues,setFormOption:e.setFormOption}})})),1)}),[],!1,null,null,null);t.default=component.exports},,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));n(17),n(16),n(13),n(10),n(18),n(14),n(19);var r,o=n(2),l=(n(107),n(3)),c=n(8),d=n(1),h=n(12),m=n(26),f=n(5),v=n(6),y=n(69),w=n(23),A=n(7),x=n(0),O=n(4),C=n(122),_=n(150);function S(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function k(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?S(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):S(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var j=Object(y.a)("show",{type:d.i,defaultValue:!1}),T=j.mixin,I=j.props,D=j.prop,E=j.event,R=function(e){return""===e||Object(v.b)(e)?0:(e=Object(w.c)(e,0))>0?e:0},B=function(e){return""===e||!0===e||!(Object(w.c)(e,0)<1)&&!!e},M=Object(x.d)(Object(A.m)(k(k({},I),{},{dismissLabel:Object(x.c)(d.t,"Close"),dismissible:Object(x.c)(d.g,!1),fade:Object(x.c)(d.g,!1),variant:Object(x.c)(d.t,"info")})),l.a),P=Object(O.c)({name:l.a,mixins:[T,m.a],props:M,data:function(){return{countDown:0,localShow:B(this[D])}},watch:(r={},Object(o.a)(r,D,(function(e){this.countDown=R(e),this.localShow=B(e)})),Object(o.a)(r,"countDown",(function(e){var t=this;this.clearCountDownInterval();var n=this[D];Object(v.i)(n)&&(this.$emit(c.l,e),n!==e&&this.$emit(E,e),e>0?(this.localShow=!0,this.$_countDownTimeout=setTimeout((function(){t.countDown--}),1e3)):this.$nextTick((function(){Object(f.B)((function(){t.localShow=!1}))})))})),Object(o.a)(r,"localShow",(function(e){var t=this[D];e||!this.dismissible&&!Object(v.i)(t)||this.$emit(c.k),Object(v.i)(t)||t===e||this.$emit(E,e)})),r),created:function(){this.$_filterTimer=null;var e=this[D];this.countDown=R(e),this.localShow=B(e)},beforeDestroy:function(){this.clearCountDownInterval()},methods:{dismiss:function(){this.clearCountDownInterval(),this.countDown=0,this.localShow=!1},clearCountDownInterval:function(){clearTimeout(this.$_countDownTimeout),this.$_countDownTimeout=null}},render:function(e){var t=e();if(this.localShow){var n=this.dismissible,r=this.variant,l=e();n&&(l=e(C.a,{attrs:{"aria-label":this.dismissLabel},on:{click:this.dismiss}},[this.normalizeSlot(h.i)])),t=e("div",{staticClass:"alert",class:Object(o.a)({"alert-dismissible":n},"alert-".concat(r),r),attrs:{role:"alert","aria-live":"polite","aria-atomic":!0},key:this[O.a]},[l,this.normalizeSlot()])}return e(_.a,{props:{noFade:!this.fade}},[t])}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(2),o=(n(239),n(4)),l=n(113),c=n(3),d=n(1),h=n(12),m=n(52),f=n(0),v=Object(f.d)({label:Object(f.c)(d.t),role:Object(f.c)(d.t,"status"),small:Object(f.c)(d.g,!1),tag:Object(f.c)(d.t,"span"),type:Object(f.c)(d.t,"border"),variant:Object(f.c)(d.t)},c.Eb),y=Object(o.c)({name:c.Eb,functional:!0,props:v,render:function(e,t){var n,o=t.props,data=t.data,c=t.slots,d=t.scopedSlots,f=c(),v=d||{},y=Object(m.b)(h.u,{},v,f)||o.label;return y&&(y=e("span",{staticClass:"sr-only"},y)),e(o.tag,Object(l.a)(data,{attrs:{role:y?o.role||"status":null,"aria-hidden":y?null:"true"},class:(n={},Object(r.a)(n,"spinner-".concat(o.type),o.type),Object(r.a)(n,"spinner-".concat(o.type,"-sm"),o.small),Object(r.a)(n,"text-".concat(o.variant),o.variant),n)}),[y||e()])}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return ee}));n(17),n(16),n(18),n(19);var r,o=n(57),l=n(2),c=(n(56),n(28),n(54),n(13),n(10),n(43),n(173),n(74),n(100),n(33),n(51),n(123),n(14),n(50),n(4)),d=n(3),h=n(8),m=n(34),f=n(1),v=n(35),y=n(12),w=n(15),A=n(287),x=n(5),O=n(11),C=n(27),_=n(6),S=n(37),k=n(69),j=n(7),T=n(0),I=n(22),D=n(72),E=n(75),R=n(67),B=n(29),M=n(77),P=n(26),L=n(99),F=n(151),$=n(177),N=n(579);function z(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function V(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?z(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):z(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var H=Object(k.a)("value",{type:f.b,defaultValue:[]}),W=H.mixin,Q=H.props,U=H.prop,Y=H.event,G=["text","email","tel","url","number"],K=[".b-form-tag","button","input","select"].join(" "),X=function(e){return Object(w.b)(e).map((function(e){return Object(I.h)(Object(I.g)(e))})).filter((function(e,t,n){return e.length>0&&n.indexOf(e)===t}))},Z=function(e){return Object(_.n)(e)?e:Object(_.d)(e)&&e.target.value||""},J=Object(T.d)(Object(j.m)(V(V(V(V(V(V({},B.b),Q),D.b),E.b),R.b),{},{addButtonText:Object(T.c)(f.t,"Add"),addButtonVariant:Object(T.c)(f.t,"outline-secondary"),addOnChange:Object(T.c)(f.g,!1),duplicateTagText:Object(T.c)(f.t,"Duplicate tag(s)"),feedbackAriaLive:Object(T.c)(f.t,"assertive"),ignoreInputFocusSelector:Object(T.c)(f.f,K),inputAttrs:Object(T.c)(f.p,{}),inputClass:Object(T.c)(f.e),inputId:Object(T.c)(f.t),inputType:Object(T.c)(f.t,"text",(function(e){return Object(w.a)(G,e)})),invalidTagText:Object(T.c)(f.t,"Invalid tag(s)"),limit:Object(T.c)(f.n),limitTagsText:Object(T.c)(f.t,"Tag limit reached"),noAddOnEnter:Object(T.c)(f.g,!1),noOuterFocus:Object(T.c)(f.g,!1),noTagRemove:Object(T.c)(f.g,!1),placeholder:Object(T.c)(f.t,"Add tag..."),removeOnDelete:Object(T.c)(f.g,!1),separator:Object(T.c)(f.f),tagClass:Object(T.c)(f.e),tagPills:Object(T.c)(f.g,!1),tagRemoveLabel:Object(T.c)(f.t,"Remove tag"),tagRemovedLabel:Object(T.c)(f.t,"Tag removed"),tagValidator:Object(T.c)(f.l),tagVariant:Object(T.c)(f.t,"secondary")})),d.X),ee=Object(c.c)({name:d.X,mixins:[M.a,B.a,W,D.a,E.a,R.a,P.a],props:J,data:function(){return{hasFocus:!1,newTag:"",tags:[],removedTags:[],tagsState:{all:[],valid:[],invalid:[],duplicate:[]},focusState:null}},computed:{computedInputId:function(){return this.inputId||this.safeId("__input__")},computedInputType:function(){return Object(w.a)(G,this.inputType)?this.inputType:"text"},computedInputAttrs:function(){var e=this.disabled,form=this.form;return V(V({},this.inputAttrs),{},{id:this.computedInputId,value:this.newTag,disabled:e,form:form})},computedInputHandlers:function(){return V(V({},Object(j.j)(this.bvListeners,[h.q,h.r])),{},{blur:this.onInputBlur,change:this.onInputChange,focus:this.onInputFocus,input:this.onInputInput,keydown:this.onInputKeydown,reset:this.reset})},computedSeparator:function(){return Object(w.b)(this.separator).filter(_.n).filter(C.a).join("")},computedSeparatorRegExp:function(){var e,t=this.computedSeparator;return t?new RegExp("[".concat((e=t,Object(I.a)(e).replace(v.s,"\\s")),"]+")):null},computedJoiner:function(){var e=this.computedSeparator.charAt(0);return" "!==e?"".concat(e," "):e},computeIgnoreInputFocusSelector:function(){return Object(w.b)(this.ignoreInputFocusSelector).filter(C.a).join(",").trim()},disableAddButton:function(){var e=this,t=Object(I.h)(this.newTag);return""===t||!this.splitTags(t).some((function(t){return!Object(w.a)(e.tags,t)&&e.validateTag(t)}))},duplicateTags:function(){return this.tagsState.duplicate},hasDuplicateTags:function(){return this.duplicateTags.length>0},invalidTags:function(){return this.tagsState.invalid},hasInvalidTags:function(){return this.invalidTags.length>0},isLimitReached:function(){var e=this.limit;return Object(_.h)(e)&&e>=0&&this.tags.length>=e}},watch:(r={},Object(l.a)(r,U,(function(e){this.tags=X(e)})),Object(l.a)(r,"tags",(function(e,t){Object(S.a)(e,this[U])||this.$emit(Y,e),Object(S.a)(e,t)||(e=Object(w.b)(e).filter(C.a),t=Object(w.b)(t).filter(C.a),this.removedTags=t.filter((function(t){return!Object(w.a)(e,t)})))})),Object(l.a)(r,"tagsState",(function(e,t){Object(S.a)(e,t)||this.$emit(h.O,e.valid,e.invalid,e.duplicate)})),r),created:function(){this.tags=X(this[U])},mounted:function(){var e=Object(x.e)("form",this.$el);e&&Object(O.b)(e,"reset",this.reset,h.S)},beforeDestroy:function(){var e=Object(x.e)("form",this.$el);e&&Object(O.a)(e,"reset",this.reset,h.S)},methods:{addTag:function(e){if(e=Object(_.n)(e)?e:this.newTag,!this.disabled&&""!==Object(I.h)(e)&&!this.isLimitReached){var t=this.parseTags(e);if(t.valid.length>0||0===t.all.length)if(Object(x.v)(this.getInput(),"select"))this.newTag="";else{var n=[].concat(Object(o.a)(t.invalid),Object(o.a)(t.duplicate));this.newTag=t.all.filter((function(e){return Object(w.a)(n,e)})).join(this.computedJoiner).concat(n.length>0?this.computedJoiner.charAt(0):"")}t.valid.length>0&&(this.tags=Object(w.b)(this.tags,t.valid)),this.tagsState=t,this.focus()}},removeTag:function(e){this.disabled||(this.tags=this.tags.filter((function(t){return t!==e})))},reset:function(){var e=this;this.newTag="",this.tags=[],this.$nextTick((function(){e.removedTags=[],e.tagsState={all:[],valid:[],invalid:[],duplicate:[]}}))},onInputInput:function(e){if(!(this.disabled||Object(_.d)(e)&&e.target.composing)){var t=Z(e),n=this.computedSeparatorRegExp;this.newTag!==t&&(this.newTag=t),t=Object(I.i)(t),n&&n.test(t.slice(-1))?this.addTag():this.tagsState=""===t?{all:[],valid:[],invalid:[],duplicate:[]}:this.parseTags(t)}},onInputChange:function(e){if(!this.disabled&&this.addOnChange){var t=Z(e);this.newTag!==t&&(this.newTag=t),this.addTag()}},onInputKeydown:function(e){if(!this.disabled&&Object(_.d)(e)){var t=e.keyCode,n=e.target.value||"";this.noAddOnEnter||t!==m.e?!this.removeOnDelete||t!==m.a&&t!==m.b||""!==n||(Object(O.f)(e,{propagation:!1}),this.tags=this.tags.slice(0,-1)):(Object(O.f)(e,{propagation:!1}),this.addTag())}},onClick:function(e){var t=this,n=this.computeIgnoreInputFocusSelector;n&&Object(x.e)(n,e.target,!0)||this.$nextTick((function(){t.focus()}))},onInputFocus:function(e){var t=this;"out"!==this.focusState&&(this.focusState="in",this.$nextTick((function(){Object(x.B)((function(){t.hasFocus&&(t.$emit(h.p,e),t.focusState=null)}))})))},onInputBlur:function(e){var t=this;"in"!==this.focusState&&(this.focusState="out",this.$nextTick((function(){Object(x.B)((function(){t.hasFocus||(t.$emit(h.a,e),t.focusState=null)}))})))},onFocusin:function(e){this.hasFocus=!0,this.$emit(h.q,e)},onFocusout:function(e){this.hasFocus=!1,this.$emit(h.r,e)},handleAutofocus:function(){var e=this;this.$nextTick((function(){Object(x.B)((function(){e.autofocus&&e.focus()}))}))},focus:function(){this.disabled||Object(x.d)(this.getInput())},blur:function(){this.disabled||Object(x.c)(this.getInput())},splitTags:function(e){e=Object(I.g)(e);var t=this.computedSeparatorRegExp;return(t?e.split(t):[e]).map(I.h).filter(C.a)},parseTags:function(e){var t=this,n=this.splitTags(e),r={all:n,valid:[],invalid:[],duplicate:[]};return n.forEach((function(e){Object(w.a)(t.tags,e)||Object(w.a)(r.valid,e)?Object(w.a)(r.duplicate,e)||r.duplicate.push(e):t.validateTag(e)?r.valid.push(e):Object(w.a)(r.invalid,e)||r.invalid.push(e)})),r},validateTag:function(e){var t=this.tagValidator;return!Object(T.b)(t)||t(e)},getInput:function(){return Object(x.C)("#".concat(Object(A.a)(this.computedInputId)),this.$el)},defaultRender:function(e){var t=e.addButtonText,n=e.addButtonVariant,r=e.addTag,o=e.disableAddButton,l=e.disabled,c=e.duplicateTagText,d=e.inputAttrs,h=e.inputClass,m=e.inputHandlers,f=e.inputType,v=e.invalidTagText,w=e.isDuplicate,A=e.isInvalid,x=e.isLimitReached,O=e.limitTagsText,_=e.noTagRemove,S=e.placeholder,k=e.removeTag,j=e.tagClass,T=e.tagPills,D=e.tagRemoveLabel,E=e.tagVariant,R=e.tags,B=this.$createElement,M=R.map((function(e){return e=Object(I.g)(e),B(N.a,{class:j,props:{disabled:l,noRemove:_,pill:T,removeLabel:D,tag:"li",title:e,variant:E},on:{remove:function(){return k(e)}},key:"tags_".concat(e)},e)})),P=v&&A?this.safeId("__invalid_feedback__"):null,z=c&&w?this.safeId("__duplicate_feedback__"):null,H=O&&x?this.safeId("__limit_feedback__"):null,W=[d["aria-describedby"],P,z,H].filter(C.a).join(" "),Q=B("input",{staticClass:"b-form-tags-input w-100 flex-grow-1 p-0 m-0 bg-transparent border-0",class:h,style:{outline:0,minWidth:"5rem"},attrs:V(V({},d),{},{"aria-describedby":W||null,type:f,placeholder:S||null}),domProps:{value:d.value},on:m,directives:[{name:"model",value:d.value}],ref:"input"}),U=B(L.a,{staticClass:"b-form-tags-button py-0",class:{invisible:o},style:{fontSize:"90%"},props:{disabled:o||x,variant:n},on:{click:function(){return r()}},ref:"button"},[this.normalizeSlot(y.a)||t]),Y=this.safeId("__tag_list__"),G=B("li",{staticClass:"b-form-tags-field flex-grow-1",attrs:{role:"none","aria-live":"off","aria-controls":Y},key:"tags_field"},[B("div",{staticClass:"d-flex",attrs:{role:"group"}},[Q,U])]),K=B("ul",{staticClass:"b-form-tags-list list-unstyled mb-0 d-flex flex-wrap align-items-center",attrs:{id:Y},key:"tags_list"},[M,G]),X=B();if(v||c||O){var Z=this.feedbackAriaLive,J=this.computedJoiner,ee=B();P&&(ee=B(F.a,{props:{id:P,ariaLive:Z,forceShow:!0},key:"tags_invalid_feedback"},[this.invalidTagText,": ",this.invalidTags.join(J)]));var te=B();z&&(te=B($.a,{props:{id:z,ariaLive:Z},key:"tags_duplicate_feedback"},[this.duplicateTagText,": ",this.duplicateTags.join(J)]));var ne=B();H&&(ne=B($.a,{props:{id:H,ariaLive:Z},key:"tags_limit_feedback"},[O])),X=B("div",{attrs:{"aria-live":"polite","aria-atomic":"true"},key:"tags_feedback"},[ee,te,ne])}return[K,X]}},render:function(e){var t=this.name,n=this.disabled,r=this.required,form=this.form,o=this.tags,l=this.computedInputId,c=this.hasFocus,d=this.noOuterFocus,h=V({tags:o.slice(),inputAttrs:this.computedInputAttrs,inputType:this.computedInputType,inputHandlers:this.computedInputHandlers,removeTag:this.removeTag,addTag:this.addTag,reset:this.reset,inputId:l,isInvalid:this.hasInvalidTags,invalidTags:this.invalidTags.slice(),isDuplicate:this.hasDuplicateTags,duplicateTags:this.duplicateTags.slice(),isLimitReached:this.isLimitReached,disableAddButton:this.disableAddButton},Object(j.k)(this.$props,["addButtonText","addButtonVariant","disabled","duplicateTagText","form","inputClass","invalidTagText","limit","limitTagsText","noTagRemove","placeholder","required","separator","size","state","tagClass","tagPills","tagRemoveLabel","tagVariant"])),m=this.normalizeSlot(y.g,h)||this.defaultRender(h),f=e("output",{staticClass:"sr-only",attrs:{id:this.safeId("__selected_tags__"),role:"status",for:l,"aria-live":c?"polite":"off","aria-atomic":"true","aria-relevant":"additions text"}},this.tags.join(", ")),v=e("div",{staticClass:"sr-only",attrs:{id:this.safeId("__removed_tags__"),role:"status","aria-live":c?"assertive":"off","aria-atomic":"true"}},this.removedTags.length>0?"(".concat(this.tagRemovedLabel,") ").concat(this.removedTags.join(", ")):""),w=e();if(t&&!n){var A=o.length>0;w=(A?o:[""]).map((function(n){return e("input",{class:{"sr-only":!A},attrs:{type:A?"hidden":"text",value:n,required:r,name:t,form:form},key:"tag_input_".concat(n)})}))}return e("div",{staticClass:"b-form-tags form-control h-auto",class:[{focus:c&&!d&&!n,disabled:n},this.sizeFormClass,this.stateClass],attrs:{id:this.safeId(),role:"group",tabindex:n||d?null:"-1","aria-describedby":this.safeId("__selected_tags__")},on:{click:this.onClick,focusin:this.onFocusin,focusout:this.onFocusout}},[f,v,m,w])}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));n(17),n(16),n(13),n(10),n(18),n(14),n(19);var r,o=n(2),l=(n(51),n(28),n(54),n(4)),c=n(3),d=n(8),h=n(1),m=n(12),f=n(550),v=n(5),y=n(6),w=n(69),A=n(7),x=n(0),O=n(29),C=n(543),_=n(99),S=n(586),k=n(580);function j(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function T(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var I=Object(w.a)("value",{type:h.k}),D=I.mixin,E=I.props,R=I.prop,B=I.event,M=Object(A.j)(S.b,["block","hidden","id","noKeyNav","roleDescription","value","width"]),P=Object(A.j)(k.b,["formattedValue","id","lang","rtl","value"]),L=Object(x.d)(Object(A.m)(T(T(T(T(T({},O.b),E),M),P),{},{calendarWidth:Object(x.c)(h.t,"270px"),closeButton:Object(x.c)(h.g,!1),closeButtonVariant:Object(x.c)(h.t,"outline-secondary"),dark:Object(x.c)(h.g,!1),labelCloseButton:Object(x.c)(h.t,"Close"),labelResetButton:Object(x.c)(h.t,"Reset"),labelTodayButton:Object(x.c)(h.t,"Select today"),noCloseOnSelect:Object(x.c)(h.g,!1),resetButton:Object(x.c)(h.g,!1),resetButtonVariant:Object(x.c)(h.t,"outline-danger"),resetValue:Object(x.c)(h.k),todayButton:Object(x.c)(h.g,!1),todayButtonVariant:Object(x.c)(h.t,"outline-primary")})),c.K),F=Object(l.c)({name:c.K,mixins:[O.a,D],props:L,data:function(){return{localYMD:Object(f.f)(this[R])||"",isVisible:!1,localLocale:null,isRTL:!1,formattedValue:"",activeYMD:""}},computed:{calendarYM:function(){return this.activeYMD.slice(0,-3)},computedLang:function(){return(this.localLocale||"").replace(/-u-.*$/i,"")||null},computedResetValue:function(){return Object(f.f)(Object(f.a)(this.resetValue))||""}},watch:(r={},Object(o.a)(r,R,(function(e){this.localYMD=Object(f.f)(e)||""})),Object(o.a)(r,"localYMD",(function(e){this.isVisible&&this.$emit(B,this.valueAsDate?Object(f.n)(e)||null:e||"")})),Object(o.a)(r,"calendarYM",(function(e,t){if(e!==t&&t)try{this.$refs.control.updatePopper()}catch(e){}})),r),methods:{focus:function(){this.disabled||Object(v.d)(this.$refs.control)},blur:function(){this.disabled||Object(v.c)(this.$refs.control)},setAndClose:function(e){var t=this;this.localYMD=e,this.noCloseOnSelect||this.$nextTick((function(){t.$refs.control.hide(!0)}))},onSelected:function(e){var t=this;this.$nextTick((function(){t.setAndClose(e)}))},onInput:function(e){this.localYMD!==e&&(this.localYMD=e)},onContext:function(e){var t=e.activeYMD,n=e.isRTL,r=e.locale,o=e.selectedYMD,l=e.selectedFormatted;this.isRTL=n,this.localLocale=r,this.formattedValue=l,this.localYMD=o,this.activeYMD=t,this.$emit(d.f,e)},onTodayButton:function(){this.setAndClose(Object(f.f)(Object(f.a)(Object(f.b)(),this.min,this.max)))},onResetButton:function(){this.setAndClose(this.computedResetValue)},onCloseButton:function(){this.$refs.control.hide(!0)},onShow:function(){this.isVisible=!0},onShown:function(){var e=this;this.$nextTick((function(){Object(v.d)(e.$refs.calendar),e.$emit(d.M)}))},onHidden:function(){this.isVisible=!1,this.$emit(d.t)},defaultButtonFn:function(e){var t=e.isHovered,n=e.hasFocus;return this.$createElement(t||n?C.b:C.a,{attrs:{"aria-hidden":"true"}})}},render:function(e){var t=this.localYMD,n=this.disabled,r=this.readonly,l=this.dark,c=this.$props,d=this.$scopedSlots,h=Object(y.p)(this.placeholder)?this.labelNoDateSelected:this.placeholder,f=[];if(this.todayButton){var label=this.labelTodayButton;f.push(e(_.a,{props:{disabled:n||r,size:"sm",variant:this.todayButtonVariant},attrs:{"aria-label":label||null},on:{click:this.onTodayButton}},label))}if(this.resetButton){var v=this.labelResetButton;f.push(e(_.a,{props:{disabled:n||r,size:"sm",variant:this.resetButtonVariant},attrs:{"aria-label":v||null},on:{click:this.onResetButton}},v))}if(this.closeButton){var w=this.labelCloseButton;f.push(e(_.a,{props:{disabled:n,size:"sm",variant:this.closeButtonVariant},attrs:{"aria-label":w||null},on:{click:this.onCloseButton}},w))}f.length>0&&(f=[e("div",{staticClass:"b-form-date-controls d-flex flex-wrap",class:{"justify-content-between":f.length>1,"justify-content-end":f.length<2}},f)]);var O=e(S.a,{staticClass:"b-form-date-calendar w-100",props:T(T({},Object(x.e)(M,c)),{},{hidden:!this.isVisible,value:t,valueAsDate:!1,width:this.calendarWidth}),on:{selected:this.onSelected,input:this.onInput,context:this.onContext},scopedSlots:Object(A.k)(d,["nav-prev-decade","nav-prev-year","nav-prev-month","nav-this-month","nav-next-month","nav-next-year","nav-next-decade"]),key:"calendar",ref:"calendar"},f);return e(k.a,{staticClass:"b-form-datepicker",props:T(T({},Object(x.e)(P,c)),{},{formattedValue:t?this.formattedValue:"",id:this.safeId(),lang:this.computedLang,menuClass:[{"bg-dark":l,"text-light":l},this.menuClass],placeholder:h,rtl:this.isRTL,value:t}),on:{show:this.onShow,shown:this.onShown,hidden:this.onHidden},scopedSlots:Object(o.a)({},m.d,d[m.d]||this.defaultButtonFn),ref:"control"},[O])}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));n(17),n(16),n(13),n(10),n(18),n(14),n(19);var r,o=n(2),l=(n(28),n(54),n(56),n(43),n(51),n(4)),c=n(3),d=n(8),h=n(1),m=n(12),f=n(5),v=n(6),y=n(69),w=n(7),A=n(0),x=n(29),O=n(543),C=n(99),_=n(580),S=n(587);function k(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function j(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var T=Object(y.a)("value",{type:h.t,defaultValue:""}),I=T.mixin,D=T.props,E=T.prop,R=T.event,B=Object(w.j)(S.b,["hidden","id","value"]),M=Object(w.j)(_.b,["formattedValue","id","lang","rtl","value"]),P=Object(A.d)(Object(w.m)(j(j(j(j(j({},x.b),D),B),M),{},{closeButtonVariant:Object(A.c)(h.t,"outline-secondary"),labelCloseButton:Object(A.c)(h.t,"Close"),labelNowButton:Object(A.c)(h.t,"Select now"),labelResetButton:Object(A.c)(h.t,"Reset"),noCloseButton:Object(A.c)(h.g,!1),nowButton:Object(A.c)(h.g,!1),nowButtonVariant:Object(A.c)(h.t,"outline-primary"),resetButton:Object(A.c)(h.g,!1),resetButtonVariant:Object(A.c)(h.t,"outline-danger"),resetValue:Object(A.c)(h.k)})),c.ab),L=Object(l.c)({name:c.ab,mixins:[x.a,I],props:P,data:function(){return{localHMS:this[E]||"",localLocale:null,isRTL:!1,formattedValue:"",isVisible:!1}},computed:{computedLang:function(){return(this.localLocale||"").replace(/-u-.*$/i,"")||null}},watch:(r={},Object(o.a)(r,E,(function(e){this.localHMS=e||""})),Object(o.a)(r,"localHMS",(function(e){this.isVisible&&this.$emit(R,e||"")})),r),methods:{focus:function(){this.disabled||Object(f.d)(this.$refs.control)},blur:function(){this.disabled||Object(f.c)(this.$refs.control)},setAndClose:function(e){var t=this;this.localHMS=e,this.$nextTick((function(){t.$refs.control.hide(!0)}))},onInput:function(e){this.localHMS!==e&&(this.localHMS=e)},onContext:function(e){var t=e.isRTL,n=e.locale,r=e.value,o=e.formatted;this.isRTL=t,this.localLocale=n,this.formattedValue=o,this.localHMS=r||"",this.$emit(d.f,e)},onNowButton:function(){var e=new Date,t=[e.getHours(),e.getMinutes(),this.showSeconds?e.getSeconds():0].map((function(e){return"00".concat(e||"").slice(-2)})).join(":");this.setAndClose(t)},onResetButton:function(){this.setAndClose(this.resetValue)},onCloseButton:function(){this.$refs.control.hide(!0)},onShow:function(){this.isVisible=!0},onShown:function(){var e=this;this.$nextTick((function(){Object(f.d)(e.$refs.time),e.$emit(d.M)}))},onHidden:function(){this.isVisible=!1,this.$emit(d.t)},defaultButtonFn:function(e){var t=e.isHovered,n=e.hasFocus;return this.$createElement(t||n?O.j:O.i,{attrs:{"aria-hidden":"true"}})}},render:function(e){var t=this.localHMS,n=this.disabled,r=this.readonly,l=this.$props,c=Object(v.p)(this.placeholder)?this.labelNoTimeSelected:this.placeholder,d=[];if(this.nowButton){var label=this.labelNowButton;d.push(e(C.a,{props:{size:"sm",disabled:n||r,variant:this.nowButtonVariant},attrs:{"aria-label":label||null},on:{click:this.onNowButton},key:"now-btn"},label))}if(this.resetButton){d.length>0&&d.push(e("span","Â "));var h=this.labelResetButton;d.push(e(C.a,{props:{size:"sm",disabled:n||r,variant:this.resetButtonVariant},attrs:{"aria-label":h||null},on:{click:this.onResetButton},key:"reset-btn"},h))}if(!this.noCloseButton){d.length>0&&d.push(e("span","Â "));var f=this.labelCloseButton;d.push(e(C.a,{props:{size:"sm",disabled:n,variant:this.closeButtonVariant},attrs:{"aria-label":f||null},on:{click:this.onCloseButton},key:"close-btn"},f))}d.length>0&&(d=[e("div",{staticClass:"b-form-date-controls d-flex flex-wrap",class:{"justify-content-between":d.length>1,"justify-content-end":d.length<2}},d)]);var y=e(S.a,{staticClass:"b-form-time-control",props:j(j({},Object(A.e)(B,l)),{},{value:t,hidden:!this.isVisible}),on:{input:this.onInput,context:this.onContext},ref:"time"},d);return e(_.a,{staticClass:"b-form-timepicker",props:j(j({},Object(A.e)(M,l)),{},{id:this.safeId(),value:t,formattedValue:t?this.formattedValue:"",placeholder:c,rtl:this.isRTL,lang:this.computedLang}),on:{show:this.onShow,shown:this.onShown,hidden:this.onHidden},scopedSlots:Object(o.a)({},m.d,this.$scopedSlots[m.d]||this.defaultButtonFn),ref:"control"},[y])}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));n(17),n(16),n(13),n(10),n(18),n(14),n(19);var r=n(2),o=n(4),l=n(3),c=n(1),d=n(7),h=n(0),m=n(26),f=n(661);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var w=Object(d.j)(f.b,["label","labelHtml"]),A=Object(h.d)(Object(d.m)(y(y({},w),{},{animated:Object(h.c)(c.g,!1),height:Object(h.c)(c.t),max:Object(h.c)(c.o,100),precision:Object(h.c)(c.o,0),showProgress:Object(h.c)(c.g,!1),showValue:Object(h.c)(c.g,!1),striped:Object(h.c)(c.g,!1)})),l.Bb),x=Object(o.c)({name:l.Bb,mixins:[m.a],provide:function(){var e=this;return{getBvProgress:function(){return e}}},props:A,computed:{progressHeight:function(){return{height:this.height||null}}},render:function(e){var t=this.normalizeSlot();return t||(t=e(f.a,{props:Object(h.e)(w,this.$props)})),e("div",{staticClass:"progress",style:this.progressHeight},[t])}})},function(e,t,n){"use strict";var r=n(20),o=n(720),l=n(84),c=n(108),d=n(124),h=n(241);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=l(this),n=c(t),r=h(t,0);return r.length=o(r,t,t,n,0,void 0===e?1:d(e)),r}})},function(e,t,n){n(176)("flat")},function(e,t,n){e.exports={}},function(e,t,n){e.exports={}},function(e,t,n){"use strict";n.r(t);n(33),n(17),n(16),n(13),n(18),n(19);var r=n(2),o=(n(238),n(10),n(14),n(43),n(713),n(714),n(542)),l=n.n(o);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={components:{DraggableField:n(725).default,draggable:l.a},props:{list:{required:!0,type:Array,default:null},multiPage:{type:Boolean,required:!1,default:!1},givenParentId:{required:!1,type:Number}},computed:{mobileView:function(){return this.$store.state.formbuilder.mobileView},groupOptions:function(){return this.multiPage?{name:"formbuilder",pull:!1,put:!1}:{name:"formbuilder",pull:!0,put:!0}},activeField:{get:function(){return this.$store.state.formbuilder.activeField},set:function(e){return this.$store.commit("formbuilder/setActiveField",JSON.parse(JSON.stringify(e)))}},temporaryId:{get:function(){return this.$store.state.formbuilder.activeForm.temporaryId}},fields:{get:function(){return this.$store.state.formbuilder.fields},set:function(e){return this.$store.commit("formbuilder/setFields",e)}}},methods:{resetFieldIds:function(e){var t=this;return e.id=null,e.temporaryId=this.temporaryId,e.fields&&e.fields.forEach((function(n){n.parent_id=e.temporaryId,t.resetFieldIds(n)})),this.$store.commit("formbuilder/incrementTemporaryId"),e},onChange:function(e){var t=this,n=e.added;if(n){var r,o=this.list[n.newIndex];if(o.combinationId)this.$axios.get("/forms/".concat(o.combinationId,"/fields/")).then((function(e){var r;o.fields=e.data.fields.map((function(e){return t.resetFieldIds(e)})),delete o.combinationId,t.activeField=d(d({},o),{},{currentIndex:n.newIndex,parent_id:null!==(r=t.givenParentId)&&void 0!==r?r:o.parent_id,new:!0})})).catch((function(e){t.$sbToast.error("Error loading combination fields")}));else this.activeField=d(d({},o),{},{currentIndex:n.newIndex,parent_id:null!==(r=this.givenParentId)&&void 0!==r?r:o.parent_id,new:!0})}},onClone:function(e){var t,n=this.resetFieldIds(JSON.parse(JSON.stringify(this.list[e]))),r=this.list.map((function(t,r){return r===e?[t,n]:t})).flat(),o=!1;this.fields=n.parent_id?this.fields.map((function(e){if(!o){return e=function e(t){return!o&&(t.id&&t.id===n.parent_id||!t.id&&t.temporaryId&&t.temporaryId===n.parent_id)?(o=!0,t.fields=r):!o&&t.fields&&(t.fields=t.fields.map((function(t){return e(t)}))),t}(e),e}return e})):r,this.activeField=d(d({},n),{},{currentIndex:e+1,new:!0,parent_id:null!==(t=this.givenParentId)&&void 0!==t?t:n.parent_id})},widthCol:function(e){if(this.mobileView){if(e.properties&&e.properties.mobilewidth)return"col-sm-".concat(e.properties.mobilewidth)}else if(e.properties&&e.properties.width)return"col-sm-".concat(e.properties.width);return"col-sm-12"}}},m=(n(724),n(63)),component=Object(m.a)(h,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"mx-3"},[t("draggable",{class:{"all-fields-container row":!0,border:0===e.list.length},attrs:{list:e.list,group:e.groupOptions,forceFallback:!0,sort:!0,handle:".card-draggable-anchor","ghost-class":"sortable-ghost",direction:"vertical"},on:{change:e.onChange}},e._l(e.list,(function(n,r){return t("draggable-field",{key:"".concat(n.id,"-").concat(n.temporaryId,"-").concat(r),staticClass:"card fielditem",class:e.widthCol(n),attrs:{givenParentId:e.givenParentId,field:n,index:r},on:{clone:e.onClone}})})),1)],1)}),[],!1,null,"558ea0bd",null);t.default=component.exports},,function(e,t,n){e.exports={}},function(e,t,n){"use strict";var r=n(179),o=n(108),l=n(289),c=n(71),d=function(e,t,source,n,h,m,f,v){for(var element,y,w=h,A=0,x=!!f&&c(f,v);A<n;)A in source&&(element=x?x(source[A],A,t):source[A],m>0&&r(element)?(y=o(element),w=d(e,t,element,y,w,m-1)-1):(l(w+1),e[w]=element),w++),A++;return w};e.exports=d},,,function(e,t,n){"use strict";n(715)},function(e,t,n){"use strict";n(716)},function(e,t,n){"use strict";n.r(t);var r=n(2);n(10),n(66),n(68),n(238),n(147),n(50),n(43),n(91),n(114),n(14),n(17),n(16),n(13),n(18),n(19);function o(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var c={components:{FormbuilderFieldList:function(){return Promise.resolve().then(n.bind(null,717))}},props:{field:{type:Object,required:!0},index:{type:Number,required:!0},givenParentId:{type:Number,required:!1}},data:function(){return{ishovering:!1,collapsed:!1}},computed:{combination:function(){return"combination"===this.field.type.toLowerCase()},guaranteedParentId:function(){var e,t;return null!==(e=null===(t=this.field)||void 0===t?void 0:t.id)&&void 0!==e?e:this.field.temporaryId},title:function(){var e;return this.getAvailableLanguage(null===(e=this.field.properties)||void 0===e?void 0:e.label)},typename:function(){var e=this,t=this.$store.state.formbuilder.fieldProperties.find((function(t){return e.field.type===t.type}));return t?t.name:""},activeField:{get:function(){return this.$store.state.formbuilder.activeField},set:function(e){return this.$store.commit("formbuilder/setActiveField",JSON.parse(JSON.stringify(e)))}}},methods:{getAvailableLanguage:function(object){var e="--",t=this.$store.state.formbuilder.activeForm.locales.length>0?this.$store.state.formbuilder.activeForm.locales:this.$store.state.locales.list.map((function(e){return e.url}));return t.includes(this.$store.state.locales.default)&&object[this.$store.state.locales.default]?object[this.$store.state.locales.default]:(t.forEach((function(t){object[t]&&(e=object[t])})),"--"===e&&this.$store.state.locales.list.forEach((function(t){object[t.url]&&(e="".concat(object[t.url]," (needs translation)"))})),e)},onCopy:function(){this.$emit("clone",this.index)},setFieldDeleted:function(){this.field.deleted=!0,this.$forceUpdate()},setFieldUndoDeleted:function(){this.field.deleted=!1,this.$forceUpdate()},setNewActiveField:function(e){var t,n;this.activeField=l(l({},e),{},{currentIndex:this.index,parent_id:null!==(t=null!==(n=this.givenParentId)&&void 0!==n?n:e.parent_id)&&void 0!==t?t:null})}}},d=(n(723),n(63)),component=Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("div",{class:{"field-card":!0,isactive:e.ishovering,deleted:e.field.deleted},on:{mouseover:function(t){e.ishovering=!0},mouseleave:function(t){e.ishovering=!1}}},[t("div",{staticClass:"card-body"},[e.combination?t("div",{staticClass:"collapseble",on:{click:function(t){e.collapsed=!e.collapsed}}},[t("Icon",{class:{arrowdown:!0,"upside-down":e.collapsed},attrs:{icon:"chevron-down"}})],1):e._e(),e._v(" "),e.field.properties?t("b-row",{staticClass:"d-flex",on:{click:function(t){return t.stopPropagation(),e.setNewActiveField(e.field)}}},[t("div",{staticClass:"label-flex text-truncate",staticStyle:{"min-height":"20px"}},[e.combination?t("h3",{class:{"mb-3":!e.collapsed}},[e._v("\n          "+e._s(e.title)+"\n        ")]):t("span",[e._v(e._s(e.title))]),e._v(" "),e.field.properties.required?t("span",{staticClass:"required-star"},[e._v("*")]):e._e()]),e._v(" "),t("div",{staticClass:"type-flex"},[e._v(e._s(e.typename))])]):e._e(),e._v(" "),e.combination?t("div",[e.collapsed?e._e():t("FormbuilderFieldList",{attrs:{list:e.field.fields,givenParentId:e.guaranteedParentId}}),e._v(" "),e.field.deleted?t("div",{staticClass:"d-flex justify-content-center"},[e._v("\n        combinatie gemarkeerd voor verwijdering.\n      ")]):e._e()],1):e._e()],1),e._v(" "),t("div",{staticClass:"card-draggable-anchor"},[t("div",{staticClass:"btn d-flex align-items-center h-100",staticStyle:{cursor:"grab"}},[t("Icon",{attrs:{icon:"arrows-up-down-left-right"}})],1)]),e._v(" "),t("div",{staticClass:"card-action-list"},[e.field.deleted?e._e():t("b-button",{attrs:{variant:"primary"},on:{click:e.onCopy}},[t("Icon",{attrs:{icon:"copy"}})],1),e._v(" "),e.field.deleted?t("b-button",{attrs:{variant:"success"},on:{click:function(t){return t.stopPropagation(),e.setFieldUndoDeleted.apply(null,arguments)}}},[t("Icon",{attrs:{icon:"arrow-rotate-left"}})],1):t("b-button",{attrs:{variant:"danger"},on:{click:function(t){return t.stopPropagation(),e.setFieldDeleted.apply(null,arguments)}}},[t("Icon",{attrs:{icon:"trash"}})],1)],1)])}),[],!1,null,"198ffbe2",null);t.default=component.exports;installComponents(component,{FormbuilderFieldList:n(717).default})},,,function(e,t,n){"use strict";n(719)},,,function(e,t,n){"use strict";n.r(t);n(28),n(146),n(50),n(13),n(10),n(91),n(114),n(14);var r=n(542),o={name:"FieldPicker",components:{Draggable:n.n(r).a},data:function(){return{search:"",focusSearch:!1}},computed:{filteredAvailableFields:function(){var e=this;return this.fieldProperties.filter((function(t){return t.name.toLowerCase().includes(e.search.toLowerCase())}))},formLocales:{get:function(){var e=this;return 0===this.$store.state.formbuilder.activeForm.locales.length?this.$store.state.locales.list:this.$store.state.locales.list.filter((function(t){return e.$store.state.formbuilder.activeForm.locales.includes(t.url)}))}},temporaryId:{get:function(){return this.$store.state.formbuilder.activeForm.temporaryId}},fieldProperties:{get:function(){return this.$store.state.formbuilder.fieldProperties},set:function(e){return this.$store.commit("formbuilder/setFieldProperties",e)}}},methods:{setupNewField:function(e){for(var t=this,n={type:e.type,properties:{label:{}}},i=0;i<this.formLocales.length;i+=1){var r=this.formLocales[i];n.properties.label[r.url]=""}return e.options&&e.options.forEach((function(e){var r=null;if(e.defaultValue)r=e.defaultValue;else switch(e.type){case"checkbox":case"InputCheckbox":r=!1;break;case"optionlist":r=[];break;case"list":r={nextId:2,list:[{deleted:!1,id:1}]};for(var o=0;o<t.formLocales.length;o+=1){var l=t.formLocales[o];r.list[0][l.url]=""}break;case"number":r=0;break;case"InputRepeatable":r={list:[]};break;default:r=""}n.properties[e.internal]=r})),1===e.custom&&(n.combinationId=e.combinationId,n.temporaryId=this.temporaryId,this.$store.commit("formbuilder/incrementTemporaryId"),n.fields=[],n.type="Combination"),n}}},l=(n(728),n(63)),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"sticky-card no-too-wide"},[t("b-input-group",{staticClass:"mb-3",scopedSlots:e._u([{key:"append",fn:function(){return[t("b-input-group-text",[t("Icon",{attrs:{icon:"magnifying-glass"}})],1)]},proxy:!0}])},[e._v(" "),t("b-form-input",{model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),t("b-list-group",[e.filteredAvailableFields.length>0?t("draggable",{staticClass:"list-group",attrs:{list:e.filteredAvailableFields,clone:e.setupNewField,forceFallback:!0,group:{name:"formbuilder",pull:"clone",put:!1},sort:!1,"ghost-class":"sortable-ghost"}},e._l(e.filteredAvailableFields,(function(n,r){return t("b-list-group-item",{key:r,staticClass:"grab",attrs:{span:12,type:"info"}},[t("b-row",[t("div",{staticStyle:{width:"30px","padding-left":"7px"}},[1==n.custom?t("Icon",{attrs:{icon:"gear"}}):e._e()],1),e._v(" "),t("div",{},[e._v(e._s(n.name))])])],1)})),1):t("div",[t("p",{staticClass:"p-3"},[t("em",[e._v("Geen veldtypen voor deze zoekopdracht")])])])],1)],1)}),[],!1,null,"014cea2a",null);t.default=component.exports},function(e,t,n){"use strict";n.r(t);n(17),n(16),n(18),n(14),n(19);var r=n(2),o=n(38);n(13),n(10),n(91),n(114),n(43),n(33),n(50),n(98);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d={props:{formId:{type:String,required:!0}},data:function(){return{originalForm:"",multiPage:!1}},fetch:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadForm();case 2:case"end":return t.stop()}}),t)})))()},computed:{mobileView:{get:function(){return this.$store.state.formbuilder.mobileView},set:function(e){return this.$store.commit("formbuilder/setMobileView",e)}},formLocales:{get:function(){var e=this;return 0===this.$store.state.formbuilder.activeForm.locales.length?this.$store.state.locales.list:this.$store.state.locales.list.filter((function(t){return e.$store.state.formbuilder.activeForm.locales.includes(t.url)}))}},activeField:{get:function(){return this.$store.state.formbuilder.activeField},set:function(e){return this.$store.commit("formbuilder/setActiveField",JSON.parse(JSON.stringify(e)))}},fields:{get:function(){return this.$store.state.formbuilder.fields},set:function(e){return this.$store.commit("formbuilder/setFields",e)}},temporaryId:{get:function(){return this.$store.state.formbuilder.activeForm.temporaryId}}},beforeMount:function(){var e=this;window.addEventListener("beforeunload",this.preventNav),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("beforeunload",e.preventNav)}))},methods:{loadForm:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/forms/".concat(e.formId,"/fields/")).then((function(t){var n,r,o,l,c,d;e.originalForm=JSON.stringify(t.data.fields),e.fields=t.data.fields,e.multiPage=null===(n=t.data.category_properties)||void 0===n?void 0:n.multipage;var h=JSON.parse(JSON.stringify(null!==(r=null===(o=e.$store.state.locales)||void 0===o?void 0:o.list.map((function(e){return e.url})))&&void 0!==r?r:[]));e.$store.commit("formbuilder/setLocales",null!==(l=null!==(c=null===(d=t.data.locales)||void 0===d?void 0:d.split(","))&&void 0!==c?c:h)&&void 0!==l?l:[]),e.$store.commit("formbuilder/setFieldProperties",t.data.available_fields),e.setBreadcrumb(t)})).catch((function(e){alert(e)}));case 2:case"end":return t.stop()}}),t)})))()},saveForm:function(){var e=this;this.$axios.patch("/forms/".concat(this.formId,"/fields/"),{id:this.formId,fields:this.$store.state.formbuilder.fields}).then((function(t){"OK"===t.statusText?(e.fields=t.data,e.originalForm=JSON.stringify(t.data),e.$sbToast.success("Formulier opgeslagen")):e.$sbToast.error("Er is iets misgegaan, probeer opnieuw.")})).catch((function(t){e.$sbToast.error("Error loading")}))},routeLeave:function(e,t,n){(JSON.stringify(this.fields)===this.originalForm||window.confirm("Weet je zeker dat je de pagina wilt verlaten? Alle wijzigingen die je gemaakt hebt worden ongedaan gemaakt."))&&(this.originalForm=JSON.stringify(this.fields),n())},preventNav:function(e){JSON.stringify(this.fields)!==this.originalForm&&(e.preventDefault(),e.returnValue="")},addEmptyCombination:function(){for(var e={},i=0;i<this.formLocales.length;i+=1){e[this.formLocales[i].url]=""}var t={temporaryId:this.temporaryId,type:"Combination",properties:{label:e},fields:[]};this.$store.commit("formbuilder/incrementTemporaryId"),this.fields=this.fields.concat([t]),this.activeField=c(c({},t),{},{currentIndex:this.fields.length-1,parent_id:null,new:!0})},setBreadcrumb:function(e){var t;t=e.data.category?{text:e.data.category,to:"/forms/c/".concat(e.data.category_slug)}:{text:this.$t("forms.combinations"),to:"/forms/combinations"};var n=[{text:this.$t("forms.forms"),to:"/forms"},t,{text:e.data.name}];this.$store.commit("setBreadcrumb",n)}}},h=n(63),component=Object(h.a)(d,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"d-flex justify-content-between align-items-center mb-3"},[t("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:e.mobileView,callback:function(t){e.mobileView=t},expression:"mobileView"}},[e._v("\n      Toon breedte zoals op mobiel\n    ")]),e._v(" "),e.multiPage?t("b-button",{attrs:{variant:"outline-primary"},on:{click:e.addEmptyCombination}},[t("Icon",{attrs:{icon:"plus"}})],1):e._e()],1),e._v(" "),0===e.fields.length?t("div",{staticClass:"p-4 align-self-center text-center"},[e.multiPage?t("h3",[e._v("\n      Om velden te plaatsen moet je eerst een blok plaatsen met het plusje\n      rechtsboven.\n    ")]):t("h3",[e._v("Sleep hieronder een veld om te beginnen")])]):e._e(),e._v(" "),t("FormbuilderFieldList",{attrs:{list:e.fields,multiPage:e.multiPage}}),e._v(" "),t("b-navbar",{staticClass:"navbar-fixed",attrs:{toggleable:"lg",type:"dark",variant:"secondary",fixed:"bottom"}},[t("b-navbar-nav",{staticClass:"ml-auto mr-3"},[t("b-button",{attrs:{type:"light",variant:"primary"},on:{click:function(t){return e.saveForm()}}},[e._v("\n        "+e._s(e.$t("save"))+"\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{FormbuilderFieldList:n(717).default})},function(e,t,n){"use strict";n.r(t);n(17),n(16),n(18),n(14),n(19);var r=n(57),o=n(2),l=(n(43),n(33),n(13),n(10),n(713),n(714),n(546));function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={name:"Properties",components:{AutoLayout:n(700).default,CommonModalsModal:l.default},props:{title:{type:String,default:function(){return""}},activeField:{type:Object,default:function(){return null}},propertyItems:{type:Array,default:function(){return[]}},locales:{type:Array,default:function(){return[]}},onSubmit:{type:Function,default:function(){}},onCancel:{type:Function,default:function(){}}},computed:{fieldPropertiesForm:function(){var e=this,t=function(e,t){return d(d({},e),{},{data:{value:null!=t?t:""}})};return[{type:"Form",properties:{onSubmit:this.onSubmit},items:[].concat(Object(r.a)(function n(r){return r.map((function(r){var l,c,h,m=e.activeField.properties[r.internal];if("InputRepeatable"===r.type){if(Array.isArray(m.list)){var f=r.properties.template[0].internal;m=m.list.map((function(t){var n=e.locales.reduce((function(e,n){var r;return d(d({},e),{},Object(o.a)({},"".concat(f,"_").concat(n.url),null!==(r=t[f]&&t[f][n.url])&&void 0!==r?r:null))}),{});return d(d({},t),n)}))}return[{type:"Divider"},t(d(d({},r),{},{properties:d(d({},r.properties),{},{template:n(r.properties.template)})}),m)]}return"InputHidden"===r.type?t(r,m):!0===(null===(l=r.properties)||void 0===l?void 0:l.localize)?(h=m,[{type:"Divider"},{type:"Title",properties:{size:4,break:!0,localize:!0,text:(c=r).properties.title,description:""}},e.locales.map((function(e){return t(d(d({},c),{},{internal:"".concat(c.internal,"_").concat(e.url),properties:d(d({},c.properties),{},{title:e.language})}),h?h[e.url]:null)}))]):[{type:"Divider"},t(r,m)]})).flat(2).filter((function(e,t){return!(0===t&&"Divider"===e.type)}))}(this.propertyItems)),[{type:"Button",properties:{sticky:!0,title:this.$t("save")}}])}]}}},m=n(63),component=Object(m.a)(h,(function(){var e=this,t=e._self._c;return t("CommonModalsModal",{on:{cancel:e.onCancel},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.title)+" ")]},proxy:!0},{key:"full",fn:function(){return[t("AutoLayout",{staticClass:"pt-3",attrs:{elements:e.fieldPropertiesForm}})]},proxy:!0}])})}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CommonModalsModal:n(546).default})},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);n(50);var r=n(57),o=(n(13),n(10),n(91),n(114),n(147),n(33),n(43),n(14),{props:{formId:{type:String,default:""}},computed:{locales:{get:function(){var e=this;return 0===this.$store.state.formbuilder.activeForm.locales.length?this.$store.state.locales.list:this.$store.state.locales.list.filter((function(t){return e.$store.state.formbuilder.activeForm.locales.includes(t.url)}))}},activeField:{get:function(){return this.$store.state.formbuilder.activeField}},fieldTemplate:function(){var e,t=this;return null!==(e=this.$store.state.formbuilder.fieldProperties.find((function(e){var n;return e.type===(null===(n=t.activeField)||void 0===n?void 0:n.type)})))&&void 0!==e?e:null},fieldTemplateProps:function(){var e,t;if(!this.activeField)return[];var n=null!==(e=null===(t=this.fieldTemplate)||void 0===t?void 0:t.options)&&void 0!==e?e:[];return"combination"===this.activeField.type.toLowerCase()&&(n=[]),[].concat([{type:"InputText",internal:"label",properties:{editorsettings:"",maxlength:"",texttype:"text",required:!0,disabled:!1,localize:!0,endPoint:"",description:"",title:"Label"}}],Object(r.a)(n))}},methods:{routeLeave:function(e,t,n){this.$refs.formContainer.routeLeave(e,t,n)},onFieldPropertiesCancel:function(){var e=this,t=!1,n=this.activeField.new?this.$store.state.formbuilder.fields.filter((function(n,r){if(!t&&e.activeField.parent_id){return n=function n(r){return!t&&(r.id&&r.id===e.activeField.parent_id||!r.id&&r.temporaryId&&r.temporaryId===e.activeField.parent_id)?(t=!0,r.fields=r.fields.filter((function(t,n){return!(e.activeField.currentIndex===n&&e.activeField.new)}))):!t&&r.fields&&(r.fields=r.fields.map((function(e){return n(e)}))),r}(n),n}return!(e.activeField.currentIndex===r&&e.activeField.new)})):this.$store.state.formbuilder.fields;this.$store.commit("formbuilder/setFields",n),this.$store.commit("formbuilder/setActiveField",null)},onFieldPropertiesSubmit:function(e,t){var n=this,r=function(e,t,r){var o=e;return t.forEach((function(e){if(void 0!==r[e.internal]&&(o[e.internal]=r[e.internal]),n.locales.forEach((function(t){void 0!==r["".concat(e.internal,"_").concat(t.url)]&&(o[e.internal]||(o[e.internal]={}),o[e.internal][t.url]=r["".concat(e.internal,"_").concat(t.url)])})),Array.isArray(r[e.internal])){var t,l=null!==(t=o[e.internal])&&void 0!==t?t:[];r[e.internal].forEach((function(t,r){e.properties.template.forEach((function(e){var o=e.internal;n.locales.forEach((function(e){void 0!==t["".concat(o,"_").concat(e.url)]&&(l[r][o]||(l[r][o]={}),l[r][o][e.url]=t["".concat(o,"_").concat(e.url)],delete t["".concat(o,"_").concat(e.url)])}))}))})),l=l.filter((function(option){return!(option.new&&option.deleted)})),o[e.internal]={list:l}}})),o},o=!1,l=this.$store.state.formbuilder.fields.map((function(e,l){if(!o&&n.activeField.parent_id){return e=function e(l){return!o&&(l.id&&l.id===n.activeField.parent_id||!l.id&&l.temporaryId&&l.temporaryId===n.activeField.parent_id)?(o=!0,l.fields=l.fields.map((function(e,o){return(e.id&&e.id===n.activeField.id||n.activeField.currentIndex===o)&&(e.properties=r(e.properties,n.fieldTemplateProps,t)),e}))):!o&&l.fields&&(l.fields=l.fields.map((function(t){return e(t)}))),l}(e),e}return!n.activeField.parent_id&&(n.activeField.id&&n.activeField.id===e.id||n.activeField.currentIndex===l)&&(e.properties=r(e.properties,n.fieldTemplateProps,t)),e}));this.$store.commit("formbuilder/setFields",l),this.$store.commit("formbuilder/setActiveField",null)},setBreadcrumb:function(e){var t;t=e.data.category?{text:e.data.category,to:"/forms/c/".concat(e.data.category_slug)}:{text:this.$t("forms.combinations"),to:"/forms/combinations"};var n=[{text:this.$t("forms.forms"),to:"/forms"},t,{text:e.data.name}];this.$store.commit("setBreadcrumb",n)}}}),l=n(63),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("div",[t("b-row",{staticClass:"pt-4"},[t("b-col",{attrs:{xs:"3",xl:"3"}},[t("FormbuilderFieldPicker")],1),e._v(" "),t("b-col",{attrs:{xs:"9",xl:"8"}},[t("FormbuilderFieldListContainer",{ref:"formContainer",attrs:{"form-id":e.formId}})],1)],1),e._v(" "),null!==e.activeField?t("FormbuilderProperties",{attrs:{activeField:e.activeField,title:e.fieldTemplate?e.fieldTemplate.name:"",propertyItems:e.fieldTemplateProps,locales:e.locales,onSubmit:e.onFieldPropertiesSubmit,onCancel:e.onFieldPropertiesCancel}}):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{FormbuilderFieldPicker:n(731).default,FormbuilderFieldListContainer:n(732).default,FormbuilderProperties:n(733).default})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r={beforeRouteLeave:function(e,t,n){this.$refs.formbuilder.routeLeave(e,t,n)}},o=n(63),component=Object(o.a)(r,(function(){return(0,this._self._c)("FormbuilderContainer",{ref:"formbuilder",attrs:{"form-id":this.$route.params.id}})}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{FormbuilderContainer:n(750).default})}])]);