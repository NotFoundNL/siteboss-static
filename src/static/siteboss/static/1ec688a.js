(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{632:function(e,t,n){n(673)},633:function(e,t,n){n(674)},634:function(e,t,n){n(675)},635:function(e,t,n){n(676)},636:function(e,t,n){n(677)},637:function(e,t,n){n(678)},638:function(e,t,n){n(679)},639:function(e,t,n){n(680)},640:function(e,t,n){n(681)},641:function(e,t,n){n(682)},642:function(e,t,n){n(683)},643:function(e,t,n){n(684)},644:function(e,t,n){n(685)},645:function(e,t,n){n(686)},646:function(e,t,n){n(687)},647:function(e,t,n){n(688)},648:function(e,t,n){n(689)},649:function(e,t,n){n(690)},650:function(e,t,n){n(691)},651:function(e,t,n){n(692)},652:function(e,t,n){n(693)},653:function(e,t,n){n(694)},654:function(e,t,n){n(695)},655:function(e,t,n){n(696)},656:function(e,t,n){n(697)},657:function(e,t,n){n(698)},658:function(e,t,n){n(699)},673:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.ModelManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,n=e=>t=>typeof t===e,o=e=>a=>e===a,r=t("string"),l=t("object"),c=t("array"),d=o(null),m=n("boolean"),h=o(void 0),f=a=>!(a=>null==a)(a),y=n("function"),v=n("number"),w=()=>{},x=e=>()=>e,S=e=>e,C=(a,b)=>a===b;function k(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const T=e=>t=>!e(t),_=e=>e(),A=x(!1),O=x(!0);class D{constructor(e,t){this.tag=e,this.value=t}static some(e){return new D(!0,e)}static none(){return D.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?D.some(e(this.value)):D.none()}bind(e){return this.tag?e(this.value):D.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:D.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return f(e)?D.some(e):D.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}D.singletonNone=new D(!1);const E=Array.prototype.slice,N=Array.prototype.indexOf,R=Array.prototype.push,M=(e,t)=>{return n=e,o=t,N.call(n,o)>-1;var n,o},P=(e,t)=>{for(let i=0,n=e.length;i<n;i++){if(t(e[i],i))return!0}return!1},F=(e,t)=>{const n=[];for(let i=0;i<e;i++)n.push(t(i));return n},I=(e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o},L=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},B=(e,t)=>{const n=[],o=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];(t(r,i)?n:o).push(r)}return{pass:n,fail:o}},j=(e,t)=>{const n=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];t(o,i)&&n.push(o)}return n},z=(e,t,n)=>(((e,t)=>{for(let i=e.length-1;i>=0;i--)t(e[i],i)})(e,((e,i)=>{n=t(n,e,i)})),n),$=(e,t,n)=>(L(e,((e,i)=>{n=t(n,e,i)})),n),U=(e,t)=>((e,t,n)=>{for(let i=0,o=e.length;i<o;i++){const o=e[i];if(t(o,i))return D.some(o);if(n(o,i))break}return D.none()})(e,t,A),H=(e,t)=>{for(let i=0,n=e.length;i<n;i++){if(t(e[i],i))return D.some(i)}return D.none()},W=e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!c(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);R.apply(t,e[i])}return t},V=(e,t)=>W(I(e,t)),Z=(e,t)=>{for(let i=0,n=e.length;i<n;++i){if(!0!==t(e[i],i))return!1}return!0},K=(e,t)=>{const n={};for(let i=0,o=e.length;i<o;i++){const o=e[i];n[String(o)]=t(o,i)}return n},G=(e,i)=>i>=0&&i<e.length?D.some(e[i]):D.none(),head=e=>G(e,0),Y=e=>G(e,e.length-1),J=(e,t)=>{for(let i=0;i<e.length;i++){const n=t(e[i],i);if(n.isSome())return n}return D.none()},X=Object.keys,Q=Object.hasOwnProperty,ee=(e,t)=>{const n=X(e);for(let o=0,r=n.length;o<r;o++){const i=n[o];t(e[i],i)}},map=(e,t)=>te(e,((e,i)=>({k:i,v:t(e,i)}))),te=(e,t)=>{const n={};return ee(e,((e,i)=>{const o=t(e,i);n[o.k]=o.v})),n},ne=(e,t)=>{const n={};return((e,t,n,o)=>{ee(e,((e,i)=>{(t(e,i)?n:o)(e,i)}))})(e,t,(e=>(t,i)=>{e[i]=t})(n),w),n},oe=(e,t)=>{const n=[];return ee(e,((e,o)=>{n.push(t(e,o))})),n},re=e=>oe(e,S),se=(e,t)=>Q.call(e,t),ae="undefined"!=typeof window?window:Function("return this;")(),le=(p,e)=>((e,t)=>{let n=null!=t?t:ae;for(let i=0;i<e.length&&null!=n;++i)n=n[e[i]];return n})(p.split("."),e),ie=(e,t)=>{const n=((e,t)=>le(e,t))(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},ce=Object.getPrototypeOf,ue=e=>{const t=le("ownerDocument.defaultView",e);return l(e)&&((e=>ie("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(ce(e).constructor.name))},de=element=>element.dom.nodeName.toLowerCase(),me=element=>element.dom.nodeType,ge=e=>element=>me(element)===e,pe=element=>8===me(element)||"#comment"===de(element),he=element=>fe(element)&&ue(element.dom),fe=ge(1),be=ge(3),ye=ge(9),ve=ge(11),we=e=>t=>fe(t)&&de(t)===e,xe=(e,t,n)=>{if(!(r(n)||m(n)||v(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Se=(element,e,t)=>{xe(element.dom,e,t)},Ce=(element,e)=>{const t=element.dom;ee(e,((e,n)=>{xe(t,n,e)}))},ke=(element,e)=>{const t=element.dom.getAttribute(e);return null===t?void 0:t},Te=(element,e)=>D.from(ke(element,e)),_e=(element,e)=>{element.dom.removeAttribute(e)},Ae=element=>$(element.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),Oe=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},De={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return Oe(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return Oe(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return Oe(t)},fromDom:Oe,fromPoint:(e,t,n)=>D.from(e.dom.elementFromPoint(t,n)).map(Oe)},Ee=(element,e)=>{const t=element.dom;if(1!==t.nodeType)return!1;{const n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},Ne=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Re=(e,t)=>{const base=void 0===t?document:t.dom;return Ne(base)?D.none():D.from(base.querySelector(e)).map(De.fromDom)},Me=(e,t)=>e.dom===t.dom,Pe=(e,t)=>{const n=e.dom,o=t.dom;return n!==o&&n.contains(o)},Fe=Ee,Ie=element=>De.fromDom(element.dom.ownerDocument),Le=e=>ye(e)?e:Ie(e),Be=element=>D.from(element.dom.parentNode).map(De.fromDom),je=element=>D.from(element.dom.parentElement).map(De.fromDom),ze=(element,e)=>{const t=y(e)?e:A;let n=element.dom;const o=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,p=De.fromDom(e);if(o.push(p),!0===t(p))break;n=e}return o},$e=element=>D.from(element.dom.previousSibling).map(De.fromDom),Ue=element=>D.from(element.dom.nextSibling).map(De.fromDom),He=element=>I(element.dom.childNodes,De.fromDom),We=(element,e)=>{const t=element.dom.childNodes;return D.from(t[e]).map(De.fromDom)},qe=(marker,element)=>{Be(marker).each((e=>{e.dom.insertBefore(element.dom,marker.dom)}))},Ve=(marker,element)=>{Ue(marker).fold((()=>{Be(marker).each((e=>{Ke(e,element)}))}),(e=>{qe(e,element)}))},Ze=(e,element)=>{const t=(element=>We(element,0))(e);t.fold((()=>{Ke(e,element)}),(t=>{e.dom.insertBefore(element.dom,t.dom)}))},Ke=(e,element)=>{e.dom.appendChild(element.dom)},Ge=(element,e)=>{qe(element,e),Ke(e,element)},Ye=(marker,e)=>{L(e,((t,i)=>{const n=0===i?marker:e[i-1];Ve(n,t)}))},Je=(e,t)=>{L(t,(t=>{Ke(e,t)}))},Xe=element=>{element.dom.textContent="",L(He(element),(e=>{Qe(e)}))},Qe=element=>{const e=element.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},et=e=>{const t=He(e);t.length>0&&Ye(e,t),Qe(e)},tt=(e,t)=>De.fromDom(e.dom.cloneNode(t)),nt=e=>tt(e,!1),ot=e=>tt(e,!0),st=(e,t)=>{const n=De.fromTag(t),o=Ae(e);return Ce(n,o),n},at=["tfoot","thead","tbody","colgroup"],lt=(element,e,t)=>({element:element,rowspan:e,colspan:t}),it=(element,e,section)=>({element:element,cells:e,section:section}),ct=(element,e,t)=>({element:element,isNew:e,isLocked:t}),ut=(element,e,section,t)=>({element:element,cells:e,section:section,isNew:t}),mt=y(Element.prototype.attachShadow)&&y(Node.prototype.getRootNode),gt=x(mt),pt=mt?e=>De.fromDom(e.dom.getRootNode()):Le,ht=e=>{const t=pt(e);return ve(n=t)&&f(n.dom.host)?D.some(t):D.none();var n},ft=e=>De.fromDom(e.dom.host),bt=element=>f(element.dom.shadowRoot),yt=element=>{const e=be(element)?element.dom.parentNode:element.dom;if(null==e||null===e.ownerDocument)return!1;const t=e.ownerDocument;return ht(De.fromDom(e)).fold((()=>t.body.contains(e)),(n=yt,o=ft,a=>n(o(a))));var n,o},vt=e=>{const b=e.dom.body;if(null==b)throw new Error("Body is not available yet");return De.fromDom(b)},wt=(e,t)=>{let n=[];return L(He(e),(e=>{t(e)&&(n=n.concat([e])),n=n.concat(wt(e,t))})),n},xt=(e,t,n)=>((e,t,n)=>j(ze(e,n),t))(e,(e=>Ee(e,t)),n),St=(e,t)=>((e,t)=>j(He(e),t))(e,(e=>Ee(e,t))),Ct=(e,t)=>((e,t)=>{const base=void 0===t?document:t.dom;return Ne(base)?[]:I(base.querySelectorAll(e),De.fromDom)})(t,e);var kt=(e,t,n,a,o)=>e(n,a)?D.some(n):y(o)&&o(n)?D.none():t(n,a,o);const Tt=(e,t,n)=>{let element=e.dom;const o=y(n)?n:A;for(;element.parentNode;){element=element.parentNode;const e=De.fromDom(element);if(t(e))return D.some(e);if(o(e))break}return D.none()},_t=(e,t,n)=>kt(((s,e)=>e(s)),Tt,e,t,n),At=(e,t,n)=>Tt(e,(e=>Ee(e,t)),n),Ot=(e,t)=>((e,t)=>U(e.dom.childNodes,(e=>t(De.fromDom(e)))).map(De.fromDom))(e,(e=>Ee(e,t))),Dt=(e,t)=>Re(t,e),Et=(e,t,n)=>kt(((element,e)=>Ee(element,e)),At,e,t,n),Nt=(e,t,n=C)=>e.exists((e=>n(e,t))),Rt=e=>{const t=[],n=e=>{t.push(e)};for(let i=0;i<e.length;i++)e[i].each(n);return t},Mt=(b,a)=>b?D.some(a):D.none(),Pt=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,Ft=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return-1!==r&&(!!h(o)||r+t.length<=o)},It=(e,t)=>Pt(e,t,0),Lt=(e,t)=>Pt(e,t,e.length-t.length),Bt=(e=>s=>s.replace(e,""))(/^\s+|\s+$/g),jt=s=>s.length>0,zt=e=>void 0!==e.style&&y(e.style.getPropertyValue),$t=(e,t,n)=>{if(!r(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);zt(e)&&e.style.setProperty(t,n)},Ut=(element,e,t)=>{const n=element.dom;$t(n,e,t)},Ht=(element,e)=>{const t=element.dom;ee(e,((e,n)=>{$t(t,n,e)}))},Wt=(element,e)=>{const t=element.dom,n=window.getComputedStyle(t).getPropertyValue(e);return""!==n||yt(element)?n:qt(t,e)},qt=(e,t)=>zt(e)?e.style.getPropertyValue(t):"",Vt=(element,e)=>{const t=element.dom,n=qt(t,e);return D.from(n).filter((e=>e.length>0))},Zt=(element,e)=>{((e,t)=>{zt(e)&&e.style.removeProperty(t)})(element.dom,e),Nt(Te(element,"style").map(Bt),"")&&_e(element,"style")},Kt=(e,t,n=0)=>Te(e,t).map((e=>parseInt(e,10))).getOr(n),Gt=(e,t)=>Kt(e,t,1),Yt=e=>we("col")(e)?Kt(e,"span",1)>1:Gt(e,"colspan")>1,Jt=e=>Gt(e,"rowspan")>1,Xt=(element,e)=>parseInt(Wt(element,e),10),Qt=x(10),en=x(10),tn=(e,t)=>nn(e,t,O),nn=(e,t,n)=>V(He(e),(e=>Ee(e,t)?n(e)?[e]:[]:nn(e,t,n))),on=(element,e)=>((e,element,t=A)=>t(element)?D.none():M(e,de(element))?D.some(element):At(element,e.join(","),(e=>Ee(e,"table")||t(e))))(["td","th"],element,e),rn=e=>tn(e,"th,td"),sn=e=>Ee(e,"colgroup")?St(e,"col"):V(ln(e),(e=>St(e,"col"))),table=(element,e)=>Et(element,"table",e),an=e=>tn(e,"tr"),ln=e=>table(e).fold(x([]),(table=>St(table,"colgroup"))),cn=(e,t)=>I(e,(e=>{if("colgroup"===de(e)){const t=I(sn(e),(e=>{const t=Kt(e,"span",1);return lt(e,1,t)}));return it(e,t,"colgroup")}{const n=I(rn(e),(e=>{const t=Kt(e,"rowspan",1),n=Kt(e,"colspan",1);return lt(e,t,n)}));return it(e,n,t(e))}})),un=e=>Be(e).map((e=>{const t=de(e);return(e=>M(at,e))(t)?t:"tbody"})).getOr("tbody"),dn=table=>{const e=an(table),t=[...ln(table),...e];return cn(t,un)},mn=e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)},gn=()=>pn(0,0),pn=(e,t)=>({major:e,minor:t}),hn={nu:pn,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?gn():((e,t)=>{const n=((e,s)=>{for(let i=0;i<e.length;i++){const t=e[i];if(t.test(s))return t}})(e,t);if(!n)return{major:0,minor:0};const o=i=>Number(t.replace(n,"$"+i));return pn(o(1),o(2))})(e,n)},unknown:gn},fn=(e,t)=>{const n=String(t).toLowerCase();return U(e,(e=>e.search(n)))},bn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,yn=e=>t=>Ft(t,e),vn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Ft(e,"edge/")&&Ft(e,"chrome")&&Ft(e,"safari")&&Ft(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,bn],search:e=>Ft(e,"chrome")&&!Ft(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Ft(e,"msie")||Ft(e,"trident")},{name:"Opera",versionRegexes:[bn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:yn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:yn("firefox")},{name:"Safari",versionRegexes:[bn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Ft(e,"safari")||Ft(e,"mobile/"))&&Ft(e,"applewebkit")}],wn=[{name:"Windows",search:yn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Ft(e,"iphone")||Ft(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:yn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:yn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:yn("linux"),versionRegexes:[]},{name:"Solaris",search:yn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:yn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:yn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],xn={browsers:x(vn),oses:x(wn)},Sn="Edge",Cn="Chromium",kn="Opera",Tn="Firefox",_n="Safari",An=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isEdge:o(Sn),isChromium:o(Cn),isIE:o("IE"),isOpera:o(kn),isFirefox:o(Tn),isSafari:o(_n)}},On={unknown:()=>An({current:void 0,version:hn.unknown()}),nu:An,edge:x(Sn),chromium:x(Cn),ie:x("IE"),opera:x(kn),firefox:x(Tn),safari:x(_n)},Dn="Windows",En="Android",Nn="Linux",Rn="macOS",Mn="Solaris",Pn="FreeBSD",Fn="ChromeOS",In=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isWindows:o(Dn),isiOS:o("iOS"),isAndroid:o(En),isMacOS:o(Rn),isLinux:o(Nn),isSolaris:o(Mn),isFreeBSD:o(Pn),isChromeOS:o(Fn)}},Ln={unknown:()=>In({current:void 0,version:hn.unknown()}),nu:In,windows:x(Dn),ios:x("iOS"),android:x(En),linux:x(Nn),macos:x(Rn),solaris:x(Mn),freebsd:x(Pn),chromeos:x(Fn)},Bn=(e,t,n)=>{const o=xn.browsers(),r=xn.oses(),l=t.bind((e=>((e,t)=>J(t.brands,(t=>{const n=t.brand.toLowerCase();return U(e,(e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:hn.nu(parseInt(t.version,10),0)})))})))(o,e))).orThunk((()=>((e,t)=>fn(e,t).map((e=>{const n=hn.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(o,e))).fold(On.unknown,On.nu),c=((e,t)=>fn(e,t).map((e=>{const n=hn.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(r,e).fold(Ln.unknown,Ln.nu),d=((e,t,n,o)=>{const r=e.isiOS()&&!0===/ipad/i.test(n),l=e.isiOS()&&!r,c=e.isiOS()||e.isAndroid(),d=c||o("(pointer:coarse)"),m=r||!l&&c&&o("(min-device-width:768px)"),h=l||c&&!m,f=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),y=!h&&!m&&!f;return{isiPad:x(r),isiPhone:x(l),isTablet:x(m),isPhone:x(h),isTouch:x(d),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:x(f),isDesktop:x(y)}})(c,l,e,n);return{browser:l,os:c,deviceType:d}},jn=e=>window.matchMedia(e).matches;let zn=mn((()=>Bn(navigator.userAgent,D.from(navigator.userAgentData),jn)));const $n=()=>zn(),Un=(e,t)=>{const n=element=>{const n=t(element);if(n<=0||null===n){const t=Wt(element,e);return parseFloat(t)||0}return n},o=(element,e)=>$(e,((e,t)=>{const n=Wt(element,t),o=void 0===n?0:parseInt(n,10);return isNaN(o)?e:e+o}),0);return{set:(element,t)=>{if(!v(t)&&!t.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+t);const n=element.dom;zt(n)&&(n.style[e]=t+"px")},get:n,getOuter:n,aggregate:o,max:(element,e,t)=>{const n=o(element,t);return e>n?e-n:0}}},Hn=(e,t)=>(e=>{const t=parseFloat(e);return isNaN(t)?D.none():D.some(t)})(e).getOr(t),Wn=(element,e,t)=>Hn(Wt(element,e),t),qn=(element,e)=>{const t=element.dom,n=t.getBoundingClientRect().width||t.offsetWidth;return"border-box"===e?n:((element,e,t,n)=>e-Wn(element,`padding-${t}`,0)-Wn(element,`padding-${n}`,0)-Wn(element,`border-${t}-width`,0)-Wn(element,`border-${n}-width`,0))(element,n,"left","right")},Vn=Un("width",(element=>element.dom.offsetWidth)),Zn=element=>Vn.get(element),Kn=element=>Vn.getOuter(element),Gn=element=>qn(element,"content-box"),Yn=element=>Wn(element,"width",element.dom.offsetWidth),Jn=(e,t,n)=>{const o=e.cells,r=o.slice(0,t),l=o.slice(t),c=r.concat(n).concat(l);return eo(e,c)},Xn=(e,t,n)=>Jn(e,t,[n]),Qn=(e,t,n)=>{e.cells[t]=n},eo=(e,t)=>ut(e.element,t,e.section,e.isNew),to=(e,t)=>e.cells[t],no=(e,t)=>to(e,t).element,oo=e=>e.cells.length,ro=e=>{const t=B(e,(e=>"colgroup"===e.section));return{rows:t.fail,cols:t.pass}},so=(e,t,n)=>{const o=I(e.cells,n);return ut(t(e.element),o,e.section,!0)},ao="data-snooker-locked-cols",lo=table=>Te(table,ao).bind((e=>D.from(e.match(/\d+/g)))).map((e=>K(e,O))),io=e=>{const t=$(ro(e).rows,((e,t)=>(L(t.cells,((t,n)=>{t.isLocked&&(e[n]=!0)})),e)),{}),n=oe(t,((e,t)=>parseInt(t,10)));return((e,t)=>{const n=E.call(e,0);return n.sort(t),n})(n)},co=(e,t)=>e+","+t,uo=(e,t)=>{const n=V(e.all,(e=>e.cells));return j(n,t)},mo=e=>{const t={},n=[],o=head(e).map((e=>e.element)).bind(table).bind(lo).getOr({});let r=0,l=0,c=0;const{pass:d,fail:m}=B(e,(e=>"colgroup"===e.section));L(m,(e=>{const d=[];L(e.cells,(e=>{let n=0;for(;void 0!==t[co(c,n)];)n++;const r=((e,t)=>se(e,t)&&void 0!==e[t]&&null!==e[t])(o,n.toString()),m=((element,e,t,n,o,r)=>({element:element,rowspan:e,colspan:t,row:n,column:o,isLocked:r}))(e.element,e.rowspan,e.colspan,c,n,r);for(let o=0;o<e.colspan;o++)for(let r=0;r<e.rowspan;r++){const e=n+o,d=co(c+r,e);t[d]=m,l=Math.max(l,e+1)}d.push(m)})),r++,n.push(it(e.element,d,e.section)),c++}));const{columns:h,colgroups:f}=Y(d).map((e=>{const t=(e=>{const t={};let n=0;return L(e.cells,(e=>{const o=e.colspan;F(o,(r=>{const l=n+r;t[l]=((element,e,t)=>({element:element,colspan:e,column:t}))(e.element,o,l)})),n+=o})),t})(e),n=((element,e)=>({element:element,columns:e}))(e.element,re(t));return{colgroups:[n],columns:t}})).getOrThunk((()=>({colgroups:[],columns:{}}))),y=((e,t)=>({rows:e,columns:t}))(r,l);return{grid:y,access:t,all:n,columns:h,colgroups:f}},go={fromTable:table=>{const e=dn(table);return mo(e)},generate:mo,getAt:(e,t,n)=>D.from(e.access[co(t,n)]),findItem:(e,t,n)=>{const o=uo(e,(e=>n(t,e.element)));return o.length>0?D.some(o[0]):D.none()},filterItems:uo,justCells:e=>V(e.all,(e=>e.cells)),justColumns:e=>re(e.columns),hasColumns:e=>X(e.columns).length>0,getColumnAt:(e,t)=>D.from(e.columns[t])},po=(e,t=O)=>{const n=e.grid,o=F(n.columns,S),r=F(n.rows,S);return I(o,(col=>ho((()=>V(r,(t=>go.getAt(e,t,col).filter((e=>e.column===col)).toArray()))),(e=>1===e.colspan&&t(e.element)),(()=>go.getAt(e,0,col)))))},ho=(e,t,n)=>{const o=e();return U(o,t).orThunk((()=>D.from(o[0]).orThunk(n))).map((e=>e.element))},fo=e=>{const t=e.grid,n=F(t.rows,S),o=F(t.columns,S);return I(n,(t=>ho((()=>V(o,(n=>go.getAt(e,t,n).filter((e=>e.row===t)).fold(x([]),(e=>[e]))))),(e=>1===e.rowspan),(()=>go.getAt(e,t,0)))))},bo=(e,t)=>{if(t<0||t>=e.length-1)return D.none();const n=e[t].fold((()=>{const n=(e=>{const t=E.call(e,0);return t.reverse(),t})(e.slice(0,t));return J(n,((a,i)=>a.map((e=>({value:e,delta:i+1})))))}),(e=>D.some({value:e,delta:0}))),o=e[t+1].fold((()=>{const n=e.slice(t+1);return J(n,((a,i)=>a.map((e=>({value:e,delta:i+1})))))}),(e=>D.some({value:e,delta:1})));return n.bind((e=>o.map((t=>{const n=t.delta+e.delta;return Math.abs(t.value-e.value)/n}))))},yo=(e,t)=>element=>"rtl"===vo(element)?t:e,vo=element=>"rtl"===Wt(element,"direction")?"rtl":"ltr",wo=Un("height",(element=>{const e=element.dom;return yt(element)?e.getBoundingClientRect().height:e.offsetHeight})),xo=element=>wo.get(element),So=element=>wo.getOuter(element),Co=element=>Wn(element,"height",element.dom.offsetHeight),ko=(e,t)=>({left:e,top:t,translate:(n,o)=>ko(e+n,t+o)}),To=ko,_o=(a,b)=>void 0!==a?a:void 0!==b?b:0,Ao=element=>{const e=element.dom.ownerDocument,body=e.body,t=e.defaultView,html=e.documentElement;if(body===element.dom)return To(body.offsetLeft,body.offsetTop);const n=_o(null==t?void 0:t.pageYOffset,html.scrollTop),o=_o(null==t?void 0:t.pageXOffset,html.scrollLeft),r=_o(html.clientTop,body.clientTop),l=_o(html.clientLeft,body.clientLeft);return Oo(element).translate(o-l,n-r)},Oo=element=>{const e=element.dom,body=e.ownerDocument.body;return body===e?To(body.offsetLeft,body.offsetTop):yt(element)?(e=>{const t=e.getBoundingClientRect();return To(t.left,t.top)})(e):To(0,0)},Do=(e,t)=>({row:e,y:t}),Eo=(col,e)=>({col:col,x:e}),No=e=>Ao(e).left+Kn(e),Ro=e=>Ao(e).left,Mo=(e,t)=>Eo(e,Ro(t)),Po=(e,t)=>Eo(e,No(t)),Fo=e=>Ao(e).top,Io=(e,t)=>Do(e,Fo(t)),Lo=(e,t)=>Do(e,Fo(t)+So(t)),Bo=(e,t,n)=>{if(0===n.length)return[];const o=I(n.slice(1),((t,n)=>t.map((t=>e(n,t))))),r=n[n.length-1].map((e=>t(n.length-1,e)));return o.concat([r])},jo={delta:S,positions:e=>Bo(Io,Lo,e),edge:Fo},zo=yo({delta:S,edge:Ro,positions:e=>Bo(Mo,Po,e)},{delta:e=>-e,edge:No,positions:e=>Bo(Po,Mo,e)}),$o={delta:(e,table)=>zo(table).delta(e,table),positions:(e,table)=>zo(table).positions(e,table),edge:e=>zo(e).edge(e)},Uo={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},pattern=(()=>{const e="[0-9]+",t="[eE]"+("[+-]?"+e),n=input=>`(?:${input})?`,o=["Infinity",e+"\\."+n(e)+n(t),"\\."+e+n(t),e+n(t)].join("|");return new RegExp(`^(${`[+-]?(?:${o})`})(.*)$`)})(),Ho=(input,e)=>D.from(pattern.exec(input)).bind((t=>{const n=Number(t[1]),o=t[2];return((e,t)=>P(t,(t=>P(Uo[t],(t=>e===t)))))(o,e)?D.some({value:n,unit:o}):D.none()})),Wo=/(\d+(\.\d+)?)%/,qo=/(\d+(\.\d+)?)px|em/,Vo=we("col"),Zo=(e,t,n)=>{const o=je(e).getOrThunk((()=>vt(Ie(e))));return t(e)/n(o)*100},Ko=(e,t)=>{Ut(e,"width",t+"px")},Go=(e,t)=>{Ut(e,"width",t+"%")},Yo=(e,t)=>{Ut(e,"height",t+"px")},Jo=(e,t,n,o)=>{const r=parseFloat(e);return Lt(e,"%")&&"table"!==de(t)?((e,t,n,o)=>{const r=table(e).map((table=>{const e=n(table);return Math.floor(t/100*e)})).getOr(t);return o(e,r),r})(t,r,n,o):r},Xo=e=>{const t=(e=>Co(e)+"px")(e);return t?Jo(t,e,xo,Yo):xo(e)},Qo=(element,e)=>Vt(element,e).orThunk((()=>Te(element,e).map((e=>e+"px")))),er=element=>Qo(element,"width"),nr=e=>Zo(e,Zn,Gn),or=e=>Vo(e)?Zn(e):Yn(e),rr=e=>((e,t,n)=>n(e)/Gt(e,t))(e,"rowspan",Xo),sr=(e,t,n)=>{Ut(e,"width",t+n)},ar=table=>Zo(table,Zn,Gn)+"%",lr=x(Wo),ir=we("col"),cr=e=>er(e).getOrThunk((()=>or(e)+"px")),ur=e=>{return(element=e,Qo(element,"height")).getOrThunk((()=>rr(e)+"px"));var element},dr=(e,t,n,filter,o,r)=>e.filter(filter).fold((()=>r(bo(n,t))),(e=>o(e))),mr=(e,table,t,n)=>{const o=po(e),r=go.hasColumns(e)?(e=>I(go.justColumns(e),(e=>D.from(e.element))))(e):o,l=[D.some($o.edge(table))].concat(I($o.positions(o,table),(e=>e.map((p=>p.x))))),c=T(Yt);return I(r,((e,r)=>dr(e,r,l,c,(e=>{if((e=>{const t=$n().browser,n=t.isChromium()||t.isFirefox();return!ir(e)||n})(e))return t(e);{const e=(a=o[r],d=S,null!=a?d(a):D.none());return dr(e,r,l,c,(e=>n(D.some(Zn(e)))),n)}var a,d}),n)))},gr=e=>e.map((e=>e+"px")).getOr(""),pr=(e,table,t)=>mr(e,table,or,(e=>e.getOrThunk(t.minCellWidth))),fr=(e,table,t,n,o)=>{const r=fo(e),l=[D.some(t.edge(table))].concat(I(t.positions(r,table),(e=>e.map((p=>p.y)))));return I(r,((e,t)=>dr(e,t,l,T(Jt),n,o)))},yr=(table,e)=>()=>yt(table)?e(table):parseFloat(Vt(table,"width").getOr("0")),vr=table=>{const e=yr(table,Zn),t=x(0);return{width:e,pixelWidth:e,getWidths:(e,t)=>pr(e,table,t),getCellDelta:t,singleColumnWidth:x([0]),minCellWidth:t,setElementWidth:w,adjustTableWidth:w,isRelative:!0,label:"none"}},wr=table=>{const e=yr(table,(e=>parseFloat(ar(e)))),t=yr(table,Zn);return{width:e,pixelWidth:t,getWidths:(e,t)=>((e,table,t)=>mr(e,table,nr,(e=>e.fold((()=>t.minCellWidth()),(e=>e/t.pixelWidth()*100)))))(e,table,t),getCellDelta:e=>e/t()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>Qt()/t()*100,setElementWidth:Go,adjustTableWidth:t=>{const n=e();Go(table,n+t/100*n)},isRelative:!0,label:"percent"}},xr=table=>{const e=yr(table,Zn);return{width:e,pixelWidth:e,getWidths:(e,t)=>pr(e,table,t),getCellDelta:S,singleColumnWidth:(e,t)=>[Math.max(Qt(),e+t)-e],minCellWidth:Qt,setElementWidth:Ko,adjustTableWidth:t=>{const n=e()+t;Ko(table,n)},isRelative:!1,label:"pixel"}},Sr=table=>er(table).fold((()=>vr(table)),(e=>((element,e)=>null!==lr().exec(e)?wr(element):xr(element))(table,e))),Cr=xr,kr=wr,Tr=(e,t,n)=>{const o=e[n].element,td=De.fromTag("td");Ke(td,De.fromTag("br"));(t?Ke:Ze)(o,td)},_r=(table,e)=>{const t=t=>Ee(t.element,e),n=ot(table),o=dn(n),r=Sr(table),l=go.generate(o),c=((e,t)=>{const n=e.grid.columns;let o=e.grid.rows,r=n,l=0,c=0;const d=[],m=[];return ee(e.access,(e=>{if(d.push(e),t(e)){m.push(e);const t=e.row,n=t+e.rowspan-1,d=e.column,h=d+e.colspan-1;t<o?o=t:n>l&&(l=n),d<r?r=d:h>c&&(c=h)}})),((e,t,n,o,r,l)=>({minRow:e,minCol:t,maxRow:n,maxCol:o,allCells:r,selectedCells:l}))(o,r,l,c,d,m)})(l,t),d="th:not("+e+"),td:not("+e+")",m=nn(n,"th,td",(e=>Ee(e,d)));L(m,Qe),((e,t,n,o)=>{const r=j(e,(e=>"colgroup"!==e.section)),l=t.grid.columns,c=t.grid.rows;for(let i=0;i<c;i++){let e=!1;for(let c=0;c<l;c++)i<n.minRow||i>n.maxRow||c<n.minCol||c>n.maxCol||(go.getAt(t,i,c).filter(o).isNone()?Tr(r,e,i):e=!0)}})(o,l,c,t);const h=((table,e,t,n)=>{if(0===n.minCol&&e.grid.columns===n.maxCol+1)return 0;const o=pr(e,table,t),r=$(o,((e,t)=>e+t),0),l=$(o.slice(n.minCol,n.maxCol+1),((e,t)=>e+t),0),c=l/r*t.pixelWidth()-t.pixelWidth();return t.getCellDelta(c)})(table,go.fromTable(table),r,c);return((e,t,n,o)=>{ee(n.columns,(col=>{(col.column<t.minCol||col.column>t.maxCol)&&Qe(col.element)}));const r=j(tn(e,"tr"),(e=>0===e.dom.childElementCount));L(r,Qe),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||L(tn(e,"th,td"),(e=>{_e(e,"rowspan"),_e(e,"colspan")})),_e(e,ao),_e(e,"data-snooker-col-series"),Sr(e).adjustTableWidth(o)})(n,c,l,h),n},Ar=((e,t)=>{const n=element=>e(element)?D.from(element.dom.nodeValue):D.none();return{get:element=>{if(!e(element))throw new Error("Can only get "+t+" value of a "+t+" node");return n(element).getOr("")},getOption:n,set:(element,n)=>{if(!e(element))throw new Error("Can only set raw "+t+" value of a "+t+" node");element.dom.nodeValue=n}}})(be,"text"),Or=element=>Ar.get(element),Dr=element=>Ar.getOption(element),Er=(element,e)=>Ar.set(element,e),Nr=element=>"img"===de(element)?1:Dr(element).fold((()=>He(element).length),(e=>e.length)),Rr=["img","br"],Mr=e=>Dr(e).filter((text=>0!==text.trim().length||text.indexOf(" ")>-1)).isSome()||M(Rr,de(e))||(e=>he(e)&&"false"===ke(e,"contenteditable"))(e),Pr=element=>((e,t)=>{const n=e=>{for(let i=0;i<e.childNodes.length;i++){const o=De.fromDom(e.childNodes[i]);if(t(o))return D.some(o);const r=n(e.childNodes[i]);if(r.isSome())return r}return D.none()};return n(e.dom)})(element,Mr),Fr=element=>Ir(element,Mr),Ir=(e,t)=>{const n=element=>{const e=He(element);for(let i=e.length-1;i>=0;i--){const o=e[i];if(t(o))return D.some(o);const r=n(o);if(r.isSome())return r}return D.none()};return n(e)},Lr={scope:["row","col"]},Br=e=>()=>{const td=De.fromTag("td",e.dom);return Ke(td,De.fromTag("br",e.dom)),td},jr=e=>()=>De.fromTag("col",e.dom),zr=e=>()=>De.fromTag("colgroup",e.dom),$r=e=>()=>De.fromTag("tr",e.dom),Ur=(e,t,n)=>{const o=((e,t)=>{const n=st(e,t),o=He(ot(e));return Je(n,o),n})(e,t);return ee(n,((e,t)=>{null===e?_e(o,t):Se(o,t,e)})),o},Hr=e=>e,Wr=(e,t,n)=>{const o=(e,t)=>{((source,e)=>{const t=source.dom,n=e.dom;zt(t)&&zt(n)&&(n.style.cssText=t.style.cssText)})(e.element,t),Zt(t,"height"),1!==e.colspan&&Zt(t,"width")};return{col:n=>{const col=De.fromTag(de(n.element),t.dom);return o(n,col),e(n.element,col),col},colgroup:zr(t),row:$r(t),cell:r=>{const td=De.fromTag(de(r.element),t.dom),l=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),c=l.length>0?((e,t,n)=>Pr(e).map((o=>{const r=n.join(","),l=xt(o,r,(element=>Me(element,e)));return z(l,((e,t)=>{const n=nt(t);return Ke(e,n),n}),t)})).getOr(t))(r.element,td,l):td;return Ke(c,De.fromTag("br")),o(r,td),((e,t)=>{ee(Lr,((n,o)=>Te(e,o).filter((e=>M(n,e))).each((e=>Se(t,o,e)))))})(r.element,td),e(r.element,td),td},replace:Ur,colGap:jr(t),gap:Br(t)}},qr=e=>({col:jr(e),colgroup:zr(e),row:$r(e),cell:Br(e),replace:Hr,colGap:jr(e),gap:Br(e)}),option=e=>t=>t.options.get(e),Vr="100%",Zr=e=>{var t;const n=e.dom,o=null!==(t=n.getParent(e.selection.getStart(),n.isBlock))&&void 0!==t?t:e.getBody();return Gn(De.fromDom(o))+"px"},Kr=e=>D.from(e.options.get("table_clone_elements")),Gr=option("table_header_type"),Yr=option("table_column_resizing"),Jr=e=>"preservetable"===Yr(e),Xr=e=>"resizetable"===Yr(e),Qr=option("table_sizing_mode"),es=e=>"relative"===Qr(e),ts=e=>"fixed"===Qr(e),ns=e=>"responsive"===Qr(e),os=option("table_resize_bars"),rs=option("table_style_by_css"),ss=option("table_merge_content_on_paste"),as=e=>{const t=e.options,n=t.get("table_default_attributes");return t.isSet("table_default_attributes")?n:((e,t)=>ns(e)||rs(e)?t:ts(e)?{...t,width:Zr(e)}:{...t,width:Vr})(e,n)},ls=e=>{const t=e.options,n=t.get("table_default_styles");return t.isSet("table_default_styles")?n:((e,t)=>ns(e)||!rs(e)?t:ts(e)?{...t,width:Zr(e)}:{...t,width:Vr})(e,n)},is=option("table_use_colgroups"),cs=e=>Et(e,"[contenteditable]"),us=(element,e=!1)=>yt(element)?element.dom.isContentEditable:cs(element).fold(x(e),(e=>"true"===ds(e))),ds=element=>element.dom.contentEditable,ms=e=>De.fromDom(e.getBody()),gs=e=>element=>Me(element,ms(e)),ps=table=>{_e(table,"data-mce-style");const e=element=>_e(element,"data-mce-style");L(rn(table),e),L(sn(table),e),L(an(table),e)},hs=e=>De.fromDom(e.selection.getStart()),fs=e=>e.getBoundingClientRect().width,bs=e=>e.getBoundingClientRect().height,ys=e=>_t(e,we("table")).exists(us),vs=(e,t)=>{const n=t.column,o=t.column+t.colspan-1,r=t.row,l=t.row+t.rowspan-1;return n<=e.finishCol&&o>=e.startCol&&r<=e.finishRow&&l>=e.startRow},ws=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,xs=(e,t,n)=>{const o=go.findItem(e,t,Me),r=go.findItem(e,n,Me);return o.bind((e=>r.map((t=>{return n=e,o=t,r=Math.min(n.row,o.row),l=Math.min(n.column,o.column),c=Math.max(n.row+n.rowspan-1,o.row+o.rowspan-1),d=Math.max(n.column+n.colspan-1,o.column+o.colspan-1),{startRow:r,startCol:l,finishRow:c,finishCol:d};var n,o,r,l,c,d}))))},Ss=(e,t,n)=>xs(e,t,n).bind((t=>((e,t)=>{let n=!0;const o=k(ws,t);for(let i=t.startRow;i<=t.finishRow;i++)for(let r=t.startCol;r<=t.finishCol;r++)n=n&&go.getAt(e,i,r).exists(o);return n?D.some(t):D.none()})(e,t))),Cs=(e,t,n)=>xs(e,t,n).map((t=>{const n=go.filterItems(e,k(vs,t));return I(n,(e=>e.element))})),ks=(e,t)=>go.findItem(e,t,((e,t)=>Pe(t,e))).map((e=>e.element)),Ts=(e,t,n)=>table(e).bind((table=>((e,t,n,o)=>go.findItem(e,t,Me).bind((t=>{const r=n>0?t.row+t.rowspan-1:t.row,l=o>0?t.column+t.colspan-1:t.column;return go.getAt(e,r+n,l+o).map((e=>e.element))})))(Os(table),e,t,n))),_s=(table,e,t)=>{const n=Os(table);return Cs(n,e,t)},As=(table,e,t,n,o)=>{const r=Os(table),l=Me(table,t)?D.some(e):ks(r,e),c=Me(table,o)?D.some(n):ks(r,n);return l.bind((e=>c.bind((t=>Cs(r,e,t)))))},Os=go.fromTable;var Ds=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Es=()=>({up:x({selector:At,closest:Et,predicate:Tt,all:ze}),down:x({selector:Ct,predicate:wt}),styles:x({get:Wt,getRaw:Vt,set:Ut,remove:Zt}),attrs:x({get:ke,set:Se,remove:_e,copyTo:(source,e)=>{const t=Ae(source);Ce(e,t)}}),insert:x({before:qe,after:Ve,afterAll:Ye,append:Ke,appendAll:Je,prepend:Ze,wrap:Ge}),remove:x({unwrap:et,remove:Qe}),create:x({nu:De.fromTag,clone:element=>De.fromDom(element.dom.cloneNode(!1)),text:De.fromText}),query:x({comparePosition:(element,e)=>element.dom.compareDocumentPosition(e.dom),prevSibling:$e,nextSibling:Ue}),property:x({children:He,name:de,parent:Be,document:element=>Le(element).dom,isText:be,isComment:pe,isElement:fe,isSpecial:element=>{const e=de(element);return M(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],e)},getLanguage:element=>fe(element)?Te(element,"lang"):D.none(),getText:Or,setText:Er,isBoundary:element=>!!fe(element)&&("body"===de(element)||M(Ds,de(element))),isEmptyTag:element=>!!fe(element)&&M(["br","img","hr","input"],de(element)),isNonEditable:element=>fe(element)&&"false"===ke(element,"contenteditable")}),eq:Me,is:Fe});const Ns=(e,t,head,n)=>{const o=t(e,head);return z(n,((b,a)=>{const n=t(e,a);return Rs(e,b,n)}),o)},Rs=(e,t,n)=>t.bind((s=>n.filter(k(e.eq,s)))),Ms=(e,t,n)=>n.length>0?((e,t,n,o)=>o(e,t,n[0],n.slice(1)))(e,t,n,Ns):D.none(),Ps=(e,t,n,o=A)=>{const r=[t].concat(e.up().all(t)),l=[n].concat(e.up().all(n)),c=path=>H(path,o).fold((()=>path),(e=>path.slice(0,e+1))),d=c(r),m=c(l),h=U(d,(t=>P(m,((e,t)=>k(e.eq,t))(e,t))));return{firstpath:d,secondpath:m,shared:h}},Fs=Es(),Is=(e,t)=>Ms(Fs,((t,element)=>e(element)),t),Ls=e=>At(e,"table"),Bs=(e,t,n)=>{const o=e=>element=>void 0!==n&&n(element)||Me(element,e);return Me(e,t)?D.some({boxes:D.some([e]),start:e,finish:t}):Ls(e).bind((r=>Ls(t).bind((l=>{if(Me(r,l))return D.some({boxes:_s(r,e,t),start:e,finish:t});if(Pe(r,l)){const n=xt(t,"td,th",o(r)),c=n.length>0?n[n.length-1]:t;return D.some({boxes:As(r,e,r,t,l),start:e,finish:c})}if(Pe(l,r)){const n=xt(e,"td,th",o(l)),c=n.length>0?n[n.length-1]:e;return D.some({boxes:As(l,e,r,t,l),start:e,finish:c})}return((e,t,n)=>Ps(Fs,e,t,n))(e,t).shared.bind((c=>Et(c,"table",n).bind((n=>{const c=xt(t,"td,th",o(n)),d=c.length>0?c[c.length-1]:t,m=xt(e,"td,th",o(n)),h=m.length>0?m[m.length-1]:e;return D.some({boxes:As(n,e,r,t,l),start:h,finish:d})}))))}))))},js=(e,t)=>{const n=Ct(e,t);return n.length>0?D.some(n):D.none()},zs=(e,t,n)=>Dt(e,t).bind((t=>Dt(e,n).bind((e=>Is(Ls,[t,e]).map((table=>({first:t,last:e,table:table}))))))),$s=(e,t,n,o,r)=>((e,t)=>U(e,(e=>Ee(e,t))))(e,r).bind((e=>Ts(e,t,n).bind((e=>((e,t)=>At(e,"table").bind((table=>Dt(table,t).bind((t=>Bs(t,e).bind((e=>e.boxes.map((t=>({boxes:t,start:e.start,finish:e.finish}))))))))))(e,o))))),Us=(e,t)=>js(e,t),Hs=(e,t,n)=>zs(e,t,n).bind((t=>{const n=t=>Me(e,t),o="thead,tfoot,tbody,table",r=At(t.first,o,n),l=At(t.last,o,n);return r.bind((e=>l.bind((n=>Me(e,n)?((table,e,t)=>{const n=Os(table);return Ss(n,e,t)})(t.table,t.first,t.last):D.none()))))})),Ws=S,qs=e=>{const t=(e,t)=>Te(e,t).exists((span=>parseInt(span,10)>1));return e.length>0&&Z(e,(e=>t(e,"rowspan")||t(e,"colspan")))?D.some(e):D.none()},Vs=(table,e,t)=>e.length<=1?D.none():Hs(table,t.firstSelectedSelector,t.lastSelectedSelector).map((t=>({bounds:t,cells:e}))),Zs="data-mce-selected",Ks="td["+Zs+"],th["+Zs+"]",Gs="["+Zs+"]",Ys="data-mce-first-selected",Js="td["+Ys+"],th["+Ys+"]",Xs="data-mce-last-selected",Qs="td["+Xs+"],th["+Xs+"]",ea=Gs,ta={selected:Zs,selectedSelector:Ks,firstSelected:Ys,firstSelectedSelector:Js,lastSelected:Xs,lastSelectedSelector:Qs},na=(e,table,t)=>({element:t,mergable:Vs(table,e,ta),unmergable:qs(e),selection:Ws(e)}),oa=e=>(t,n)=>{const o=de(t),r="col"===o||"colgroup"===o?table(element=t).bind((table=>Us(table,ta.firstSelectedSelector))).fold(x(element),(e=>e[0])):t;var element;return Et(r,e,n)},ra=oa("th,td,caption"),sa=oa("th,td"),aa=e=>{return t=e.model.table.getSelectedCells(),I(t,De.fromDom);var t},la=(e,t)=>{e.on("BeforeGetContent",(t=>{const n=n=>{t.preventDefault(),(e=>table(e[0]).map((table=>{const e=_r(table,ea);return ps(e),[e]})))(n).each((n=>{t.content="text"===t.format?(e=>I(e,(element=>element.dom.innerText)).join(""))(n):((e,t)=>I(t,(t=>e.selection.serializer.serialize(t.dom,{}))).join(""))(e,n)}))};if(!0===t.selection){const t=(e=>j(aa(e),(e=>Ee(e,ta.selectedSelector))))(e);t.length>=1&&n(t)}})),e.on("BeforeSetContent",(n=>{if(!0===n.selection&&!0===n.paste){const o=aa(e);head(o).each((o=>{table(o).each((table=>{const r=j(((html,e)=>{const div=(e||document).createElement("div");return div.innerHTML=html,He(De.fromDom(div))})(n.content),(content=>"meta"!==de(content))),l=we("table");if(ss(e)&&1===r.length&&l(r[0])){n.preventDefault();const l=De.fromDom(e.getDoc()),c=qr(l),d=((element,e,t)=>({element:element,clipboard:e,generators:t}))(o,r[0],c);t.pasteCells(table,d).each((()=>{e.focus()}))}}))}))}}))},ia=(element,e)=>({element:element,offset:e}),ca=(e,element,t)=>e.property().isText(element)&&0===e.property().getText(element).trim().length||e.property().isComment(element)?t(element).bind((n=>ca(e,n,t).orThunk((()=>D.some(n))))):D.none(),ua=(e,element)=>{if(e.property().isText(element))return e.property().getText(element).length;return e.property().children(element).length},da=(e,element)=>{const t=ca(e,element,e.query().prevSibling).getOr(element);if(e.property().isText(t))return ia(t,ua(e,t));const n=e.property().children(t);return n.length>0?da(e,n[n.length-1]):ia(t,ua(e,t))},ma=da,ga=Es(),pa=(main,e)=>{if(!Yt(main)){const t=(e=>er(e).bind((e=>Ho(e,["fixed","relative","empty"]))))(main);t.each((t=>{const n=t.value/2;sr(main,n,t.unit),sr(e,n,t.unit)}))}},ha=e=>I(e,x(0)),fa=(e,t,n,o,r)=>r(e.slice(0,t)).concat(o).concat(r(e.slice(n))),ba=e=>(t,n,o,r)=>{if(e(o)){const e=Math.max(r,t[n]-Math.abs(o)),l=Math.abs(e-t[n]);return o>=0?l:-l}return o},ya=ba((e=>e<0)),va=ba(O),wa=()=>{const e=(e,t,n,o)=>{const r=(100+n)/100,l=Math.max(o,(e[t]+n)/r);return I(e,((e,n)=>(n===t?l:e/r)-e))},t=(t,n,o,r,l,c)=>c?e(t,n,r,l):((e,t,n,o,r)=>{const l=ya(e,t,o,r);return fa(e,t,n+1,[l,0],ha)})(t,n,o,r,l);return{resizeTable:(e,t)=>e(t),clampTableDelta:ya,calcLeftEdgeDeltas:t,calcMiddleDeltas:(e,n,o,r,l,c,d)=>t(e,o,r,l,c,d),calcRightEdgeDeltas:(t,n,o,r,l,c)=>{if(c)return e(t,o,r,l);{const e=ya(t,o,r,l);return ha(t.slice(0,o)).concat([e])}},calcRedestributedWidths:(e,t,n,o)=>{if(o){const o=(t+n)/t,r=I(e,(e=>e/o));return{delta:100*o-100,newSizes:r}}return{delta:n,newSizes:e}}}},xa=()=>{const e=(e,t,n,o,r)=>{const l=va(e,o>=0?n:t,o,r);return fa(e,t,n+1,[l,-l],ha)};return{resizeTable:(e,t,n)=>{n&&e(t)},clampTableDelta:(e,t,n,o,r)=>{if(r){if(n>=0)return n;{const t=$(e,((a,b)=>a+b-o),0);return Math.max(-t,n)}}return ya(e,t,n,o)},calcLeftEdgeDeltas:e,calcMiddleDeltas:(t,n,o,r,l,c)=>e(t,o,r,l,c),calcRightEdgeDeltas:(e,t,n,o,r,l)=>{if(l)return ha(e);{const t=o/e.length;return I(e,x(t))}},calcRedestributedWidths:(e,t,n,o)=>({delta:0,newSizes:e})}},Sa=table=>go.fromTable(table).grid,Ca=we("th"),ka=e=>Z(e,(e=>Ca(e.element))),Ta=(e,t)=>e&&t?"sectionCells":e?"section":"cells",_a=e=>{const t="thead"===e.section,n=Nt(Aa(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||n?{type:"header",subType:Ta(t,n)}:{type:"body"}},Aa=e=>{const t=j(e,(e=>Ca(e.element)));return 0===t.length?D.some("td"):t.length===e.length?D.some("th"):D.none()},Oa=(e,t,n)=>ct(n(e.element,t),!0,e.isLocked),Da=(e,section)=>e.section!==section?ut(e.element,e.cells,section,e.isNew):e,section=()=>({transformRow:Da,transformCell:(e,t,n)=>{const o=n(e.element,t),r="td"!==de(o)?((e,t)=>{const n=st(e,t);Ve(e,n);const o=He(e);return Je(n,o),Qe(e),n})(o,"td"):o;return ct(r,e.isNew,e.isLocked)}}),Ea=()=>({transformRow:Da,transformCell:Oa}),Na=()=>({transformRow:(e,section)=>Da(e,"thead"===section?"tbody":section),transformCell:Oa}),Ra=(table,e)=>{const t=(e=>J(e.all,(e=>{const t=_a(e);return"header"===t.type?D.from(t.subType):D.none()})))(go.fromTable(table)).getOr(e);switch(t){case"section":return section();case"sectionCells":return Ea();case"cells":return Na()}},Ma=section,Pa=Ea,Fa=Na,Ia=()=>({transformRow:S,transformCell:Oa}),La=(element,e,t,n)=>{t===n?_e(element,e):Se(element,e,t)},Ba=(table,e,element)=>{Y(St(table,e)).fold((()=>Ze(table,element)),(e=>Ve(e,element)))},ja=(table,e)=>{const t=[],n=[],o=e=>I(e,(e=>{e.isNew&&t.push(e.element);const tr=e.element;return Xe(tr),L(e.cells,(e=>{e.isNew&&n.push(e.element),La(e.element,"colspan",e.colspan,1),La(e.element,"rowspan",e.rowspan,1),Ke(tr,e.element)})),tr})),r=e=>V(e,(e=>I(e.cells,(col=>(La(col.element,"span",col.colspan,1),col.element))))),l=(e,t)=>{const section=((table,e)=>{const section=Ot(table,e).getOrThunk((()=>{const t=De.fromTag(e,Ie(table).dom);return"thead"===e?Ba(table,"caption,colgroup",t):"colgroup"===e?Ba(table,"caption",t):Ke(table,t),t}));return Xe(section),section})(table,t),n=("colgroup"===t?r:o)(e);Je(section,n)},c=(e,t)=>{e.length>0?l(e,t):(e=>{Ot(table,e).each(Qe)})(t)},d=[],m=[],h=[],f=[];return L(e,(e=>{switch(e.section){case"thead":d.push(e);break;case"tbody":m.push(e);break;case"tfoot":h.push(e);break;case"colgroup":f.push(e)}})),c(f,"colgroup"),c(d,"thead"),c(m,"tbody"),c(h,"tfoot"),{newRows:t,newCells:n}},za=(e,t)=>{if(0===e.length)return 0;const n=e[0];return H(e,(e=>!t(n.element,e.element))).getOr(e.length)},$a=(e,t,n,o)=>{const r=((e,t)=>e[t])(e,t),l="colgroup"===r.section,c=za(r.cells.slice(n),o),d=l?1:za(((e,t)=>I(e,(e=>to(e,t))))(e.slice(t),n),o);return{colspan:c,rowspan:d}},Ua=(e,t)=>{const n=I(e,(e=>I(e.cells,A)));return I(e,((o,r)=>{const details=V(o.cells,((o,l)=>{if(!1===n[r][l]){const h=$a(e,r,l,t);return((e,t,o,r)=>{for(let l=e;l<e+o;l++)for(let e=t;e<t+r;e++)n[l][e]=!0})(r,l,h.rowspan,h.colspan),[(element=o.element,c=h.rowspan,d=h.colspan,m=o.isNew,{element:element,rowspan:c,colspan:d,isNew:m})]}return[];var element,c,d,m}));return((element,e,section,t)=>({element:element,cells:e,section:section,isNew:t}))(o.element,details,o.section,o.isNew)}))},Ha=(e,t,n)=>{const o=[];L(e.colgroups,(colgroup=>{const r=[];for(let o=0;o<e.grid.columns;o++){const element=go.getColumnAt(e,o).map((e=>ct(e.element,n,!1))).getOrThunk((()=>ct(t.colGap(),!0,!1)));r.push(element)}o.push(ut(colgroup.element,r,"colgroup",n))}));for(let r=0;r<e.grid.rows;r++){const l=[];for(let o=0;o<e.grid.columns;o++){const element=go.getAt(e,r,o).map((e=>ct(e.element,n,e.isLocked))).getOrThunk((()=>ct(t.gap(),!0,!1)));l.push(element)}const c=e.all[r],d=ut(c.element,l,c.section,n);o.push(d)}return o},Wa=e=>Ua(e,Me),qa=(e,element)=>J(e.all,(e=>U(e.cells,(e=>Me(element,e.element))))),Va=(e,t,n)=>{const details=I(t.selection,(t=>on(t).bind((t=>qa(e,t))).filter(n))),o=Rt(details);return Mt(o.length>0,o)},Za=(e,t,n,o,r)=>(table,l,c,d)=>{const m=go.fromTable(table),h=D.from(null==d?void 0:d.section).getOrThunk(Ia);return t(m,l).map((t=>{const n=((e,t)=>Ha(e,t,!1))(m,c),o=e(n,t,Me,r(c),h),l=io(o.grid);return{info:t,grid:Wa(o.grid),cursor:o.cursor,lockedColumns:l}})).bind((e=>{const t=ja(table,e.grid),r=D.from(null==d?void 0:d.sizing).getOrThunk((()=>Sr(table))),l=D.from(null==d?void 0:d.resize).getOrThunk(xa);return n(table,e.grid,e.info,{sizing:r,resize:l,section:h}),o(table),_e(table,ao),e.lockedColumns.length>0&&Se(table,ao,e.lockedColumns.join(",")),D.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))},Ka=(e,t)=>Va(e,t,O).map((e=>({cells:e,generators:t.generators,clipboard:t.clipboard}))),Ga=(e,t)=>Va(e,t,O),Ya=(e,t)=>Va(e,t,(e=>!e.isLocked)),Ja=(e,t)=>Z(t,(t=>((e,t)=>qa(e,t).exists((e=>!e.isLocked)))(e,t))),Xa=(e,t,n,o)=>{const r=ro(e).rows;let l=!0;for(let i=0;i<r.length;i++)for(let e=0;e<oo(r[0]);e++){const c=r[i],d=to(c,e),m=n(d.element,t);m&&!l?Qn(c,e,ct(o(),!0,d.isLocked)):m&&(l=!1)}return e},Qa=(e,t,n,o)=>{const r=ro(e).rows;if(t>0&&t<r.length){const e=((e,t)=>$(e,((e,n)=>P(e,(e=>t(e.element,n.element)))?e:e.concat([n])),[]))(r[t-1].cells,n);L(e,(e=>{let l=D.none();for(let i=t;i<r.length;i++)for(let t=0;t<oo(r[0]);t++){const c=r[i],d=to(c,t);n(d.element,e.element)&&(l.isNone()&&(l=D.some(o())),l.each((sub=>{Qn(c,t,ct(sub,!0,d.isLocked))})))}}))}return e},el=e=>{const t=t=>t(e),n=x(e),o=()=>output,output={tag:!0,inner:e,fold:(t,n)=>n(e),isValue:O,isError:A,map:t=>nl.value(t(e)),mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:t=>{t(e)},toOptional:()=>D.some(e)};return output},tl=e=>{const t=()=>output,output={tag:!1,inner:e,fold:(t,n)=>t(e),isValue:A,isError:O,map:t,mapError:t=>nl.error(t(e)),bind:t,exists:A,forall:O,getOr:S,or:S,getOrThunk:_,orThunk:_,getOrDie:(n=String(e),()=>{throw new Error(n)}),each:w,toOptional:D.none};var n;return output},nl={value:el,error:tl,fromOption:(e,t)=>e.fold((()=>tl(t)),el)},rl=(e,t)=>({rowDelta:0,colDelta:oo(e[0])-oo(t[0])}),sl=(e,t)=>({rowDelta:e.length-t.length,colDelta:0}),al=(e,t,n,o)=>{const r="colgroup"===t.section?n.col:n.cell;return F(e,(e=>ct(r(),!0,o(e))))},ll=(e,t,n,o)=>{const r=e[e.length-1];return e.concat(F(t,(()=>{const e="colgroup"===r.section?n.colgroup:n.row,t=so(r,e,S),l=al(t.cells.length,t,n,(e=>se(o,e.toString())));return eo(t,l)})))},il=(e,t,n,o)=>I(e,(e=>{const r=al(t,e,n,A);return Jn(e,o,r)})),cl=(e,t,n)=>{const o=t.colDelta<0?il:S,r=t.rowDelta<0?ll:S,l=io(e),c=oo(e[0]),d=P(l,(e=>e===c-1)),m=o(e,Math.abs(t.colDelta),n,d?c-1:c),h=io(m);return r(m,Math.abs(t.rowDelta),n,K(h,O))},ml=(e,t,col,n)=>{const o=k(n,to(e[t],col).element),r=e[t];return e.length>1&&oo(r)>1&&(col>0&&o(no(r,col-1))||col<r.cells.length-1&&o(no(r,col+1))||t>0&&o(no(e[t-1],col))||t<e.length-1&&o(no(e[t+1],col)))},gl=(e,t,n)=>j(n,(n=>n>=e.column&&n<=oo(t[0])+e.column)),pl=(e,t,n,o,r)=>{const l=io(t),c=((e,t,n)=>{const o=oo(t[0]),r=ro(t).cols.length+e.row,l=F(o-e.column,(t=>t+e.column)),c=U(l,(e=>Z(n,(col=>col!==e)))).getOr(o-1);return{row:r,column:c}})(e,t,l),d=ro(n).rows,m=gl(c,d,l),h=((e,t,n)=>{if(e.row>=t.length||e.column>oo(t[0]))return nl.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);const o=t.slice(e.row),r=o[0].cells.slice(e.column),l=oo(n[0]),c=n.length;return nl.value({rowDelta:o.length-c,colDelta:r.length-l})})(c,t,d);return h.map((e=>{const n={...e,colDelta:e.colDelta-m.length},l=cl(t,n,o),h=io(l),f=gl(c,d,h);return((e,t,n,o,r,l)=>{const c=e.row,d=e.column,m=c+n.length,h=d+oo(n[0])+l.length,f=K(l,O);for(let e=c;e<m;e++){let l=0;for(let m=d;m<h;m++){if(f[m]){l++;continue}ml(t,e,m,r)&&Xa(t,no(t[e],m),r,o.cell);const h=m-d-l,y=to(n[e-c],h),v=y.element,w=o.replace(v);Qn(t[e],m,ct(w,!0,y.isLocked))}}return t})(c,l,d,o,r,f)}))},hl=(e,t,n,o,r)=>{((e,t,n,o)=>{t>0&&t<e[0].cells.length&&L(e,(e=>{const r=e.cells[t-1];let l=0;const c=o();for(;e.cells.length>t+l&&n(r.element,e.cells[t+l].element);)Qn(e,t+l,ct(c,!0,e.cells[t+l].isLocked)),l++}))})(t,e,r,o.cell);const l=sl(n,t),c=cl(n,l,o),d=sl(t,c),m=cl(t,d,o);return I(m,((t,i)=>Jn(t,e,c[i].cells)))},fl=(e,t,n,o,r)=>{Qa(t,e,r,o.cell);const l=io(t),c=rl(t,n),d={...c,colDelta:c.colDelta-l.length},m=cl(t,d,o),{cols:h,rows:f}=ro(m),y=io(m),v=rl(n,t),w={...v,colDelta:v.colDelta+y.length},x=((e,t,n)=>I(e,(e=>$(n,((n,o)=>{const r=al(1,e,t,O)[0];return Xn(n,o,r)}),e))))(n,o,y),S=cl(x,w,o);return[...h,...f.slice(0,e),...S,...f.slice(e,f.length)]},bl=(e,t,n,o,r)=>{const{rows:l,cols:c}=ro(e),d=l.slice(0,t),m=l.slice(t),h=((e,t,n,o)=>so(e,(e=>o(e,n)),t))(l[n],((e,n)=>t>0&&t<l.length&&o(no(l[t-1],n),no(l[t],n))?to(l[t],n):ct(r(e.element,o),!0,e.isLocked)),o,r);return[...c,...d,h,...m]},yl=(e,t,n,o,r)=>I(e,(e=>{const l=t>0&&t<oo(e)&&o(no(e,t-1),no(e,t)),sub=((e,t,section,n,o,r,l)=>{if("colgroup"!==section&&n)return to(e,t);{const t=to(e,o);return ct(l(t.element,r),!0,!1)}})(e,t,e.section,l,n,o,r);return Xn(e,t,sub)})),vl=(e,t,n,o)=>((e,t,n,o)=>void 0!==no(e[t],n)&&t>0&&o(no(e[t-1],n),no(e[t],n)))(e,t,n,o)||((e,t,n)=>t>0&&n(no(e,t-1),no(e,t)))(e[t],n,o),wl=(e,t,n,o)=>{const r=e=>(e=>"row"===e?Jt(t):Yt(t))(e)?`${e}group`:e;if(e)return Ca(t)?r(n):null;if(o&&Ca(t)){return r("row"===n?"col":"row")}return null},xl=(e,t,n)=>ct(n(e.element,t),!0,e.isLocked),Sl=(e,t,n,o,r,l,c)=>I(e,((e,d)=>((e,t)=>{const n=e.cells,o=I(n,t);return ut(e.element,o,e.section,e.isNew)})(e,((e,m)=>{if((e=>P(t,(t=>n(e.element,t.element))))(e)){const t=c(e,d,m)?r(e,n,o):e;return l(t,d,m).each((e=>{var element,n;element=t.element,n={scope:D.from(e)},ee(n,((e,t)=>{e.fold((()=>{_e(element,t)}),(e=>{xe(element.dom,t,e)}))}))})),t}return e})))),Cl=(e,t,n)=>V(e,((o,i)=>vl(e,i,t,n)?[]:[to(o,t)])),kl=(e,t,n,o,r)=>{const l=ro(e).rows,c=V(t,(e=>Cl(l,e,o))),d=I(l,(e=>ka(e.cells))),m=((e,t)=>Z(t,S)&&ka(e)?O:(e,n,o)=>!("th"===de(e.element)&&t[n]))(c,d),h=((e,t)=>(n,o)=>D.some(wl(e,n.element,"row",t[o])))(n,d);return Sl(e,c,o,r,xl,h,m)},Tl=(e,t,section,n,o,r,l)=>{const{cols:c,rows:d}=ro(e),m=d[t[0]],h=V(t,(e=>((e,t,n)=>{const o=e[t];return V(o.cells,((o,i)=>vl(e,t,i,n)?[]:[o]))})(d,e,o))),f=I(m.cells,((e,t)=>ka(Cl(d,t,o)))),y=[...d];L(t,(e=>{y[e]=l.transformRow(d[e],section)}));const v=[...c,...y],w=((e,t)=>Z(t,S)&&ka(e.cells)?O:(e,n,o)=>!("th"===de(e.element)&&t[o]))(m,f),x=((e,t)=>(n,o,r)=>D.some(wl(e,n.element,"col",t[r])))(n,f);return Sl(v,h,o,r,l.transformCell,x,w)},_l=(e,details,t,n)=>{const o=ro(e).rows,r=I(details,(e=>to(o[e.row],e.column)));return Sl(e,r,t,n,xl,D.none,O)},Al=e=>{if(!c(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return L(e,((o,r)=>{const l=X(o);if(1!==l.length)throw new Error("one and only one name per case");const d=l[0],m=o[d];if(void 0!==n[d])throw new Error("duplicate key detected:"+d);if("cata"===d)throw new Error("cannot have a case named cata (sorry)");if(!c(m))throw new Error("case arguments must be an array");t.push(d),n[d]=(...n)=>{const o=n.length;if(o!==m.length)throw new Error("Wrong number of arguments to case "+d+". Expected "+m.length+" ("+m+"), got "+o);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[r].apply(null,n)},match:e=>{const o=X(e);if(t.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+o.join(","));if(!Z(t,(e=>M(o,e))))throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+t.join(", "));return e[d].apply(null,n)},log:label=>{console.log(label,{constructors:t,constructor:d,params:n})}}}})),n},Ol={...Al([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},Dl=(input,e,t,n,o)=>{const r=input.slice(0),l=((input,e)=>0===input.length?Ol.none():1===input.length?Ol.only(0):0===e?Ol.left(0,1):e===input.length-1?Ol.right(e-1,e):e>0&&e<input.length-1?Ol.middle(e-1,e,e+1):Ol.none())(input,e),c=x(I(r,x(0)));return l.fold(c,(e=>n.singleColumnWidth(r[e],t)),((e,l)=>o.calcLeftEdgeDeltas(r,e,l,t,n.minCellWidth(),n.isRelative)),((e,l,c)=>o.calcMiddleDeltas(r,e,l,c,t,n.minCellWidth(),n.isRelative)),((e,l)=>o.calcRightEdgeDeltas(r,e,l,t,n.minCellWidth(),n.isRelative)))},El=(e,t,n)=>{let o=0;for(let i=e;i<t;i++)o+=void 0!==n[i]?n[i]:0;return o},Nl=(e,t)=>{const n=go.justCells(e);return I(n,(e=>{const n=El(e.row,e.row+e.rowspan,t);return{element:e.element,height:n,rowspan:e.rowspan}}))},Rl=(e,t)=>go.hasColumns(e)?((e,t)=>{const n=go.justColumns(e);return I(n,((e,n)=>({element:e.element,width:t[n],colspan:e.colspan})))})(e,t):((e,t)=>{const n=go.justCells(e);return I(n,(e=>{const n=El(e.column,e.column+e.colspan,t);return{element:e.element,width:n,colspan:e.colspan}}))})(e,t),Ml=(e,t,n)=>{const o=Rl(e,t);L(o,(e=>{n.setElementWidth(e.element,e.width)}))},Pl=(table,e,t,n,o)=>{const r=go.fromTable(table),l=o.getCellDelta(e),c=o.getWidths(r,o),d=t===r.grid.columns-1,m=n.clampTableDelta(c,t,l,o.minCellWidth(),d),h=Dl(c,t,m,o,n),f=I(h,((e,i)=>e+c[i]));Ml(r,f,o),n.resizeTable(o.adjustTableWidth,m,d)},Fl=(table,e,t,n)=>{const o=go.fromTable(table),r=((e,table,t)=>fr(e,table,t,rr,(e=>e.getOrThunk(en))))(o,table,n),l=I(r,((n,i)=>t===i?Math.max(e+n,en()):n)),c=Nl(o,l),d=((e,t)=>I(e.all,((e,i)=>({element:e.element,height:t[i]}))))(o,l);L(d,(e=>{Yo(e.element,e.height)})),L(c,(e=>{Yo(e.element,e.height)}));const m=z(l,((b,a)=>b+a),0);Yo(table,m)},Il=details=>$(details,((e,t)=>P(e,(e=>e.column===t.column))?e:e.concat([t])),[]).sort(((e,t)=>e.column-t.column)),Ll=we("col"),Bl=we("colgroup"),jl=element=>"tr"===de(element)||Bl(element),zl=element=>({element:element,colspan:Kt(element,"colspan",1),rowspan:Kt(element,"rowspan",1)}),$l=e=>Te(e,"scope").map((e=>e.substr(0,3))),Ul=(e,t=zl)=>{const n=element=>{if(jl(element))return Bl((data={element:element}).element)?e.colgroup(data):e.row(data);{const n=element,r=(data=>Ll(data.element)?e.col(data):e.cell(data))(t(n));return o=D.some({item:n,replacement:r}),r}var data};let o=D.none();return{getOrInit:(element,e)=>o.fold((()=>n(element)),(p=>e(element,p.item)?p.replacement:n(element)))}},Hl=e=>t=>{const n=[],o=element=>{const o="td"===e?{scope:null}:{},r=t.replace(element,e,o);return n.push({item:element,sub:r}),r};return{replaceOrInit:(element,e)=>{if(jl(element)||Ll(element))return element;{const t=element;return((element,e)=>U(n,(t=>e(t.item,element))))(t,e).fold((()=>o(t)),(p=>e(element,p.item)?p.sub:o(t)))}}}},Wl=e=>({unmerge:t=>{const n=$l(t);return n.each((e=>Se(t,"scope",e))),()=>{const o=e.cell({element:t,colspan:1,rowspan:1});return Zt(o,"width"),Zt(t,"width"),n.each((e=>Se(o,"scope",e))),o}},merge:e=>(Zt(e[0],"width"),(()=>{const t=Rt(I(e,$l));if(0===t.length)return D.none();{const e=t[0],n=["row","col"];return P(t,(t=>t!==e&&M(n,t)))?D.none():D.from(e)}})().fold((()=>_e(e[0],"scope")),(t=>Se(e[0],"scope",t+"group"))),x(e[0]))}),ql=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Vl=Es(),Zl=element=>((e,t)=>{const n=e.property().name(t);return M(ql,n)})(Vl,element),Kl=element=>((e,t)=>{const n=e.property().name(t);return M(["ol","ul"],n)})(Vl,element),Gl=element=>((e,t)=>M(["br","img","hr","input"],e.property().name(t)))(Vl,element),Yl=e=>{const t=we("br"),n=e=>Fr(e).bind((n=>{const o=Ue(n).map((e=>!!Zl(e)||!!Gl(e)&&"img"!==de(e))).getOr(!1);return Be(n).map((r=>!0===o||(e=>"li"===de(e)||Tt(e,Kl).isSome())(r)||t(n)||Zl(r)&&!Me(e,r)?[]:[De.fromTag("br")]))})).getOr([]),o=(()=>{const content=V(e,(e=>{const o=He(e);return(e=>Z(e,(e=>t(e)||be(e)&&0===Or(e).trim().length)))(o)?[]:o.concat(n(e))}));return 0===content.length?[De.fromTag("br")]:content})();Xe(e[0]),Je(e[0],o)},Jl=e=>us(e,!0),Xl=table=>{0===rn(table).length&&Qe(table)},Ql=(e,cursor)=>({grid:e,cursor:cursor}),ei=(e,t,n)=>{var o,r;const l=ro(e).rows;return D.from(null===(r=null===(o=l[t])||void 0===o?void 0:o.cells[n])||void 0===r?void 0:r.element).filter(Jl).orThunk((()=>(e=>J(e,(e=>J(e.cells,(e=>{const t=e.element;return Mt(Jl(t),t)})))))(l)))},ti=(e,t,n)=>{const o=ei(e,t,n);return Ql(e,o)},ni=details=>$(details,((e,t)=>P(e,(e=>e.row===t.row))?e:e.concat([t])),[]).sort(((e,t)=>e.row-t.row)),oi=(section,e)=>(t,details,n,o,r)=>{const l=ni(details),c=I(l,(e=>e.row)),d=Tl(t,c,section,e,n,o.replaceOrInit,r);return ti(d,details[0].row,details[0].column)},ri=oi("thead",!0),si=oi("tbody",!1),ai=oi("tfoot",!1),ii=(e,t,n)=>{const o=((e,section)=>cn(e,(()=>section)))(e,n.section),r=go.generate(o);return Ha(r,t,!0)},ci=(table,e,details,t)=>((e,t,n,o)=>{const r=go.generate(t),l=o.getWidths(r,o);Ml(r,l,o)})(0,e,0,t.sizing),ui=(table,e,details,t)=>((e,t,details,n,o)=>{const r=go.generate(t),l=n.getWidths(r,n),c=n.pixelWidth(),{newSizes:d,delta:m}=o.calcRedestributedWidths(l,c,details.pixelDelta,n.isRelative);Ml(r,d,n),n.adjustTableWidth(m)})(0,e,details,t.sizing,t.resize),di=(e,details)=>P(details,(e=>0===e.column&&e.isLocked)),mi=(e,details)=>P(details,(t=>t.column+t.colspan>=e.grid.columns&&t.isLocked)),gi=(e,details)=>{const t=po(e),n=Il(details);return $(n,((e,n)=>e+t[n.column].map(Kn).getOr(0)),0)},pi=e=>(t,n)=>Ga(t,n).filter((details=>!(e?di:mi)(t,details))).map((details=>({details:details,pixelDelta:gi(t,details)}))),hi=e=>(t,n)=>Ka(t,n).filter((details=>!(e?di:mi)(t,details.cells))),fi=Hl("th"),bi=Hl("td"),yi=Za(((e,details,t,n)=>{const o=details[0].row,r=ni(details),l=z(r,((e,r)=>({grid:bl(e.grid,o,r.row+e.delta,t,n.getOrInit),delta:e.delta+1})),{grid:e,delta:0}).grid;return ti(l,o,details[0].column)}),Ga,w,w,Ul),vi=Za(((e,details,t,n)=>{const o=ni(details),r=o[o.length-1],l=r.row+r.rowspan,c=z(o,((e,o)=>bl(e,l,o.row,t,n.getOrInit)),e);return ti(c,l,details[0].column)}),Ga,w,w,Ul),wi=Za(((e,t,n,o)=>{const details=t.details,r=Il(details),l=r[0].column,c=z(r,((e,col)=>({grid:yl(e.grid,l,col.column+e.delta,n,o.getOrInit),delta:e.delta+1})),{grid:e,delta:0}).grid;return ti(c,details[0].row,l)}),pi(!0),ui,w,Ul),xi=Za(((e,t,n,o)=>{const details=t.details,r=details[details.length-1],l=r.column+r.colspan,c=Il(details),d=z(c,((e,col)=>yl(e,l,col.column,n,o.getOrInit)),e);return ti(d,details[0].row,l)}),pi(!1),ui,w,Ul),Si=Za(((e,t,n,o)=>{const r=Il(t.details),l=((e,t)=>V(e,(e=>{const n=e.cells,o=z(t,((e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e),n);return o.length>0?[ut(e.element,o,e.section,e.isNew)]:[]})))(e,I(r,(e=>e.column))),c=l.length>0?l[0].cells.length-1:0;return ti(l,r[0].row,Math.min(r[0].column,c))}),((e,t)=>Ya(e,t).map((details=>({details:details,pixelDelta:-gi(e,details)})))),ui,Xl,Ul),Ci=Za(((e,details,t,n)=>{const o=ni(details),r=((e,t,n)=>{const{rows:o,cols:r}=ro(e);return[...r,...o.slice(0,t),...o.slice(n+1)]})(e,o[0].row,o[o.length-1].row),l=r.length>0?r.length-1:0;return ti(r,Math.min(details[0].row,l),details[0].column)}),Ga,w,Xl,Ul),ki=Za(((e,details,t,n)=>{const o=Il(details),r=I(o,(e=>e.column)),l=kl(e,r,!0,t,n.replaceOrInit);return ti(l,details[0].row,details[0].column)}),Ya,w,w,fi),Ti=Za(((e,details,t,n)=>{const o=Il(details),r=I(o,(e=>e.column)),l=kl(e,r,!1,t,n.replaceOrInit);return ti(l,details[0].row,details[0].column)}),Ya,w,w,bi),_i=Za(ri,Ya,w,w,fi),Ai=Za(si,Ya,w,w,bi),Oi=Za(ai,Ya,w,w,bi),Di=Za(((e,details,t,n)=>{const o=_l(e,details,t,n.replaceOrInit);return ti(o,details[0].row,details[0].column)}),Ya,w,w,fi),Ei=Za(((e,details,t,n)=>{const o=_l(e,details,t,n.replaceOrInit);return ti(o,details[0].row,details[0].column)}),Ya,w,w,bi),Ni=Za(((e,t,n,o)=>{const r=t.cells;Yl(r);const l=((e,t,n,o)=>{const r=ro(e).rows;if(0===r.length)return e;for(let i=t.startRow;i<=t.finishRow;i++)for(let e=t.startCol;e<=t.finishCol;e++){const t=r[i],n=to(t,e).isLocked;Qn(t,e,ct(o(),!1,n))}return e})(e,t.bounds,0,o.merge(r));return Ql(l,D.from(r[0]))}),((e,t)=>((e,t)=>t.mergable)(0,t).filter((t=>Ja(e,t.cells)))),ci,w,Wl),Ri=Za(((e,t,n,o)=>{const r=z(t,((b,e)=>Xa(b,e,n,o.unmerge(e))),e);return Ql(r,D.from(t[0]))}),((e,t)=>((e,t)=>t.unmergable)(0,t).filter((t=>Ja(e,t)))),ci,w,Wl),Mi=Za(((e,t,n,o)=>{const r=((table,e)=>{const t=go.fromTable(table);return Ha(t,e,!0)})(t.clipboard,t.generators),l=((e,t)=>({row:e,column:t}))(t.row,t.column);return pl(l,e,r,t.generators,n).fold((()=>Ql(e,D.some(t.element))),(e=>ti(e,t.row,t.column)))}),((e,t)=>on(t.element).bind((n=>qa(e,n).map((details=>({...details,generators:t.generators,clipboard:t.clipboard})))))),ci,w,Ul),Pi=Za(((e,t,n,o)=>{const r=ro(e).rows,l=t.cells[0].column,c=r[t.cells[0].row],d=ii(t.clipboard,t.generators,c),m=hl(l,e,d,t.generators,n);return ti(m,t.cells[0].row,t.cells[0].column)}),hi(!0),w,w,Ul),Fi=Za(((e,t,n,o)=>{const r=ro(e).rows,l=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,c=r[t.cells[0].row],d=ii(t.clipboard,t.generators,c),m=hl(l,e,d,t.generators,n);return ti(m,t.cells[0].row,t.cells[0].column)}),hi(!1),w,w,Ul),Ii=Za(((e,t,n,o)=>{const r=ro(e).rows,l=t.cells[0].row,c=r[l],d=ii(t.clipboard,t.generators,c),m=fl(l,e,d,t.generators,n);return ti(m,t.cells[0].row,t.cells[0].column)}),Ka,w,w,Ul),Li=Za(((e,t,n,o)=>{const r=ro(e).rows,l=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,c=r[t.cells[0].row],d=ii(t.clipboard,t.generators,c),m=fl(l,e,d,t.generators,n);return ti(m,t.cells[0].row,t.cells[0].column)}),Ka,w,w,Ul),Bi=(table,e)=>{const t=go.fromTable(table);return Ga(t,e).bind((e=>{const n=e[e.length-1],o=e[0].column,r=n.column+n.colspan,l=W(I(t.all,(e=>j(e.cells,(e=>e.column>=o&&e.column<r)))));return Aa(l)})).getOr("")},ji=(table,e)=>{const t=go.fromTable(table);return Ga(t,e).bind(Aa).getOr("")},zi=(table,e)=>{const t=go.fromTable(table);return Ga(t,e).bind((e=>{const n=e[e.length-1],o=e[0].row,r=n.row+n.rowspan;return(e=>{const t=I(e,(e=>_a(e).type)),n=M(t,"header"),o=M(t,"footer");if(n||o){const e=M(t,"body");return!n||e||o?n||e||!o?D.none():D.some("footer"):D.some("header")}return D.some("body")})(t.all.slice(o,r))})).getOr("")},$i=(e,t)=>e.dispatch("NewRow",{node:t}),Ui=(e,t)=>e.dispatch("NewCell",{node:t}),Hi=(e,table,data)=>{e.dispatch("TableModified",{...data,table:table})},Wi={structure:!1,style:!0},qi={structure:!0,style:!1},Vi={structure:!0,style:!0},Zi=(e,table)=>es(e)?kr(table):ts(e)?Cr(table):Sr(table),Ki=(e,t,n)=>{const o=e=>"table"===de(ms(e)),r=Kr(e),l=Xr(e)?w:pa,c=table=>{switch(Gr(e)){case"section":return Ma();case"sectionCells":return Pa();case"cells":return Fa();default:return Ra(table,"section")}},d=(table,t)=>t.cursor.fold((()=>{const t=rn(table);return head(t).filter(yt).map((t=>{n.clearSelectedCells(table.dom);const o=e.dom.createRng();return o.selectNode(t.dom),e.selection.setRng(o),Se(t,"data-mce-selected","1"),o}))}),(t=>{const o=ma(ga,t);const r=e.dom.createRng();return r.setStart(o.element.dom,o.offset),r.setEnd(o.element.dom,o.offset),e.selection.setRng(r),n.clearSelectedCells(table.dom),D.some(r)})),m=(n,o,l,m)=>(table,h,f=!1)=>{ps(table);const y=De.fromDom(e.getDoc()),v=Wr(l,y,r),w={sizing:Zi(e,table),resize:Xr(e)?wa():xa(),section:c(table)};return o(table)?n(table,h,v,w).bind((n=>{t.refresh(table.dom),L(n.newRows,(t=>{$i(e,t.dom)})),L(n.newCells,(t=>{Ui(e,t.dom)}));const o=d(table,n);return yt(table)&&(ps(table),f||Hi(e,table.dom,m)),o.map((e=>({rng:e,effect:m})))})):D.none()},h=m(Ci,(table=>!o(e)||Sa(table).rows>1),w,qi),f=m(Si,(table=>!o(e)||Sa(table).columns>1),w,qi);return{deleteRow:h,deleteColumn:f,insertRowsBefore:m(yi,O,w,qi),insertRowsAfter:m(vi,O,w,qi),insertColumnsBefore:m(wi,O,l,qi),insertColumnsAfter:m(xi,O,l,qi),mergeCells:m(Ni,O,w,qi),unmergeCells:m(Ri,O,w,qi),pasteColsBefore:m(Pi,O,w,qi),pasteColsAfter:m(Fi,O,w,qi),pasteRowsBefore:m(Ii,O,w,qi),pasteRowsAfter:m(Li,O,w,qi),pasteCells:m(Mi,O,w,Vi),makeCellsHeader:m(Di,O,w,qi),unmakeCellsHeader:m(Ei,O,w,qi),makeColumnsHeader:m(ki,O,w,qi),unmakeColumnsHeader:m(Ti,O,w,qi),makeRowsHeader:m(_i,O,w,qi),makeRowsBody:m(Ai,O,w,qi),makeRowsFooter:m(Oi,O,w,qi),getTableRowType:zi,getTableCellType:ji,getTableColType:Bi}},Gi=(element,e,t)=>{const n=Kt(element,e,1);1===t||n<=1?_e(element,e):Se(element,e,Math.min(t,n))},Yi=(e,t)=>n=>{const o=n.column+n.colspan-1,r=n.column;return o>=e&&r<t},Ji=(table,e)=>{const t=go.fromTable(table);return Ya(t,e).map((e=>{const n=e[e.length-1],o=e[0].column,r=n.column+n.colspan,l=((e,t,n)=>{if(go.hasColumns(e)){const o=j(go.justColumns(e),Yi(t,n)),r=I(o,(e=>{const o=ot(e.element);return Gi(o,"span",n-t),o})),l=De.fromTag("colgroup");return Je(l,r),[l]}return[]})(t,o,r),c=((e,t,n)=>I(e.all,(e=>{const o=j(e.cells,Yi(t,n)),r=I(o,(e=>{const o=ot(e.element);return Gi(o,"colspan",n-t),o})),l=De.fromTag("tr");return Je(l,r),l})))(t,o,r);return[...l,...c]}))},Xi=(table,e,t)=>{const n=go.fromTable(table);return Ga(n,e).bind((e=>{const o=Ha(n,t,!1),r=ro(o).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),l=V(r,(e=>{const t=j(e.cells,(e=>!e.isLocked));return t.length>0?[{...e,cells:t}]:[]})),c=Wa(l);return Mt(c.length>0,c)})).map((e=>(e=>I(e,(e=>{const tr=nt(e.element);return L(e.cells,(e=>{const t=ot(e.element);La(t,"colspan",e.colspan,1),La(t,"rowspan",e.rowspan,1),Ke(tr,t)})),tr})))(e)))},Qi=Al([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),ec=(e,t,n)=>{const o=n.substring(0,n.length-e.length),r=parseFloat(o);return o===r.toString()?t(r):Qi.invalid(n)},tc={...Qi,from:e=>Lt(e,"%")?ec("%",Qi.percent,e):Lt(e,"px")?ec("px",Qi.pixels,e):Qi.invalid(e)},nc=(e,t,n)=>e.fold((()=>t),(e=>((e,t,n)=>{const o=n/t;return I(e,(e=>tc.from(e).fold((()=>e),(e=>e*o+"px"),(e=>e/100*n+"px"))))})(t,n,e)),(e=>((e,t)=>I(e,(e=>tc.from(e).fold((()=>e),(e=>e/t*100+"%"),(e=>e+"%")))))(t,n))),oc=(e,t,n)=>{const o=tc.from(n),r=Z(e,(s=>"0px"===s))?((e,t)=>{const n=e.fold((()=>x("")),(e=>x(e/t+"px")),(()=>x(100/t+"%")));return F(t,n)})(o,e.length):nc(o,e,t);return ac(r)},rc=(e,t)=>0===e.length?t:z(e,((e,t)=>tc.from(t).fold(x(0),S,S)+e),0),sc=(e,t)=>tc.from(e).fold(x(e),(e=>e+t+"px"),(e=>e+t+"%")),ac=e=>{if(0===e.length)return e;const t=z(e,((e,t)=>{const n=tc.from(t).fold((()=>({value:t,remainder:0})),(e=>((e,t)=>{const n=Math.floor(e);return{value:n+t,remainder:e-n}})(e,"px")),(e=>({value:e+"%",remainder:0})));return{output:[n.value].concat(e.output),remainder:e.remainder+n.remainder}}),{output:[],remainder:0}),n=t.output;return n.slice(0,n.length-1).concat([sc(n[n.length-1],Math.round(t.remainder))])},lc=tc.from,ic=e=>lc(e).fold(x("px"),x("px"),x("%")),cc=(table,e,t)=>{const n=go.fromTable(table),o=n.all,r=go.justCells(n),l=go.justColumns(n);e.each((e=>{const t=ic(e),o=Zn(table),c=((e,table)=>mr(e,table,cr,gr))(n,table),d=oc(c,o,e);go.hasColumns(n)?((e,t,n)=>{L(t,((t,o)=>{const r=rc([e[o]],Qt());Ut(t.element,"width",r+n)}))})(d,l,t):((e,t,n)=>{L(t,(t=>{const o=e.slice(t.column,t.colspan+t.column),r=rc(o,Qt());Ut(t.element,"width",r+n)}))})(d,r,t),Ut(table,"width",e)})),t.each((e=>{const t=ic(e),l=xo(table),c=((e,table,t)=>fr(e,table,t,ur,gr))(n,table,jo);((e,t,n,o)=>{L(n,(t=>{const n=e.slice(t.row,t.rowspan+t.row),r=rc(n,en());Ut(t.element,"height",r+o)})),L(t,((t,i)=>{Ut(t.element,"height",e[i])}))})(oc(c,l,e),o,r,t),Ut(table,"height",e)}))},uc=table=>er(table).exists((e=>Wo.test(e))),dc=table=>er(table).exists((e=>qo.test(e))),mc=table=>er(table).isNone(),gc=element=>{_e(element,"width")},pc=table=>{const e=ar(table);cc(table,D.some(e),D.none()),gc(table)},hc=table=>{const e=(table=>Zn(table)+"px")(table);cc(table,D.some(e),D.none()),gc(table)},fc=table=>{Zt(table,"width");const e=sn(table),t=e.length>0?e:rn(table);L(t,(e=>{Zt(e,"width"),gc(e)})),gc(table)},bc={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},yc=e=>{const t=De.fromTag("colgroup");return F(e,(()=>Ke(t,De.fromTag("col")))),t},vc=(e,t,n,o)=>F(e,(e=>((e,t,n,o)=>{const tr=De.fromTag("tr");for(let r=0;r<e;r++){const td=o<t||r<n?De.fromTag("th"):De.fromTag("td");r<n&&Se(td,"scope","row"),o<t&&Se(td,"scope","col"),Ke(td,De.fromTag("br")),Ke(tr,td)}return tr})(t,n,o,e))),wc=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},xc=(e,t,n,o,l)=>{const c=ls(e),d={styles:c,attributes:as(e),colGroups:is(e)};return e.undoManager.ignore((()=>{const table=((e,t,n,o,r,l=bc)=>{const table=De.fromTag("table"),c="cells"!==r;Ht(table,l.styles),Ce(table,l.attributes),l.colGroups&&Ke(table,yc(t));const d=Math.min(e,n);if(c&&n>0){const thead=De.fromTag("thead");Ke(table,thead);const e=vc(n,t,"sectionCells"===r?d:0,o);Je(thead,e)}const tbody=De.fromTag("tbody");Ke(table,tbody);const m=vc(c?e-d:e,t,c?0:n,o);return Je(tbody,m),table})(n,t,l,o,Gr(e),d);Se(table,"data-mce-id","__mce");const html=(element=>{const e=De.fromTag("div"),t=De.fromDom(element.dom.cloneNode(!0));return Ke(e,t),(element=>element.dom.innerHTML)(e)})(table);e.insertContent(html),e.addVisual()})),Dt(ms(e),'table[data-mce-id="__mce"]').map((table=>(ts(e)?hc(table):ns(e)?fc(table):(es(e)||(e=>r(e)&&-1!==e.indexOf("%"))(c.width))&&pc(table),ps(table),_e(table,"data-mce-id"),((e,table)=>{L(Ct(table,"tr"),(t=>{$i(e,t.dom),L(Ct(t,"th,td"),(t=>{Ui(e,t.dom)}))}))})(e,table),((e,t)=>{Dt(t,"td,th").each(k(wc,e))})(e,table),table.dom))).getOrNull()};var Sc=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Cc="x-tinymce/dom-table-",kc=Cc+"rows",Tc=Cc+"columns",_c=e=>{const t=Sc.FakeClipboardItem(e);Sc.write([t])},Ac=e=>{var t;const n=null!==(t=Sc.read())&&void 0!==t?t:[];return J(n,(t=>D.from(t.getType(e))))},Oc=e=>{Ac(e).isSome()&&Sc.clear()},Dc=e=>{e.fold(Nc,(e=>_c({[kc]:e})))},Ec=()=>Ac(kc),Nc=()=>Oc(kc),Rc=e=>{e.fold(Pc,(e=>_c({[Tc]:e})))},Mc=()=>Ac(Tc),Pc=()=>Oc(Tc),Fc=e=>ra(hs(e),gs(e)).filter(ys),Ic=(e,t)=>{const n=gs(e),o=e=>table(e,n),c=t=>(e=>sa(hs(e),gs(e)).filter(ys))(e).bind((e=>o(e).map((table=>t(table,e))))),d=t=>{e.focus()},m=(t,n=!1)=>c(((table,o)=>{const r=na(aa(e),table,o);t(table,r,n).each(d)})),h=()=>c(((table,t)=>{const n=na(aa(e),table,t),o=Wr(w,De.fromDom(e.getDoc()),D.none());return Xi(table,n,o)})),f=()=>c(((table,t)=>{const n=na(aa(e),table,t);return Ji(table,n)})),y=(t,n)=>n().each((n=>{const o=I(n,(e=>ot(e)));c(((table,n)=>{const r=qr(De.fromDom(e.getDoc())),l=((e,t,n,o)=>({selection:Ws(e),clipboard:n,generators:o}))(aa(e),0,o,r);t(table,l).each(d)}))})),x=e=>(t,n)=>((e,t)=>se(e,t)?D.from(e[t]):D.none())(n,"type").each((t=>{m(e(t),n.no_events)}));ee({mceTableSplitCells:()=>m(t.unmergeCells),mceTableMergeCells:()=>m(t.mergeCells),mceTableInsertRowBefore:()=>m(t.insertRowsBefore),mceTableInsertRowAfter:()=>m(t.insertRowsAfter),mceTableInsertColBefore:()=>m(t.insertColumnsBefore),mceTableInsertColAfter:()=>m(t.insertColumnsAfter),mceTableDeleteCol:()=>m(t.deleteColumn),mceTableDeleteRow:()=>m(t.deleteRow),mceTableCutCol:()=>f().each((e=>{Rc(e),m(t.deleteColumn)})),mceTableCutRow:()=>h().each((e=>{Dc(e),m(t.deleteRow)})),mceTableCopyCol:()=>f().each((e=>Rc(e))),mceTableCopyRow:()=>h().each((e=>Dc(e))),mceTablePasteColBefore:()=>y(t.pasteColsBefore,Mc),mceTablePasteColAfter:()=>y(t.pasteColsAfter,Mc),mceTablePasteRowBefore:()=>y(t.pasteRowsBefore,Ec),mceTablePasteRowAfter:()=>y(t.pasteRowsAfter,Ec),mceTableDelete:()=>Fc(e).each((t=>{table(t,n).filter(T(n)).each((table=>{const cursor=De.fromText("");if(Ve(table,cursor),Qe(table),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{const t=e.dom.createRng();t.setStart(cursor.dom,0),t.setEnd(cursor.dom,0),e.selection.setRng(t),e.nodeChanged()}}))})),mceTableCellToggleClass:(t,n)=>{c((table=>{const t=aa(e),o=Z(t,(t=>e.formatter.match("tablecellclass",{value:n},t.dom))),r=o?e.formatter.remove:e.formatter.apply;L(t,(e=>r("tablecellclass",{value:n},e.dom))),Hi(e,table.dom,Wi)}))},mceTableToggleClass:(t,n)=>{c((table=>{e.formatter.toggle("tableclass",{value:n},table.dom),Hi(e,table.dom,Wi)}))},mceTableToggleCaption:()=>{Fc(e).each((t=>{table(t,n).each((table=>{Ot(table,"caption").fold((()=>{const caption=De.fromTag("caption");Ke(caption,De.fromText("Caption")),((e,element,t)=>{We(e,t).fold((()=>{Ke(e,element)}),(e=>{qe(e,element)}))})(table,caption,0),e.selection.setCursorLocation(caption.dom,0)}),(caption=>{we("caption")(t)&&Re("td",table).each((td=>e.selection.setCursorLocation(td.dom,0))),Qe(caption)})),Hi(e,table.dom,qi)}))}))},mceTableSizingMode:(t,o)=>(t=>Fc(e).each((o=>{ns(e)||ts(e)||es(e)||table(o,n).each((table=>{"relative"!==t||uc(table)?"fixed"!==t||dc(table)?"responsive"!==t||mc(table)||fc(table):hc(table):pc(table),ps(table),Hi(e,table.dom,qi)}))})))(o),mceTableCellType:x((e=>"th"===e?t.makeCellsHeader:t.unmakeCellsHeader)),mceTableColType:x((e=>"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader)),mceTableRowType:x((e=>{switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}}))},((t,n)=>e.addCommand(n,t))),e.addCommand("mceInsertTable",((t,n)=>{((e,t,n,o={})=>{const r=e=>v(e)&&e>0;if(r(t)&&r(n)){const r=o.headerRows||0,l=o.headerColumns||0;return xc(e,n,t,l,r)}console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table.")})(e,n.rows,n.columns,n.options)})),e.addCommand("mceTableApplyCellStyle",((t,n)=>{const c=style=>"tablecell"+style.toLowerCase().replace("-","");if(!l(n))return;const d=j(aa(e),ys);if(0===d.length)return;const m=ne(n,((t,style)=>e.formatter.has(c(style))&&r(t)));(e=>{for(const t in e)if(Q.call(e,t))return!1;return!0})(m)||(ee(m,((t,style)=>{const n=c(style);L(d,(o=>{""===t?e.formatter.remove(n,{value:null},o.dom,!0):e.formatter.apply(n,{value:t},o.dom)}))})),o(d[0]).each((table=>Hi(e,table.dom,Wi))))}))},Lc=Al([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Bc={before:Lc.before,on:Lc.on,after:Lc.after,cata:(e,t,n,o)=>e.fold(t,n,o),getStart:e=>e.fold(S,S,S)},jc=(e,t)=>({selection:e,kill:t}),zc=(e,element)=>{const t=e.document.createRange();return t.selectNode(element.dom),t},$c=(e,element)=>{const t=e.document.createRange();return Uc(t,element),t},Uc=(e,element)=>e.selectNodeContents(element.dom),Hc=(e,t,n)=>{const o=e.document.createRange();var r;return r=o,t.fold((e=>{r.setStartBefore(e.dom)}),((e,t)=>{r.setStart(e.dom,t)}),(e=>{r.setStartAfter(e.dom)})),((e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,n)=>{e.setEnd(t.dom,n)}),(t=>{e.setEndAfter(t.dom)}))})(o,n),o},Wc=(e,t,n,o,r)=>{const l=e.document.createRange();return l.setStart(t.dom,n),l.setEnd(o.dom,r),l},qc=rect=>({left:rect.left,top:rect.top,right:rect.right,bottom:rect.bottom,width:rect.width,height:rect.height}),Vc=Al([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Zc=(e,t,n)=>t(De.fromDom(n.startContainer),n.startOffset,De.fromDom(n.endContainer),n.endOffset),Kc=(e,t)=>{const n=((e,t)=>t.match({domRange:e=>({ltr:x(e),rtl:D.none}),relative:(t,n)=>({ltr:mn((()=>Hc(e,t,n))),rtl:mn((()=>D.some(Hc(e,n,t))))}),exact:(t,n,o,r)=>({ltr:mn((()=>Wc(e,t,n,o,r))),rtl:mn((()=>D.some(Wc(e,o,r,t,n))))})}))(e,t);return((e,t)=>{const n=t.ltr();if(n.collapsed)return t.rtl().filter((e=>!1===e.collapsed)).map((e=>Vc.rtl(De.fromDom(e.endContainer),e.endOffset,De.fromDom(e.startContainer),e.startOffset))).getOrThunk((()=>Zc(0,Vc.ltr,n)));return Zc(0,Vc.ltr,n)})(0,n)},Gc=(e,t)=>Kc(e,t).match({ltr:(t,n,o,r)=>{const l=e.document.createRange();return l.setStart(t.dom,n),l.setEnd(o.dom,r),l},rtl:(t,n,o,r)=>{const l=e.document.createRange();return l.setStart(o.dom,r),l.setEnd(t.dom,n),l}});Vc.ltr,Vc.rtl;const Yc=(e,t,n,o)=>({start:e,soffset:t,finish:n,foffset:o}),Jc=(e,t,n,o)=>({start:Bc.on(e,t),finish:Bc.on(n,o)}),Xc=(e,t)=>{const n=Gc(e,t);return Yc(De.fromDom(n.startContainer),n.startOffset,De.fromDom(n.endContainer),n.endOffset)},Qc=Jc,eu=(e,t,n,o,r)=>Me(n,o)?D.none():Bs(n,o,t).bind((t=>{const o=t.boxes.getOr([]);return o.length>1?(r(e,o,t.start,t.finish),D.some(jc(D.some(Qc(n,0,n,Nr(n))),!0))):D.none()})),tu=(e,t)=>({item:e,mode:t}),nu=(e,t,n,o=ou)=>e.property().parent(t).map((p=>tu(p,o))),ou=(e,t,n,o=ru)=>n.sibling(e,t).map((p=>tu(p,o))),ru=(e,t,n,o=ru)=>{const r=e.property().children(t);return n.first(r).map((e=>tu(e,o)))},su=[{current:nu,next:ou,fallback:D.none()},{current:ou,next:ru,fallback:D.some(nu)},{current:ru,next:ru,fallback:D.some(ou)}],au=(e,t,n,o,r=su)=>U(r,(e=>e.current===n)).bind((n=>n.current(e,t,o,n.next).orThunk((()=>n.fallback.bind((n=>au(e,t,n,o))))))),lu=()=>({sibling:(e,t)=>e.query().prevSibling(t),first:e=>e.length>0?D.some(e[e.length-1]):D.none()}),iu=()=>({sibling:(e,t)=>e.query().nextSibling(t),first:e=>e.length>0?D.some(e[0]):D.none()}),cu=(e,t,n,o,r,l)=>au(e,t,o,r).bind((t=>l(t.item)?D.none():n(t.item)?D.some(t.item):cu(e,t.item,n,t.mode,r,l))),uu=e=>element=>0===e.property().children(element).length,du=(e,t,n,o)=>cu(e,t,n,ou,lu(),o),mu=(e,t,n,o)=>cu(e,t,n,ou,iu(),o),gu=Es(),pu=(element,e)=>((e,t,n)=>du(e,t,uu(e),n))(gu,element,e),hu=(element,e)=>((e,t,n)=>mu(e,t,uu(e),n))(gu,element,e),fu=Al([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),bu=e=>Et(e,"tr"),yu={...fu,verify:(e,t,n,o,r,l,c)=>Et(o,"td,th",c).bind((n=>Et(t,"td,th",c).map((t=>Me(n,t)?Me(o,n)&&Nr(n)===r?l(t):fu.none("in same cell"):Is(bu,[n,t]).fold((()=>((e,t,n)=>{const o=e.getRect(t),r=e.getRect(n);return r.right>o.left&&r.left<o.right})(e,t,n)?fu.success():l(t)),(e=>l(t))))))).getOr(fu.none("default")),cata:(e,t,n,o,r)=>e.fold(t,n,o,r)},vu=(e,element)=>H(e,k(Me,element)),wu=we("br"),xu=(e,t,n)=>t(e,n).bind((e=>be(e)&&0===Or(e).trim().length?xu(e,t,n):D.some(e))),Su=(e,element,t,n)=>((element,e)=>We(element,e).filter(wu).orThunk((()=>We(element,e-1).filter(wu))))(element,t).bind((br=>n.traverse(br).fold((()=>xu(br,n.gather,e).map(n.relative)),(e=>(element=>Be(element).bind((e=>{const t=He(e);return vu(t,element).map((n=>((e,t,element,n)=>({parent:e,children:t,element:element,index:n}))(e,t,element,n)))})))(e).map((e=>Bc.on(e.parent,e.index))))))),Cu=(e,element,t,n)=>{const o=wu(element)?((e,element,t)=>t.traverse(element).orThunk((()=>xu(element,t.gather,e))).map(t.relative))(e,element,n):Su(e,element,t,n);return o.map((e=>({start:e,finish:e})))},ku=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),Tu=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),_u=(e,t,n)=>({left:e.left+t,top:e.top+n,right:e.right+t,bottom:e.bottom+n}),Au=rect=>({left:rect.left,top:rect.top,right:rect.right,bottom:rect.bottom}),Ou=(e,element)=>D.some(e.getRect(element)),Du=(e,element,t)=>fe(element)?Ou(e,element).map(Au):be(element)?((e,element,t)=>t>=0&&t<Nr(element)?e.getRangedRect(element,t,element,t+1):t>0?e.getRangedRect(element,t-1,element,t):D.none())(e,element,t).map(Au):D.none(),Eu=(e,element)=>fe(element)?Ou(e,element).map(Au):be(element)?e.getRangedRect(element,0,element,Nr(element)).map(Au):D.none(),Nu=Al([{none:[]},{retry:["caret"]}]),Ru=(e,element,t)=>_t(element,Zl).fold(A,(n=>Eu(e,n).exists((e=>((e,t)=>e.left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right)(t,e))))),Mu={point:e=>e.bottom,adjuster:(e,element,t,n,o)=>{const r=ku(o,5);return Math.abs(t.bottom-n.bottom)<1||t.top>o.bottom?Nu.retry(r):t.top===o.bottom?Nu.retry(ku(o,1)):Ru(e,element,o)?Nu.retry(_u(r,5,0)):Nu.none()},move:ku,gather:hu},Pu=(e,t,n,o,r)=>0===r?D.some(o):((e,t,n)=>e.elementFromPoint(t,n).filter((e=>"table"===de(e))).isSome())(e,o.left,t.point(o))?((e,t,n,o,r)=>Pu(e,t,n,t.move(o,5),r))(e,t,n,o,r-1):e.situsFromPoint(o.left,t.point(o)).bind((l=>l.start.fold(D.none,(element=>Eu(e,element).bind((l=>t.adjuster(e,element,l,n,o).fold(D.none,(o=>Pu(e,t,n,o,r-1))))).orThunk((()=>D.some(o)))),D.none))),Fu=(e,t,n)=>{const o=e.move(n,5),r=Pu(t,e,n,o,100).getOr(o);return((e,t,n)=>e.point(t)>n.getInnerHeight()?D.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?D.some(-e.point(t)):D.none())(e,r,t).fold((()=>t.situsFromPoint(r.left,e.point(r))),(n=>(t.scrollBy(0,n),t.situsFromPoint(r.left,e.point(r)-n))))},Iu={tryUp:k(Fu,{point:e=>e.top,adjuster:(e,element,t,n,o)=>{const r=Tu(o,5);return Math.abs(t.top-n.top)<1||t.bottom<o.top?Nu.retry(r):t.bottom===o.top?Nu.retry(Tu(o,1)):Ru(e,element,o)?Nu.retry(_u(r,5,0)):Nu.none()},move:Tu,gather:pu}),tryDown:k(Fu,Mu),getJumpSize:x(5)},Lu=(e,t,n)=>e.getSelection().bind((o=>Cu(t,o.finish,o.foffset,n).fold((()=>D.some(ia(o.finish,o.foffset))),(r=>{const l=e.fromSitus(r);return(e=>yu.cata(e,(e=>D.none()),(()=>D.none()),(e=>D.some(ia(e,0))),(e=>D.some(ia(e,Nr(e))))))(yu.verify(e,o.finish,o.foffset,l.finish,l.foffset,n.failure,t))})))),Bu=(e,t,element,n,o,r)=>0===r?D.none():$u(e,t,element,n,o).bind((l=>{const c=e.fromSitus(l),d=yu.verify(e,element,n,c.finish,c.foffset,o.failure,t);return yu.cata(d,(()=>D.none()),(()=>D.some(l)),(l=>Me(element,l)&&0===n?ju(e,element,n,Tu,o):Bu(e,t,l,0,o,r-1)),(l=>Me(element,l)&&n===Nr(l)?ju(e,element,n,ku,o):Bu(e,t,l,Nr(l),o,r-1)))})),ju=(e,element,t,n,o)=>Du(e,element,t).bind((t=>zu(e,o,n(t,Iu.getJumpSize())))),zu=(e,t,n)=>{const o=$n().browser;return o.isChromium()||o.isSafari()||o.isFirefox()?t.retry(e,n):D.none()},$u=(e,t,element,n,o)=>Du(e,element,n).bind((t=>zu(e,o,t))),Uu=(e,table)=>{return Tt(e,(e=>Be(e).exists((p=>Me(p,table)))),t).isSome();var t},Hu=(e,t,n,o,r)=>Et(o,"td,th",t).bind((o=>Et(o,"table",t).bind((table=>Uu(r,table)?((e,t,n)=>Lu(e,t,n).bind((o=>Bu(e,t,o.element,o.offset,n,20).map(e.fromSitus))))(e,t,n).bind((e=>Et(e.finish,"td,th",t).map((t=>({start:o,finish:t,range:e}))))):D.none())))),Wu=(e,t,n,o,r,l)=>l(o,t).orThunk((()=>Hu(e,t,n,o,r).map((e=>{const t=e.range;return jc(D.some(Qc(t.start,t.soffset,t.finish,t.foffset)),!0)})))),qu=(e,t)=>Et(e,"tr",t).bind((e=>Et(e,"table",t).bind((table=>{const n=Ct(table,"tr");return Me(e,n[0])?((element,e,t)=>du(gu,element,e,t))(table,(element=>Fr(element).isSome()),t).map((e=>{const t=Nr(e);return jc(D.some(Qc(e,t,e,t)),!0)})):D.none()})))),Vu=(e,t)=>Et(e,"tr",t).bind((e=>Et(e,"table",t).bind((table=>{const n=Ct(table,"tr");return Me(e,n[n.length-1])?((element,e,t)=>mu(gu,element,e,t))(table,(element=>Pr(element).isSome()),t).map((e=>jc(D.some(Qc(e,0,e,0)),!0))):D.none()})))),select=(e,t,n,o,r,l,c)=>Hu(e,n,o,r,l).bind((e=>eu(t,n,e.start,e.finish,c))),Zu=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Ku=()=>{const e=(e=>{const t=Zu(D.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(D.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:s=>{n(),t.set(D.some(s))}}})(w);return{...e,on:t=>e.get().each(t)}},Gu=(e,t)=>Et(e,"td,th",t),Yu=e=>je(e).exists(us),Ju={traverse:Ue,gather:hu,relative:Bc.before,retry:Iu.tryDown,failure:yu.failedDown},Xu={traverse:$e,gather:pu,relative:Bc.before,retry:Iu.tryUp,failure:yu.failedUp},Qu=e=>t=>t===e,ed=Qu(38),nd=Qu(40),od=e=>e>=37&&e<=40,rd={isBackward:Qu(37),isForward:Qu(39)},sd={isBackward:Qu(39),isForward:Qu(37)},ad=Al([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ld={domRange:ad.domRange,relative:ad.relative,exact:ad.exact,exactFromRange:e=>ad.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(e=>e.match({domRange:e=>De.fromDom(e.startContainer),relative:(e,t)=>Bc.getStart(e),exact:(e,t,n,o)=>e}))(e);return element=t,De.fromDom(Le(element).dom.defaultView);var element},range:Yc},id=(e,t,n)=>{var o,r;return D.from(null===(r=(o=e.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(o,t,n)).bind((t=>{if(null===t.offsetNode)return D.none();const n=e.dom.createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),D.some(n)}))},cd=(e,t,n)=>{var o,r;return D.from(null===(r=(o=e.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(o,t,n))},ud=document.caretPositionFromPoint?id:document.caretRangeFromPoint?cd:D.none,md=(element,e)=>{const t=de(element);return"input"===t?Bc.after(element):M(["br","img"],t)?0===e?Bc.before(element):Bc.after(element):Bc.on(element,e)},gd=(e,t,n,o)=>{const r=((e,t,n,o)=>{const r=Ie(e).dom.createRange();return r.setStart(e.dom,t),r.setEnd(n.dom,o),r})(e,t,n,o),l=Me(e,n)&&t===o;return r.collapsed&&!l},pd=e=>D.from(e.getSelection()),hd=(e,t)=>{pd(e).each((e=>{e.removeAllRanges(),e.addRange(t)}))},fd=(e,t,n,o,r)=>{const l=Wc(e,t,n,o,r);hd(e,l)},bd=(e,t)=>Kc(e,t).match({ltr:(t,n,o,r)=>{fd(e,t,n,o,r)},rtl:(t,n,o,r)=>{pd(e).each((l=>{if(l.setBaseAndExtent)l.setBaseAndExtent(t.dom,n,o.dom,r);else if(l.extend)try{((e,t,n,o,r,l)=>{t.collapse(n.dom,o),t.extend(r.dom,l)})(0,l,t,n,o,r)}catch(l){fd(e,o,r,t,n)}else fd(e,o,r,t,n)}))}}),yd=(e,t,n,o,r)=>{const l=((e,t,n,o)=>{const r=md(e,t),l=md(n,o);return ld.relative(r,l)})(t,n,o,r);bd(e,l)},vd=(e,t,n)=>{const o=((e,t)=>{const n=e.fold(Bc.before,md,Bc.after),o=t.fold(Bc.before,md,Bc.after);return ld.relative(n,o)})(t,n);bd(e,o)},wd=e=>{if(e.rangeCount>0){const t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return D.some(Yc(De.fromDom(t.startContainer),t.startOffset,De.fromDom(n.endContainer),n.endOffset))}return D.none()},xd=e=>{if(null===e.anchorNode||null===e.focusNode)return wd(e);{const t=De.fromDom(e.anchorNode),n=De.fromDom(e.focusNode);return gd(t,e.anchorOffset,n,e.focusOffset)?D.some(Yc(t,e.anchorOffset,n,e.focusOffset)):wd(e)}},Sd=(e,element,t=!0)=>{const n=(t?$c:zc)(e,element);hd(e,n)},Cd=e=>(e=>pd(e).filter((e=>e.rangeCount>0)).bind(xd))(e).map((e=>ld.exact(e.start,e.soffset,e.finish,e.foffset))),kd=(e,t)=>(e=>{const t=e.getClientRects(),rect=t.length>0?t[0]:e.getBoundingClientRect();return rect.width>0||rect.height>0?D.some(rect).map(qc):D.none()})(Gc(e,t)),Td=(e,t,n)=>((e,t,n)=>{const o=De.fromDom(e.document);return ud(o,t,n).map((e=>Yc(De.fromDom(e.startContainer),e.startOffset,De.fromDom(e.endContainer),e.endOffset)))})(e,t,n),_d=e=>({elementFromPoint:(t,n)=>De.fromPoint(De.fromDom(e.document),t,n),getRect:element=>element.dom.getBoundingClientRect(),getRangedRect:(t,n,o,r)=>{const l=ld.exact(t,n,o,r);return kd(e,l)},getSelection:()=>Cd(e).map((t=>Xc(e,t))),fromSitus:t=>{const n=ld.relative(t.start,t.finish);return Xc(e,n)},situsFromPoint:(t,n)=>Td(e,t,n).map((e=>Jc(e.start,e.soffset,e.finish,e.foffset))),clearSelection:()=>{(e=>{pd(e).each((e=>e.removeAllRanges()))})(e)},collapseSelection:(t=!1)=>{Cd(e).each((n=>n.fold((e=>e.collapse(t)),((n,o)=>{const r=t?n:o;vd(e,r,r)}),((n,o,r,l)=>{const c=t?n:r,d=t?o:l;yd(e,c,d,c,d)}))))},setSelection:t=>{yd(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:(t,n)=>{vd(e,t,n)},selectNode:element=>{Sd(e,element,!1)},selectContents:element=>{Sd(e,element)},getInnerHeight:()=>e.innerHeight,getScrollY:()=>(e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return To(n,o)})(De.fromDom(e.document)).top,scrollBy:(t,n)=>{((e,t,n)=>{const o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollBy(e,t)})(t,n,De.fromDom(e.document))}}),Ad=(e,t)=>({rows:e,cols:t}),Od=(e,t,n,o)=>{const r=((e,t,n,o)=>{const cursor=Ku(),r=cursor.clear,l=r=>{cursor.on((l=>{o.clearBeforeUpdate(t),Gu(r.target,n).each((c=>{Bs(l,c,n).each((n=>{const l=n.boxes.getOr([]);if(1===l.length){const n=l[0],c="false"===ds(n),d=Nt(cs(r.target),n,Me);c&&d&&(o.selectRange(t,l,n,n),e.selectContents(n))}else l.length>1&&(o.selectRange(t,l,n.start,n.finish),e.selectContents(c))}))}))}))};return{clearstate:r,mousedown:e=>{o.clear(t),Gu(e.target,n).filter(Yu).each(cursor.set)},mouseover:e=>{l(e)},mouseup:e=>{l(e),r()}}})(_d(e),t,n,o);return{clearstate:r.clearstate,mousedown:r.mousedown,mouseover:r.mouseover,mouseup:r.mouseup}},Dd=e=>_t(e,he).exists(us),Ed=(e,t)=>Dd(e)||Dd(t),Nd=(e,t,n,o)=>{const r=_d(e),l=()=>(o.clear(t),D.none());return{keydown:(e,c,d,m,h,f)=>{const y=e.raw,v=y.which,w=!0===y.shiftKey,x=js(t,o.selectedSelector).fold((()=>(od(v)&&!w&&o.clearBeforeUpdate(t),od(v)&&w&&!Ed(c,m)?D.none:nd(v)&&w?k(select,r,t,n,Ju,m,c,o.selectRange):ed(v)&&w?k(select,r,t,n,Xu,m,c,o.selectRange):nd(v)?k(Wu,r,n,Ju,m,c,Vu):ed(v)?k(Wu,r,n,Xu,m,c,qu):D.none)),(e=>{const n=n=>()=>{const l=J(n,(n=>((e,t,n,o,r)=>$s(o,e,t,r.firstSelectedSelector,r.lastSelectedSelector).map((e=>(r.clearBeforeUpdate(n),r.selectRange(n,e.boxes,e.start,e.finish),e.boxes))))(n.rows,n.cols,t,e,o)));return l.fold((()=>zs(t,o.firstSelectedSelector,o.lastSelectedSelector).map((e=>{const n=nd(v)||f.isForward(v)?Bc.after:Bc.before;return r.setRelativeSelection(Bc.on(e.first,0),n(e.table)),o.clear(t),jc(D.none(),!0)}))),(e=>D.some(jc(D.none(),!0))))};return od(v)&&w&&!Ed(c,m)?D.none:nd(v)&&w?n([Ad(1,0)]):ed(v)&&w?n([Ad(-1,0)]):f.isBackward(v)&&w?n([Ad(0,-1),Ad(-1,0)]):f.isForward(v)&&w?n([Ad(0,1),Ad(1,0)]):od(v)&&!w?l:D.none}));return x()},keyup:(e,r,l,c,d)=>js(t,o.selectedSelector).fold((()=>{const m=e.raw,h=m.which;return!0===m.shiftKey&&od(h)&&Ed(r,c)?((e,t,n,o,r,l,c)=>Me(n,r)&&o===l?D.none():Et(n,"td,th",t).bind((s=>Et(r,"td,th",t).bind((n=>eu(e,t,s,n,c))))))(t,n,r,l,c,d,o.selectRange):D.none()}),D.none)}},Rd=(element,e)=>{const t=ke(element,e);return void 0===t||""===t?[]:t.split(" ")},Md=element=>void 0!==element.dom.classList,Pd=(element,e)=>((element,e,t)=>{const n=Rd(element,e).concat([t]);return Se(element,e,n.join(" ")),!0})(element,"class",e),Fd=(element,e)=>{Md(element)?element.dom.classList.add(e):Pd(element,e)},Id=(element,e)=>Md(element)&&element.dom.classList.contains(e),Ld=(e,t,n)=>{const o=element=>{_e(element,e.selected),_e(element,e.firstSelected),_e(element,e.lastSelected)},r=element=>{Se(element,e.selected,"1")},l=e=>{c(e),n()},c=t=>{const n=Ct(t,`${e.selectedSelector},${e.firstSelectedSelector},${e.lastSelectedSelector}`);L(n,o)};return{clearBeforeUpdate:c,clear:l,selectRange:(n,o,c,d)=>{l(n),L(o,r),Se(c,e.firstSelected,"1"),Se(d,e.lastSelected,"1"),t(o,c,d)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},Bd=()=>({tag:"none"}),jd=e=>({tag:"multiple",elements:e}),zd=element=>({tag:"single",element:element}),$d=(table,e,t)=>{const n=go.fromTable(table);return Ga(n,e).map((e=>{const o=Ha(n,t,!1),{rows:r}=ro(o),l=((e,t)=>{const n=e.slice(0,t[t.length-1].row+1),o=Wa(n);return V(o,(e=>{const n=e.cells.slice(0,t[t.length-1].column+1);return I(n,(e=>e.element))}))})(r,e),c=((e,t)=>{const n=e.slice(t[0].row+t[0].rowspan-1,e.length),o=Wa(n);return V(o,(e=>{const n=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return I(n,(e=>e.element))}))})(r,e);return{upOrLeftCells:l,downOrRightCells:c}}))},Ud=e=>{const t=De.fromDom((e=>{if(gt()&&f(e.target)){const t=De.fromDom(e.target);if(fe(t)&&bt(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return head(t)}}return D.from(e.target)})(e).getOr(e.target)),n=()=>e.stopPropagation(),o=()=>e.preventDefault(),r=(l=o,c=n,(...e)=>l(c.apply(null,e)));var l,c;return((e,t,n,o,r,l,c)=>({target:e,x:t,y:n,stop:o,prevent:r,kill:l,raw:c}))(t,e.clientX,e.clientY,n,o,r,e)},Hd=(element,e,filter,t,n)=>{const o=((filter,e)=>t=>{filter(t)&&e(Ud(t))})(filter,t);return element.dom.addEventListener(e,o,n),{unbind:k(Wd,element,e,o,n)}},Wd=(element,e,t,n)=>{element.dom.removeEventListener(e,t,n)},filter=O,qd=(element,e,t)=>((element,e,filter,t)=>Hd(element,e,filter,t,!1))(element,e,filter,t),Vd=Ud,Zd=e=>!Id(De.fromDom(e.target),"ephox-snooker-resizer-bar"),Kd=(e,t)=>{const n=((e,t,n)=>({get:()=>Us(e(),n).fold((()=>t().fold(Bd,zd)),jd)}))((()=>De.fromDom(e.getBody())),(()=>sa(hs(e),gs(e))),ta.selectedSelector),o=Ld(ta,((t,n,o)=>{table(n).each((table=>{const r=Kr(e),l=Wr(w,De.fromDom(e.getDoc()),r),c=aa(e),d=$d(table,{selection:c},l);((e,t,n,o,r)=>{e.dispatch("TableSelectionChange",{cells:t,start:n,finish:o,otherCells:r})})(e,t,n,o,d)}))}),(()=>(e=>{e.dispatch("TableSelectionClear")})(e)));e.on("init",(n=>{const r=e.getWin(),body=ms(e),l=gs(e),c=Od(r,body,l,o),d=Nd(r,body,l,o),m=((e,t,n,o)=>{const r=_d(e);return(e,l)=>{o.clearBeforeUpdate(t),Bs(e,l,n).each((e=>{const n=e.boxes.getOr([]);o.selectRange(t,n,e.start,e.finish),r.selectContents(l),r.collapseSelection()}))}})(r,body,l,o);e.on("TableSelectorChange",(e=>m(e.start,e.finish)));const h=(t,n)=>{(e=>!0===e.raw.shiftKey)(t)&&(n.kill&&t.kill(),n.selection.each((t=>{const n=ld.relative(t.start,t.finish),o=Gc(r,n);e.selection.setRng(o)})))},f=e=>0===e.button,y=(()=>{const e=Zu(De.fromDom(body)),t=Zu(0);return{touchEnd:n=>{const o=De.fromDom(n.target);if(we("td")(o)||we("th")(o)){const r=e.get(),l=t.get();Me(r,o)&&n.timeStamp-l<300&&(n.preventDefault(),m(o,o))}e.set(o),t.set(n.timeStamp)}}})();e.on("dragstart",(e=>{c.clearstate()})),e.on("mousedown",(e=>{f(e)&&Zd(e)&&c.mousedown(Vd(e))})),e.on("mouseover",(e=>{var t;void 0!==(t=e).buttons&&0==(1&t.buttons)||!Zd(e)||c.mouseover(Vd(e))})),e.on("mouseup",(e=>{f(e)&&Zd(e)&&c.mouseup(Vd(e))})),e.on("touchend",y.touchEnd),e.on("keyup",(t=>{const n=Vd(t);if(n.raw.shiftKey&&od(n.raw.which)){const t=e.selection.getRng(),o=De.fromDom(t.startContainer),r=De.fromDom(t.endContainer);d.keyup(n,o,t.startOffset,r,t.endOffset).each((e=>{h(n,e)}))}})),e.on("keydown",(n=>{const o=Vd(n);t.hide();const r=e.selection.getRng(),l=De.fromDom(r.startContainer),c=De.fromDom(r.endContainer),m=yo(rd,sd)(De.fromDom(e.selection.getStart()));d.keydown(o,l,r.startOffset,c,r.endOffset,m).each((e=>{h(o,e)})),t.show()})),e.on("NodeChange",(()=>{const t=e.selection,n=De.fromDom(t.getStart()),r=De.fromDom(t.getEnd());Is(table,[n,r]).fold((()=>o.clear(body)),w)}))})),e.on("PreInit",(()=>{e.serializer.addTempAttr(ta.firstSelected),e.serializer.addTempAttr(ta.lastSelected)}));return{getSelectedCells:()=>((e,t,n,o)=>{switch(e.tag){case"none":return t();case"single":return o(e.element);case"multiple":return n(e.elements)}})(n.get(),x([]),(e=>I(e,(e=>e.dom))),(e=>[e.dom])),clearSelectedCells:e=>o.clear(De.fromDom(e))}},Gd=e=>{let t=[];return{bind:e=>{if(void 0===e)throw new Error("Event bind error: undefined handler");t.push(e)},unbind:e=>{t=j(t,(t=>t!==e))},trigger:(...n)=>{const o={};L(e,((e,i)=>{o[e]=n[i]})),L(t,(e=>{e(o)}))}}},Yd=e=>({registry:map(e,(e=>({bind:e.bind,unbind:e.unbind}))),trigger:map(e,(e=>e.trigger))}),Jd=e=>e.slice(0).sort(),Xd=(e,t,n)=>{if(0===t.length)throw new Error("You must specify at least one required field.");return((label,e)=>{if(!c(e))throw new Error("The "+label+" fields must be an array. Was: "+e+".");L(e,(a=>{if(!r(a))throw new Error("The value "+a+" in the "+label+" fields was not a string.")}))})("required",t),(e=>{const t=Jd(e);U(t,((s,i)=>i<t.length-1&&s===t[i+1])).each((e=>{throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}))})(t),o=>{const r=X(o);Z(t,(e=>M(r,e)))||((e,t)=>{throw new Error("All required keys ("+Jd(e).join(", ")+") were not specified. Specified keys were: "+Jd(t).join(", ")+".")})(t,r),e(t,r);const l=j(t,(e=>!n.validate(o[e],e)));return l.length>0&&((e,t)=>{throw new Error("All values need to be of type: "+t+". Keys ("+Jd(e).join(", ")+") were not.")})(l,n.label),o}},Qd=(e,t)=>{const n=j(t,(t=>!M(e,t)));n.length>0&&(e=>{throw new Error("Unsupported keys for object: "+Jd(e).join(", "))})(n)},tm=e=>((e,t)=>Xd(e,t,{validate:y,label:"function"}))(Qd,e),nm=tm(["compare","extract","mutate","sink"]),om=tm(["element","start","stop","destroy"]),rm=tm(["forceDrop","drop","move","delayDrop"]),sm=()=>{let e=D.none();const t=Yd({move:Gd(["info"])});return{onEvent:(n,o)=>{o.extract(n).each((data=>{const n=((t,n)=>{const o=e.map((e=>t.compare(e,n)));return e=D.some(n),o})(o,data);n.each((e=>{t.trigger.move(e)}))}))},reset:()=>{e=D.none()},events:t.registry}},am=()=>{const e=(()=>{const e=Yd({move:Gd(["info"])});return{onEvent:w,reset:w,events:e.registry}})(),t=sm();let n=e;return{on:()=>{n.reset(),n=t},off:()=>{n.reset(),n=e},isOn:()=>n===t,onEvent:(e,t)=>{n.onEvent(e,t)},events:t.events}},lm=(e,t,n)=>{let o=!1;const r=Yd({start:Gd([]),stop:Gd([])}),l=am(),c=()=>{f.stop(),l.isOn()&&(l.off(),r.trigger.stop())},m=((e,t)=>{let n=null;const o=()=>{d(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout((()=>{n=null,e.apply(null,r)}),t)}}})(c,200);l.events.move.bind((n=>{t.mutate(e,n.info)}));const h=e=>(...t)=>{o&&e.apply(null,t)},f=t.sink(rm({forceDrop:c,drop:h(c),move:h((e=>{m.cancel(),l.onEvent(e,t)})),delayDrop:h(m.throttle)}),n);return{element:f.element,go:e=>{f.start(e),l.on(),r.trigger.start()},on:()=>{o=!0},off:()=>{o=!1},isActive:()=>o,destroy:()=>{f.destroy()},events:r.registry}},im=e=>{const t=e.replace(/\./g,"-");return{resolve:e=>t+"-"+e}},cm=im("ephox-dragster").resolve;var um=nm({compare:(e,t)=>To(t.left-e.left,t.top-e.top),extract:e=>D.some(To(e.x,e.y)),sink:(e,t)=>{const n=(e=>{const t={layerClass:cm("blocker"),...e},div=De.fromTag("div");return Se(div,"role","presentation"),Ht(div,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Fd(div,cm("blocker")),Fd(div,t.layerClass),{element:x(div),destroy:()=>{Qe(div)}}})(t),o=qd(n.element(),"mousedown",e.forceDrop),r=qd(n.element(),"mouseup",e.drop),l=qd(n.element(),"mousemove",e.move),c=qd(n.element(),"mouseout",e.delayDrop);return om({element:n.element,start:e=>{Ke(e,n.element())},stop:()=>{Qe(n.element())},destroy:()=>{n.destroy(),r.unbind(),l.unbind(),c.unbind(),o.unbind()}})},mutate:(e,t)=>{e.mutate(t.left,t.top)}});const dm=im("ephox-snooker").resolve,mm=()=>{const e=Yd({drag:Gd(["xDelta","yDelta","target"])});let t=D.none();const n=(()=>{const e=Yd({drag:Gd(["xDelta","yDelta"])});return{mutate:(t,n)=>{e.trigger.drag(t,n)},events:e.registry}})();n.events.drag.bind((n=>{t.each((t=>{e.trigger.drag(n.xDelta,n.yDelta,t)}))}));return{assign:e=>{t=D.some(e)},get:()=>t,mutate:n.mutate,events:e.registry}},gm=dm("resizer-bar"),pm=dm("resizer-rows"),hm=dm("resizer-cols"),fm=e=>{const t=Ct(e.parent(),"."+gm);L(t,Qe)},bm=(e,t,n)=>{const o=e.origin();L(t,(t=>{t.each((t=>{const r=n(o,t);Fd(r,gm),Ke(e.parent(),r)}))}))},ym=(e,t,n,o)=>{bm(e,t,((e,t)=>{const r=((e,t,n,o,r)=>{const l=De.fromTag("div");return Ht(l,{position:"absolute",left:t-o/2+"px",top:n+"px",height:r+"px",width:o+"px"}),Ce(l,{"data-column":e,role:"presentation"}),l})(t.col,t.x-e.left,n.top-e.top,7,o);return Fd(r,hm),r}))},vm=(e,t,n,o)=>{bm(e,t,((e,t)=>{const r=((e,t,n,o,r)=>{const l=De.fromTag("div");return Ht(l,{position:"absolute",left:t+"px",top:n-r/2+"px",height:r+"px",width:o+"px"}),Ce(l,{"data-row":e,role:"presentation"}),l})(t.row,n.left-e.left,t.y-e.top,o,7);return Fd(r,pm),r}))},wm=(e,t,table,n,o)=>{const r=Ao(table),l=t.isResizable,c=n.length>0?jo.positions(n,table):[],d=c.length>0?((e,t)=>V(e.all,((e,i)=>t(e.element)?[i]:[])))(e,l):[],m=j(c,((e,i)=>P(d,(e=>i===e))));vm(t,m,r,Kn(table));const h=o.length>0?$o.positions(o,table):[],f=h.length>0?((e,t)=>{const n=[];return F(e.grid.columns,(o=>{const r=go.getColumnAt(e,o).map((col=>col.element));r.forall(t)&&n.push(o)})),j(n,(n=>{const o=go.filterItems(e,(e=>e.column===n));return Z(o,(e=>t(e.element)))}))})(e,l):[],y=j(h,((e,i)=>P(f,(e=>i===e))));ym(t,y,r,So(table))},xm=(e,table)=>{if(fm(e),e.isResizable(table)){const t=go.fromTable(table),n=fo(t),o=po(t);wm(t,e,table,n,o)}},Sm=(e,t)=>{const n=Ct(e.parent(),"."+gm);L(n,t)},Cm=e=>{Sm(e,(e=>{Ut(e,"display","none")}))},km=e=>{Sm(e,(e=>{Ut(e,"display","block")}))},Tm=dm("resizer-bar-dragging"),_m=e=>{const t=mm(),n=((e,t={})=>{var n;const o=null!==(n=t.mode)&&void 0!==n?n:um;return lm(e,o,t)})(t,{});let o=D.none();const r=(element,e)=>D.from(ke(element,e));t.events.drag.bind((e=>{r(e.target,"data-row").each((t=>{const n=Xt(e.target,"top");Ut(e.target,"top",n+e.yDelta+"px")})),r(e.target,"data-column").each((t=>{const n=Xt(e.target,"left");Ut(e.target,"left",n+e.xDelta+"px")}))}));const l=(e,t)=>Xt(e,t)-Kt(e,"data-initial-"+t,0);n.events.stop.bind((()=>{t.get().each((t=>{o.each((table=>{r(t,"data-row").each((e=>{const n=l(t,"top");_e(t,"data-initial-top"),f.trigger.adjustHeight(table,n,parseInt(e,10))})),r(t,"data-column").each((e=>{const n=l(t,"left");_e(t,"data-initial-left"),f.trigger.adjustWidth(table,n,parseInt(e,10))})),xm(e,table)}))}))}));const c=(o,r)=>{f.trigger.startAdjust(),t.assign(o),Se(o,"data-initial-"+r,Xt(o,r)),Fd(o,Tm),Ut(o,"opacity","0.2"),n.go(e.parent())},d=qd(e.parent(),"mousedown",(e=>{var element;element=e.target,Id(element,pm)&&c(e.target,"top"),(element=>Id(element,hm))(e.target)&&c(e.target,"left")})),m=t=>Me(t,e.view()),h=qd(e.view(),"mouseover",(t=>{var r;(r=t.target,Et(r,"table",m).filter(us)).fold((()=>{yt(t.target)&&fm(e)}),(table=>{n.isActive()&&(o=D.some(table),xm(e,table))}))})),f=Yd({adjustHeight:Gd(["table","delta","row"]),adjustWidth:Gd(["table","delta","column"]),startAdjust:Gd([])});return{destroy:()=>{d.unbind(),h.unbind(),n.destroy(),fm(e)},refresh:t=>{xm(e,t)},on:n.on,off:n.off,hideBars:k(Cm,e),showBars:k(km,e),events:f.registry}},Am=(e,t,n)=>{const o=jo,r=$o,l=_m(e),c=Yd({beforeResize:Gd(["table","type"]),afterResize:Gd(["table","type"]),startDrag:Gd([])});return l.events.adjustHeight.bind((e=>{const table=e.table;c.trigger.beforeResize(table,"row");const t=o.delta(e.delta,table);Fl(table,t,e.row,o),c.trigger.afterResize(table,"row")})),l.events.startAdjust.bind((e=>{c.trigger.startDrag()})),l.events.adjustWidth.bind((e=>{const table=e.table;c.trigger.beforeResize(table,"col");const o=r.delta(e.delta,table),l=n(table);Pl(table,o,e.column,t,l),c.trigger.afterResize(table,"col")})),{on:l.on,off:l.off,refreshBars:l.refresh,hideBars:l.hideBars,showBars:l.showBars,destroy:l.destroy,events:c.registry}},Om=(element,e)=>{const t=ye(element)?(element=>De.fromDom(Le(element).dom.documentElement))(element):element;return{parent:x(t),view:x(element),origin:x(To(0,0)),isResizable:e}},Dm=(e,t,n)=>({parent:x(t),view:x(e),origin:x(To(0,0)),isResizable:n}),Em=()=>{const e=De.fromTag("div");return Ht(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Ke(vt(De.fromDom(document)),e),e},Nm=e=>f(e)&&"TABLE"===e.nodeName,Rm="bar-",Mm=e=>"false"!==ke(e,"data-mce-resize"),Pm=e=>{const t=Ku(),n=Ku(),o=Ku();let r,l;const c=table=>Zi(e,table),d=()=>Jr(e)?xa():wa(),m=(table,t,n)=>{const o=Lt(t,"e");if(""===l&&pc(table),n!==r&&""!==l){Ut(table,"width",l);const t=d(),m=c(table),col=Jr(e)||o?(table=>Sa(table).columns)(table)-1:0;Pl(table,n-r,col,t,m)}else if((e=>/^(\d+(\.\d+)?)%$/.test(e))(l)){const e=parseFloat(l.replace("%",""));Ut(table,"width",n*e/r+"%")}(e=>/^(\d+(\.\d+)?)px$/.test(e))(l)&&(table=>{const e=go.fromTable(table);go.hasColumns(e)||L(rn(table),(e=>{const t=Wt(e,"width");Ut(e,"width",t),_e(e,"width")}))})(table)},h=()=>{n.on((e=>{e.destroy()})),o.on((t=>{((e,t)=>{e.inline&&Qe(t.parent())})(e,t)}))};e.on("init",(()=>{const r=((e,t)=>e.inline?Dm(De.fromDom(e.getBody()),Em(),t):Om(De.fromDom(e.getDoc()),t))(e,Mm);if(o.set(r),(e=>{const t=e.options.get("object_resizing");return M(t.split(","),"table")})(e)&&os(e)){const o=d(),l=Am(r,o,c);l.on(),l.events.startDrag.bind((n=>{t.set(e.selection.getRng())})),l.events.beforeResize.bind((t=>{const n=t.table.dom;((e,t,n,o,r)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:o,origin:r})})(e,n,fs(n),bs(n),Rm+t.type)})),l.events.afterResize.bind((n=>{const table=n.table,o=table.dom;ps(table),t.on((t=>{e.selection.setRng(t),e.focus()})),((e,t,n,o,r)=>{e.dispatch("ObjectResized",{target:t,width:n,height:o,origin:r})})(e,o,fs(o),bs(o),Rm+n.type),e.undoManager.add()})),n.set(l)}})),e.on("ObjectResizeStart",(t=>{const n=t.target;if(Nm(n)){const table=De.fromDom(n);L(e.dom.select(".mce-clonedresizable"),(t=>{e.dom.addClass(t,"mce-"+Yr(e)+"-columns")})),!dc(table)&&ts(e)?hc(table):!uc(table)&&es(e)&&pc(table),mc(table)&&It(t.origin,Rm)&&pc(table),r=t.width,l=ns(e)?"":((e,t)=>{const n=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width");return D.from(n).filter(jt)})(e,n).getOr("")}})),e.on("ObjectResized",(t=>{const n=t.target;if(Nm(n)){const table=De.fromDom(n),o=t.origin;It(o,"corner-")&&m(table,o,t.width),ps(table),Hi(e,table.dom,Wi)}})),e.on("SwitchMode",(()=>{n.on((t=>{e.mode.isReadOnly()?t.hideBars():t.showBars()}))})),e.on("dragstart dragend",(e=>{n.on((t=>{"dragstart"===e.type?(t.hideBars(),t.off()):(t.on(),t.showBars())}))})),e.on("remove",(()=>{h()}));return{refresh:table=>{n.on((e=>e.refreshBars(De.fromDom(table))))},hide:()=>{n.on((e=>e.hideBars()))},show:()=>{n.on((e=>e.showBars()))}}},Fm=e=>{(e=>{const t=e.options.register;t("table_clone_elements",{processor:"string[]"}),t("table_use_colgroups",{processor:"boolean",default:!0}),t("table_header_type",{processor:e=>{const t=M(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),t("table_sizing_mode",{processor:"string",default:"auto"}),t("table_default_attributes",{processor:"object",default:{border:"1"}}),t("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),t("table_column_resizing",{processor:e=>{const t=M(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),t("table_resize_bars",{processor:"boolean",default:!0}),t("table_style_by_css",{processor:"boolean",default:!0}),t("table_merge_content_on_paste",{processor:"boolean",default:!0})})(e);const t=Pm(e),n=Kd(e,t),o=Ki(e,t,n);return Ic(e,o),((e,t)=>{const n=gs(e),o=t=>sa(hs(e)).bind((o=>table(o,n).map((table=>{const n=na(aa(e),table,o);return t(table,n)})))).getOr("");ee({mceTableRowType:()=>o(t.getTableRowType),mceTableCellType:()=>o(t.getTableCellType),mceTableColType:()=>o(t.getTableColType)},((t,n)=>e.addQueryValueHandler(n,t)))})(e,o),la(e,o),{getSelectedCells:n.getSelectedCells,clearSelectedCells:n.clearSelectedCells}},Im=e=>({table:Fm(e)});e.add("dom",Im)}()},674:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=Object.getPrototypeOf,n=(e,t,n)=>{var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},o=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&n(e,String,((e,t)=>t.isPrototypeOf(e)))?"string":t})(t)===e,r=e=>t=>typeof t===e,l=o("string"),c=o("object"),d=e=>((e,o)=>c(e)&&n(e,o,((e,n)=>t(e)===n)))(e,Object),m=o("array"),h=(f=null,a=>f===a);var f;const y=r("boolean"),v=a=>!(a=>null==a)(a),w=r("function"),x=r("number"),S=()=>{};class C{constructor(e,t){this.tag=e,this.value=t}static some(e){return new C(!0,e)}static none(){return C.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?C.some(e(this.value)):C.none()}bind(e){return this.tag?e(this.value):C.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:C.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return v(e)?C.some(e):C.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}C.singletonNone=new C(!1);const k=Object.keys,T=Object.hasOwnProperty,_=(e,t,n,o)=>{((e,t)=>{const n=k(e);for(let o=0,r=n.length;o<r;o++){const i=n[o];t(e[i],i)}})(e,((e,i)=>{(t(e,i)?n:o)(e,i)}))},A=(e,t)=>T.call(e,t),O=Array.prototype.push,D=e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!m(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);O.apply(t,e[i])}return t},head=e=>((e,i)=>i>=0&&i<e.length?C.some(e[i]):C.none())(e,0);"undefined"!=typeof window?window:Function("return this;")();const E=(element,e,t)=>{((e,t,n)=>{if(!(l(n)||y(n)||x(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(element.dom,e,t)},N=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},R={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return N(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return N(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return N(t)},fromDom:N,fromPoint:(e,t,n)=>C.from(e.dom.elementFromPoint(t,n)).map(N)};var M=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),P=tinymce.util.Tools.resolve("tinymce.util.URI");const F=s=>s.length>0,option=e=>t=>t.options.get(e),I=e=>{const t=e.options.register;t("image_dimensions",{processor:"boolean",default:!0}),t("image_advtab",{processor:"boolean",default:!1}),t("image_uploadtab",{processor:"boolean",default:!0}),t("image_prepend_url",{processor:"string",default:""}),t("image_class_list",{processor:"object[]"}),t("image_description",{processor:"boolean",default:!0}),t("image_title",{processor:"boolean",default:!1}),t("image_caption",{processor:"boolean",default:!1}),t("image_list",{processor:e=>{const t=!1===e||l(e)||((e,t)=>{if(m(e)){for(let i=0,n=e.length;i<n;++i)if(!t(e[i]))return!1;return!0}return!1})(e,c)||w(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},L=option("image_dimensions"),B=option("image_advtab"),j=option("image_uploadtab"),z=option("image_prepend_url"),$=option("image_class_list"),U=option("image_description"),H=option("image_title"),W=option("image_caption"),V=option("image_list"),Z=option("a11y_advanced_options"),K=option("automatic_uploads"),G=(e,t)=>Math.max(parseInt(e,10),parseInt(t,10)),Y=e=>(e&&(e=e.replace(/px$/,"")),e),J=e=>(e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e),X=e=>"IMG"===e.nodeName&&(e.hasAttribute("data-mce-object")||e.hasAttribute("data-mce-placeholder")),Q=(e,t)=>{const n=e.options.get;return P.isDomSafe(t,"img",{allow_html_data_urls:n("allow_html_data_urls"),allow_script_urls:n("allow_script_urls"),allow_svg_data_urls:n("allow_svg_data_urls")})},ee=M.DOM,te=image=>image.style.marginLeft&&image.style.marginRight&&image.style.marginLeft===image.style.marginRight?Y(image.style.marginLeft):"",ne=image=>image.style.marginTop&&image.style.marginBottom&&image.style.marginTop===image.style.marginBottom?Y(image.style.marginTop):"",oe=image=>image.style.borderWidth?Y(image.style.borderWidth):"",re=(image,e)=>{var t;return image.hasAttribute(e)&&null!==(t=image.getAttribute(e))&&void 0!==t?t:""},se=image=>null!==image.parentNode&&"FIGURE"===image.parentNode.nodeName,ae=(image,e,t)=>{""===t||null===t?image.removeAttribute(e):image.setAttribute(e,t)},le=image=>{se(image)?(image=>{const e=image.parentNode;v(e)&&(ee.insertAfter(image,e),ee.remove(e))})(image):(image=>{const e=ee.create("figure",{class:"image"});ee.insertAfter(e,image),e.appendChild(image),e.appendChild(ee.create("figcaption",{contentEditable:"true"},"Caption")),e.contentEditable="false"})(image)},ie=(image,e)=>{const t=image.getAttribute("style"),n=e(null!==t?t:"");n.length>0?(image.setAttribute("style",n),image.setAttribute("data-mce-style",n)):image.removeAttribute("style")},ce=(e,t)=>(image,e,n)=>{const o=image.style;o[e]?(o[e]=J(n),ie(image,t)):ae(image,e,n)},ue=(image,e)=>image.style[e]?Y(image.style[e]):re(image,e),de=(image,e)=>{const t=J(e);image.style.marginLeft=t,image.style.marginRight=t},me=(image,e)=>{const t=J(e);image.style.marginTop=t,image.style.marginBottom=t},ge=(image,e)=>{const t=J(e);image.style.borderWidth=t},pe=(image,e)=>{image.style.borderStyle=e},he=image=>{var e;return null!==(e=image.style.borderStyle)&&void 0!==e?e:""},fe=e=>v(e)&&"FIGURE"===e.nodeName,be=image=>0===ee.getAttrib(image,"alt").length&&"presentation"===ee.getAttrib(image,"role"),ye=image=>be(image)?"":re(image,"alt"),ve=(e,data)=>{var t;const image=document.createElement("img");return ae(image,"style",data.style),(te(image)||""!==data.hspace)&&de(image,data.hspace),(ne(image)||""!==data.vspace)&&me(image,data.vspace),(oe(image)||""!==data.border)&&ge(image,data.border),(he(image)||""!==data.borderStyle)&&pe(image,data.borderStyle),e(null!==(t=image.getAttribute("style"))&&void 0!==t?t:"")},we=(e,image)=>({src:re(image,"src"),alt:ye(image),title:re(image,"title"),width:ue(image,"width"),height:ue(image,"height"),class:re(image,"class"),style:e(re(image,"style")),caption:se(image),hspace:te(image),vspace:ne(image),border:oe(image),borderStyle:he(image),isDecorative:be(image)}),xe=(image,e,t,n,o)=>{t[n]!==e[n]&&o(image,n,String(t[n]))},Se=(image,e,t)=>{if(t){ee.setAttrib(image,"role","presentation");const e=R.fromDom(image);E(e,"alt","")}else{if(h(e)){const e=R.fromDom(image);n="alt",e.dom.removeAttribute(n)}else{const t=R.fromDom(image);E(t,"alt",e)}"presentation"===ee.getAttrib(image,"role")&&ee.setAttrib(image,"role","")}var n},Ce=(e,t)=>(image,n,o)=>{e(image,o),ie(image,t)},ke=(e,t,image)=>{const n=we(e,image);xe(image,n,t,"caption",((image,e,t)=>le(image))),xe(image,n,t,"src",ae),xe(image,n,t,"title",ae),xe(image,n,t,"width",ce(0,e)),xe(image,n,t,"height",ce(0,e)),xe(image,n,t,"class",ae),xe(image,n,t,"style",Ce(((image,e)=>ae(image,"style",e)),e)),xe(image,n,t,"hspace",Ce(de,e)),xe(image,n,t,"vspace",Ce(me,e)),xe(image,n,t,"border",Ce(ge,e)),xe(image,n,t,"borderStyle",Ce(pe,e)),((image,e,t)=>{t.alt===e.alt&&t.isDecorative===e.isDecorative||Se(image,t.alt,t.isDecorative)})(image,n,t)},Te=(e,t)=>{const n=(e=>{if(e.margin){const t=String(e.margin).split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e})(e.dom.styles.parse(t)),o=e.dom.styles.parse(e.dom.styles.serialize(n));return e.dom.styles.serialize(o)},_e=e=>{const t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||X(t))?null:t},Ae=(e,figure)=>{var t;const n=e.dom,o=((e,t)=>{const n={};var o;return _(e,t,(o=n,(e,i)=>{o[i]=e}),S),n})(e.schema.getTextBlockElements(),((t,n)=>!e.schema.isValidChild(n,"figure"))),r=n.getParent(figure.parentNode,(e=>{return t=o,n=e.nodeName,A(t,n)&&void 0!==t[n]&&null!==t[n];var t,n}),e.getBody());return r&&null!==(t=n.split(r,figure))&&void 0!==t?t:figure},Oe=(e,data)=>{const t=((e,data)=>{const image=document.createElement("img");if(ke(e,{...data,caption:!1},image),Se(image,data.alt,data.isDecorative),data.caption){const figure=ee.create("figure",{class:"image"});return figure.appendChild(image),figure.appendChild(ee.create("figcaption",{contentEditable:"true"},"Caption")),figure.contentEditable="false",figure}return image})((t=>Te(e,t)),data);e.dom.setAttrib(t,"data-mce-id","__mcenew"),e.focus(),e.selection.setContent(t.outerHTML);const n=e.dom.select('*[data-mce-id="__mcenew"]')[0];if(e.dom.setAttrib(n,"data-mce-id",null),fe(n)){const figure=Ae(e,n);e.selection.select(figure)}else e.selection.select(n)},De=(e,data)=>{const image=_e(e);if(image)if(ke((t=>Te(e,t)),data,image),((e,image)=>{e.dom.setAttrib(image,"src",image.getAttribute("src"))})(e,image),fe(image.parentNode)){const figure=image.parentNode;Ae(e,figure),e.selection.select(image.parentNode)}else e.selection.select(image),((e,data,t)=>{const n=()=>{t.onload=t.onerror=null,e.selection&&(e.selection.select(t),e.nodeChanged())};t.onload=()=>{data.width||data.height||!L(e)||e.dom.setAttribs(t,{width:String(t.clientWidth),height:String(t.clientHeight)}),n()},t.onerror=n})(e,data,image)},Ee=(e,t)=>{const image=_e(e);if(image){const data={...we((t=>Te(e,t)),image),...t},n=((e,data)=>{const t=data.src;return{...data,src:Q(e,t)?t:""}})(e,data);data.src?De(e,n):((e,image)=>{if(image){const t=e.dom.is(image.parentNode,"figure.image")?image.parentNode:image;e.dom.remove(t),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}})(e,image)}else t.src&&Oe(e,{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1,...t})},Ne=(Re=(e,t)=>d(e)&&d(t)?Ne(e,t):t,(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const e in o)A(o,e)&&(t[e]=Re(t[e],o[e]))}return t});var Re,Me=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Pe=tinymce.util.Tools.resolve("tinymce.util.Tools");const Fe=e=>l(e.value)?e.value:"",Ie=(e,t)=>{const n=[];return Pe.each(e,(e=>{const text=(e=>l(e.text)?e.text:l(e.title)?e.title:"")(e);if(void 0!==e.menu){const o=Ie(e.menu,t);n.push({text:text,items:o})}else{const o=t(e);n.push({text:text,value:o})}})),n},Le=(e=Fe)=>t=>t?C.from(t).map((t=>Ie(t,e))):C.none(),Be=(e,t)=>((e,t)=>{for(let i=0;i<e.length;i++){const n=t(e[i],i);if(n.isSome())return n}return C.none()})(e,(e=>(e=>A(e,"items"))(e)?Be(e.items,t):e.value===t?C.some(e):C.none())),je=Le,ze=e=>Le(Fe)(e),$e=(e,t)=>e.bind((e=>Be(e,t))),Ue=e=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}),He=e=>{const t=je((t=>e.convertURL(t.value||t.url||"","src"))),n=new Promise((n=>{((e,t)=>{const n=V(e);l(n)?fetch(n).then((e=>{e.ok&&e.json().then(t)})):w(n)?n(t):t(n)})(e,(e=>{n(t(e).map((e=>D([[{text:"None",value:""}],e]))))}))})),o=ze($(e)),r=B(e),c=j(e),d=(e=>F(e.options.get("images_upload_url")))(e),m=(e=>v(e.options.get("images_upload_handler")))(e),image=(e=>{const image=_e(e);return image?we((t=>Te(e,t)),image):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}})(e),h=U(e),f=H(e),y=L(e),x=W(e),S=Z(e),k=K(e),T=C.some(z(e)).filter((e=>l(e)&&e.length>0));return n.then((e=>({image:image,imageList:e,classList:o,hasAdvTab:r,hasUploadTab:c,hasUploadUrl:d,hasUploadHandler:m,hasDescription:h,hasImageTitle:f,hasDimensions:y,hasImageCaption:x,prependURL:T,hasAccessibilityOptions:S,automaticUploads:k})))},We=e=>{const t=e.imageList.map((e=>({name:"images",type:"listbox",label:"Image list",items:e}))),n={name:"alt",type:"input",label:"Alternative description",enabled:!(e.hasAccessibilityOptions&&e.image.isDecorative)},o=e.classList.map((e=>({name:"classes",type:"listbox",label:"Class",items:e})));return D([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],t.toArray(),e.hasAccessibilityOptions&&e.hasDescription?[{type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]}]:[],e.hasDescription?[n]:[],e.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],e.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[{...(r=e.classList.isSome()&&e.hasImageCaption,r?{type:"grid",columns:2}:{type:"panel"}),items:D([o.toArray(),e.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])}]]);var r},qe=e=>({title:"General",name:"general",items:We(e)}),Ve=We,Ze=e=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}),Ke=image=>({src:{value:image.src,meta:{}},images:image.src,alt:image.alt,title:image.title,dimensions:{width:image.width,height:image.height},classes:image.class,caption:image.caption,style:image.style,vspace:image.vspace,border:image.border,hspace:image.hspace,borderstyle:image.borderStyle,fileinput:[],isDecorative:image.isDecorative}),Ge=(data,e)=>({src:data.src.value,alt:null!==data.alt&&0!==data.alt.length||!e?data.alt:null,title:data.title,width:data.dimensions.width,height:data.dimensions.height,class:data.classes,style:data.style,caption:data.caption,hspace:data.hspace,vspace:data.vspace,border:data.border,borderStyle:data.borderstyle,isDecorative:data.isDecorative}),Ye=(e,t)=>{const data=t.getData();((e,t)=>/^(?:[a-zA-Z]+:)?\/\//.test(t)?C.none():e.prependURL.bind((e=>t.substring(0,e.length)!==e?C.some(e+t):C.none())))(e,data.src.value).each((e=>{t.setData({src:{value:e,meta:data.src.meta}})}))},Je=(e,t)=>{const data=t.getData(),meta=data.src.meta;if(void 0!==meta){const n=Ne({},data);((e,data,meta)=>{e.hasDescription&&l(meta.alt)&&(data.alt=meta.alt),e.hasAccessibilityOptions&&(data.isDecorative=meta.isDecorative||data.isDecorative||!1),e.hasImageTitle&&l(meta.title)&&(data.title=meta.title),e.hasDimensions&&(l(meta.width)&&(data.dimensions.width=meta.width),l(meta.height)&&(data.dimensions.height=meta.height)),l(meta.class)&&$e(e.classList,meta.class).each((e=>{data.classes=e.value})),e.hasImageCaption&&y(meta.caption)&&(data.caption=meta.caption),e.hasAdvTab&&(l(meta.style)&&(data.style=meta.style),l(meta.vspace)&&(data.vspace=meta.vspace),l(meta.border)&&(data.border=meta.border),l(meta.hspace)&&(data.hspace=meta.hspace),l(meta.borderstyle)&&(data.borderstyle=meta.borderstyle))})(e,n,meta),t.setData(n)}},Xe=(e,t,n,o)=>{Ye(t,o),Je(t,o),((e,t,n,o)=>{const data=o.getData(),r=data.src.value,meta=data.src.meta||{};meta.width||meta.height||!t.hasDimensions||(F(r)?e.imageSize(r).then((e=>{n.open&&o.setData({dimensions:e})})).catch((e=>console.error(e))):o.setData({dimensions:{width:"",height:""}}))})(e,t,n,o),((e,t,n)=>{const data=n.getData(),image=$e(e.imageList,data.src.value);t.prevImage=image,n.setData({images:image.map((e=>e.value)).getOr("")})})(t,n,o)},Qe=(e,t,n,o)=>{const data=o.getData();o.block("Uploading image"),head(data.fileinput).fold((()=>{o.unblock()}),(r=>{const l=URL.createObjectURL(r),c=()=>{o.unblock(),URL.revokeObjectURL(l)},d=r=>{o.setData({src:{value:r,meta:{}}}),o.showTab("general"),Xe(e,t,n,o)};var m;(m=r,new Promise(((e,t)=>{const n=new FileReader;n.onload=()=>{e(n.result)},n.onerror=()=>{var e;t(null===(e=n.error)||void 0===e?void 0:e.message)},n.readAsDataURL(m)}))).then((n=>{const m=e.createBlobCache(r,l,n);t.automaticUploads?e.uploadImage(m).then((e=>{d(e.url),c()})).catch((t=>{c(),e.alertErr(t)})):(e.addToBlobCache(m),d(m.blobUri()),o.unblock())}))}))},et=(e,t,n)=>(o,r)=>{"src"===r.name?Xe(e,t,n,o):"images"===r.name?((e,t,n,o)=>{const data=o.getData(),image=$e(t.imageList,data.images);image.each((img=>{const e=""===data.alt||n.prevImage.map((image=>image.text===data.alt)).getOr(!1);e?""===img.value?o.setData({src:img,alt:n.prevAlt}):o.setData({src:img,alt:img.text}):o.setData({src:img})})),n.prevImage=image,Xe(e,t,n,o)})(e,t,n,o):"alt"===r.name?n.prevAlt=o.getData().alt:"fileinput"===r.name?Qe(e,t,n,o):"isDecorative"===r.name&&o.setEnabled("alt",!o.getData().isDecorative)},tt=e=>()=>{e.open=!1},nt=e=>{if(e.hasAdvTab||e.hasUploadUrl||e.hasUploadHandler){return{type:"tabpanel",tabs:D([[qe(e)],e.hasAdvTab?[Ue(e)]:[],e.hasUploadTab&&(e.hasUploadUrl||e.hasUploadHandler)?[Ze(e)]:[]])}}return{type:"panel",items:Ve(e)}},ot=(e,t,n)=>o=>{const data=Ne(Ke(t.image),o.getData()),r={...data,style:ve(n.normalizeCss,Ge(data,!1))};e.execCommand("mceUpdateImage",!1,Ge(r,t.hasAccessibilityOptions)),e.editorUpload.uploadImagesAuto(),o.close()},st=e=>t=>Q(e,t)?(e=>new Promise((t=>{const img=document.createElement("img"),n=e=>{img.onload=img.onerror=null,img.parentNode&&img.parentNode.removeChild(img),t(e)};img.onload=()=>{const e={width:G(img.width,img.clientWidth),height:G(img.height,img.clientHeight)};n(Promise.resolve(e))},img.onerror=()=>{n(Promise.reject(`Failed to get image dimensions for: ${e}`))};const style=img.style;style.visibility="hidden",style.position="fixed",style.bottom=style.left="0px",style.width=style.height="auto",document.body.appendChild(img),img.src=e})))(e.documentBaseURI.toAbsolute(t)).then((e=>({width:String(e.width),height:String(e.height)}))):Promise.resolve({width:"",height:""}),at=e=>(t,n,o)=>{var r;return e.editorUpload.blobCache.create({blob:t,blobUri:n,name:null===(r=t.name)||void 0===r?void 0:r.replace(/\.[^\.]+$/,""),filename:t.name,base64:o.split(",")[1]})},lt=e=>t=>{e.editorUpload.blobCache.add(t)},it=e=>t=>{e.windowManager.alert(t)},ct=e=>t=>Te(e,t),ut=e=>t=>e.dom.parseStyle(t),mt=e=>(t,n)=>e.dom.serializeStyle(t,n),gt=e=>t=>Me(e).upload([t],!1).then((e=>{var t;return 0===e.length?Promise.reject("Failed to upload image"):!1===e[0].status?Promise.reject(null===(t=e[0].error)||void 0===t?void 0:t.message):e[0]})),pt=e=>{const t={imageSize:st(e),addToBlobCache:lt(e),createBlobCache:at(e),alertErr:it(e),normalizeCss:ct(e),parseStyle:ut(e),serializeStyle:mt(e),uploadImage:gt(e)};return{open:()=>{He(e).then((n=>{const o=(e=>({prevImage:$e(e.imageList,e.image.src),prevAlt:e.image.alt,open:!0}))(n);return{title:"Insert/Edit Image",size:"normal",body:nt(n),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ke(n.image),onSubmit:ot(e,n,t),onChange:et(t,n,o),onClose:tt(o)}})).then(e.windowManager.open)}}},ht=e=>{const t=e.attr("class");return v(t)&&/\bimage\b/.test(t)},ft=e=>t=>{let i=t.length;const n=t=>{t.attr("contenteditable",e?"true":null)};for(;i--;){const o=t[i];ht(o)&&(o.attr("contenteditable",e?"false":null),Pe.each(o.getAll("figcaption"),n))}},bt=e=>t=>{const n=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",n),n(),()=>{e.off("NodeChange",n)}};e.add("image",(e=>{I(e),(e=>{e.on("PreInit",(()=>{e.parser.addNodeFilter("figure",ft(!0)),e.serializer.addNodeFilter("figure",ft(!1))}))})(e),(e=>{e.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:pt(e).open,onSetup:t=>{t.setActive(v(_e(e)));const n=e.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",t.setActive).unbind,o=bt(e)(t);return()=>{n(),o()}}}),e.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:pt(e).open,onSetup:bt(e)}),e.ui.registry.addContextMenu("image",{update:element=>e.selection.isEditable()&&(fe(element)||"IMG"===element.nodeName&&!X(element))?["image"]:[]})})(e),(e=>{e.addCommand("mceImage",pt(e).open),e.addCommand("mceUpdateImage",((t,data)=>{e.undoManager.transact((()=>Ee(e,data)))}))})(e)}))}()},675:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,n=t("string"),o=t("object"),r=t("array"),l=a=>!(a=>null==a)(a);class c{constructor(e,t){this.tag=e,this.value=t}static some(e){return new c(!0,e)}static none(){return c.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?c.some(e(this.value)):c.none()}bind(e){return this.tag?e(this.value):c.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:c.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return l(e)?c.some(e):c.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}c.singletonNone=new c(!1);const d=Array.prototype.push,m=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},h=e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!r(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);d.apply(t,e[i])}return t},f=Object.keys,y=Object.hasOwnProperty,v=(e,t)=>w(e,t)?c.from(e[t]):c.none(),w=(e,t)=>y.call(e,t),option=e=>t=>t.options.get(e),x=option("audio_template_callback"),S=option("video_template_callback"),C=option("iframe_template_callback"),k=option("media_live_embeds"),T=option("media_filter_html"),_=option("media_url_resolver"),A=option("media_alt_source"),O=option("media_poster"),D=option("media_dimensions");var E=tinymce.util.Tools.resolve("tinymce.util.Tools"),N=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),R=tinymce.util.Tools.resolve("tinymce.html.DomParser");const M=N.DOM,P=e=>e.replace(/px$/,""),F=e=>{const style=e.attr("style"),t=style?M.parseStyle(style):{};return{type:"ephox-embed-iri",source:e.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:v(t,"max-width").map(P).getOr(""),height:v(t,"max-height").map(P).getOr("")}},I=(html,e)=>{let data={};for(let t=R({validate:!1,forced_root_block:!1},e).parse(html);t;t=t.walk())if(1===t.type){const e=t.name;if(t.attr("data-ephox-embed-iri")){data=F(t);break}data.source||"param"!==e||(data.source=t.attr("movie")),"iframe"!==e&&"object"!==e&&"embed"!==e&&"video"!==e&&"audio"!==e||(data.type||(data.type=e),data=E.extend(t.attributes.map,data)),"script"===e&&(data={type:"script",source:t.attr("src")}),"source"===e&&(data.source?data.altsource||(data.altsource=t.attr("src")):data.source=t.attr("src")),"img"!==e||data.poster||(data.poster=t.attr("src"))}return data.source=data.source||data.src||"",data.altsource=data.altsource||"",data.poster=data.poster||"",data},L=e=>{var t;const n=null!==(t=e.toLowerCase().split(".").pop())&&void 0!==t?t:"";return v({mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},n).getOr("")};var B=tinymce.util.Tools.resolve("tinymce.html.Node"),j=tinymce.util.Tools.resolve("tinymce.html.Serializer");const z=(e,t={})=>R({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...t},e),$=N.DOM,U=e=>/^[0-9.]+$/.test(e)?e+"px":e,H=(data,e)=>{const style=e.attr("style"),t=style?$.parseStyle(style):{};l(data.width)&&(t["max-width"]=U(data.width)),l(data.height)&&(t["max-height"]=U(data.height)),e.attr("style",$.serializeStyle(t))},W=["source","altsource"],V=(html,data,e,t)=>{let n=0,o=0;const r=z(t);r.addNodeFilter("source",(e=>n=e.length));const l=r.parse(html);for(let t=l;t;t=t.walk())if(1===t.type){const r=t.name;if(t.attr("data-ephox-embed-iri")){H(data,t);break}switch(r){case"video":case"object":case"embed":case"img":case"iframe":void 0!==data.height&&void 0!==data.width&&(t.attr("width",data.width),t.attr("height",data.height))}if(e)switch(r){case"video":t.attr("poster",data.poster),t.attr("src",null);for(let e=n;e<2;e++)if(data[W[e]]){const source=new B("source",1);source.attr("src",data[W[e]]),source.attr("type",data[W[e]+"mime"]||null),t.append(source)}break;case"iframe":t.attr("src",data.source);break;case"object":const e=t.getAll("img").length>0;if(data.poster&&!e){t.attr("src",data.poster);const img=new B("img",1);img.attr("src",data.poster),img.attr("width",data.width),img.attr("height",data.height),t.append(img)}break;case"source":if(o<2&&(t.attr("src",data[W[o]]),t.attr("type",data[W[o]+"mime"]||null),!data[W[o]])){t.remove();continue}o++;break;case"img":data.poster||t.remove()}}return j({},t).serialize(l)},Z=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],K=(pattern,e)=>{const t=(e=>{const t=e.match(/^(https?:\/\/|www\.)(.+)$/i);return t&&t.length>1?"www."===t[1]?"https://":t[1]:"https://"})(e),n=pattern.regex.exec(e);let o=t+pattern.url;if(l(n))for(let i=0;i<n.length;i++)o=o.replace("$"+i,(()=>n[i]?n[i]:""));return o.replace(/\?$/,"")},G=e=>{const t=Z.filter((pattern=>pattern.regex.test(e)));return t.length>0?E.extend({},t[0],{url:K(t[0],e)}):null},Y=(e,t)=>{var n;const data=E.extend({},t);if(!data.source&&(E.extend(data,I(null!==(n=data.embed)&&void 0!==n?n:"",e.schema)),!data.source))return"";data.altsource||(data.altsource=""),data.poster||(data.poster=""),data.source=e.convertURL(data.source,"source"),data.altsource=e.convertURL(data.altsource,"source"),data.sourcemime=L(data.source),data.altsourcemime=L(data.altsource),data.poster=e.convertURL(data.poster,"poster");const pattern=G(data.source);if(pattern&&(data.source=pattern.url,data.type=pattern.type,data.allowfullscreen=pattern.allowFullscreen,data.width=data.width||String(pattern.w),data.height=data.height||String(pattern.h)),data.embed)return V(data.embed,data,!0,e.schema);{const t=x(e),n=S(e),o=C(e);return data.width=data.width||"300",data.height=data.height||"150",E.each(data,((t,n)=>{data[n]=e.dom.encode(""+t)})),"iframe"===data.type?((data,e)=>{if(e)return e(data);{const e=data.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+data.source+'" width="'+data.width+'" height="'+data.height+'"'+e+"></iframe>"}})(data,o):"application/x-shockwave-flash"===data.sourcemime?(data=>{let html='<object data="'+data.source+'" width="'+data.width+'" height="'+data.height+'" type="application/x-shockwave-flash">';return data.poster&&(html+='<img src="'+data.poster+'" width="'+data.width+'" height="'+data.height+'" />'),html+="</object>",html})(data):-1!==data.sourcemime.indexOf("audio")?((data,e)=>e?e(data):'<audio controls="controls" src="'+data.source+'">'+(data.altsource?'\n<source src="'+data.altsource+'"'+(data.altsourcemime?' type="'+data.altsourcemime+'"':"")+" />\n":"")+"</audio>")(data,t):"script"===data.type?(data=>'<script src="'+data.source+'"><\/script>')(data):((data,e)=>e?e(data):'<video width="'+data.width+'" height="'+data.height+'"'+(data.poster?' poster="'+data.poster+'"':"")+' controls="controls">\n<source src="'+data.source+'"'+(data.sourcemime?' type="'+data.sourcemime+'"':"")+" />\n"+(data.altsource?'<source src="'+data.altsource+'"'+(data.altsourcemime?' type="'+data.altsourcemime+'"':"")+" />\n":"")+"</video>")(data,n)}},J=element=>element.hasAttribute("data-mce-object")||element.hasAttribute("data-ephox-embed-iri"),X={},Q=e=>data=>Y(e,data),ee=(e,data)=>{const t=_(e);return t?((data,e,t)=>new Promise(((n,o)=>{const r=t=>(t.html&&(X[data.source]=t),n({url:data.source,html:t.html?t.html:e(data)}));X[data.source]?r(X[data.source]):t({url:data.source},r,o)})))(data,Q(e),t):((data,e)=>Promise.resolve({html:e(data),url:data.source}))(data,Q(e))},te=(data,e)=>{const t={};return v(data,"dimensions").each((n=>{m(["width","height"],(o=>{v(e,o).orThunk((()=>v(n,o))).each((e=>t[o]=e))}))})),t},ne=(data,e)=>{const t=e&&"dimensions"!==e?((e,data)=>v(data,e).bind((e=>v(e,"meta"))))(e,data).getOr({}):{},n=((data,e,t)=>n=>{const r=()=>v(data,n),l=()=>v(e,n),d=e=>v(e,"value").bind((e=>e.length>0?c.some(e):c.none()));return{[n]:(n===t?r().bind((e=>o(e)?d(e).orThunk(l):l().orThunk((()=>c.from(e))))):l().orThunk((()=>r().bind((e=>o(e)?d(e):c.from(e)))))).getOr("")}})(data,t,e);return{...n("source"),...n("altsource"),...n("poster"),...n("embed"),...te(data,t)}},oe=data=>{const e={...data,source:{value:v(data,"source").getOr("")},altsource:{value:v(data,"altsource").getOr("")},poster:{value:v(data,"poster").getOr("")}};return m(["width","height"],(t=>{v(data,t).each((n=>{const o=e.dimensions||{};o[t]=n,e.dimensions=o}))})),e},re=e=>t=>{const n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})},se=(e,t)=>o=>{if(n(o.url)&&o.url.trim().length>0){const html=o.html,n={...I(html,t.schema),source:o.url,embed:html};e.setData(oe(n))}},ae=(e,html)=>{const t=e.dom.select("*[data-mce-object]");e.insertContent(html),((e,t)=>{const n=e.dom.select("*[data-mce-object]");for(let i=0;i<t.length;i++)for(let e=n.length-1;e>=0;e--)t[i]===n[e]&&n.splice(e,1);e.selection.select(n[0])})(e,t),e.nodeChanged()},le=(e,t)=>l(t)&&"ephox-embed-iri"===t&&l(G(e)),ie=(e,t)=>((e,t)=>e.width!==t.width||e.height!==t.height)(e,t)&&le(t.source,e.type),ce=(e,t,n)=>{var o,r;t.embed=ie(e,t)&&D(n)?Y(n,{...t,embed:""}):V(null!==(o=t.embed)&&void 0!==o?o:"",t,!1,n.schema),t.embed&&(e.source===t.source||(r=t.source,w(X,r)))?ae(n,t.embed):ee(n,t).then((e=>{ae(n,e.html)})).catch(re(n))},ue=e=>{const t=(e=>{const element=e.selection.getNode(),t=J(element)?e.serializer.serialize(element,{selection:!0}):"",data=I(t,e.schema),n=(()=>{if(le(data.source,data.type)){const rect=e.dom.getRect(element);return{width:rect.w.toString().replace(/px$/,""),height:rect.h.toString().replace(/px$/,"")}}return{}})();return{embed:t,...data,...n}})(e),n=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})(t),o=oe(t),r=D(e)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],l={title:"General",name:"general",items:h([[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],r])},c={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},d=[];A(e)&&d.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),O(e)&&d.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const m={title:"Advanced",name:"advanced",items:d},f=[l,c];d.length>0&&f.push(m);const body={type:"tabpanel",tabs:f},y=e.windowManager.open({title:"Insert/Edit Media",size:"normal",body:body,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{const o=ne(t.getData());ce(n.get(),o,e),t.close()},onChange:(t,o)=>{switch(o.name){case"source":((t,n)=>{const o=ne(n.getData(),"source");t.source!==o.source&&(se(y,e)({url:o.source,html:""}),ee(e,o).then(se(y,e)).catch(re(e)))})(n.get(),t);break;case"embed":(t=>{var n;const data=ne(t.getData()),o=I(null!==(n=data.embed)&&void 0!==n?n:"",e.schema);t.setData(oe(o))})(t);break;case"dimensions":case"altsource":case"poster":((t,n,o)=>{const r=ne(t.getData(),n),data=ie(o,r)&&D(e)?{...r,embed:""}:r,embed=Y(e,data);t.setData(oe({...data,embed:embed}))})(t,o.name,n.get())}n.set(ne(t.getData()))},initialData:o})};var de=tinymce.util.Tools.resolve("tinymce.Env");const me=e=>{const t=e.name;return"iframe"===t||"video"===t||"audio"===t},ge=(e,t,n,o=null)=>{const r=e.attr(n);return l(r)?r:w(t,n)?null:o},pe=(e,t,n)=>{const o="img"===t.name||"video"===e.name,r=o?"300":null,l="audio"===e.name?"30":"150",c=o?l:null;t.attr({width:ge(e,n,"width",r),height:ge(e,n,"height",c)})},he=(e,t)=>{const n=t.name,o=new B("img",1);return be(e,t,o),pe(t,o,{}),o.attr({style:t.attr("style"),src:de.transparentSrc,"data-mce-object":n,class:"mce-object mce-object-"+n}),o},fe=(e,t)=>{var n;const o=t.name,r=new B("span",1);r.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":o,class:"mce-preview-object mce-object-"+o}),be(e,t,r);const c=e.dom.parseStyle(null!==(n=t.attr("style"))&&void 0!==n?n:""),d=new B(o,1);if(pe(t,d,c),d.attr({src:t.attr("src"),style:t.attr("style"),class:t.attr("class")}),"iframe"===o)d.attr({allowfullscreen:t.attr("allowfullscreen"),frameborder:"0"});else{m(["controls","crossorigin","currentTime","loop","muted","poster","preload"],(e=>{d.attr(e,t.attr(e))}));const n=r.attr("data-mce-html");l(n)&&((e,t,n,html)=>{const o=z(e.schema).parse(html,{context:t});for(;o.firstChild;)n.append(o.firstChild)})(e,o,d,unescape(n))}const h=new B("span",1);return h.attr("class","mce-shim"),r.append(d),r.append(h),r},be=(e,t,n)=>{var o;const r=null!==(o=t.attributes)&&void 0!==o?o:[];let l=r.length;for(;l--;){const t=r[l].name;let o=r[l].value;"width"===t||"height"===t||"style"===t||((e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t)(t,"data-mce-",0)||("data"!==t&&"src"!==t||(o=e.convertURL(o,t)),n.attr("data-mce-p-"+t,o))}const c=j({inner:!0},e.schema),d=new B("div",1);m(t.children(),(e=>d.append(e)));const h=c.serialize(d);h&&(n.attr("data-mce-html",escape(h)),n.empty())},ye=e=>{const t=e.attr("class");return n(t)&&/\btiny-pageembed\b/.test(t)},ve=e=>{let t=e;for(;t=t.parent;)if(t.attr("data-ephox-embed-iri")||ye(t))return!0;return!1},we=(e,t,html)=>{const n=(0,e.options.get)("xss_sanitization"),o=T(e);return z(e.schema,{sanitize:n,validate:o}).parse(html,{context:t})},xe=e=>{e.on("PreInit",(()=>{const{schema:t,serializer:n,parser:o}=e,r=t.getBoolAttrs();m("webkitallowfullscreen mozallowfullscreen".split(" "),(e=>{r[e]={}})),((e,t)=>{const n=f(e);for(let o=0,r=n.length;o<r;o++){const i=n[o];t(e[i],i)}})({embed:["wmode"]},((e,n)=>{const o=t.getElementRule(n);o&&m(e,(e=>{o.attributes[e]={},o.attributesOrder.push(e)}))})),o.addNodeFilter("iframe,video,audio,object,embed,script",(e=>t=>{let n,i=t.length;for(;i--;)n=t[i],n.parent&&(n.parent.attr("data-mce-object")||(me(n)&&k(e)?ve(n)||n.replace(fe(e,n)):ve(n)||n.replace(he(e,n))))})(e)),n.addAttributeFilter("data-mce-object",((t,n)=>{var o;let i=t.length;for(;i--;){const r=t[i];if(!r.parent)continue;const l=r.attr(n),c=new B(l,1);if("audio"!==l&&"script"!==l){const e=r.attr("class");e&&-1!==e.indexOf("mce-preview-object")&&r.firstChild?c.attr({width:r.firstChild.attr("width"),height:r.firstChild.attr("height")}):c.attr({width:r.attr("width"),height:r.attr("height")})}c.attr({style:r.attr("style")});const d=null!==(o=r.attributes)&&void 0!==o?o:[];let h=d.length;for(;h--;){const e=d[h].name;0===e.indexOf("data-mce-p-")&&c.attr(e.substr(11),d[h].value)}"script"===l&&c.attr("type","text/javascript");const f=r.attr("data-mce-html");if(f){const t=we(e,l,unescape(f));m(t.children(),(e=>c.append(e)))}r.replace(c)}}))})),e.on("SetContent",(()=>{const t=e.dom;m(t.select("span.mce-preview-object"),(e=>{0===t.select("span.mce-shim",e).length&&t.add(e,"span",{class:"mce-shim"})}))}))},Se=e=>t=>{const n=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",n),n(),()=>{e.off("NodeChange",n)}};e.add("media",(e=>((e=>{const t=e.options.register;t("audio_template_callback",{processor:"function"}),t("video_template_callback",{processor:"function"}),t("iframe_template_callback",{processor:"function"}),t("media_live_embeds",{processor:"boolean",default:!0}),t("media_filter_html",{processor:"boolean",default:!0}),t("media_url_resolver",{processor:"function"}),t("media_alt_source",{processor:"boolean",default:!0}),t("media_poster",{processor:"boolean",default:!0}),t("media_dimensions",{processor:"boolean",default:!0})})(e),(e=>{e.addCommand("mceMedia",(()=>{ue(e)}))})(e),(e=>{const t=()=>e.execCommand("mceMedia");e.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:t,onSetup:t=>{const n=e.selection;t.setActive(J(n.getNode()));const o=n.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",t.setActive).unbind,r=Se(e)(t);return()=>{o(),r()}}}),e.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:t,onSetup:Se(e)})})(e),(e=>{e.on("ResolveName",(e=>{let t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}))})(e),xe(e),(e=>{e.on("click keyup touchend",(()=>{const t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")})),e.on("ObjectSelected",(e=>{"script"===e.target.getAttribute("data-mce-object")&&e.preventDefault()})),e.on("ObjectResized",(t=>{const n=t.target;if(n.getAttribute("data-mce-object")){let html=n.getAttribute("data-mce-html");html&&(html=unescape(html),n.setAttribute("data-mce-html",escape(V(html,{width:String(t.width),height:String(t.height)},!1,e.schema))))}}))})(e),(e=>({showDialog:()=>{ue(e)}}))(e))))}()},676:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,n=e=>t=>typeof t===e,o=t("string"),r=t("array"),l=n("boolean"),c=(d=void 0,a=>d===a);var d;const m=a=>!(a=>null==a)(a),h=n("function"),f=n("number"),y=()=>{},v=e=>()=>e,w=e=>e,x=(a,b)=>a===b;function S(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const C=e=>{e()},k=v(!1),T=v(!0);class _{constructor(e,t){this.tag=e,this.value=t}static some(e){return new _(!0,e)}static none(){return _.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?_.some(e(this.value)):_.none()}bind(e){return this.tag?e(this.value):_.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:_.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return m(e)?_.some(e):_.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}_.singletonNone=new _(!1);const A=Object.keys,O=Object.hasOwnProperty,D=(e,t)=>{const n=A(e);for(let o=0,r=n.length;o<r;o++){const i=n[o];t(e[i],i)}},E=(e,t)=>{const n={};var o;return((e,t,n,o)=>{D(e,((e,i)=>{(t(e,i)?n:o)(e,i)}))})(e,t,(o=n,(e,i)=>{o[i]=e}),y),n},N=e=>((e,t)=>{const n=[];return D(e,((e,o)=>{n.push(t(e,o))})),n})(e,w),R=e=>A(e).length,M=(e,t)=>P(e,t)?_.from(e[t]):_.none(),P=(e,t)=>O.call(e,t),F=(e,t)=>P(e,t)&&void 0!==e[t]&&null!==e[t],I=Array.prototype.indexOf,L=Array.prototype.push,B=(e,t)=>((e,t)=>I.call(e,t))(e,t)>-1,j=(e,t)=>{for(let i=0,n=e.length;i<n;i++){if(t(e[i],i))return!0}return!1},z=(e,t)=>{const n=[];for(let i=0;i<e;i++)n.push(t(i));return n},map=(e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o},$=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},filter=(e,t)=>{const n=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];t(o,i)&&n.push(o)}return n},U=(e,t,n)=>($(e,((e,i)=>{n=t(n,e,i)})),n),H=(e,t)=>((e,t,n)=>{for(let i=0,o=e.length;i<o;i++){const o=e[i];if(t(o,i))return _.some(o);if(n(o,i))break}return _.none()})(e,t,k),W=(e,t)=>(e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!r(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);L.apply(t,e[i])}return t})(map(e,t)),V=(e,t)=>{for(let i=0,n=e.length;i<n;++i){if(!0!==t(e[i],i))return!1}return!0},Z=(e,i)=>i>=0&&i<e.length?_.some(e[i]):_.none(),K=(e,t)=>{for(let i=0;i<e.length;i++){const n=t(e[i],i);if(n.isSome())return n}return _.none()},G=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Y={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return G(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return G(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return G(t)},fromDom:G,fromPoint:(e,t,n)=>_.from(e.dom.elementFromPoint(t,n)).map(G)},J=(element,e)=>{const t=element.dom;if(1!==t.nodeType)return!1;{const n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},X=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Q=(e,t)=>e.dom===t.dom,ee=J;"undefined"!=typeof window?window:Function("return this;")();const te=element=>element.dom.nodeName.toLowerCase(),ne=element=>element.dom.nodeType,oe=e=>element=>ne(element)===e,re=element=>8===ne(element)||"#comment"===te(element),se=oe(1),ae=oe(3),le=oe(9),ie=oe(11),ce=e=>t=>se(t)&&te(t)===e,ue=e=>{return le(e)?e:(element=e,Y.fromDom(element.dom.ownerDocument));var element},de=element=>_.from(element.dom.parentNode).map(Y.fromDom),me=(element,e)=>{const t=h(e)?e:k;let n=element.dom;const o=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,p=Y.fromDom(e);if(o.push(p),!0===t(p))break;n=e}return o},ge=element=>_.from(element.dom.previousSibling).map(Y.fromDom),pe=element=>_.from(element.dom.nextSibling).map(Y.fromDom),he=element=>map(element.dom.childNodes,Y.fromDom),fe=element=>((element,e)=>{const t=element.dom.childNodes;return _.from(t[e]).map(Y.fromDom)})(element,0),be=h(Element.prototype.attachShadow)&&h(Node.prototype.getRootNode)?e=>Y.fromDom(e.dom.getRootNode()):ue,ye=e=>{const t=be(e);return ie(n=t)&&m(n.dom.host)?_.some(t):_.none();var n},ve=e=>Y.fromDom(e.dom.host),we=element=>{const e=ae(element)?element.dom.parentNode:element.dom;if(null==e||null===e.ownerDocument)return!1;const t=e.ownerDocument;return ye(Y.fromDom(e)).fold((()=>t.body.contains(e)),(n=we,o=ve,a=>n(o(a))));var n,o};var xe=(e,t,n,a,o)=>e(n,a)?_.some(n):h(o)&&o(n)?_.none():t(n,a,o);const Se=(e,t,n)=>{let element=e.dom;const o=h(n)?n:k;for(;element.parentNode;){element=element.parentNode;const e=Y.fromDom(element);if(t(e))return _.some(e);if(o(e))break}return _.none()},Ce=(e,t,n)=>Se(e,(e=>J(e,t)),n),ke=(e,t)=>((e,t)=>H(e.dom.childNodes,(e=>t(Y.fromDom(e)))).map(Y.fromDom))(e,(e=>J(e,t))),Te=(e,t)=>((e,t)=>{const base=void 0===t?document:t.dom;return X(base)?_.none():_.from(base.querySelector(e)).map(Y.fromDom)})(t,e),_e=(e,t,n)=>xe(((element,e)=>J(element,e)),Ce,e,t,n),Ae=(element,e=!1)=>{return we(element)?element.dom.isContentEditable:(t=element,_e(t,"[contenteditable]")).fold(v(e),(e=>"true"===Oe(e)));var t},Oe=element=>element.dom.contentEditable,De=e=>element=>Q(element,(e=>Y.fromDom(e.getBody()))(e)),Ee=e=>/^\d+(\.\d+)?$/.test(e)?e+"px":e,Ne=e=>Y.fromDom(e.selection.getStart()),Re=e=>{return(t=e,n=ce("table"),xe(((s,e)=>e(s)),Se,t,n,o)).forall(Ae);var t,n,o},Me=(e,t)=>{let n=[];return $(he(e),(e=>{t(e)&&(n=n.concat([e])),n=n.concat(Me(e,t))})),n},Pe=(e,t)=>((e,t)=>filter(he(e),t))(e,(e=>J(e,t))),Fe=(e,t)=>((e,t)=>{const base=void 0===t?document:t.dom;return X(base)?[]:map(base.querySelectorAll(e),Y.fromDom)})(t,e),Ie=(e,t,n)=>{if(!(o(n)||l(n)||f(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Le=(element,e,t)=>{Ie(element.dom,e,t)},Be=(element,e)=>{const t=element.dom.getAttribute(e);return null===t?void 0:t},je=(element,e)=>_.from(Be(element,e)),ze=(element,e)=>{element.dom.removeAttribute(e)},$e=(e,t,n=x)=>e.exists((e=>n(e,t))),Ue=(e,t,n)=>e.isSome()&&t.isSome()?_.some(n(e.getOrDie(),t.getOrDie())):_.none(),He=(e,t)=>((e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t)(e,t,0),We=(qe=/^\s+|\s+$/g,s=>s.replace(qe,""));var qe;const Ve=s=>s.length>0,Ze=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?_.none():_.some(n)},Ke=e=>void 0!==e.style&&h(e.style.getPropertyValue),Ge=(element,e,t)=>{((e,t,n)=>{if(!o(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Ke(e)&&e.style.setProperty(t,n)})(element.dom,e,t)},Ye=(element,e)=>{const t=element.dom,n=window.getComputedStyle(t).getPropertyValue(e);return""!==n||we(element)?n:Je(t,e)},Je=(e,t)=>Ke(e)?e.style.getPropertyValue(t):"",Xe=(element,e)=>{const t=element.dom,n=Je(t,e);return _.from(n).filter((e=>e.length>0))},Qe=(element,e)=>{((e,t)=>{Ke(e)&&e.style.removeProperty(t)})(element.dom,e),$e(je(element,"style").map(We),"")&&ze(element,"style")},et=(e,t,n=0)=>je(e,t).map((e=>parseInt(e,10))).getOr(n),tt=(e,t)=>nt(e,t,T),nt=(e,t,n)=>W(he(e),(e=>J(e,t)?n(e)?[e]:[]:nt(e,t,n))),ot=["tfoot","thead","tbody","colgroup"],st=(element,e,t)=>({element:element,rowspan:e,colspan:t}),at=(element,e,section)=>({element:element,cells:e,section:section}),lt=(element,e)=>((e,element,t=k)=>t(element)?_.none():B(e,te(element))?_.some(element):Ce(element,e.join(","),(e=>J(e,"table")||t(e))))(["td","th"],element,e),table=(element,e)=>_e(element,"table",e),it=e=>tt(e,"tr"),ct=e=>table(e).fold(v([]),(table=>Pe(table,"colgroup"))),ut=(e,t)=>map(e,(e=>{if("colgroup"===te(e)){const t=map((e=>J(e,"colgroup")?Pe(e,"col"):W(ct(e),(e=>Pe(e,"col"))))(e),(e=>{const t=et(e,"span",1);return st(e,1,t)}));return at(e,t,"colgroup")}{const n=map((e=>tt(e,"th,td"))(e),(e=>{const t=et(e,"rowspan",1),n=et(e,"colspan",1);return st(e,t,n)}));return at(e,n,t(e))}})),mt=e=>de(e).map((e=>{const t=te(e);return(e=>B(ot,e))(t)?t:"tbody"})).getOr("tbody"),gt=table=>je(table,"data-snooker-locked-cols").bind((e=>_.from(e.match(/\d+/g)))).map((e=>((e,t)=>{const n={};for(let i=0,o=e.length;i<o;i++){const o=e[i];n[String(o)]=t(o,i)}return n})(e,T))),pt=(e,t)=>e+","+t,ht=(e,t)=>{const n=W(e.all,(e=>e.cells));return filter(n,t)},ft=e=>{const t={},n=[];var o;const r=(o=e,Z(o,0)).map((e=>e.element)).bind(table).bind(gt).getOr({});let l=0,c=0,d=0;const{pass:m,fail:h}=((e,t)=>{const n=[],o=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];(t(r,i)?n:o).push(r)}return{pass:n,fail:o}})(e,(e=>"colgroup"===e.section));$(h,(e=>{const o=[];$(e.cells,(e=>{let n=0;for(;void 0!==t[pt(d,n)];)n++;const l=F(r,n.toString()),m=((element,e,t,n,o,r)=>({element:element,rowspan:e,colspan:t,row:n,column:o,isLocked:r}))(e.element,e.rowspan,e.colspan,d,n,l);for(let o=0;o<e.colspan;o++)for(let r=0;r<e.rowspan;r++){const e=n+o,l=pt(d+r,e);t[l]=m,c=Math.max(c,e+1)}o.push(m)})),l++,n.push(at(e.element,o,e.section)),d++}));const{columns:f,colgroups:y}=(e=>Z(e,e.length-1))(m).map((e=>{const t=(e=>{const t={};let n=0;return $(e.cells,(e=>{const o=e.colspan;z(o,(r=>{const l=n+r;t[l]=((element,e,t)=>({element:element,colspan:e,column:t}))(e.element,o,l)})),n+=o})),t})(e),n=((element,e)=>({element:element,columns:e}))(e.element,N(t));return{colgroups:[n],columns:t}})).getOrThunk((()=>({colgroups:[],columns:{}}))),v=((e,t)=>({rows:e,columns:t}))(l,c);return{grid:v,access:t,all:n,columns:f,colgroups:y}},bt=table=>{const e=(table=>{const e=it(table),t=[...ct(table),...e];return ut(t,mt)})(table);return ft(e)},yt=(e,t,n)=>_.from(e.access[pt(t,n)]),vt=(e,t,n)=>{const o=ht(e,(e=>n(t,e.element)));return o.length>0?_.some(o[0]):_.none()},wt=e=>W(e.all,(e=>e.cells)),xt=(e,t)=>_.from(e.columns[t]);var St=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ct=(e,t,n)=>{const o=e.select("td,th",t);let r;for(let i=0;i<o.length;i++){const t=e.getStyle(o[i],n);if(c(r)&&(r=t),r!==t)return""}return r},kt=(e,t,n)=>{St.each("left center right".split(" "),(o=>{o!==n&&e.formatter.remove("align"+o,{},t)})),n&&e.formatter.apply("align"+n,{},t)},Tt=(e,table,data)=>{e.dispatch("TableModified",{...data,table:table})},_t=(e,t)=>(e=>{const t=parseFloat(e);return isNaN(t)?_.none():_.some(t)})(e).getOr(t),At=(element,e,t)=>_t(Ye(element,e),t),Ot=(element,e)=>{const t=element.dom,n=t.getBoundingClientRect().width||t.offsetWidth;return"border-box"===e?n:((element,e,t,n)=>e-At(element,`padding-${t}`,0)-At(element,`padding-${n}`,0)-At(element,`border-${t}-width`,0)-At(element,`border-${n}-width`,0))(element,n,"left","right")},Dt=element=>Ot(element,"content-box");var Et=tinymce.util.Tools.resolve("tinymce.Env");const Nt=z(5,(i=>{const e=`${i+1}px`;return{title:e,value:e}})),Rt=map(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],(e=>({title:e,value:e.toLowerCase()}))),Mt="100%",Pt=e=>{var t;const n=e.dom,o=null!==(t=n.getParent(e.selection.getStart(),n.isBlock))&&void 0!==t?t:e.getBody();return Dt(Y.fromDom(o))+"px"},option=e=>t=>t.options.get(e),Ft=option("table_sizing_mode"),It=option("table_border_widths"),Lt=option("table_border_styles"),Bt=option("table_cell_advtab"),jt=option("table_row_advtab"),zt=option("table_advtab"),$t=option("table_appearance_options"),Ut=option("table_grid"),Ht=option("table_style_by_css"),Wt=option("table_cell_class_list"),qt=option("table_row_class_list"),Vt=option("table_class_list"),Zt=option("table_toolbar"),Kt=option("table_background_color_map"),Gt=option("table_border_color_map"),Yt=e=>"fixed"===Ft(e),Jt=e=>"responsive"===Ft(e),Xt=e=>{const t=e.options,n=t.get("table_default_styles");return t.isSet("table_default_styles")?n:((e,t)=>Jt(e)||!Ht(e)?t:Yt(e)?{...t,width:Pt(e)}:{...t,width:Mt})(e,n)},Qt=e=>{const t=e.options,n=t.get("table_default_attributes");return t.isSet("table_default_attributes")?n:((e,t)=>Jt(e)||Ht(e)?t:Yt(e)?{...t,width:Pt(e)}:{...t,width:Mt})(e,n)},en=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,tn=(e,t,n)=>{const o=vt(e,t,Q),r=vt(e,n,Q);return o.bind((e=>r.map((t=>{return n=e,o=t,r=Math.min(n.row,o.row),l=Math.min(n.column,o.column),c=Math.max(n.row+n.rowspan-1,o.row+o.rowspan-1),d=Math.max(n.column+n.colspan-1,o.column+o.colspan-1),{startRow:r,startCol:l,finishRow:c,finishCol:d};var n,o,r,l,c,d}))))},nn=(e,t,n)=>tn(e,t,n).bind((t=>((e,t)=>{let n=!0;const o=S(en,t);for(let i=t.startRow;i<=t.finishRow;i++)for(let r=t.startCol;r<=t.finishCol;r++)n=n&&yt(e,i,r).exists(o);return n?_.some(t):_.none()})(e,t))),on=bt,rn=(marker,element)=>{de(marker).each((e=>{e.dom.insertBefore(element.dom,marker.dom)}))},sn=(marker,element)=>{pe(marker).fold((()=>{de(marker).each((e=>{ln(e,element)}))}),(e=>{rn(e,element)}))},an=(e,element)=>{fe(e).fold((()=>{ln(e,element)}),(t=>{e.dom.insertBefore(element.dom,t.dom)}))},ln=(e,element)=>{e.dom.appendChild(element.dom)},cn=(element,e)=>{rn(element,e),ln(e,element)},un=(marker,e)=>{$(e,((t,i)=>{const n=0===i?marker:e[i-1];sn(n,t)}))},dn=(e,t)=>{$(t,(t=>{ln(e,t)}))},mn=element=>{const e=element.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},gn=e=>{const t=he(e);t.length>0&&un(e,t),mn(e)},pn=((e,t)=>{const n=element=>e(element)?_.from(element.dom.nodeValue):_.none();return{get:element=>{if(!e(element))throw new Error("Can only get "+t+" value of a "+t+" node");return n(element).getOr("")},getOption:n,set:(element,n)=>{if(!e(element))throw new Error("Can only set raw "+t+" value of a "+t+" node");element.dom.nodeValue=n}}})(ae,"text"),hn=element=>pn.get(element),fn=(element,e)=>pn.set(element,e);var bn=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const yn=(e,t,head,n)=>{const o=t(e,head);return r=(b,a)=>{const n=t(e,a);return vn(e,b,n)},l=o,((e,t)=>{for(let i=e.length-1;i>=0;i--)t(e[i],i)})(n,((e,i)=>{l=r(l,e,i)})),l;var r,l},vn=(e,t,n)=>t.bind((s=>n.filter(S(e.eq,s)))),wn=(e,t,n)=>n.length>0?((e,t,n,o)=>o(e,t,n[0],n.slice(1)))(e,t,n,yn):_.none(),xn={up:v({selector:Ce,closest:_e,predicate:Se,all:me}),down:v({selector:Fe,predicate:Me}),styles:v({get:Ye,getRaw:Xe,set:Ge,remove:Qe}),attrs:v({get:Be,set:Le,remove:ze,copyTo:(source,e)=>{((element,e)=>{const t=element.dom;D(e,((e,n)=>{Ie(t,n,e)}))})(e,U(source.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}))}}),insert:v({before:rn,after:sn,afterAll:un,append:ln,appendAll:dn,prepend:an,wrap:cn}),remove:v({unwrap:gn,remove:mn}),create:v({nu:Y.fromTag,clone:element=>Y.fromDom(element.dom.cloneNode(!1)),text:Y.fromText}),query:v({comparePosition:(element,e)=>element.dom.compareDocumentPosition(e.dom),prevSibling:ge,nextSibling:pe}),property:v({children:he,name:te,parent:de,document:element=>ue(element).dom,isText:ae,isComment:re,isElement:se,isSpecial:element=>{const e=te(element);return B(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],e)},getLanguage:element=>se(element)?je(element,"lang"):_.none(),getText:hn,setText:fn,isBoundary:element=>!!se(element)&&("body"===te(element)||B(bn,te(element))),isEmptyTag:element=>!!se(element)&&B(["br","img","hr","input"],te(element)),isNonEditable:element=>se(element)&&"false"===Be(element,"contenteditable")}),eq:Q,is:ee},Sn=e=>Ce(e,"table"),Cn=(e,t,n)=>Te(e,t).bind((t=>Te(e,n).bind((e=>{return(n=Sn,o=[t,e],wn(xn,((e,element)=>n(element)),o)).map((table=>({first:t,last:e,table:table})));var n,o})))),kn=(e,t)=>((e,t)=>{const n=Fe(e,t);return n.length>0?_.some(n):_.none()})(e,t),Tn=(e,t,n)=>Cn(e,t,n).bind((t=>{const n=t=>Q(e,t),o="thead,tfoot,tbody,table",r=Ce(t.first,o,n),l=Ce(t.last,o,n);return r.bind((e=>l.bind((n=>Q(e,n)?((table,e,t)=>{const n=on(table);return nn(n,e,t)})(t.table,t.first,t.last):_.none()))))})),_n=e=>map(e,Y.fromDom),An="data-mce-selected",On="data-mce-first-selected",Dn="data-mce-last-selected",En={selected:An,selectedSelector:"td["+An+"],th["+An+"]",firstSelected:On,firstSelectedSelector:"td["+On+"],th["+On+"]",lastSelected:Dn,lastSelectedSelector:"td["+Dn+"],th["+Dn+"]"},Nn=e=>(t,n)=>{const o=te(t),r="col"===o||"colgroup"===o?table(element=t).bind((table=>kn(table,En.firstSelectedSelector))).fold(v(element),(e=>e[0])):t;var element;return _e(r,e,n)},Rn=Nn("th,td,caption"),Mn=Nn("th,td"),Pn=e=>_n(e.model.table.getSelectedCells()),Fn=(e,t)=>{const n=Mn(e),o=n.bind((e=>table(e))).map((table=>it(table)));return Ue(n,o,((e,n)=>filter(n,(n=>j(_n(n.dom.cells),(n=>"1"===Be(n,t)||Q(n,e))))))).getOr([])},In=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Ln=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Bn=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,jn=e=>{return(t=e,n="#",He(t,n)?((e,t)=>e.substring(t))(t,n.length):t).toUpperCase();var t,n},zn=e=>(e=>Ln.test(e)||Bn.test(e))(e)?_.some({value:jn(e)}):_.none(),$n=component=>{const e=component.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},Un=e=>(e=>({value:jn(e)}))($n(e.red)+$n(e.green)+$n(e.blue)),Hn=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Wn=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,qn=(e,t,n,o)=>({red:e,green:t,blue:n,alpha:o}),Vn=(e,t,n,o)=>{const r=parseInt(e,10),g=parseInt(t,10),b=parseInt(n,10),a=parseFloat(o);return qn(r,g,b,a)},Zn=e=>{if("transparent"===e)return _.some(qn(0,0,0,0));const t=Hn.exec(e);if(null!==t)return _.some(Vn(t[1],t[2],t[3],"1"));const n=Wn.exec(e);return null!==n?_.some(Vn(n[1],n[2],n[3],n[4])):_.none()},Kn=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Gn=()=>(e=>{const t=Kn(_.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(_.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:s=>{n(),t.set(_.some(s))}}})((s=>s.unbind())),Yn=(e,t,n)=>o=>{const r=Gn(),l=!Ve(n);const c=()=>{const c=Pn(e),d=o=>e.formatter.match(t,{value:n},o.dom,l);l?(o.setActive(!j(c,d)),r.set(e.formatter.formatChanged(t,(e=>o.setActive(!e)),!0))):(o.setActive(V(c,d)),r.set(e.formatter.formatChanged(t,o.setActive,!1,{value:n})))};return e.initialized?c():e.on("init",c),r.clear},Jn=e=>F(e,"menu"),Xn=e=>map(e,(e=>{const text=e.text||e.title||"";return Jn(e)?{text:text,items:Xn(e.menu)}:{text:text,value:e.value}})),Qn=(e,t,n,o)=>map(t,(t=>{const text=t.text||t.title;return Jn(t)?{type:"nestedmenuitem",text:text,getSubmenuItems:()=>Qn(e,t.menu,n,o)}:{text:text,type:"togglemenuitem",onAction:()=>o(t.value),onSetup:Yn(e,n,t.value)}})),eo=(e,style)=>t=>{e.execCommand("mceTableApplyCellStyle",!1,{[style]:t})},to=e=>W(e,(e=>Jn(e)?[{...e,menu:to(e.menu)}]:Ve(e.value)?[e]:[])),no=(e,t,n,o)=>r=>r(Qn(e,t,n,o)),oo=(e,t,style)=>{const n=map(t,(e=>{return{text:e.title,value:"#"+(t=e.value,zn(t).orThunk((()=>Zn(t).map(Un))).getOrThunk((()=>{const canvas=document.createElement("canvas");canvas.height=1,canvas.width=1;const e=canvas.getContext("2d");e.clearRect(0,0,canvas.width,canvas.height),e.fillStyle="#FFFFFF",e.fillStyle=t,e.fillRect(0,0,1,1);const n=e.getImageData(0,0,1,1).data,o=n[0],g=n[1],b=n[2],a=n[3];return Un(qn(o,g,b,a))}))).value,type:"choiceitem"};var t}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:n.length>0?n:void 0,allowCustomColors:!1},onAction:data=>{const t="remove"===data.value?"":data.value;e.execCommand("mceTableApplyCellStyle",!1,{[style]:t})}}]},ro=e=>()=>{const t="header"===e.queryCommandValue("mceTableRowType")?"body":"header";e.execCommand("mceTableRowType",!1,{type:t})},so=e=>()=>{const t="th"===e.queryCommandValue("mceTableColType")?"td":"th";e.execCommand("mceTableColType",!1,{type:t})},ao=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:In}],lo=e=>ao.concat((e=>{const t=Xn(Wt(e));return t.length>0?_.some({name:"class",type:"listbox",label:"Class",items:t}):_.none()})(e).toArray()),io=(e,t)=>{const n=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Xn(Lt(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(n):n}},co=(e,element)=>{const t=e.dom;return{setAttrib:(e,n)=>{t.setAttrib(element,e,n)},setStyle:(e,n)=>{t.setStyle(element,e,n)},setFormat:(t,n)=>{""===n?e.formatter.remove(t,{value:null},element,!0):e.formatter.apply(t,{value:n},element)}}},uo=ce("th"),mo=(e,t)=>e&&t?"sectionCells":e?"section":"cells",go=e=>{const t=filter(e,(e=>uo(e.element)));return 0===t.length?_.some("td"):t.length===e.length?_.some("th"):_.none()},po=e=>{const t=map(e,(e=>(e=>{const t="thead"===e.section,n=$e(go(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||n?{type:"header",subType:mo(t,n)}:{type:"body"}})(e).type)),n=B(t,"header"),o=B(t,"footer");if(n||o){const e=B(t,"body");return!n||e||o?n||e||!o?_.none():_.some("footer"):_.some("header")}return _.some("body")},ho=(e,element)=>K(e.all,(e=>H(e.cells,(e=>Q(element,e.element))))),fo=(e,t,n)=>{const o=(e=>{const t=[],n=e=>{t.push(e)};for(let i=0;i<e.length;i++)e[i].each(n);return t})(map(t.selection,(t=>lt(t).bind((t=>ho(e,t))).filter(n))));return b=o.length>0,a=o,b?_.some(a):_.none();var b,a},bo=(e,t)=>fo(e,t,T),yo=(e,t)=>V(t,(t=>((e,t)=>ho(e,t).exists((e=>!e.isLocked)))(e,t))),vo=(e,t)=>((e,t)=>t.mergable)(0,t).filter((t=>yo(e,t.cells))),wo=(e,t)=>((e,t)=>t.unmergable)(0,t).filter((t=>yo(e,t))),xo=e=>{if(!r(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return $(e,((o,l)=>{const c=A(o);if(1!==c.length)throw new Error("one and only one name per case");const d=c[0],m=o[d];if(void 0!==n[d])throw new Error("duplicate key detected:"+d);if("cata"===d)throw new Error("cannot have a case named cata (sorry)");if(!r(m))throw new Error("case arguments must be an array");t.push(d),n[d]=(...n)=>{const o=n.length;if(o!==m.length)throw new Error("Wrong number of arguments to case "+d+". Expected "+m.length+" ("+m+"), got "+o);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[l].apply(null,n)},match:e=>{const o=A(e);if(t.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+o.join(","));if(!V(t,(e=>B(o,e))))throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+t.join(", "));return e[d].apply(null,n)},log:label=>{console.log(label,{constructors:t,constructor:d,params:n})}}}})),n},So=(xo([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),(table,e)=>{const t=bt(table);return bo(t,e).bind((e=>{const n=e[e.length-1],o=e[0].row,r=n.row+n.rowspan,l=t.all.slice(o,r);return po(l)})).getOr("")}),Co=e=>{return He(e,"rgb")?Zn(t=e).map(Un).map((e=>"#"+e.value)).getOr(t):e;var t},ko=e=>{const element=Y.fromDom(e);return{borderwidth:Xe(element,"border-width").getOr(""),borderstyle:Xe(element,"border-style").getOr(""),bordercolor:Xe(element,"border-color").map(Co).getOr(""),backgroundcolor:Xe(element,"background-color").map(Co).getOr("")}},To=data=>{const e=data[0],t=data.slice(1);return $(t,(t=>{$(A(e),(n=>{D(t,((t,o)=>{const r=e[n];""!==r&&n===o&&r!==t&&(e[n]="")}))}))})),e},_o=(e,t,n,o)=>H(e,(e=>!c(n.formatter.matchNode(o,t+e)))).getOr(""),Ao=S(_o,["left","center","right"],"align"),Oo=S(_o,["top","middle","bottom"],"valign"),Do=e=>table(Y.fromDom(e)).map((table=>{const t={selection:_n(e.cells)};return So(table,t)})).getOr(""),Eo=(table,e)=>{const t=bt(table),n=wt(t),o=filter(n,(t=>j(e,(e=>Q(t.element,e)))));return map(o,(e=>({element:e.element.dom,column:xt(t,e.column).map((col=>col.element.dom))})))},No=(e,t,data,n)=>{const o=1===t.length;$(t,(t=>{const r=t.element,l=o?T:n,c=co(e,r);((e,t,data,n)=>{n("scope")&&e.setAttrib("scope",data.scope),n("class")&&e.setAttrib("class",data.class),n("height")&&e.setStyle("height",Ee(data.height)),n("width")&&t.setStyle("width",Ee(data.width))})(c,t.column.map((col=>co(e,col))).getOr(c),data,l),Bt(e)&&((e,data,t)=>{t("backgroundcolor")&&e.setFormat("tablecellbackgroundcolor",data.backgroundcolor),t("bordercolor")&&e.setFormat("tablecellbordercolor",data.bordercolor),t("borderstyle")&&e.setFormat("tablecellborderstyle",data.borderstyle),t("borderwidth")&&e.setFormat("tablecellborderwidth",Ee(data.borderwidth))})(c,data,l),n("halign")&&kt(e,r,data.halign),n("valign")&&((e,t,n)=>{St.each("top middle bottom".split(" "),(o=>{o!==n&&e.formatter.remove("valign"+o,{},t)})),n&&e.formatter.apply("valign"+n,{},t)})(e,r,data.valign)}))},Ro=(e,t,n,o)=>{const data=o.getData();o.close(),e.undoManager.transact((()=>{((e,t,n,data)=>{const o=E(data,((e,t)=>n[t]!==e));R(o)>0&&t.length>=1&&table(t[0]).each((table=>{const n=Eo(table,t),r=R(E(o,((e,t)=>"scope"!==t&&"celltype"!==t)))>0,l=P(o,"celltype");(r||P(o,"scope"))&&No(e,n,data,S(P,o)),l&&((e,data)=>{e.execCommand("mceTableCellType",!1,{type:data.celltype,no_events:!0})})(e,data),Tt(e,table.dom,{structure:l,style:r})}))})(e,t,n,data),e.focus()}))},Mo=(e,t)=>{const n=table(t[0]).map((table=>map(Eo(table,t),(t=>((e,t,n,o)=>{const r=e.dom,l=(element,style)=>r.getStyle(element,style)||r.getAttrib(element,style);return{width:l(o.getOr(t),"width"),height:l(t,"height"),scope:r.getAttrib(t,"scope"),celltype:(c=t,c.nodeName.toLowerCase()),class:r.getAttrib(t,"class",""),halign:Ao(e,t),valign:Oo(e,t),...n?ko(t):{}};var c})(e,t.element,Bt(e),t.column)))));return To(n.getOrDie())},Po=e=>{const t=Pn(e);if(0===t.length)return;const data=Mo(e,t),n={type:"tabpanel",tabs:[{title:"General",name:"general",items:lo(e)},io(e,"cell")]},o={type:"panel",items:[{type:"grid",columns:2,items:lo(e)}]};e.windowManager.open({title:"Cell Properties",size:"normal",body:Bt(e)?n:o,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:data,onSubmit:S(Ro,e,t,data)})},Fo=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Io=e=>Fo.concat((e=>{const t=Xn(qt(e));return t.length>0?_.some({name:"class",type:"listbox",label:"Class",items:t}):_.none()})(e).toArray()),Lo=(e,t,data,n)=>{const o=1===t.length?T:n;$(t,(t=>{const r=co(e,t);((e,data,t)=>{t("class")&&e.setAttrib("class",data.class),t("height")&&e.setStyle("height",Ee(data.height))})(r,data,o),jt(e)&&((e,data,t)=>{t("backgroundcolor")&&e.setStyle("background-color",data.backgroundcolor),t("bordercolor")&&e.setStyle("border-color",data.bordercolor),t("borderstyle")&&e.setStyle("border-style",data.borderstyle)})(r,data,o),n("align")&&kt(e,t,data.align)}))},Bo=(e,t,n,o)=>{const data=o.getData();o.close(),e.undoManager.transact((()=>{((e,t,n,data)=>{const o=E(data,((e,t)=>n[t]!==e));if(R(o)>0){const n=P(o,"type"),r=!n||R(o)>1;r&&Lo(e,t,data,S(P,o)),n&&((e,data)=>{e.execCommand("mceTableRowType",!1,{type:data.type,no_events:!0})})(e,data),table(Y.fromDom(t[0])).each((table=>Tt(e,table.dom,{structure:n,style:r})))}})(e,t,n,data),e.focus()}))},jo=e=>{const t=Fn(Ne(e),En.selected);if(0===t.length)return;const n=map(t,(t=>((e,t,n)=>{const o=e.dom;return{height:o.getStyle(t,"height")||o.getAttrib(t,"height"),class:o.getAttrib(t,"class",""),type:Do(t),align:Ao(e,t),...n?ko(t):{}}})(e,t.dom,jt(e)))),data=To(n),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:Io(e)},io(e,"row")]},r={type:"panel",items:[{type:"grid",columns:2,items:Io(e)}]};e.windowManager.open({title:"Row Properties",size:"normal",body:jt(e)?o:r,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:data,onSubmit:S(Bo,e,map(t,(e=>e.dom)),data)})},zo=(e,t,n)=>{const o=n?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],r=$t(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],l=t.length>0?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return o.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(r).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(l)},$o=(e,t,n,r)=>{if("TD"===t.tagName||"TH"===t.tagName)o(n)&&m(r)?e.setStyle(t,n,r):e.setStyles(t,n);else if(t.children)for(let i=0;i<t.children.length;i++)$o(e,t.children[i],n,r)},Uo=(e,t,data,n)=>{const o=e.dom,r={},l={},d=Ht(e),m=zt(e);if(c(data.class)||(r.class=data.class),l.height=Ee(data.height),d?l.width=Ee(data.width):o.getAttrib(t,"width")&&(r.width=(e=>e?e.replace(/px$/,""):"")(data.width)),d?(l["border-width"]=Ee(data.border),l["border-spacing"]=Ee(data.cellspacing)):(r.border=data.border,r.cellpadding=data.cellpadding,r.cellspacing=data.cellspacing),d&&t.children){const e={};if(n.border&&(e["border-width"]=Ee(data.border)),n.cellpadding&&(e.padding=Ee(data.cellpadding)),m&&n.bordercolor&&(e["border-color"]=data.bordercolor),!(e=>{for(const t in e)if(O.call(e,t))return!1;return!0})(e))for(let i=0;i<t.children.length;i++)$o(o,t.children[i],e)}if(m){const e=data;l["background-color"]=e.backgroundcolor,l["border-color"]=e.bordercolor,l["border-style"]=e.borderstyle}r.style=o.serializeStyle({...Xt(e),...l}),o.setAttribs(t,{...Qt(e),...r})},Ho=(e,t,n,o)=>{const r=e.dom,data=o.getData(),l=E(data,((e,t)=>n[t]!==e));o.close(),""===data.class&&delete data.class,e.undoManager.transact((()=>{if(!t){const n=Ze(data.cols).getOr(1),o=Ze(data.rows).getOr(1);e.execCommand("mceInsertTable",!1,{rows:o,columns:n}),t=Mn(Ne(e),De(e)).bind((t=>table(t,De(e)))).map((table=>table.dom)).getOrDie()}if(R(l)>0){const n={border:P(l,"border"),bordercolor:P(l,"bordercolor"),cellpadding:P(l,"cellpadding")};Uo(e,t,data,n);const o=r.select("caption",t)[0];(o&&!data.caption||!o&&data.caption)&&e.execCommand("mceTableToggleCaption"),kt(e,t,data.align)}if(e.focus(),e.addVisual(),R(l)>0){const n=P(l,"caption"),o=!n||R(l)>1;Tt(e,t,{structure:n,style:o})}}))},Wo=(e,t)=>{const n=e.dom;let o,data=((e,t)=>{const style=Xt(e),n=Qt(e),o=t?{borderstyle:M(style,"border-style").getOr(""),bordercolor:Co(M(style,"border-color").getOr("")),backgroundcolor:Co(M(style,"background-color").getOr(""))}:{};return{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:"",...style,...n,...o,...(()=>{const t=style["border-width"];return Ht(e)&&t?{border:t}:M(n,"border").fold((()=>({})),(e=>({border:e})))})(),...{...M(style,"border-spacing").or(M(n,"cellspacing")).fold((()=>({})),(e=>({cellspacing:e}))),...M(style,"border-padding").or(M(n,"cellpadding")).fold((()=>({})),(e=>({cellpadding:e})))}}})(e,zt(e));t?(data.cols="1",data.rows="1",zt(e)&&(data.borderstyle="",data.bordercolor="",data.backgroundcolor="")):(o=n.getParent(e.selection.getStart(),"table",e.getBody()),o?data=((e,t,n)=>{const o=e.dom,r=Ht(e)?o.getStyle(t,"border-spacing")||o.getAttrib(t,"cellspacing"):o.getAttrib(t,"cellspacing")||o.getStyle(t,"border-spacing"),l=Ht(e)?Ct(o,t,"padding")||o.getAttrib(t,"cellpadding"):o.getAttrib(t,"cellpadding")||Ct(o,t,"padding");return{width:o.getStyle(t,"width")||o.getAttrib(t,"width"),height:o.getStyle(t,"height")||o.getAttrib(t,"height"),cellspacing:null!=r?r:"",cellpadding:null!=l?l:"",border:((t,n)=>{const o=Xe(Y.fromDom(n),"border-width");return Ht(e)&&o.isSome()?o.getOr(""):t.getAttrib(n,"border")||Ct(e.dom,n,"border-width")||Ct(e.dom,n,"border")||""})(o,t),caption:!!o.select("caption",t)[0],class:o.getAttrib(t,"class",""),align:Ao(e,t),...n?ko(t):{}}})(e,o,zt(e)):zt(e)&&(data.borderstyle="",data.bordercolor="",data.backgroundcolor=""));const r=Xn(Vt(e));r.length>0&&data.class&&(data.class=data.class.replace(/\s*mce\-item\-table\s*/g,""));const l={type:"grid",columns:2,items:zo(e,r,t)},c=zt(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[l]},io(e,"table")]}:{type:"panel",items:[l]};e.windowManager.open({title:"Table Properties",size:"normal",body:c,onSubmit:S(Ho,e,o,data),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:data})},qo=e=>{D({mceTableProps:S(Wo,e,!1),mceTableRowProps:S(jo,e),mceTableCellProps:S(Po,e),mceInsertTableDialog:S(Wo,e,!0)},((t,n)=>e.addCommand(n,(()=>{return n=t,void(Re(Ne(e))&&n());var n}))))},Vo=w,Zo=e=>{const t=(e,t)=>je(e,t).exists((span=>parseInt(span,10)>1));return e.length>0&&V(e,(e=>t(e,"rowspan")||t(e,"colspan")))?_.some(e):_.none()},Ko=(table,e,t)=>e.length<=1?_.none():Tn(table,t.firstSelectedSelector,t.lastSelectedSelector).map((t=>({bounds:t,cells:e}))),Go=e=>{const t=Kn(_.none()),n=Kn([]);let o=_.none();const r=ce("caption"),l=e=>o.forall((details=>!details[e])),c=()=>Rn((e=>Y.fromDom(e.selection.getEnd()))(e),De(e)),d=()=>Rn(Ne(e),De(e)).bind((t=>{return n=Ue(table(t),c().bind(table),((n,o)=>Q(n,o)?r(t)?_.some((e=>({element:e,mergable:_.none(),unmergable:_.none(),selection:[e]}))(t)):_.some(((e,table,t)=>({element:t,mergable:Ko(table,e,En),unmergable:Zo(e),selection:Vo(e)}))(Pn(e),n,t)):_.none())),n.bind(w);var n})),m=e=>table(e.element).map((table=>{const t=bt(table),n=bo(t,e).getOr([]),o=U(n,((e,n)=>(n.isLocked&&(e.onAny=!0,0===n.column?e.onFirst=!0:n.column+n.colspan>=t.grid.columns&&(e.onLast=!0)),e)),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:vo(t,e).isSome(),unmergeable:wo(t,e).isSome(),locked:o}})),h=()=>{t.set((e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)})(d)()),o=t.get().bind(m),$(n.get(),C)},f=e=>(e(),n.set(n.get().concat([e])),()=>{n.set(filter(n.get(),(t=>t!==e)))}),y=(n,o)=>f((()=>t.get().fold((()=>{n.setEnabled(!1)}),(t=>{n.setEnabled(!o(t)&&e.selection.isEditable())})))),v=(n,o,r)=>f((()=>t.get().fold((()=>{n.setEnabled(!1),n.setActive(!1)}),(t=>{n.setEnabled(!o(t)&&e.selection.isEditable()),n.setActive(r(t))})))),x=e=>o.exists((details=>details.locked[e])),S=(t,n)=>o=>v(o,(e=>r(e.element)),(()=>e.queryCommandValue(t)===n)),T=S("mceTableRowType","header"),A=S("mceTableColType","th");return e.on("NodeChange ExecCommand TableSelectorChange",h),{onSetupTable:e=>y(e,(e=>!1)),onSetupCellOrRow:e=>y(e,(e=>r(e.element))),onSetupColumn:e=>t=>y(t,(t=>r(t.element)||x(e))),onSetupPasteable:e=>t=>y(t,(t=>r(t.element)||e().isNone())),onSetupPasteableColumn:(e,t)=>n=>y(n,(n=>r(n.element)||e().isNone()||x(t))),onSetupMergeable:e=>y(e,(e=>l("mergeable"))),onSetupUnmergeable:e=>y(e,(e=>l("unmergeable"))),resetTargets:h,onSetupTableWithCaption:t=>v(t,k,(t=>table(t.element,De(e)).exists((table=>ke(table,"caption").isSome())))),onSetupTableRowHeaders:T,onSetupTableColumnHeaders:A,targets:t.get}};var Yo=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Jo="x-tinymce/dom-table-",Xo=Jo+"rows",Qo=Jo+"columns",er=e=>{var t;const n=null!==(t=Yo.read())&&void 0!==t?t:[];return K(n,(t=>_.from(t.getType(e))))},nr=()=>er(Xo),or=()=>er(Qo),rr=e=>t=>{const n=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",n),n(),()=>{e.off("NodeChange",n)}},sr=e=>t=>{const n=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",n),n(),()=>{e.off("NodeChange",n)}},ar=e=>{const t=Go(e);(e=>{const t=e.options.register;t("table_border_widths",{processor:"object[]",default:Nt}),t("table_border_styles",{processor:"object[]",default:Rt}),t("table_cell_advtab",{processor:"boolean",default:!0}),t("table_row_advtab",{processor:"boolean",default:!0}),t("table_advtab",{processor:"boolean",default:!0}),t("table_appearance_options",{processor:"boolean",default:!0}),t("table_grid",{processor:"boolean",default:!Et.deviceType.isTouch()}),t("table_cell_class_list",{processor:"object[]",default:[]}),t("table_row_class_list",{processor:"object[]",default:[]}),t("table_class_list",{processor:"object[]",default:[]}),t("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),t("table_background_color_map",{processor:"object[]",default:[]}),t("table_border_color_map",{processor:"object[]",default:[]})})(e),qo(e),((e,t)=>{const n=t=>()=>e.execCommand(t),o=(t,o)=>!!e.queryCommandSupported(o.command)&&(e.ui.registry.addMenuItem(t,{...o,onAction:h(o.onAction)?o.onAction:n(o.command)}),!0),r=(t,o)=>{e.queryCommandSupported(o.command)&&e.ui.registry.addToggleMenuItem(t,{...o,onAction:h(o.onAction)?o.onAction:n(o.command)})},l=data=>{e.execCommand("mceInsertTable",!1,{rows:data.numRows,columns:data.numColumns})},c=[o("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:t.onSetupCellOrRow}),o("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:t.onSetupCellOrRow}),o("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:t.onSetupCellOrRow}),o("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:t.onSetupCellOrRow}),o("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:t.onSetupCellOrRow}),o("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:t.onSetupCellOrRow}),o("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:t.onSetupPasteable(nr)}),o("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:t.onSetupPasteable(nr)})],d=[o("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:t.onSetupColumn("onFirst")}),o("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:t.onSetupColumn("onLast")}),o("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:t.onSetupColumn("onAny")}),o("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:t.onSetupColumn("onAny")}),o("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:t.onSetupColumn("onAny")}),o("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:t.onSetupPasteableColumn(or,"onFirst")}),o("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:t.onSetupPasteableColumn(or,"onLast")})],m=[o("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:t.onSetupCellOrRow}),o("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:t.onSetupMergeable}),o("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:t.onSetupUnmergeable})];Ut(e)?e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:l}],onSetup:sr(e)}):e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:n("mceInsertTableDialog"),onSetup:sr(e)}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:n("mceInsertTableDialog"),onSetup:sr(e)}),o("tableprops",{text:"Table properties",onSetup:t.onSetupTable,command:"mceTableProps"}),o("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,command:"mceTableDelete"}),B(c,!0)&&e.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:v("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),B(d,!0)&&e.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:v("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),B(m,!0)&&e.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:v("tablecellprops tablemergecells tablesplitcells")}),e.ui.registry.addContextMenu("table",{update:()=>(t.resetTargets(),t.targets().fold(v(""),(e=>"caption"===te(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable")))});const f=to(Vt(e));0!==f.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Qn(e,f,"tableclass",(t=>e.execCommand("mceTableToggleClass",!1,t))),onSetup:t.onSetupTable});const y=to(Wt(e));0!==y.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Qn(e,y,"tablecellclass",(t=>e.execCommand("mceTableCellToggleClass",!1,t))),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Qn(e,In,"tablecellverticalalign",eo(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Qn(e,It(e),"tablecellborderwidth",eo(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Qn(e,Lt(e),"tablecellborderstyle",eo(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>oo(e,Kt(e),"background-color"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>oo(e,Gt(e),"border-color"),onSetup:t.onSetupCellOrRow})),r("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),r("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:ro(e),onSetup:t.onSetupTableRowHeaders}),r("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:so(e),onSetup:t.onSetupTableRowHeaders})})(e,t),((e,t)=>{e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:rr(e),fetch:e=>e("inserttable | cell row column | advtablesort | tableprops deletetable")});const n=t=>()=>e.execCommand(t),o=(t,o)=>{e.queryCommandSupported(o.command)&&e.ui.registry.addButton(t,{...o,onAction:h(o.onAction)?o.onAction:n(o.command)})},r=(t,o)=>{e.queryCommandSupported(o.command)&&e.ui.registry.addToggleButton(t,{...o,onAction:h(o.onAction)?o.onAction:n(o.command)})};o("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:t.onSetupTable}),o("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:t.onSetupTable}),o("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),o("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:t.onSetupMergeable}),o("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),o("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),o("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),o("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),o("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),o("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),o("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),o("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),o("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:t.onSetupCellOrRow}),o("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:t.onSetupCellOrRow}),o("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:t.onSetupPasteable(nr)}),o("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:t.onSetupPasteable(nr)}),o("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:t.onSetupColumn("onAny")}),o("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:t.onSetupColumn("onAny")}),o("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:t.onSetupPasteableColumn(or,"onFirst")}),o("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:t.onSetupPasteableColumn(or,"onLast")}),o("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:rr(e)});const l=to(Vt(e));0!==l.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:no(e,l,"tableclass",(t=>e.execCommand("mceTableToggleClass",!1,t))),onSetup:t.onSetupTable});const c=to(Wt(e));0!==c.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:no(e,c,"tablecellclass",(t=>e.execCommand("mceTableCellToggleClass",!1,t))),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:no(e,In,"tablecellverticalalign",eo(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:no(e,It(e),"tablecellborderwidth",eo(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:no(e,Lt(e),"tablecellborderstyle",eo(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:t=>t(oo(e,Kt(e),"background-color")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:t=>t(oo(e,Gt(e),"border-color")),onSetup:t.onSetupCellOrRow})),r("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),r("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:ro(e),onSetup:t.onSetupTableRowHeaders}),r("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:so(e),onSetup:t.onSetupTableColumnHeaders})})(e,t),(e=>{const t=table=>e.dom.is(table,"table")&&e.getBody().contains(table)&&e.dom.isEditable(table.parentNode),n=Zt(e);n.length>0&&e.ui.registry.addContextToolbar("table",{predicate:t,items:n,scope:"node",position:"node"})})(e)};e.add("table",ar)}()},677:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,n=e=>t=>typeof t===e,o=t("string"),r=t("object"),l=t("array"),c=n("boolean"),d=a=>!(a=>null==a)(a),m=n("function"),h=n("number"),f=()=>{},y=(a,b)=>a===b,v=e=>t=>!e(t),w=(x=!1,()=>x);var x;class S{constructor(e,t){this.tag=e,this.value=t}static some(e){return new S(!0,e)}static none(){return S.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?S.some(e(this.value)):S.none()}bind(e){return this.tag?e(this.value):S.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:S.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return d(e)?S.some(e):S.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}S.singletonNone=new S(!1);const C=Array.prototype.slice,k=Array.prototype.indexOf,T=Array.prototype.push,_=(e,t)=>{return n=e,o=t,k.call(n,o)>-1;var n,o},A=(e,t)=>{for(let i=0,n=e.length;i<n;i++){if(t(e[i],i))return!0}return!1},map=(e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o},O=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},D=(e,t)=>{const n=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];t(o,i)&&n.push(o)}return n},E=(e,t,n)=>(O(e,((e,i)=>{n=t(n,e,i)})),n),N=(e,t,n)=>{for(let i=0,o=e.length;i<o;i++){const o=e[i];if(t(o,i))return S.some(o);if(n(o,i))break}return S.none()},R=(e,t)=>N(e,t,w),M=(e,t)=>(e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!l(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);T.apply(t,e[i])}return t})(map(e,t)),P=e=>{const t=C.call(e,0);return t.reverse(),t},F=(e,i)=>i>=0&&i<e.length?S.some(e[i]):S.none(),head=e=>F(e,0),I=e=>F(e,e.length-1),L=(e,t)=>{const n=[],o=m(t)?e=>A(n,(i=>t(i,e))):e=>_(n,e);for(let i=0,t=e.length;i<t;i++){const t=e[i];o(t)||n.push(t)}return n},B=(e,t,n=y)=>e.exists((e=>n(e,t))),j=(e,t,n)=>e.isSome()&&t.isSome()?S.some(n(e.getOrDie(),t.getOrDie())):S.none(),z=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},$={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return z(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return z(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return z(t)},fromDom:z,fromPoint:(e,t,n)=>S.from(e.dom.elementFromPoint(t,n)).map(z)},U=(e,t)=>e.dom===t.dom,H=(element,e)=>{const t=element.dom;if(1!==t.nodeType)return!1;{const n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}};"undefined"!=typeof window?window:Function("return this;")();const W=element=>element.dom.nodeName.toLowerCase(),V=(Z=1,element=>(element=>element.dom.nodeType)(element)===Z);var Z;const K=e=>t=>V(t)&&W(t)===e,G=element=>S.from(element.dom.parentNode).map($.fromDom),Y=element=>map(element.dom.childNodes,$.fromDom),J=(element,e)=>{const t=element.dom.childNodes;return S.from(t[e]).map($.fromDom)},X=element=>J(element,0),Q=element=>J(element,element.dom.childNodes.length-1),ee=(e,t,n)=>{let element=e.dom;const o=m(n)?n:w;for(;element.parentNode;){element=element.parentNode;const e=$.fromDom(element);if(t(e))return S.some(e);if(o(e))break}return S.none()},te=(e,t,n)=>((e,t,n,a,o)=>e(n,a)?S.some(n):m(o)&&o(n)?S.none():t(n,a,o))(((s,e)=>e(s)),ee,e,t,n),ne=(marker,element)=>{G(marker).each((e=>{e.dom.insertBefore(element.dom,marker.dom)}))},oe=(marker,element)=>{const e=(element=>S.from(element.dom.nextSibling).map($.fromDom))(marker);e.fold((()=>{G(marker).each((e=>{re(e,element)}))}),(e=>{ne(e,element)}))},re=(e,element)=>{e.dom.appendChild(element.dom)},se=(e,t)=>{O(t,(t=>{re(e,t)}))},ae=element=>{element.dom.textContent="",O(Y(element),(e=>{le(e)}))},le=element=>{const e=element.dom;null!==e.parentNode&&e.parentNode.removeChild(e)};var ie=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ce=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ue=tinymce.util.Tools.resolve("tinymce.util.VK");const de=e=>map(e,$.fromDom),me=Object.keys,ge=(e,t)=>{const n=me(e);for(let o=0,r=n.length;o<r;o++){const i=n[o];t(e[i],i)}},filter=(e,t)=>{const n={};var o;return((e,t,n,o)=>{ge(e,((e,i)=>{(t(e,i)?n:o)(e,i)}))})(e,t,(o=n,(e,i)=>{o[i]=e}),f),n},pe=(element,e)=>{const t=element.dom;ge(e,((e,n)=>{((e,t,n)=>{if(!(o(n)||c(n)||h(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(t,n,e)}))},he=element=>E(element.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),fe=e=>((e,t)=>$.fromDom(e.dom.cloneNode(t)))(e,!0),be=(e,t)=>{const n=((e,t)=>{const n=$.fromTag(t),o=he(e);return pe(n,o),n})(e,t);oe(e,n);const o=Y(e);return se(n,o),le(e),n};var ye=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ve=tinymce.util.Tools.resolve("tinymce.util.Tools");const we=e=>t=>d(t)&&t.nodeName.toLowerCase()===e,xe=e=>t=>d(t)&&e.test(t.nodeName),Se=e=>d(e)&&3===e.nodeType,Ce=e=>d(e)&&1===e.nodeType,ke=xe(/^(OL|UL|DL)$/),Te=xe(/^(OL|UL)$/),_e=we("ol"),Ae=xe(/^(LI|DT|DD)$/),Oe=xe(/^(DT|DD)$/),De=xe(/^(TH|TD)$/),Ee=we("br"),Ne=(e,t)=>d(t)&&t.nodeName in e.schema.getTextBlockElements(),Re=(e,t)=>d(e)&&e.nodeName in t,Me=(e,t)=>d(t)&&t.nodeName in e.schema.getVoidElements(),Pe=(e,t,n)=>{const o=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&o},Fe=(e,t)=>e.isChildOf(t,e.getRoot()),option=e=>t=>t.options.get(e),Ie=option("lists_indent_on_tab"),Le=option("forced_root_block"),Be=option("forced_root_block_attrs"),je=(e,t)=>{const n=e.dom,o=e.schema.getBlockElements(),r=n.createFragment(),l=Le(e),c=Be(e);let d,m,h=!1;for(m=n.create(l,c),Re(t.firstChild,o)||r.appendChild(m);d=t.firstChild;){const e=d.nodeName;h||"SPAN"===e&&"bookmark"===d.getAttribute("data-mce-type")||(h=!0),Re(d,o)?(r.appendChild(d),m=null):(m||(m=n.create(l,c),r.appendChild(m)),m.appendChild(d))}return!h&&m&&m.appendChild(n.create("br",{"data-mce-bogus":"1"})),r},ze=ye.DOM,$e=(e,t,li)=>{const n=ze.select('span[data-mce-type="bookmark"]',t),o=je(e,li),r=ze.createRng();r.setStartAfter(li),r.setEndAfter(t);const l=r.extractContents();for(let t=l.firstChild;t;t=t.firstChild)if("LI"===t.nodeName&&e.dom.isEmpty(t)){ze.remove(t);break}e.dom.isEmpty(l)||ze.insertAfter(l,t),ze.insertAfter(o,t);const c=li.parentElement;c&&Pe(e.dom,c)&&(e=>{const t=e.parentNode;t&&ve.each(n,(e=>{t.insertBefore(e,li.parentNode)})),ze.remove(e)})(c),ze.remove(li),Pe(e.dom,t)&&ze.remove(t)},Ue=K("dd"),He=K("dt"),We=(e,t)=>{var element;Ue(t)?be(t,"dt"):He(t)&&(element=t,S.from(element.dom.parentElement).map($.fromDom)).each((dl=>$e(e,dl.dom,t.dom)))},qe=e=>{He(e)&&be(e,"dd")},Ve=(e,t)=>{if(Se(e))return{container:e,offset:t};const n=ie.getNode(e,t);return Se(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&Se(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&Se(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},Ze=e=>{const t=e.cloneRange(),n=Ve(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);const o=Ve(e.endContainer,e.endOffset);return t.setEnd(o.container,o.offset),t},Ke=["OL","UL","DL"],Ge=Ke.join(","),Ye=(e,t)=>{const n=t||e.selection.getStart(!0);return e.dom.getParent(n,Ge,et(e,n))},Je=e=>{const t=Ye(e),n=e.selection.getSelectedBlocks();return((e,t)=>d(e)&&1===t.length&&t[0]===e)(t,n)?(e=>D(e.querySelectorAll(Ge),ke))(t):D(n,(e=>ke(e)&&t!==e))},Xe=e=>{const t=e.selection.getSelectedBlocks();return D(((e,t)=>{const n=ve.map(t,(t=>e.dom.getParent(t,"li,dd,dt",et(e,t))||t));return L(n)})(e,t),Ae)},Qe=(e,t)=>{const n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},et=(e,t)=>{const n=e.dom.getParents(t,e.dom.isBlock),o=R(n,(t=>{return n=e.schema,!ke(o=t)&&!Ae(o)&&A(Ke,(e=>n.isValidChild(o.nodeName,e)));var n,o}));return o.getOr(e.getBody())},tt=(e,t)=>{const n=e.dom.getParents(t,"ol,ul",et(e,t));return I(n)},nt=e=>{const t=(e=>{const t=tt(e,e.selection.getStart()),n=D(e.selection.getSelectedBlocks(),Te);return t.toArray().concat(n)})(e);return ot(e,t)},ot=(e,t)=>{const n=map(t,(t=>tt(e,t).getOr(t)));return L(n)},st=e=>/\btox\-/.test(e.className),at=(e,t)=>N(e,ke,De).exists((e=>e.nodeName===t&&!st(e))),lt=(e,element)=>null!==element&&!e.dom.isEditable(element),it=(e,element)=>{const t=e.dom.getParent(element,"ol,ul,dl");return lt(e,t)},ct=(e,t)=>{const n=e.selection.getNode();return t({parents:e.dom.getParents(n),element:n}),e.on("NodeChange",t),()=>e.off("NodeChange",t)},ut=(e,t,element)=>e.dispatch("ListMutation",{action:t,element:element}),mt=(gt=/^\s+|\s+$/g,s=>s.replace(gt,""));var gt;const pt=(e,t,n)=>{if(!o(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);(e=>void 0!==e.style&&m(e.style.getPropertyValue))(e)&&e.style.setProperty(t,n)},ht=(element,e,t)=>{const n=element.dom;pt(n,e,t)},ft=(e,t)=>{re(e.item,t.list)},bt=(e,t)=>{const n={list:$.fromTag(t,e),item:$.fromTag("li",e)};return re(n.list,n.item),n},yt=(e,t,n)=>{const o=t.slice(0,n.depth);return I(o).each((t=>{const o=((e,t,content)=>{const n=$.fromTag("li",e);return pe(n,t),se(n,content),n})(e,n.itemAttributes,n.content);((e,t)=>{re(e.list,t),e.item=t})(t,o),((e,t)=>{W(e.list)!==t.listType&&(e.list=be(e.list,t.listType)),pe(e.list,t.listAttributes)})(t,n)})),o},vt=(e,t,n)=>{const o=((e,t,n)=>{const o=[];for(let i=0;i<n;i++)o.push(bt(e,t.listType));return o})(e,n,n.depth-t.length);var r;return(e=>{for(let i=1;i<e.length;i++)ft(e[i-1],e[i])})(o),((e,t)=>{for(let i=0;i<e.length-1;i++)ht(e[i].item,"list-style-type","none");I(e).each((e=>{pe(e.list,t.listAttributes),pe(e.item,t.itemAttributes),se(e.item,t.content)}))})(o,n),r=o,j(I(t),head(r),ft),t.concat(o)},wt=e=>H(e,"OL,UL"),xt=e=>X(e).exists(wt),St=e=>e.depth>0,Ct=e=>e.isSelected,kt=li=>{const e=Y(li),content=Q(li).exists(wt)?e.slice(0,-1):e;return map(content,fe)},Tt=e=>(O(e,((t,i)=>{((e,t)=>{const n=e[t].depth,o=e=>e.depth===n&&!e.dirty,r=e=>e.depth<n;return N(P(e.slice(0,t)),o,r).orThunk((()=>N(e.slice(t+1),o,r)))})(e,i).fold((()=>{t.dirty&&(e=>{e.listAttributes=filter(e.listAttributes,((e,t)=>"start"!==t))})(t)}),(e=>{return source=e,(n=t).listType=source.listType,void(n.listAttributes={...source.listAttributes});var n,source}))})),e),_t=(e,t,n,o)=>X(o).filter(wt).fold((()=>{t.each((e=>{U(e.start,o)&&n.set(!0)}));const r=((li,e,t)=>G(li).filter(V).map((n=>({depth:e,dirty:!1,isSelected:t,content:kt(li),itemAttributes:he(li),listAttributes:he(n),listType:W(n)}))))(o,e,n.get());t.each((e=>{U(e.end,o)&&n.set(!1)}));const l=Q(o).filter(wt).map((o=>At(e,t,n,o))).getOr([]);return r.toArray().concat(l)}),(o=>At(e,t,n,o))),At=(e,t,n,o)=>M(Y(o),(element=>(wt(element)?At:_t)(e+1,t,n,element))),Ot=(e,t)=>{const n=Tt(t);return map(n,(t=>{const content=((e,t)=>{const n=(t||document).createDocumentFragment();return O(e,(element=>{n.appendChild(element.dom)})),$.fromDom(n)})(t.content);return $.fromDom(je(e,content.dom))}))},Dt=(e,t)=>{const n=Tt(t);return((e,t)=>{const n=E(t,((t,n)=>n.depth>t.length?vt(e,t,n):yt(e,t,n)),[]);return head(n).map((e=>e.list))})(e.contentDocument,n).toArray()},Et=(e,t,n)=>{const o=((e,t)=>{const n=(e=>{let t=!1;return{get:()=>t,set:e=>{t=e}}})();return map(e,(e=>({sourceList:e,entries:At(0,t,n,e)})))})(t,(e=>{const t=map(Xe(e),$.fromDom);return j(R(t,v(xt)),R(P(t),v(xt)),((e,t)=>({start:e,end:t})))})(e));O(o,(t=>{((e,t)=>{O(D(e,Ct),(e=>((e,t)=>{switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0})(t,e)))})(t.entries,n);const o=((e,t)=>M(((e,t)=>{if(0===e.length)return[];{let n=t(e[0]);const o=[];let r=[];for(let i=0,l=e.length;i<l;i++){const l=e[i],c=t(l);c!==n&&(o.push(r),r=[]),n=c,r.push(l)}return 0!==r.length&&o.push(r),o}})(t,St),(t=>head(t).exists(St)?Dt(e,t):Ot(e,t))))(e,t.entries);var marker;O(o,(t=>{ut(e,"Indent"===n?"IndentList":"OutdentList",t.dom)})),marker=t.sourceList,O(o,(e=>{ne(marker,e)})),le(t.sourceList)}))},Nt=(e,t)=>{const n=de(nt(e)),o=de((e=>D(Xe(e),Oe))(e));let r=!1;if(n.length||o.length){const l=e.selection.getBookmark();Et(e,n,t),((e,t,n)=>{O(n,"Indent"===t?qe:t=>We(e,t))})(e,t,o),e.selection.moveToBookmark(l),e.selection.setRng(Ze(e.selection.getRng())),e.nodeChanged(),r=!0}return r},Rt=(e,t)=>!(e=>{const t=Ye(e);return lt(e,t)})(e)&&Nt(e,t),Mt=e=>Rt(e,"Indent"),Pt=e=>Rt(e,"Outdent"),Ft=e=>Rt(e,"Flatten"),It=e=>"\ufeff"===e;var Lt=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Bt=ye.DOM,jt=e=>{const t={},n=n=>{let o=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if(Ce(o)){const e=Bt.create("span",{"data-mce-type":"bookmark"});o.hasChildNodes()?(r=Math.min(r,o.childNodes.length-1),n?o.insertBefore(e,o.childNodes[r]):Bt.insertAfter(e,o.childNodes[r])):o.appendChild(e),o=e,r=0}t[n?"startContainer":"endContainer"]=o,t[n?"startOffset":"endOffset"]=r};return n(!0),e.collapsed||n(),t},zt=e=>{const t=t=>{let n=e[t?"startContainer":"endContainer"],o=e[t?"startOffset":"endOffset"];if(n){if(Ce(n)&&n.parentNode){const e=n;o=(e=>{var t;let n=null===(t=e.parentNode)||void 0===t?void 0:t.firstChild,o=0;for(;n;){if(n===e)return o;Ce(n)&&"bookmark"===n.getAttribute("data-mce-type")||o++,n=n.nextSibling}return-1})(n),n=n.parentNode,Bt.remove(e),!n.hasChildNodes()&&Bt.isBlock(n)&&n.appendChild(Bt.create("br"))}e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=o}};t(!0),t();const n=Bt.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),Ze(n)},$t=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Ut=(e,t)=>{ve.each(t,((t,n)=>{e.setAttribute(n,t)}))},Ht=(e,t,n)=>{((e,t,n)=>{const o=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",o)})(e,t,n),((e,t,n)=>{Ut(t,n["list-attributes"]),ve.each(e.select("li",t),(li=>{Ut(li,n["list-item-attributes"])}))})(e,t,n)},Wt=(e,t)=>d(t)&&!Re(t,e.schema.getBlockElements()),qt=(e,t,n,o)=>{let r=t[n?"startContainer":"endContainer"];const l=t[n?"startOffset":"endOffset"];Ce(r)&&(r=r.childNodes[Math.min(l,r.childNodes.length-1)]||r),!n&&Ee(r.nextSibling)&&(r=r.nextSibling);const c=(t,n)=>{var r;const l=new ce(t,o),c=n?"next":"prev";let d;for(;d=l[c]();)if(!Me(e,d)&&!It(d.textContent)&&0!==(null===(r=d.textContent)||void 0===r?void 0:r.length))return S.some(d);return S.none()};if(n&&Se(r))if(It(r.textContent))r=c(r,!1).getOr(r);else for(null!==r.parentNode&&Wt(e,r.parentNode)&&(r=r.parentNode);null!==r.previousSibling&&(Wt(e,r.previousSibling)||Se(r.previousSibling));)r=r.previousSibling;if(!n&&Se(r))if(It(r.textContent))r=c(r,!0).getOr(r);else for(null!==r.parentNode&&Wt(e,r.parentNode)&&(r=r.parentNode);null!==r.nextSibling&&(Wt(e,r.nextSibling)||Se(r.nextSibling));)r=r.nextSibling;for(;r.parentNode!==o;){const t=r.parentNode;if(Ne(e,r))return r;if(/^(TD|TH)$/.test(t.nodeName))return r;r=t}return r},Vt=(e,t,n)=>{const o=e.selection.getRng();let r="LI";const l=et(e,e.selection.getStart(!0)),c=e.dom;if("false"===c.getContentEditable(e.selection.getNode()))return;"DL"===(t=t.toUpperCase())&&(r="DT");const d=jt(o),m=D(((e,t,n)=>{const o=[],r=e.dom,l=qt(e,t,!0,n),c=qt(e,t,!1,n);let d;const m=[];for(let e=l;e&&(m.push(e),e!==c);e=e.nextSibling);return ve.each(m,(t=>{var l;if(Ne(e,t))return o.push(t),void(d=null);if(r.isBlock(t)||Ee(t))return Ee(t)&&r.remove(t),void(d=null);const c=t.nextSibling;Lt.isBookmarkNode(t)&&(ke(c)||Ne(e,c)||!c&&t.parentNode===n)?d=null:(d||(d=r.create("p"),null===(l=t.parentNode)||void 0===l||l.insertBefore(d,t),o.push(d)),d.appendChild(t))})),o})(e,o,l),e.dom.isEditable);ve.each(m,(o=>{let l;const d=o.previousSibling,m=o.parentNode;Ae(m)||(d&&ke(d)&&d.nodeName===t&&((e,t,n)=>{const o=e.getStyle(t,"list-style-type");let r=n?n["list-style-type"]:"";return r=null===r?"":r,o===r})(c,d,n)?(l=d,o=c.rename(o,r),d.appendChild(o)):(l=c.create(t),m.insertBefore(l,o),l.appendChild(o),o=c.rename(o,r)),((e,element,t)=>{ve.each(t,(style=>e.setStyle(element,style,"")))})(c,o,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Ht(c,l,n),Kt(e.dom,l))})),e.selection.setRng(zt(d))},Zt=(e,t,n)=>{return((e,t)=>ke(e)&&e.nodeName===(null==t?void 0:t.nodeName))(t,n)&&((e,t,n)=>e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0))(e,t,n)&&(o=n,t.className===o.className);var o},Kt=(e,t)=>{let n,o=t.nextSibling;if(Zt(e,t,o)){const r=o;for(;n=r.firstChild;)t.appendChild(n);e.remove(r)}if(o=t.previousSibling,Zt(e,t,o)){const r=o;for(;n=r.lastChild;)t.insertBefore(n,t.firstChild);e.remove(r)}},Gt=(e,t,n,o,r)=>{const l=ke(t);if(l&&t.nodeName===o&&!Yt(r))Ft(e);else{Vt(e,o,r);const c=jt(e.selection.getRng()),d=l?[t,...n]:n;ve.each(d,(t=>{((e,t,n,o)=>{if(t.nodeName!==n){const r=e.dom.rename(t,n);Ht(e.dom,r,o),ut(e,$t(n),r)}else Ht(e.dom,t,o),ut(e,$t(n),t)})(e,t,o,r)})),e.selection.setRng(zt(c))}},Yt=e=>"list-style-type"in e,Jt=(e,t,n)=>{const o=Ye(e);if(it(e,o))return;const l=Je(e),c=r(n)?n:{};l.length>0?Gt(e,o,l,t,c):((e,t,n,o)=>{if(t!==e.getBody())if(t)if(t.nodeName!==n||Yt(o)||st(t)){const r=jt(e.selection.getRng());Ht(e.dom,t,o);const l=e.dom.rename(t,n);Kt(e.dom,l),e.selection.setRng(zt(r)),Vt(e,n,o),ut(e,$t(n),l)}else Ft(e);else Vt(e,n,o),ut(e,$t(n),t)})(e,o,t,c)},Xt=ye.DOM,Qt=(e,element)=>{const t=ve.grep(e.select("ol,ul",element));ve.each(t,(t=>{((e,t)=>{const n=t.parentElement;if(n&&"LI"===n.nodeName&&n.firstChild===t){const o=n.previousSibling;o&&"LI"===o.nodeName?(o.appendChild(t),Pe(e,n)&&Xt.remove(n)):Xt.setStyle(n,"listStyleType","none")}if(ke(n)){const e=n.previousSibling;e&&"LI"===e.nodeName&&e.appendChild(t)}})(e,t)}))},en=(e,t,n,o)=>{let r=t.startContainer;const l=t.startOffset;if(Se(r)&&(n?l<r.data.length:l>0))return r;const c=e.schema.getNonEmptyElements();Ce(r)&&(r=ie.getNode(r,l));const d=new ce(r,o);n&&((e,t)=>!!Ee(t)&&e.isBlock(t.nextSibling)&&!Ee(t.previousSibling))(e.dom,r)&&d.next();const m=n?d.next.bind(d):d.prev2.bind(d);for(;r=m();){if("LI"===r.nodeName&&!r.hasChildNodes())return r;if(c[r.nodeName])return r;if(Se(r)&&r.data.length>0)return r}return null},tn=(e,t)=>{const n=t.childNodes;return 1===n.length&&!ke(n[0])&&e.isBlock(n[0])},nn=(e,t,n)=>{let o;const r=tn(e,n)?n.firstChild:n;if(((e,t)=>{tn(e,t)&&e.remove(t.firstChild,!0)})(e,t),!Pe(e,t,!0))for(;o=t.firstChild;)r.appendChild(o)},on=(e,t,n)=>{let o;const ul=t.parentNode;if(!Fe(e,t)||!Fe(e,n))return;ke(n.lastChild)&&(o=n.lastChild),ul===n.lastChild&&Ee(ul.previousSibling)&&e.remove(ul.previousSibling);const r=n.lastChild;r&&Ee(r)&&t.hasChildNodes()&&e.remove(r),Pe(e,n,!0)&&ae($.fromDom(n)),nn(e,t,n),o&&n.appendChild(o);const l=((e,t)=>{const n=e.dom,o=t.dom;return n!==o&&n.contains(o)})($.fromDom(n),$.fromDom(t))?e.getParents(t,ke,n):[];e.remove(t),O(l,(t=>{Pe(e,t)&&t!==e.getRoot()&&e.remove(t)}))},rn=(e,t,n,o)=>{const r=e.dom;if(r.isEmpty(o))((e,t,n)=>{ae($.fromDom(n)),on(e.dom,t,n),e.selection.setCursorLocation(n,0)})(e,n,o);else{const l=jt(t);on(r,n,o),e.selection.setRng(zt(l))}},sn=(e,t)=>{const n=e.dom,o=e.selection,r=o.getStart(),l=Qe(e,r),li=n.getParent(o.getStart(),"LI",l);if(li){const ul=li.parentElement;if(ul===e.getBody()&&Pe(n,ul))return!0;const r=Ze(o.getRng()),c=n.getParent(en(e,r,t,l),"LI",l);if(c&&c!==li)return e.undoManager.transact((()=>{var n,o;t?rn(e,r,c,li):(null===(o=(n=li).parentNode)||void 0===o?void 0:o.firstChild)===n?Pt(e):((e,t,n,o)=>{const r=jt(t);on(e.dom,n,o);const l=zt(r);e.selection.setRng(l)})(e,r,li,c)})),!0;if(!c&&!t&&0===r.startOffset&&0===r.endOffset)return e.undoManager.transact((()=>{Ft(e)})),!0}return!1},an=(e,t)=>{const n=e.dom,o=e.selection.getStart(),r=Qe(e,o),l=n.getParent(o,n.isBlock,r);if(l&&n.isEmpty(l)){const o=Ze(e.selection.getRng()),c=n.getParent(en(e,o,t,r),"LI",r);if(c){const d=element=>_(["td","th","caption"],W(element)),m=e=>e.dom===r;return!!((e,t,n=y)=>j(e,t,n).getOr(e.isNone()&&t.isNone()))(te($.fromDom(c),d,m),te($.fromDom(o.startContainer),d,m),U)&&(e.undoManager.transact((()=>{((e,t,n)=>{const o=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),o&&e.isEmpty(o)&&e.remove(o)})(n,l,r),Kt(n,c.parentNode),e.selection.select(c,!0),e.selection.collapse(t)})),!0)}}return!1},ln=e=>{const t=e.selection.getStart(),n=Qe(e,t);return e.dom.getParent(t,"LI,DT,DD",n)||Xe(e).length>0},cn=(e,t)=>{const n=e.selection;return!it(e,n.getNode())&&(n.isCollapsed()?((e,t)=>sn(e,t)||an(e,t))(e,t):(e=>!!ln(e)&&(e.undoManager.transact((()=>{e.execCommand("Delete"),Qt(e.dom,e.getBody())})),!0))(e))},un=e=>{const t=P(mt(e).split("")),n=map(t,((e,i)=>{const t=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,i)*t}));return E(n,((e,t)=>e+t),0)},dn=e=>{if(--e<0)return"";{const t=e%26,n=Math.floor(e/26);return dn(n)+String.fromCharCode("A".charCodeAt(0)+t)}},mn=e=>{const t=parseInt(e.start,10);return B(e.listStyleType,"upper-alpha")?dn(t):B(e.listStyleType,"lower-alpha")?dn(t).toLowerCase():e.start},gn=e=>{const t=Ye(e);_e(t)&&!it(e,t)&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:mn({start:e.dom.getAttrib(t,"start","1"),listStyleType:S.from(e.dom.getStyle(t,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{(e=>{switch((e=>/^[0-9]+$/.test(e)?2:/^[A-Z]+$/.test(e)?0:(e=>/^[a-z]+$/.test(e))(e)?1:e.length>0?4:3)(e)){case 2:return S.some({listStyleType:S.none(),start:e});case 0:return S.some({listStyleType:S.some("upper-alpha"),start:un(e).toString()});case 1:return S.some({listStyleType:S.some("lower-alpha"),start:un(e).toString()});case 3:return S.some({listStyleType:S.none(),start:""});case 4:return S.none()}})(t.getData().start).each((t=>{e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})})),t.close()}})},pn=(e,t)=>()=>{const n=Ye(e);return d(n)&&n.nodeName===t},hn=e=>{e.addCommand("mceListProps",(()=>{gn(e)}))},fn=e=>{e.on("BeforeExecCommand",(t=>{const n=t.command.toLowerCase();"indent"===n?Mt(e):"outdent"===n&&Pt(e)})),e.addCommand("InsertUnorderedList",((t,n)=>{Jt(e,"UL",n)})),e.addCommand("InsertOrderedList",((t,n)=>{Jt(e,"OL",n)})),e.addCommand("InsertDefinitionList",((t,n)=>{Jt(e,"DL",n)})),e.addCommand("RemoveList",(()=>{Ft(e)})),hn(e),e.addCommand("mceListUpdate",((t,n)=>{r(n)&&((e,t)=>{const n=Ye(e);null===n||it(e,n)||e.undoManager.transact((()=>{r(t.styles)&&e.dom.setStyles(n,t.styles),r(t.attrs)&&ge(t.attrs,((t,o)=>e.dom.setAttrib(n,o,t)))}))})(e,n)})),e.addQueryStateHandler("InsertUnorderedList",pn(e,"UL")),e.addQueryStateHandler("InsertOrderedList",pn(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",pn(e,"DL"))};var bn=tinymce.util.Tools.resolve("tinymce.html.Node");const yn=e=>3===e.type,vn=e=>0===e.length,wn=e=>{const t=(t,n)=>{const li=bn.create("li");O(t,(e=>li.append(e))),n?e.insert(li,n,!0):e.append(li)},n=E(e.children(),((e,n)=>yn(n)?[...e,n]:vn(e)||yn(n)?e:(t(e,n),[])),[]);vn(n)||t(n)},xn=e=>{Ie(e)&&(e=>{e.on("keydown",(t=>{t.keyCode!==ue.TAB||ue.metaKeyPressed(t)||e.undoManager.transact((()=>{(t.shiftKey?Pt(e):Mt(e))&&t.preventDefault()}))}))})(e),(e=>{e.on("ExecCommand",(t=>{const n=t.command.toLowerCase();"delete"!==n&&"forwarddelete"!==n||!ln(e)||Qt(e.dom,e.getBody())})),e.on("keydown",(t=>{t.keyCode===ue.BACKSPACE?cn(e,!1)&&t.preventDefault():t.keyCode===ue.DELETE&&cn(e,!0)&&t.preventDefault()}))})(e)},Sn=(e,t)=>n=>(n.setEnabled(e.selection.isEditable()),ct(e,(o=>{n.setActive(at(o.parents,t)),n.setEnabled(!it(e,o.element)&&e.selection.isEditable())}))),Cn=(e,t)=>n=>ct(e,(o=>n.setEnabled(at(o.parents,t)&&!it(e,o.element))));e.add("lists",(e=>((e=>{(0,e.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0})})(e),(e=>{e.on("PreInit",(()=>{const{parser:t}=e;t.addNodeFilter("ul,ol",(e=>O(e,wn)))}))})(e),e.hasPlugin("rtc",!0)?hn(e):(xn(e),fn(e)),(e=>{const t=t=>()=>e.execCommand(t);e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:Sn(e,"OL")}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:Sn(e,"UL")}))})(e),(e=>{const t={text:"List properties...",icon:"ordered-list",onAction:()=>e.execCommand("mceListProps"),onSetup:Cn(e,"OL")};e.ui.registry.addMenuItem("listprops",t),e.ui.registry.addContextMenu("lists",{update:t=>{const n=Ye(e,t);return _e(n)?["listprops"]:[]}})})(e),(e=>({backspaceDelete:t=>{cn(e,t)}}))(e))))}()},678:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=(e,t,n)=>{const o="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(o,!1,!1===n?null:{"list-style-type":n})},option=e=>t=>t.options.get(e),n=option("advlist_number_styles"),o=option("advlist_bullet_styles"),r=a=>null==a,l=a=>!r(a);var c=tinymce.util.Tools.resolve("tinymce.util.Tools");class d{constructor(e,t){this.tag=e,this.value=t}static some(e){return new d(!0,e)}static none(){return d.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?d.some(e(this.value)):d.none()}bind(e){return this.tag?e(this.value):d.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:d.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return l(e)?d.some(e):d.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}d.singletonNone=new d(!1);const m=e=>t=>l(t)&&e.test(t.nodeName),h=m(/^(OL|UL|DL)$/),f=m(/^(TH|TD)$/),y=(e,t,n)=>((e,t,n)=>{for(let i=0,o=e.length;i<o;i++){const o=e[i];if(t(o,i))return d.some(o);if(n(o,i))break}return d.none()})(t,(e=>h(e)&&!/\btox\-/.test(e.className)),f).exists((t=>t.nodeName===n&&((e,t)=>e.dom.isChildOf(t,e.getBody()))(e,t))),v=e=>r(e)||"default"===e?"":e,w=(e,t)=>n=>((e,t)=>{const n=e.selection.getNode();return t({parents:e.dom.getParents(n),element:n}),e.on("NodeChange",t),()=>e.off("NodeChange",t)})(e,(o=>((e,o)=>{const element=e.selection.getStart(!0);n.setActive(y(e,o,t)),n.setEnabled(!((e,element)=>{const t=e.dom.getParent(element,"ol,ul,dl");return((e,element)=>null!==element&&!e.dom.isEditable(element))(e,t)&&e.selection.isEditable()})(e,element)&&e.selection.isEditable())})(e,o.parents))),x=(e,n,o,r,l,m)=>{e.ui.registry.addSplitButton(n,{tooltip:o,icon:"OL"===l?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:e=>{e(c.map(m,(e=>{const t="OL"===l?"num":"bull",n="disc"===e||"decimal"===e?"default":e,o=v(e),r=(e=>e.replace(/\-/g," ").replace(/\b\w/g,(e=>e.toUpperCase())))(e);return{type:"choiceitem",value:o,icon:"list-"+t+"-"+n,text:r}})))},onAction:()=>e.execCommand(r),onItemAction:(n,o)=>{t(e,l,o)},select:t=>{const n=(e=>{const t=e.dom.getParent(e.selection.getNode(),"ol,ul"),style=e.dom.getStyle(t,"listStyleType");return d.from(style)})(e);return n.map((e=>t===e)).getOr(!1)},onSetup:w(e,l)})},S=(e,n,o,r,l,c)=>{c.length>1?x(e,n,o,r,l,c):((e,n,o,r,l,c)=>{e.ui.registry.addToggleButton(n,{active:!1,tooltip:o,icon:"OL"===l?"ordered-list":"unordered-list",onSetup:w(e,l),onAction:()=>e.queryCommandState(r)||""===c?e.execCommand(r):t(e,l,c)})})(e,n,o,r,l,v(c[0]))};e.add("advlist",(e=>{e.hasPlugin("lists")?((e=>{const t=e.options.register;t("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),t("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})})(e),(e=>{S(e,"numlist","Numbered list","InsertOrderedList","OL",n(e)),S(e,"bullist","Bullet list","InsertUnorderedList","UL",o(e))})(e),(e=>{e.addCommand("ApplyUnorderedListStyle",((n,o)=>{t(e,"UL",o["list-style-type"])})),e.addCommand("ApplyOrderedListStyle",((n,o)=>{t(e,"OL",o["list-style-type"])}))})(e)):console.error("Please use the Lists plugin together with the Advanced List plugin.")}))}()},679:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,n=e=>t=>typeof t===e,o=t("string"),r=t("object"),l=t("array"),c=(d=null,a=>d===a);var d;const m=n("boolean"),h=a=>!(a=>null==a)(a),f=n("function"),y=(e,t)=>{if(l(e)){for(let i=0,n=e.length;i<n;++i)if(!t(e[i]))return!1;return!0}return!1},v=()=>{},w=(a,b)=>a===b;class x{constructor(e,t){this.tag=e,this.value=t}static some(e){return new x(!0,e)}static none(){return x.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?x.some(e(this.value)):x.none()}bind(e){return this.tag?e(this.value):x.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:x.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return h(e)?x.some(e):x.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}x.singletonNone=new x(!1);const S=Array.prototype.indexOf,C=Array.prototype.push,k=(e,t)=>((e,t)=>S.call(e,t))(e,t)>-1,T=e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!l(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);C.apply(t,e[i])}return t},_=(e,t)=>T(((e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o})(e,t)),A=(e,t)=>{for(let i=0;i<e.length;i++){const n=t(e[i],i);if(n.isSome())return n}return x.none()},O=(e,t,n=w)=>e.exists((e=>n(e,t))),D=e=>{const t=[],n=e=>{t.push(e)};for(let i=0;i<e.length;i++)e[i].each(n);return t},E=(b,a)=>b?x.some(a):x.none(),option=e=>t=>t.options.get(e),N=option("link_assume_external_targets"),R=option("link_context_toolbar"),M=option("link_list"),P=option("link_default_target"),F=option("link_default_protocol"),I=option("link_target_list"),L=option("link_rel_list"),B=option("link_class_list"),j=option("link_title"),z=option("allow_unsafe_link_target"),$=option("link_quicklink");var U=tinymce.util.Tools.resolve("tinymce.util.Tools");const H=e=>o(e.value)?e.value:"",W=(e,t)=>{const n=[];return U.each(e,(e=>{const text=(e=>o(e.text)?e.text:o(e.title)?e.title:"")(e);if(void 0!==e.menu){const o=W(e.menu,t);n.push({text:text,items:o})}else{const o=t(e);n.push({text:text,value:o})}})),n},V=(e=H)=>t=>x.from(t).map((t=>W(t,e))),Z={sanitize:e=>V(H)(e),sanitizeWith:V,createUi:(e,label)=>t=>({name:e,type:"listbox",label:label,items:t}),getValue:H},K=Object.keys,G=Object.hasOwnProperty,Y=(e,t,n,o)=>{((e,t)=>{const n=K(e);for(let o=0,r=n.length;o<r;o++){const i=n[o];t(e[i],i)}})(e,((e,i)=>{(t(e,i)?n:o)(e,i)}))},J=(e,t)=>G.call(e,t);var X=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Q=tinymce.util.Tools.resolve("tinymce.util.URI");const ee=e=>h(e)&&"a"===e.nodeName.toLowerCase(),te=e=>ee(e)&&!!re(e),ne=(e,t)=>{if(e.collapsed)return[];{const n=e.cloneContents(),o=n.firstChild,r=new X(o,n),l=[];let c=o;do{t(c)&&l.push(c)}while(c=r.next());return l}},oe=e=>/^\w+:/i.test(e),re=e=>{var t,n;return null!==(n=null!==(t=e.getAttribute("data-mce-href"))&&void 0!==t?t:e.getAttribute("href"))&&void 0!==n?n:""},se=(e,t)=>{const n=["noopener"],o=e?e.split(/\s+/):[],r=e=>e.filter((e=>-1===U.inArray(n,e))),l=t?(e=>(e=r(e)).length>0?e.concat(n):n)(o):r(o);return l.length>0?(e=>U.trim(e.sort().join(" ")))(l):""},ae=(e,t)=>(t=t||ce(e.selection.getRng())[0]||e.selection.getNode(),ge(t)?x.from(e.dom.select("a[href]",t)[0]):x.from(e.dom.getParent(t,"a[href]"))),le=(e,t)=>ae(e,t).isSome(),ie=(e,t)=>(text=>text.replace(/\uFEFF/g,""))(t.fold((()=>e.getContent({format:"text"})),(e=>e.innerText||e.textContent||""))),ce=e=>ne(e,te),ue=e=>U.grep(e,te),de=e=>ue(e).length>0,me=e=>{const t=e.schema.getTextInlineElements(),n=e=>1===e.nodeType&&!ee(e)&&!J(t,e.nodeName.toLowerCase());if(ae(e).exists((e=>e.hasAttribute("data-mce-block"))))return!1;const o=e.selection.getRng();if(o.collapsed)return!0;return 0===ne(o,n).length},ge=e=>h(e)&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className),pe=(e,t)=>{const n={...t};if(0===L(e).length&&!z(e)){const e=se(n.rel,"_blank"===n.target);n.rel=e||null}return x.from(n.target).isNone()&&!1===I(e)&&(n.target=P(e)),n.href=((e,t)=>"http"!==t&&"https"!==t||oe(e)?e:t+"://"+e)(n.href,N(e)),n},he=(e,t,data)=>{const n=e.selection.getNode(),o=ae(e,n),r=pe(e,(data=>{return e=["title","rel","class","target"],t=(e,t)=>(data[t].each((n=>{e[t]=n.length>0?n:null})),e),n={href:data.href},((e,t)=>{for(let i=0,n=e.length;i<n;i++)t(e[i],i)})(e,((e,i)=>{n=t(n,e,i)})),n;var e,t,n})(data));e.undoManager.transact((()=>{data.href===t.href&&t.attach(),o.fold((()=>{((e,t,text,n)=>{const o=e.dom;ge(t)?ve(o,t,n):text.fold((()=>{e.execCommand("mceInsertLink",!1,n)}),(text=>{e.insertContent(o.createHTML("a",n,o.encode(text)))}))})(e,n,data.text,r)}),(t=>{e.focus(),((e,t,text,n)=>{text.each((text=>{J(t,"innerText")?t.innerText=text:t.textContent=text})),e.dom.setAttribs(t,n),e.selection.select(t)})(e,t,data.text,r)}))}))},fe=data=>{const{class:e,href:t,rel:n,target:o,text:text,title:title}=data;return((e,t)=>{const n={};var o;return Y(e,t,(o=n,(e,i)=>{o[i]=e}),v),n})({class:e.getOrNull(),href:t,rel:n.getOrNull(),target:o.getOrNull(),text:text.getOrNull(),title:title.getOrNull()},((e,t)=>!1===c(e)))},link=(e,t,data)=>{const n=((e,data)=>{const t=e.options.get,n={allow_html_data_urls:t("allow_html_data_urls"),allow_script_urls:t("allow_script_urls"),allow_svg_data_urls:t("allow_svg_data_urls")},o=data.href;return{...data,href:Q.isDomSafe(o,"a",n)?o:""}})(e,data);e.hasPlugin("rtc",!0)?e.execCommand("createlink",!1,fe(n)):he(e,t,n)},be=e=>{e.hasPlugin("rtc",!0)?e.execCommand("unlink"):(e=>{e.undoManager.transact((()=>{const t=e.selection.getNode();ge(t)?ye(e,t):(e=>{const t=e.dom,n=e.selection,o=n.getBookmark(),r=n.getRng().cloneRange(),l=t.getParent(r.startContainer,"a[href]",e.getBody()),c=t.getParent(r.endContainer,"a[href]",e.getBody());l&&r.setStartBefore(l),c&&r.setEndAfter(c),n.setRng(r),e.execCommand("unlink"),n.moveToBookmark(o)})(e),e.focus()}))})(e)},ye=(e,t)=>{var n;const img=e.dom.select("img",t)[0];if(img){const a=e.dom.getParents(img,"a[href]",t)[0];a&&(null===(n=a.parentNode)||void 0===n||n.insertBefore(img,a),e.dom.remove(a))}},ve=(e,t,n)=>{var o;const img=e.select("img",t)[0];if(img){const a=e.create("a",n);null===(o=img.parentNode)||void 0===o||o.insertBefore(a,img),a.appendChild(img)}},we=e=>{return J(t=e,n="items")&&void 0!==t[n]&&null!==t[n];var t,n},xe=(e,t)=>A(t,(t=>we(t)?xe(e,t.items):E(t.value===e,t))),Se=(e,t,n,data)=>{const o=data[t],r=e.length>0;return void 0!==o?xe(o,n).map((i=>({url:{value:i.value,meta:{text:r?e:i.text,attach:v}},text:r?e:i.text}))):x.none()},Ce=(e,t)=>{const n={text:e.text,title:e.title},o=data=>{const text=(e=data.url,E(n.text.length<=0,x.from(null===(t=e.meta)||void 0===t?void 0:t.text).getOr(e.value)));var e,t;const title=(e=>{var t;return E(n.title.length<=0,x.from(null===(t=e.meta)||void 0===t?void 0:t.title).getOr(""))})(data.url);return text.isSome()||title.isSome()?x.some({...text.map((text=>({text:text}))).getOr({}),...title.map((title=>({title:title}))).getOr({})}):x.none()},r=(data,e)=>{const o=(r=t,l=e,"link"===l?r.link:"anchor"===l?r.anchor:x.none()).getOr([]);var r,l;return Se(n.text,e,o,data)};return{onChange:(e,t)=>{const l=t.name;return"url"===l?o(e()):k(["anchor","link"],l)?r(e(),l):"text"===l||"title"===l?(n[l]=e()[l],x.none()):x.none()}}};var ke=tinymce.util.Tools.resolve("tinymce.util.Delay");const Te=data=>{const e=data.href;return e.indexOf("@")>0&&-1===e.indexOf("/")&&-1===e.indexOf("mailto:")?x.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:t=>({...t,href:"mailto:"+e})}):x.none()},_e=(e,t)=>data=>{const n=data.href;return 1===e&&!oe(n)||0===e&&/^\s*www(\.|\d\.)/i.test(n)?x.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${t}:// prefix?`,preprocess:e=>({...e,href:t+"://"+n})}):x.none()},Ae=(e,data)=>A([Te,_e(N(e),F(e))],(e=>e(data))).fold((()=>Promise.resolve(data)),(t=>new Promise((n=>{((e,t,n)=>{const o=e.selection.getRng();ke.setEditorTimeout(e,(()=>{e.windowManager.confirm(t,(t=>{e.selection.setRng(o),n(t)}))}))})(e,t.message,(e=>{n(e?t.preprocess(data):data)}))})))),Oe=e=>{const t=e.dom.select("a:not([href])"),n=_(t,(e=>{const t=e.name||e.id;return t?[{text:t,value:"#"+t}]:[]}));return n.length>0?x.some([{text:"None",value:""}].concat(n)):x.none()},De=e=>{const t=B(e);return t.length>0?Z.sanitize(t):x.none()},Ee=text=>{try{return x.some(JSON.parse(text))}catch(e){return x.none()}},Ne=e=>{const t=t=>e.convertURL(t.value||t.url||"","href"),n=M(e);return new Promise((e=>{o(n)?fetch(n).then((e=>e.ok?e.text().then(Ee):Promise.reject())).then(e,(()=>e(x.none()))):f(n)?n((output=>e(x.some(output)))):e(x.from(n))})).then((e=>e.bind(Z.sanitizeWith(t)).map((e=>{if(e.length>0){return[{text:"None",value:""}].concat(e)}return e}))))},Re=(e,t)=>{const n=L(e);if(n.length>0){const o=O(t,"_blank"),r=e=>se(Z.getValue(e),o);return(!1===z(e)?Z.sanitizeWith(r):Z.sanitize)(n)}return x.none()},Me=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Pe=e=>{const t=I(e);return l(t)?Z.sanitize(t).orThunk((()=>x.some(Me))):!1===t?x.none():x.some(Me)},Fe=(e,t,n)=>{const o=e.getAttrib(t,n);return null!==o&&o.length>0?x.some(o):x.none()},Ie=(e,t)=>Ne(e).then((n=>{const o=((e,t)=>{const n=e.dom,text=me(e)?x.some(ie(e.selection,t)):x.none(),o=t.bind((e=>x.from(n.getAttrib(e,"href")))),r=t.bind((e=>x.from(n.getAttrib(e,"target")))),l=t.bind((e=>Fe(n,e,"rel"))),c=t.bind((e=>Fe(n,e,"class")));return{url:o,text:text,title:t.bind((e=>Fe(n,e,"title"))),target:r,rel:l,linkClass:c}})(e,t);return{anchor:o,catalogs:{targets:Pe(e),rels:Re(e,o.target),classes:De(e),anchor:Oe(e),link:n},optNode:t,flags:{titleEnabled:j(e)}}})),Le=e=>{const data=(e=>{const t=ae(e);return Ie(e,t)})(e);data.then((t=>{const n=((e,t)=>n=>{const data=n.getData();if(!data.url.value)return be(e),void n.close();const o=e=>x.from(data[e]).filter((n=>!O(t.anchor[e],n))),r={href:data.url.value,text:o("text"),target:o("target"),rel:o("rel"),class:o("linkClass"),title:o("title")},l={href:data.url.value,attach:void 0!==data.url.meta&&data.url.meta.attach?data.url.meta.attach:v};Ae(e,r).then((t=>{link(e,l,t)})),n.close()})(e,t);return((e,t,n)=>{const o=e.anchor.text.map((()=>({name:"text",type:"input",label:"Text to display"}))).toArray(),r=e.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],l=((e,t)=>{const n=e.anchor,o=n.url.getOr("");return{url:{value:o,meta:{original:{value:o}}},text:n.text.getOr(""),title:n.title.getOr(""),anchor:o,link:o,rel:n.rel.getOr(""),target:n.target.or(t).getOr(""),linkClass:n.linkClass.getOr("")}})(e,x.from(P(n))),c=e.catalogs,d=Ce(l,c);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:T([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],o,r,D([c.anchor.map(Z.createUi("anchor","Anchors")),c.rels.map(Z.createUi("rel","Rel")),c.targets.map(Z.createUi("target","Open link in...")),c.link.map(Z.createUi("link","Link list")),c.classes.map(Z.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:l,onChange:(e,{name:t})=>{d.onChange(e.getData,{name:t}).each((t=>{e.setData(t)}))},onSubmit:t}})(t,n,e)})).then((t=>{e.windowManager.open(t)}))};var Be=tinymce.util.Tools.resolve("tinymce.util.VK");const je=e=>{const link=document.createElement("a");link.target="_blank",link.href=e,link.rel="noreferrer noopener";const t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),((link,e)=>{document.body.appendChild(link),link.dispatchEvent(e),document.body.removeChild(link)})(link,t)},ze=(e,t)=>e.dom.getParent(t,"a[href]"),$e=e=>ze(e,e.selection.getStart()),Ue=(e,a)=>{if(a){const t=re(a);if(/^#/.test(t)){const n=e.dom.select(t);n.length&&e.selection.scrollIntoView(n[0],!0)}else je(a.href)}},He=e=>()=>{e.execCommand("mceLink",!1,{dialog:!0})},We=e=>()=>{Ue(e,$e(e))},qe=(e,t)=>(e.on("NodeChange",t),()=>e.off("NodeChange",t)),Ve=e=>t=>{const n=()=>{t.setActive(!e.mode.isReadOnly()&&le(e,e.selection.getNode())),t.setEnabled(e.selection.isEditable())};return n(),qe(e,n)},Ze=e=>t=>{const n=()=>{t.setEnabled(e.selection.isEditable())};return n(),qe(e,n)},Ke=e=>t=>{const n=()=>t.setEnabled((e=>1===(e.selection.isCollapsed()?ue(e.dom.getParents(e.selection.getStart())):ce(e.selection.getRng())).length)(e));return n(),qe(e,n)},Ge=e=>t=>{const n=t=>{return de(t)||(n=e.selection.getRng(),ce(n).length>0);var n},o=e.dom.getParents(e.selection.getStart()),r=o=>{t.setEnabled(n(o)&&e.selection.isEditable())};return r(o),qe(e,(e=>r(e.parents)))},Ye=e=>{const t=t=>{const n=e.selection.getNode();return t.setEnabled(le(e,n)),v};e.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Ve(e)},label:"Link",predicate:t=>R(e)&&le(e,t),initValue:()=>{return ae(e).fold((t="",()=>t),re);var t},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:t=>{const n=e.selection.getNode();return t.setActive(le(e,n)),Ve(e)(t)},onAction:t=>{const n=t.getValue(),text=(t=>{const n=ae(e),o=me(e);if(n.isNone()&&o){const text=ie(e.selection,n);return E(0===text.length,t)}return x.none()})(n);link(e,{href:n,attach:v},{href:n,text:text,title:x.none(),rel:x.none(),target:x.none(),class:x.none()}),(e=>{e.selection.collapse(!1)})(e),t.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:t,onAction:t=>{be(e),t.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:t,onAction:t=>{We(e)(),t.hide()}}]})};e.add("link",(e=>{(e=>{const t=e.options.register;t("link_assume_external_targets",{processor:e=>{const t=o(e)||m(e);return t?!0===e?{value:1,valid:t}:"http"===e||"https"===e?{value:e,valid:t}:{value:0,valid:t}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),t("link_context_toolbar",{processor:"boolean",default:!1}),t("link_list",{processor:e=>o(e)||f(e)||y(e,r)}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"}),t("link_target_list",{processor:e=>m(e)||y(e,r),default:!0}),t("link_rel_list",{processor:"object[]",default:[]}),t("link_class_list",{processor:"object[]",default:[]}),t("link_title",{processor:"boolean",default:!0}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("link_quicklink",{processor:"boolean",default:!1})})(e),(e=>{e.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:He(e),onSetup:Ve(e)}),e.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:We(e),onSetup:Ke(e)}),e.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>be(e),onSetup:Ge(e)})})(e),(e=>{e.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:We(e),onSetup:Ke(e)}),e.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onSetup:Ze(e),onAction:He(e)}),e.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>be(e),onSetup:Ge(e)})})(e),(e=>{e.ui.registry.addContextMenu("link",{update:element=>e.dom.isEditable(element)?de(e.dom.getParents(element,"a"))?"link unlink openlink":"link":""})})(e),Ye(e),(e=>{e.on("click",(t=>{const link=ze(e,t.target);link&&Be.metaKeyPressed(t)&&(t.preventDefault(),Ue(e,link))})),e.on("keydown",(t=>{if(!t.isDefaultPrevented()&&13===t.keyCode&&(e=>!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey)(t)){const link=$e(e);link&&(t.preventDefault(),Ue(e,link))}}))})(e),(e=>{e.addCommand("mceLink",((t,n)=>{!0!==(null==n?void 0:n.dialog)&&$(e)?e.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"}):Le(e)}))})(e),(e=>{e.addShortcut("Meta+K","",(()=>{e.execCommand("mceLink")}))})(e)}))}()},680:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const option=e=>t=>t.options.get(e),t=option("autolink_pattern"),n=option("link_default_target"),o=option("link_default_protocol"),r=option("allow_unsafe_link_target"),l=(c="string",e=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,(r=String).prototype.isPrototypeOf(n)||(null===(l=o.constructor)||void 0===l?void 0:l.name)===r.name)?"string":t;var n,o,r,l})(e)===c);var c;const d=(m=void 0,a=>m===a);var m;const h=a=>!(a=>null==a)(a),f=Object.hasOwnProperty,y=e=>"\ufeff"===e;var v=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const w=e=>3===e.nodeType,x=e=>/^[(\[{ \u00a0]$/.test(e),S=(text,e,t)=>{for(let i=e-1;i>=0;i--){const e=text.charAt(i);if(!y(e)&&t(e))return i}return-1},C=(e,n)=>{var r;const l=e.schema.getVoidElements(),c=t(e),{dom:m,selection:h}=e;if(null!==m.getParent(h.getNode(),"a[href]"))return null;const y=h.getRng(),C=v(m,(e=>{return m.isBlock(e)||(t=l,n=e.nodeName.toLowerCase(),f.call(t,n))||"false"===m.getContentEditable(e);var t,n})),{container:k,offset:T}=((e,t)=>{let n=e,o=t;for(;1===n.nodeType&&n.childNodes[o];)n=n.childNodes[o],o=w(n)?n.data.length:n.childNodes.length;return{container:n,offset:o}})(y.endContainer,y.endOffset),_=null!==(r=m.getParent(k,m.isBlock))&&void 0!==r?r:m.getRoot(),A=C.backwards(k,T+n,((e,t)=>{const text=e.data,n=S(text,t,(o=x,e=>!o(e)));var o,r;return-1===n||(r=text[n],/[?!,.;:]/.test(r))?n:n+1}),_);if(!A)return null;let O=A.container;const D=C.backwards(A.container,A.offset,((e,t)=>{O=e;const n=S(e.data,t,x);return-1===n?n:n+1}),_),E=m.createRng();D?E.setStart(D.container,D.offset):E.setStart(O,0),E.setEnd(A.container,A.offset);const N=E.toString().replace(/\uFEFF/g,"").match(c);if(N){let t=N[0];if(((e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t)(t,"www.",0)){t=o(e)+"://"+t}else((e,t,n=0,o)=>{const r=e.indexOf(t,n);return-1!==r&&(!!d(o)||r+t.length<=o)})(t,"@")&&!(e=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(e))(t)&&(t="mailto:"+t);return{rng:E,url:t}}return null},k=(e,t)=>{const{dom:o,selection:c}=e,{rng:d,url:m}=t,h=c.getBookmark();c.setRng(d);const f="createlink",y={command:f,ui:!1,value:m};if(!e.dispatch("BeforeExecCommand",y).isDefaultPrevented()){e.getDoc().execCommand(f,!1,m),e.dispatch("ExecCommand",y);const t=n(e);if(l(t)){const n=c.getNode();o.setAttrib(n,"target",t),"_blank"!==t||r(e)||o.setAttrib(n,"rel","noopener")}}c.moveToBookmark(h),e.nodeChanged()},T=e=>{const t=C(e,-1);h(t)&&k(e,t)},_=T,A=e=>{e.on("keydown",(t=>{13!==t.keyCode||t.isDefaultPrevented()||(e=>{const t=C(e,0);h(t)&&k(e,t)})(e)})),e.on("keyup",(t=>{32===t.keyCode?T(e):(48===t.keyCode&&t.shiftKey||221===t.keyCode)&&_(e)}))};e.add("autolink",(e=>{(e=>{const t=e.options.register;t("autolink_pattern",{processor:"regexp",default:new RegExp("^"+/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g.source+"$","i")}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"})})(e),A(e)}))}()},681:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=(e,t)=>{const n=((e,t)=>e.dispatch("insertCustomChar",{chr:t}))(e,t).chr;e.execCommand("mceInsertContent",!1,n)},n=e=>a=>e===a,o=(r="array",e=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,(r=String).prototype.isPrototypeOf(n)||(null===(l=o.constructor)||void 0===l?void 0:l.name)===r.name)?"string":t;var n,o,r,l})(e)===r);var r;const l=n(null),c=n(void 0),d=(e=>t=>typeof t===e)("function"),m=(h=!1,()=>h);var h;class f{constructor(e,t){this.tag=e,this.value=t}static some(e){return new f(!0,e)}static none(){return f.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?f.some(e(this.value)):f.none()}bind(e){return this.tag?e(this.value):f.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:f.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(a=>null==a)(e)?f.none():f.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}f.singletonNone=new f(!1);const y=Array.prototype.push,map=(e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o},v=(e,t)=>((e,t,n)=>{for(let i=0,o=e.length;i<o;i++){const o=e[i];if(t(o,i))return f.some(o);if(n(o,i))break}return f.none()})(e,t,m),w=(e,t)=>(e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!o(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);y.apply(t,e[i])}return t})(map(e,t));var x=tinymce.util.Tools.resolve("tinymce.util.Tools");const option=e=>t=>t.options.get(e),S=option("charmap"),C=option("charmap_append"),k=x.isArray,T="User Defined",_=e=>{return k(e)?(t=e,x.grep(t,(e=>k(e)&&2===e.length))):"function"==typeof e?e():[];var t},A=e=>{const t=((e,t)=>{const n=S(e);n&&(t=[{name:T,characters:_(n)}]);const o=C(e);if(o){const e=x.grep(t,(e=>e.name===T));return e.length?(e[0].characters=[...e[0].characters,..._(o)],t):t.concat({name:T,characters:_(o)})}return t})(e,[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}]);return t.length>1?[{name:"All",characters:w(t,(g=>g.characters))}].concat(t):t},O=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},D=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return-1!==r&&(!!c(o)||r+t.length<=o)},E=String.fromCodePoint,N=(e,pattern)=>{const t=[],n=pattern.toLowerCase();return((e,t)=>{for(let i=0,n=e.length;i<n;i++)t(e[i],i)})(e.characters,(g=>{((e,t,n)=>!!D(E(e).toLowerCase(),n)||D(t.toLowerCase(),n)||D(t.toLowerCase().replace(/\s+/g,""),n))(g[0],g[1],n)&&t.push(g)})),map(t,(e=>({text:e[1],value:E(e[0]),icon:E(e[0])})))},R="pattern",M=(e,n)=>{const o=()=>[{label:"Search",type:"input",name:R},{type:"collection",name:"results"}],r=1===n.length?O(T):O("All"),c=((e,t)=>{let n=null;const o=()=>{l(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout((()=>{n=null,e.apply(null,r)}),t)}}})((e=>{const pattern=e.getData().pattern;((e,pattern)=>{v(n,(e=>e.name===r.get())).each((t=>{const n=N(t,pattern);e.setData({results:n})}))})(e,pattern)}),40),d={title:"Special Character",size:"normal",body:1===n.length?{type:"panel",items:o()}:{type:"tabpanel",tabs:map(n,(e=>({title:e.name,name:e.name,items:o()})))},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{pattern:"",results:N(n[0],"")},onAction:(n,details)=>{"results"===details.name&&(t(e,details.value),n.close())},onTabChange:(e,details)=>{r.set(details.newTabName),c.throttle(e)},onChange:(e,t)=>{t.name===R&&c.throttle(e)}};e.windowManager.open(d).focus(R)},P=e=>t=>{const n=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",n),n(),()=>{e.off("NodeChange",n)}};e.add("charmap",(e=>{(e=>{const t=e.options.register,n=e=>d(e)||o(e);t("charmap",{processor:n}),t("charmap_append",{processor:n})})(e);const n=A(e);return((e,t)=>{e.addCommand("mceShowCharmap",(()=>{M(e,t)}))})(e,n),(e=>{const t=()=>e.execCommand("mceShowCharmap");e.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:t,onSetup:P(e)}),e.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:t,onSetup:P(e)})})(e),((e,t)=>{e.ui.registry.addAutocompleter("charmap",{trigger:":",columns:"auto",minChars:2,fetch:(pattern,e)=>new Promise(((e,n)=>{e(N(t,pattern))})),onAction:(t,n,o)=>{e.selection.setRng(n),e.insertContent(o),t.hide()}})})(e,n[0]),(e=>({getCharMap:()=>A(e),insertChar:n=>{t(e,n)}}))(e)}))}()},682:function(e,t){!function(){"use strict";const e=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var t=tinymce.util.Tools.resolve("tinymce.PluginManager");const n=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,o=e=>t=>typeof t===e,r=n("string"),l=n("array"),c=o("boolean"),d=o("number"),m=()=>{},h=e=>()=>e,f=h(!0),y=h("[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]");class v{constructor(e,t){this.tag=e,this.value=t}static some(e){return new v(!0,e)}static none(){return v.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?v.some(e(this.value)):v.none()}bind(e){return this.tag?e(this.value):v.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:v.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(a=>null==a)(e)?v.none():v.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}v.singletonNone=new v(!1);const w=y;var x=tinymce.util.Tools.resolve("tinymce.Env"),S=tinymce.util.Tools.resolve("tinymce.util.Tools");const C=Array.prototype.slice,k=Array.prototype.push,map=(e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o},T=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},_=(e,t)=>{for(let i=e.length-1;i>=0;i--){t(e[i],i)}},A=(e,t)=>(e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!l(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);k.apply(t,e[i])}return t})(map(e,t)),O=Object.hasOwnProperty,D=(e,t)=>O.call(e,t);"undefined"!=typeof window?window:Function("return this;")();const E=(N=3,element=>(element=>element.dom.nodeType)(element)===N);var N;const R=(element,e,t)=>{((e,t,n)=>{if(!(r(n)||c(n)||d(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(element.dom,e,t)},M=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},P={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return M(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return M(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return M(t)},fromDom:M,fromPoint:(e,t,n)=>v.from(e.dom.elementFromPoint(t,n)).map(M)},F=(element,e)=>({element:element,offset:e}),I=(element,e)=>{const t=(element=>map(element.dom.childNodes,P.fromDom))(element);return t.length>0&&e<t.length?F(t[e],0):F(element,e)},L=(marker,element)=>{const e=(element=>v.from(element.dom.parentNode).map(P.fromDom))(marker);e.each((e=>{e.dom.insertBefore(element.dom,marker.dom)}))},B=(element,e)=>{L(element,e),((e,element)=>{e.dom.appendChild(element.dom)})(e,element)},j=((e,t)=>{const n=element=>e(element)?v.from(element.dom.nodeValue):v.none();return{get:element=>{if(!e(element))throw new Error("Can only get "+t+" value of a "+t+" node");return n(element).getOr("")},getOption:n,set:(element,n)=>{if(!e(element))throw new Error("Can only set raw "+t+" value of a "+t+" node");element.dom.nodeValue=n}}})(E,"text"),z=element=>j.get(element),$=(e,t)=>((e,t)=>{const base=void 0===t?document:t.dom;return 1!==(n=base).nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount?[]:map(base.querySelectorAll(e),P.fromDom);var n})(t,e);var U=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const H=(e,t)=>e.isBlock(t)||D(e.schema.getVoidElements(),t.nodeName),W=(e,t)=>"false"===e.getContentEditable(t),V=(e,t)=>!e.isBlock(t)&&D(e.schema.getWhitespaceElements(),t.nodeName),Z=(e,t)=>I(P.fromDom(e),t),K=(e,t,n,o,r,l=!0)=>{let c=l?t(!1):n;for(;c;){const n=W(e,c);if(n||V(e,c)){if(n?o.cef(c):o.boundary(c))break;c=t(!0)}else{if(H(e,c)){if(o.boundary(c))break}else 3===c.nodeType&&o.text(c);if(c===r)break;c=t(!1)}}},G=(e,section,t,n,o)=>{var r;if(((e,t)=>H(e,t)||W(e,t)||V(e,t)||((e,t)=>"true"===e.getContentEditable(t)&&t.parentNode&&"false"===e.getContentEditableParent(t.parentNode))(e,t))(e,t))return;const l=null!==(r=e.getParent(n,e.isBlock))&&void 0!==r?r:e.getRoot(),c=new U(t,l),d=o?c.next.bind(c):c.prev.bind(c);K(e,d,t,{boundary:f,cef:f,text:e=>{o?section.fOffset+=e.length:section.sOffset+=e.length,section.elements.push(P.fromDom(e))}})},Y=(e,t,n,o,r,l=!0)=>{const c=new U(n,t),d=[];let m={sOffset:0,fOffset:0,elements:[]};G(e,m,n,t,!1);const h=()=>(m.elements.length>0&&(d.push(m),m={sOffset:0,fOffset:0,elements:[]}),!1);return K(e,c.next.bind(c),n,{boundary:h,cef:e=>(h(),r&&d.push(...r.cef(e)),!1),text:e=>{m.elements.push(P.fromDom(e)),r&&r.text(e,m)}},o,l),o&&G(e,m,o,t,!0),h(),d},J=(e,t)=>{const n=Z(t.startContainer,t.startOffset),o=n.element.dom,r=Z(t.endContainer,t.endOffset),l=r.element.dom;return Y(e,t.commonAncestorContainer,o,l,{text:(e,section)=>{e===l?section.fOffset+=e.length-r.offset:e===o&&(section.sOffset+=n.offset)},cef:t=>((e,t)=>{const n=C.call(e,0);return n.sort(t),n})(A($(P.fromDom(t),"*[contenteditable=true]"),(t=>{const n=t.dom;return Y(e,n,n)})),((a,b)=>((a,b)=>((a,b,e)=>0!=(a.compareDocumentPosition(b)&e))(a,b,Node.DOCUMENT_POSITION_PRECEDING))(a.elements[0].dom,b.elements[0].dom)?1:-1))},!1)},X=(e,t)=>t.collapsed?[]:J(e,t),Q=(e,t)=>{const n=e.createRng();return n.selectNode(t),X(e,n)},ee=(e,t)=>{const n=(o=e,r=(e,element)=>{const content=z(element),n=e.last,o=n+content.length,r=A(t,((e,t)=>e.start<o&&e.finish>n?[{element:element,start:Math.max(n,e.start)-n,finish:Math.min(o,e.finish)-n,matchId:t}]:[]));return{results:e.results.concat(r),last:o}},l={results:[],last:0},T(o,((e,i)=>{l=r(l,e,i)})),l).results;var o,r,l;return((e,t)=>{if(0===e.length)return[];{let n=t(e[0]);const o=[];let r=[];for(let i=0,l=e.length;i<l;i++){const l=e[i],c=t(l);c!==n&&(o.push(r),r=[]),n=c,r.push(l)}return 0!==r.length&&o.push(r),o}})(n,(e=>e.matchId))},te=(pattern,e)=>A(e,(section=>{const e=section.elements,content=map(e,z).join(""),t=((text,pattern,e=0,t=text.length)=>{const n=pattern.regex;n.lastIndex=e;const o=[];let r;for(;r=n.exec(text);){const e=r[pattern.matchIndex],l=r.index+r[0].indexOf(e),c=l+e.length;if(c>t)break;o.push({start:l,finish:c}),n.lastIndex=c}return o})(content,pattern,section.sOffset,content.length-section.fOffset);return ee(e,t)})),mark=(e,t)=>{_(e,((e,n)=>{_(e,(e=>{const o=P.fromDom(t.cloneNode(!1));R(o,"data-mce-index",n);const r=e.element.dom;if(r.length===e.finish&&0===e.start)B(e.element,o);else{r.length!==e.finish&&r.splitText(e.finish);const t=r.splitText(e.start);B(P.fromDom(t),o)}}))}))},ne=(e,pattern,t,n)=>{const o=t.getBookmark(),r=e.select("td[data-mce-selected],th[data-mce-selected]"),l=r.length>0?((e,t)=>A(t,(t=>Q(e,t))))(e,r):X(e,t.getRng()),c=te(pattern,l);return mark(c,n),t.moveToBookmark(o),c.length},oe=e=>e.getAttribute("data-mce-index"),re=(e,t,pattern,n)=>{const marker=e.dom.create("span",{"data-mce-bogus":1});marker.className="mce-match-marker";const o=e.getBody();return pe(e,t,!1),n?ne(e.dom,pattern,e.selection,marker):((e,pattern,t,n)=>{const o=Q(e,t),r=te(pattern,o);return mark(r,n),r.length})(e.dom,pattern,o,marker)},se=e=>{var t;const n=e.parentNode;e.firstChild&&n.insertBefore(e.firstChild,e),null===(t=e.parentNode)||void 0===t||t.removeChild(e)},ae=(e,t)=>{const n=[],o=S.toArray(e.getBody().getElementsByTagName("span"));if(o.length)for(let i=0;i<o.length;i++){const e=oe(o[i]);null!==e&&e.length&&(e===t.toString()&&n.push(o[i]))}return n},le=(e,t,n)=>{const o=t.get();let r=o.index;const l=e.dom;n?r+1===o.count?r=0:r++:r-1==-1?r=o.count-1:r--,l.removeClass(ae(e,o.index),"mce-match-marker-selected");const c=ae(e,r);return c.length?(l.addClass(ae(e,r),"mce-match-marker-selected"),e.selection.scrollIntoView(c[0]),r):-1},ie=(e,t)=>{const n=t.parentNode;e.remove(t),n&&e.isEmpty(n)&&e.remove(n)},ce=(e,t,text,n,o,r)=>{const l=e.selection,c=((text,e)=>{const t="("+text.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return e?`(?:^|\\s|${w()})`+t+`(?=$|\\s|${w()})`:t})(text,o),d=l.isForward(),pattern={regex:new RegExp(c,n?"g":"gi"),matchIndex:1},m=re(e,t,pattern,r);if(x.browser.isSafari()&&l.setRng(l.getRng(),d),m){const l=le(e,t,!0);t.set({index:l,count:m,text:text,matchCase:n,wholeWord:o,inSelection:r})}return m},ue=(e,t)=>{const n=le(e,t,!0);t.set({...t.get(),index:n})},de=(e,t)=>{const n=le(e,t,!1);t.set({...t.get(),index:n})},me=e=>{const t=oe(e);return null!==t&&t.length>0},ge=(e,t,text,n,o)=>{const r=t.get(),l=r.index;let c,d=l;n=!1!==n;const m=e.getBody(),h=S.grep(S.toArray(m.getElementsByTagName("span")),me);for(let i=0;i<h.length;i++){const t=oe(h[i]);let m=c=parseInt(t,10);if(o||m===r.index){for(text.length?(h[i].innerText=text,se(h[i])):ie(e.dom,h[i]);h[++i];){if(m=parseInt(oe(h[i]),10),m!==c){i--;break}ie(e.dom,h[i])}n&&d--}else c>l&&h[i].setAttribute("data-mce-index",String(c-1))}return t.set({...r,count:o?0:r.count-1,index:d}),n?ue(e,t):de(e,t),!o&&t.get().count>0},pe=(e,t,n)=>{let o,r;const l=t.get(),c=S.toArray(e.getBody().getElementsByTagName("span"));for(let i=0;i<c.length;i++){const e=oe(c[i]);null!==e&&e.length&&(e===l.index.toString()&&(o||(o=c[i].firstChild),r=c[i].firstChild),se(c[i]))}if(t.set({...l,index:-1,count:0,text:""}),o&&r){const t=e.dom.createRng();return t.setStart(o,0),t.setEnd(r,r.data.length),!1!==n&&e.selection.setRng(t),t}},he=()=>{const t=(t=>{const n=e(v.none()),o=()=>n.get().each(t);return{clear:()=>{o(),n.set(v.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:s=>{o(),n.set(v.some(s))}}})(m);return{...t,on:e=>t.get().each(e)}},fe=(e,t)=>{const n=he();e.undoManager.add();const o=S.trim(e.selection.getContent({format:"text"})),r=e=>{e.setEnabled("next",((e,t)=>t.get().count>1)(0,t)),e.setEnabled("prev",((e,t)=>t.get().count>1)(0,t))},l=(e,t)=>{T(["replace","replaceall","prev","next"],(n=>e.setEnabled(n,!t)))},c=(e,t)=>{t.redial(w(e,t.getData()))},d=(e,t)=>{x.browser.isSafari()&&x.deviceType.isTouch()&&("find"===t||"replace"===t||"replaceall"===t)&&e.focus(t)},m=n=>{pe(e,t,!1),l(n,!0),r(n)},h=n=>{const data=n.getData(),o=t.get();if(data.findtext.length){if(o.text===data.findtext&&o.matchCase===data.matchcase&&o.wholeWord===data.wholewords)ue(e,t);else{const o=ce(e,t,data.findtext,data.matchcase,data.wholewords,data.inselection);o<=0&&c(!0,n),l(n,0===o)}r(n)}else m(n)},f=t.get(),y={findtext:o,replacetext:"",wholewords:f.wholeWord,matchcase:f.matchCase,inselection:f.inSelection},v=e=>{const t=[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}];return e&&t.push({type:"alertbanner",level:"error",text:"Could not find the specified string.",icon:"warning"}),t},w=(n,o)=>({title:"Find and Replace",size:"normal",body:{type:"panel",items:v(n)},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:o,onChange:(e,details)=>{n&&c(!1,e),"findtext"===details.name&&t.get().count>0&&m(e)},onAction:(n,details)=>{const data=n.getData();switch(details.name){case"find":h(n);break;case"replace":ge(e,t,data.replacetext)?r(n):m(n);break;case"replaceall":ge(e,t,data.replacetext,!0,!0),m(n);break;case"prev":de(e,t),r(n);break;case"next":ue(e,t),r(n);break;case"matchcase":case"wholewords":case"inselection":c(!1,n),(e=>{const data=e.getData(),n=t.get();t.set({...n,matchCase:data.matchcase,wholeWord:data.wholewords,inSelection:data.inselection})})(n),m(n)}d(n,details.name)},onSubmit:e=>{h(e),d(e,"find")},onClose:()=>{e.focus(),pe(e,t),e.undoManager.add()}});n.set(e.windowManager.open(w(!1,y),{inline:"toolbar"}))},be=(e,t)=>()=>{fe(e,t)};t.add("searchreplace",(t=>{const n=e({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return((e,t)=>{e.addCommand("SearchReplace",(()=>{fe(e,t)}))})(t,n),((e,t)=>{e.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:be(e,t),icon:"search"}),e.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:be(e,t),icon:"search"}),e.shortcuts.add("Meta+F","",be(e,t))})(t,n),((e,t)=>({done:n=>pe(e,t,n),find:(text,n,o,r=!1)=>ce(e,t,text,n,o,r),next:()=>ue(e,t),prev:()=>de(e,t),replace:(text,n,o)=>ge(e,t,text,n,o)}))(t,n)}))}()},683:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=(e,t,n)=>{e.dom.toggleClass(e.getBody(),"mce-visualblocks"),n.set(!n.get()),((e,t)=>{e.dispatch("VisualBlocks",{state:t})})(e,n.get())},n=(o="visualblocks_default_state",e=>e.options.get(o));var o;const r=(e,t)=>n=>{n.setActive(t.get());const o=e=>n.setActive(e.state);return e.on("VisualBlocks",o),()=>e.off("VisualBlocks",o)};e.add("visualblocks",((e,o)=>{(e=>{(0,e.options.register)("visualblocks_default_state",{processor:"boolean",default:!1})})(e);const l=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})(!1);((e,n,o)=>{e.addCommand("mceVisualBlocks",(()=>{t(e,0,o)}))})(e,0,l),((e,t)=>{const n=()=>e.execCommand("mceVisualBlocks");e.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:n,onSetup:r(e,t)}),e.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:n,onSetup:r(e,t)})})(e,l),((e,o,r)=>{e.on("PreviewFormats AfterPreviewFormats",(t=>{r.get()&&e.dom.toggleClass(e.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)})),e.on("init",(()=>{n(e)&&t(e,0,r)}))})(e,0,l)}))}()},684:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");e.add("code",(e=>((e=>{e.addCommand("mceCodeEditor",(()=>{(e=>{const t=(e=>e.getContent({source_view:!0}))(e);e.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:t},onSubmit:t=>{((e,html)=>{e.focus(),e.undoManager.transact((()=>{e.setContent(html)})),e.selection.setCursorLocation(),e.nodeChanged()})(e,t.getData().code),t.close()}})})(e)}))})(e),(e=>{const t=()=>e.execCommand("mceCodeEditor");e.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:t}),e.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:t})})(e),{})))}()},685:function(e,t){!function(){"use strict";const e=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var t=tinymce.util.Tools.resolve("tinymce.PluginManager");const n=e=>({isFullscreen:()=>null!==e.get()}),o=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,r=e=>t=>typeof t===e,l=e=>a=>e===a,c=o("string"),d=o("array"),m=l(null),h=r("boolean"),f=l(void 0),y=a=>!(a=>null==a)(a),v=r("function"),w=r("number"),x=()=>{},S=e=>()=>e;function C(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const k=S(!1),T=S(!0);class _{constructor(e,t){this.tag=e,this.value=t}static some(e){return new _(!0,e)}static none(){return _.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?_.some(e(this.value)):_.none()}bind(e){return this.tag?e(this.value):_.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:_.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return y(e)?_.some(e):_.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}_.singletonNone=new _(!1);const A=t=>{const n=e(_.none()),o=()=>n.get().each(t);return{clear:()=>{o(),n.set(_.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:s=>{o(),n.set(_.some(s))}}},O=()=>A((s=>s.unbind())),D=Array.prototype.push,map=(e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o},E=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},N=(e,t)=>{const n=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];t(o,i)&&n.push(o)}return n},R=(e,t)=>((e,t,n)=>{for(let i=0,o=e.length;i<o;i++){const o=e[i];if(t(o,i))return _.some(o);if(n(o,i))break}return _.none()})(e,t,k),M=(e,t)=>(e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!d(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);D.apply(t,e[i])}return t})(map(e,t)),head=e=>((e,i)=>i>=0&&i<e.length?_.some(e[i]):_.none())(e,0),P=Object.keys,F=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return-1!==r&&(!!f(o)||r+t.length<=o)},I=e=>void 0!==e.style&&v(e.style.getPropertyValue),L=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},B={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return L(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return L(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return L(t)},fromDom:L,fromPoint:(e,t,n)=>_.from(e.dom.elementFromPoint(t,n)).map(L)};"undefined"!=typeof window?window:Function("return this;")();const j=e=>element=>(element=>element.dom.nodeType)(element)===e,z=j(1),$=j(3),U=j(9),H=j(11),W=(element,e)=>{const t=element.dom;if(1!==t.nodeType)return!1;{const n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},V=element=>B.fromDom(element.dom.ownerDocument),Z=element=>(element=>_.from(element.dom.parentNode).map(B.fromDom))(element).map(K).map((e=>N(e,(e=>{return t=e,!(element.dom===t.dom);var t})))).getOr([]),K=element=>map(element.dom.childNodes,B.fromDom),G=v(Element.prototype.attachShadow)&&v(Node.prototype.getRootNode),Y=S(G),J=G?e=>B.fromDom(e.dom.getRootNode()):e=>U(e)?e:V(e),X=e=>{const t=J(e);return H(n=t)&&y(n.dom.host)?_.some(t):_.none();var n},Q=e=>B.fromDom(e.dom.host),ee=element=>y(element.dom.shadowRoot),te=element=>{const e=$(element)?element.dom.parentNode:element.dom;if(null==e||null===e.ownerDocument)return!1;const t=e.ownerDocument;return X(B.fromDom(e)).fold((()=>t.body.contains(e)),(n=te,o=Q,a=>n(o(a))));var n,o},ne=(element,e,t)=>{((e,t,n)=>{if(!(c(n)||h(n)||w(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(element.dom,e,t)},oe=(element,e)=>{const t=element.dom.getAttribute(e);return null===t?void 0:t},re=(element,e)=>{element.dom.removeAttribute(e)},se=(element,e)=>{const t=element.dom;((e,t)=>{const n=P(e);for(let o=0,r=n.length;o<r;o++){const i=n[o];t(e[i],i)}})(e,((e,n)=>{((e,t,n)=>{if(!c(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);I(e)&&e.style.setProperty(t,n)})(t,n,e)}))},ae=(e,t)=>I(e)?e.style.getPropertyValue(t):"",le=e=>{const t=B.fromDom((e=>{if(Y()&&y(e.target)){const t=B.fromDom(e.target);if(z(t)&&ee(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return head(t)}}return _.from(e.target)})(e).getOr(e.target)),n=()=>e.stopPropagation(),o=()=>e.preventDefault(),r=(l=o,c=n,(...e)=>l(c.apply(null,e)));var l,c;return((e,t,n,o,r,l,c)=>({target:e,x:t,y:n,stop:o,prevent:r,kill:l,raw:c}))(t,e.clientX,e.clientY,n,o,r,e)},ie=(element,e,filter,t,n)=>{const o=((filter,e)=>t=>{filter(t)&&e(le(t))})(filter,t);return element.dom.addEventListener(e,o,n),{unbind:C(ce,element,e,o,n)}},ce=(element,e,t,n)=>{element.dom.removeEventListener(e,t,n)},filter=T,ue=(element,e,t)=>((element,e,filter,t)=>ie(element,e,filter,t,!1))(element,e,filter,t),de=()=>me(0,0),me=(e,t)=>({major:e,minor:t}),ge={nu:me,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?de():((e,t)=>{const n=((e,s)=>{for(let i=0;i<e.length;i++){const t=e[i];if(t.test(s))return t}})(e,t);if(!n)return{major:0,minor:0};const o=i=>Number(t.replace(n,"$"+i));return me(o(1),o(2))})(e,n)},unknown:de},pe=(e,t)=>((e,t)=>{for(let i=0;i<e.length;i++){const n=t(e[i],i);if(n.isSome())return n}return _.none()})(t.brands,(t=>{const n=t.brand.toLowerCase();return R(e,(e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:ge.nu(parseInt(t.version,10),0)})))})),he=(e,t)=>{const n=String(t).toLowerCase();return R(e,(e=>e.search(n)))},fe=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,be=e=>t=>F(t,e),ye=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>F(e,"edge/")&&F(e,"chrome")&&F(e,"safari")&&F(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,fe],search:e=>F(e,"chrome")&&!F(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>F(e,"msie")||F(e,"trident")},{name:"Opera",versionRegexes:[fe,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:be("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:be("firefox")},{name:"Safari",versionRegexes:[fe,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(F(e,"safari")||F(e,"mobile/"))&&F(e,"applewebkit")}],ve=[{name:"Windows",search:be("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>F(e,"iphone")||F(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:be("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:be("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:be("linux"),versionRegexes:[]},{name:"Solaris",search:be("sunos"),versionRegexes:[]},{name:"FreeBSD",search:be("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:be("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],we={browsers:S(ye),oses:S(ve)},xe="Edge",Se="Chromium",Ce="Opera",ke="Firefox",Te="Safari",_e=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isEdge:o(xe),isChromium:o(Se),isIE:o("IE"),isOpera:o(Ce),isFirefox:o(ke),isSafari:o(Te)}},Ae={unknown:()=>_e({current:void 0,version:ge.unknown()}),nu:_e,edge:S(xe),chromium:S(Se),ie:S("IE"),opera:S(Ce),firefox:S(ke),safari:S(Te)},Oe="Windows",De="Android",Ee="Linux",Ne="macOS",Re="Solaris",Me="FreeBSD",Pe="ChromeOS",Fe=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isWindows:o(Oe),isiOS:o("iOS"),isAndroid:o(De),isMacOS:o(Ne),isLinux:o(Ee),isSolaris:o(Re),isFreeBSD:o(Me),isChromeOS:o(Pe)}},Ie={unknown:()=>Fe({current:void 0,version:ge.unknown()}),nu:Fe,windows:S(Oe),ios:S("iOS"),android:S(De),linux:S(Ee),macos:S(Ne),solaris:S(Re),freebsd:S(Me),chromeos:S(Pe)},Le=(e,t,n)=>{const o=we.browsers(),r=we.oses(),l=t.bind((e=>pe(o,e))).orThunk((()=>((e,t)=>he(e,t).map((e=>{const n=ge.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(o,e))).fold(Ae.unknown,Ae.nu),c=((e,t)=>he(e,t).map((e=>{const n=ge.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(r,e).fold(Ie.unknown,Ie.nu),d=((e,t,n,o)=>{const r=e.isiOS()&&!0===/ipad/i.test(n),l=e.isiOS()&&!r,c=e.isiOS()||e.isAndroid(),d=c||o("(pointer:coarse)"),m=r||!l&&c&&o("(min-device-width:768px)"),h=l||c&&!m,f=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),y=!h&&!m&&!f;return{isiPad:S(r),isiPhone:S(l),isTablet:S(m),isPhone:S(h),isTouch:S(d),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:S(f),isDesktop:S(y)}})(c,l,e,n);return{browser:l,os:c,deviceType:d}},Be=e=>window.matchMedia(e).matches;let je=(e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)})((()=>Le(navigator.userAgent,_.from(navigator.userAgentData),Be)));const ze=(e,t)=>({left:e,top:t,translate:(n,o)=>ze(e+n,t+o)}),$e=ze,Ue=e=>{const t=void 0===e?window:e;return je().browser.isFirefox()?_.none():_.from(t.visualViewport)},He=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),We=e=>{const t=void 0===e?window:e,n=t.document,o=(e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return $e(n,o)})(B.fromDom(n));return Ue(t).fold((()=>{const html=t.document.documentElement,e=html.clientWidth,n=html.clientHeight;return He(o.left,o.top,e,n)}),(e=>He(Math.max(e.pageLeft,o.left),Math.max(e.pageTop,o.top),e.width,e.height)))},qe=(e,t,n)=>Ue(n).map((n=>{const o=e=>t(le(e));return n.addEventListener(e,o),{unbind:()=>n.removeEventListener(e,o)}})).getOrThunk((()=>({unbind:x})));var Ve=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ze=tinymce.util.Tools.resolve("tinymce.Env");const Ke=(e,t)=>{e.dispatch("FullscreenStateChanged",{state:t}),e.dispatch("ResizeEditor")},Ge=(Ye="fullscreen_native",e=>e.options.get(Ye));var Ye;const Je=e=>{const t=B.fromDom(e.getElement());return X(t).map(Q).getOrThunk((()=>(e=>{const b=e.dom.body;if(null==b)throw new Error("Body is not available yet");return B.fromDom(b)})(V(t))))},Xe=e=>{return e.dom===(void 0!==(t=V(e).dom).fullscreenElement?t.fullscreenElement:void 0!==t.msFullscreenElement?t.msFullscreenElement:void 0!==t.webkitFullscreenElement?t.webkitFullscreenElement:null);var t},Qe=(e,t,n)=>N(((element,e)=>{const t=v(e)?e:k;let n=element.dom;const o=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,p=B.fromDom(e);if(o.push(p),!0===t(p))break;n=e}return o})(e,n),t),et=e=>((e,t)=>{const base=void 0===t?document:t.dom;return 1!==(n=base).nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount?[]:map(base.querySelectorAll(e),B.fromDom);var n})(e),tt=(e,t,n)=>Qe(e,(e=>W(e,t)),n),nt=(e,t)=>((e,t)=>N(Z(e),t))(e,(e=>W(e,t))),ot="data-ephox-mobile-fullscreen-style",st="position:absolute!important;",at="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",lt=Ze.os.isAndroid(),it=e=>{const t=((element,e)=>{const t=element.dom,n=window.getComputedStyle(t).getPropertyValue(e);return""!==n||te(element)?n:ae(t,e)})(e,"background-color");return void 0!==t&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;"},ct=Ve.DOM,ut=Ue().fold((()=>({bind:x,unbind:x})),(e=>{const t=(()=>{const e=A(x);return{...e,on:t=>e.get().each(t)}})(),n=O(),o=O(),r=((e,t)=>{let n=null;return{cancel:()=>{m(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{m(n)&&(n=setTimeout((()=>{n=null,e.apply(null,o)}),t))}}})((()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame((()=>{t.on((t=>se(t,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"})))}))}),50);return{bind:element=>{t.set(element),r.throttle(),n.set(qe("resize",r.throttle)),o.set(qe("scroll",r.throttle))},unbind:()=>{t.on((()=>{n.clear(),o.clear()})),t.clear()}}})),mt=(e,t)=>{const body=document.body,n=document.documentElement,o=e.getContainer(),r=B.fromDom(o),l=Je(e),c=t.get(),d=B.fromDom(e.getBody()),m=Ze.deviceType.isTouch(),h=o.style,iframe=e.iframeElement,f=null==iframe?void 0:iframe.style,y=e=>{e(body,"tox-fullscreen"),e(n,"tox-fullscreen"),e(o,"tox-fullscreen"),X(r).map((e=>Q(e).dom)).each((t=>{e(t,"tox-fullscreen"),e(t,"tox-shadowhost")}))},v=()=>{m&&(e=>{const t=et("["+ot+"]");E(t,(element=>{const t=oe(element,ot);t&&"no-styles"!==t?se(element,e.parseStyle(t)):re(element,"style"),re(element,ot)}))})(e.dom),y(ct.removeClass),ut.unbind(),_.from(t.get()).each((e=>e.fullscreenChangeHandler.unbind()))};if(c)c.fullscreenChangeHandler.unbind(),Ge(e)&&Xe(l)&&(e=>{const t=e.dom;t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()})(V(l)),f.width=c.iframeWidth,f.height=c.iframeHeight,h.width=c.containerWidth,h.height=c.containerHeight,h.top=c.containerTop,h.left=c.containerLeft,v(),w=c.scrollPos,window.scrollTo(w.x,w.y),t.set(null),Ke(e,!1),e.off("remove",v);else{const n=ue(V(l),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",(n=>{Ge(e)&&(Xe(l)||null===t.get()||mt(e,t))})),o={scrollPos:We(window),containerWidth:h.width,containerHeight:h.height,containerTop:h.top,containerLeft:h.left,iframeWidth:f.width,iframeHeight:f.height,fullscreenChangeHandler:n};m&&((e,t,n)=>{const o=t=>element=>{const n=oe(element,"style"),o=void 0===n?"no-styles":n.trim();o!==t&&(ne(element,ot,o),se(element,e.parseStyle(t)))},r=tt(t,"*"),l=M(r,(element=>nt(element,"*:not(.tox-silver-sink)"))),c=it(n);E(l,o("display:none!important;")),E(r,o(st+at+c)),o((!0===lt?"":st)+at+c)(t)})(e.dom,r,d),f.width=f.height="100%",h.width=h.height="",y(ct.addClass),ut.bind(r),e.on("remove",v),t.set(o),Ge(e)&&(e=>{const t=e.dom;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()})(l),Ke(e,!0)}var w},gt=(e,t)=>n=>{n.setActive(null!==t.get());const o=e=>n.setActive(e.state);return e.on("FullscreenStateChanged",o),()=>e.off("FullscreenStateChanged",o)};t.add("fullscreen",(t=>{const o=e(null);return t.inline||((e=>{(0,e.options.register)("fullscreen_native",{processor:"boolean",default:!1})})(t),((e,t)=>{e.addCommand("mceFullScreen",(()=>{mt(e,t)}))})(t,o),((e,t)=>{const n=()=>e.execCommand("mceFullScreen");e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:n,onSetup:gt(e,t)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:n,onSetup:gt(e,t)})})(t,o),t.addShortcut("Meta+Shift+F","","mceFullScreen")),n(o)}))}()},686:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=tinymce.util.Tools.resolve("tinymce.util.Tools");const option=e=>t=>t.options.get(e),o=option("content_style"),r=option("content_css_cors"),l=option("body_class"),c=option("body_id"),d=e=>{const content=(e=>{var d;let m="";const h=e.dom.encode,f=null!==(d=o(e))&&void 0!==d?d:"";m+='<base href="'+h(e.documentBaseURI.getURI())+'">';const y=r(e)?' crossorigin="anonymous"':"";n.each(e.contentCSS,(t=>{m+='<link type="text/css" rel="stylesheet" href="'+h(e.documentBaseURI.toAbsolute(t))+'"'+y+">"})),f&&(m+='<style type="text/css">'+f+"</style>");const v=c(e),w=l(e),x='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(t.os.isMacOS()||t.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",S=e.getBody().dir,C=S?' dir="'+h(S)+'"':"";return"<!DOCTYPE html><html><head>"+m+'</head><body id="'+h(v)+'" class="mce-content-body '+h(w)+'"'+C+">"+e.getContent()+x+"</body></html>"})(e);e.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:content}}).focus("close")};e.add("preview",(e=>{(e=>{e.addCommand("mcePreview",(()=>{d(e)}))})(e),(e=>{const t=()=>e.execCommand("mcePreview");e.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:t}),e.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:t})})(e)}))}()},687:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),n=tinymce.util.Tools.resolve("tinymce.util.Tools");const o=(r="allow_html_in_named_anchor",e=>e.options.get(r));var r;const l="a:not([href])",c=e=>!e,d=e=>e.getAttribute("id")||e.getAttribute("name")||"",m=e=>(e=>"a"===e.nodeName.toLowerCase())(e)&&!e.getAttribute("href")&&""!==d(e),h=e=>{const o=e.dom;t(o).walk(e.selection.getRng(),(e=>{n.each(e,(e=>{var t;m(t=e)&&!t.firstChild&&o.remove(e,!1)}))}))},f=e=>e.dom.getParent(e.selection.getStart(),l),y=(e,t)=>{const n=f(e);n?((e,t,n)=>{n.removeAttribute("name"),n.id=t,e.addVisual(),e.undoManager.add()})(e,t,n):((e,t)=>{e.undoManager.transact((()=>{o(e)||e.selection.collapse(!0),e.selection.isCollapsed()?e.insertContent(e.dom.createHTML("a",{id:t})):(h(e),e.formatter.remove("namedAnchor",void 0,void 0,!0),e.formatter.apply("namedAnchor",{value:t}),e.addVisual())}))})(e,t),e.focus()},v=e=>{const t=(e=>{const t=f(e);return t?d(t):""})(e);e.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:t},onSubmit:t=>{((e,t)=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(t)?(y(e,t),!0):(e.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1))(e,t.getData().id)&&t.close()}})},w=e=>(e=>c(e.attr("href"))&&!c(e.attr("id")||e.attr("name")))(e)&&!e.firstChild,x=e=>t=>{for(let i=0;i<t.length;i++){const n=t[i];w(n)&&n.attr("contenteditable",e)}},S=e=>t=>{const n=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",n),n(),()=>{e.off("NodeChange",n)}};e.add("anchor",(e=>{(e=>{(0,e.options.register)("allow_html_in_named_anchor",{processor:"boolean",default:!1})})(e),(e=>{e.on("PreInit",(()=>{e.parser.addNodeFilter("a",x("false")),e.serializer.addNodeFilter("a",x(null))}))})(e),(e=>{e.addCommand("mceAnchor",(()=>{v(e)}))})(e),(e=>{const t=()=>e.execCommand("mceAnchor");e.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:t,onSetup:t=>{const n=e.selection.selectorChangedWithUnbind("a:not([href])",t.setActive).unbind,o=S(e)(t);return()=>{n(),o()}}}),e.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:t,onSetup:S(e)})})(e),e.on("PreInit",(()=>{(e=>{e.formatter.register("namedAnchor",{inline:"a",selector:l,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(e,t,n)=>m(e)})})(e)}))}))}()},688:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const option=e=>t=>t.options.get(e),t=option("insertdatetime_dateformat"),n=option("insertdatetime_timeformat"),o=option("insertdatetime_formats"),r=option("insertdatetime_element"),l="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),c="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),d="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),m="January February March April May June July August September October November December".split(" "),h=(e,t)=>{if((e=""+e).length<t)for(let i=0;i<t-e.length;i++)e="0"+e;return e},f=(e,t,n=new Date)=>t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",h(n.getMonth()+1,2))).replace("%d",h(n.getDate(),2))).replace("%H",""+h(n.getHours(),2))).replace("%M",""+h(n.getMinutes(),2))).replace("%S",""+h(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(m[n.getMonth()]))).replace("%b",""+e.translate(d[n.getMonth()]))).replace("%A",""+e.translate(c[n.getDay()]))).replace("%a",""+e.translate(l[n.getDay()]))).replace("%%","%"),y=(e,t)=>{if(r(e)){const n=f(e,t);let o;o=/%[HMSIp]/.test(t)?f(e,"%Y-%m-%dT%H:%M"):f(e,"%Y-%m-%d");const r=e.dom.getParent(e.selection.getStart(),"time");r?((e,t,n,o)=>{const r=e.dom.create("time",{datetime:n},o);e.dom.replace(r,t),e.selection.select(r,!0),e.selection.collapse(!1)})(e,r,o,n):e.insertContent('<time datetime="'+o+'">'+n+"</time>")}else e.insertContent(f(e,t))};var v=tinymce.util.Tools.resolve("tinymce.util.Tools");const w=e=>t=>{const n=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",n),n(),()=>{e.off("NodeChange",n)}},x=e=>{const t=o(e),r=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})((e=>{const t=o(e);return t.length>0?t[0]:n(e)})(e)),l=t=>e.execCommand("mceInsertDate",!1,t);e.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:e=>e===r.get(),fetch:n=>{n(v.map(t,(t=>({type:"choiceitem",text:f(e,t),value:t}))))},onAction:e=>{l(r.get())},onItemAction:(e,t)=>{r.set(t),l(t)},onSetup:w(e)});const c=e=>()=>{r.set(e),l(e)};e.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>v.map(t,(t=>({type:"menuitem",text:f(e,t),onAction:c(t)}))),onSetup:w(e)})};e.add("insertdatetime",(e=>{(e=>{const t=e.options.register;t("insertdatetime_dateformat",{processor:"string",default:e.translate("%Y-%m-%d")}),t("insertdatetime_timeformat",{processor:"string",default:e.translate("%H:%M:%S")}),t("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),t("insertdatetime_element",{processor:"boolean",default:!1})})(e),(e=>{e.addCommand("mceInsertDate",((n,o)=>{y(e,null!=o?o:t(e))})),e.addCommand("mceInsertTime",((t,o)=>{y(e,null!=o?o:n(e))}))})(e),x(e)}))}()},689:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let t=0;const n=e=>{const time=(new Date).getTime(),n=Math.floor(1e9*Math.random());return t++,e+"_"+n+t+String(time)},option=e=>t=>t.options.get(e),o=option("help_tabs"),r=option("forced_plugins"),l=(c="string",e=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,(r=String).prototype.isPrototypeOf(n)||(null===(l=o.constructor)||void 0===l?void 0:l.name)===r.name)?"string":t;var n,o,r,l})(e)===c);var c;const d=(m=void 0,a=>m===a);var m;const h=(e=>t=>typeof t===e)("function"),f=(y=!1,()=>y);var y;class v{constructor(e,t){this.tag=e,this.value=t}static some(e){return new v(!0,e)}static none(){return v.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?v.some(e(this.value)):v.none()}bind(e){return this.tag?e(this.value):v.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:v.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(a=>null==a)(e)?v.none():v.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}v.singletonNone=new v(!1);const w=Array.prototype.slice,x=Array.prototype.indexOf,S=(e,t)=>((e,t)=>x.call(e,t))(e,t)>-1,map=(e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o},filter=(e,t)=>{const n=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];t(o,i)&&n.push(o)}return n},C=(e,t)=>((e,t,n)=>{for(let i=0,o=e.length;i<o;i++){const o=e[i];if(t(o,i))return v.some(o);if(n(o,i))break}return v.none()})(e,t,f),k=(e,t)=>{const n=w.call(e,0);return n.sort(t),n},T=Object.keys,_=Object.hasOwnProperty,A=(e,t)=>_.call(e,t);var O=tinymce.util.Tools.resolve("tinymce.Resource"),D=tinymce.util.Tools.resolve("tinymce.util.I18n");const E=(e,t)=>O.load(`tinymce.html-i18n.help-keynav.${t}`,`${e}/js/i18n/keynav/${t}.js`),N=e=>E(e,D.getCode()).catch((()=>E(e,"en")));var R=tinymce.util.Tools.resolve("tinymce.Env");const M=source=>{const e=R.os.isMacOS()||R.os.isiOS(),t=e?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl ",access:"Shift + Alt "},n=source.split("+"),o=map(n,(e=>{const n=e.toLowerCase().trim();return A(t,n)?t[n]:e}));return e?o.join("").replace(/\s/,""):o.join("+")},P=[{shortcuts:["Meta + B"],action:"Bold"},{shortcuts:["Meta + I"],action:"Italic"},{shortcuts:["Meta + U"],action:"Underline"},{shortcuts:["Meta + A"],action:"Select all"},{shortcuts:["Meta + Y","Meta + Shift + Z"],action:"Redo"},{shortcuts:["Meta + Z"],action:"Undo"},{shortcuts:["Access + 1"],action:"Heading 1"},{shortcuts:["Access + 2"],action:"Heading 2"},{shortcuts:["Access + 3"],action:"Heading 3"},{shortcuts:["Access + 4"],action:"Heading 4"},{shortcuts:["Access + 5"],action:"Heading 5"},{shortcuts:["Access + 6"],action:"Heading 6"},{shortcuts:["Access + 7"],action:"Paragraph"},{shortcuts:["Access + 8"],action:"Div"},{shortcuts:["Access + 9"],action:"Address"},{shortcuts:["Alt + 0"],action:"Open help dialog"},{shortcuts:["Alt + F9"],action:"Focus to menubar"},{shortcuts:["Alt + F10"],action:"Focus to toolbar"},{shortcuts:["Alt + F11"],action:"Focus to element path"},{shortcuts:["Ctrl + F9"],action:"Focus to contextual toolbar"},{shortcuts:["Shift + Enter"],action:"Open popup menu for split buttons"},{shortcuts:["Meta + K"],action:"Insert link (if link plugin activated)"},{shortcuts:["Meta + S"],action:"Save (if save plugin activated)"},{shortcuts:["Meta + F"],action:"Find (if searchreplace plugin activated)"},{shortcuts:["Meta + Shift + F"],action:"Switch to or from fullscreen mode"}],F=()=>({name:"shortcuts",title:"Handy Shortcuts",items:[{type:"table",header:["Action","Shortcut"],cells:map(P,(e=>{const t=map(e.shortcuts,M).join(" or ");return[e.action,t]}))}]}),I=map([{key:"accordion",name:"Accordion"},{key:"advlist",name:"Advanced List"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"image",name:"Image"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"pagebreak",name:"Page Break"},{key:"preview",name:"Preview"},{key:"quickbars",name:"Quick Toolbars"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"table",name:"Table"},{key:"template",name:"Template"},{key:"textcolor",name:"Text Color"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"},{key:"a11ychecker",name:"Accessibility Checker",type:"premium"},{key:"advcode",name:"Advanced Code Editor",type:"premium"},{key:"advtable",name:"Advanced Tables",type:"premium"},{key:"advtemplate",name:"Advanced Templates",type:"premium",slug:"advanced-templates"},{key:"ai",name:"AI Assistant",type:"premium"},{key:"casechange",name:"Case Change",type:"premium"},{key:"checklist",name:"Checklist",type:"premium"},{key:"editimage",name:"Enhanced Image Editing",type:"premium"},{key:"footnotes",name:"Footnotes",type:"premium"},{key:"typography",name:"Advanced Typography",type:"premium",slug:"advanced-typography"},{key:"mediaembed",name:"Enhanced Media Embed",type:"premium",slug:"introduction-to-mediaembed"},{key:"export",name:"Export",type:"premium"},{key:"formatpainter",name:"Format Painter",type:"premium"},{key:"inlinecss",name:"Inline CSS",type:"premium",slug:"inline-css"},{key:"linkchecker",name:"Link Checker",type:"premium"},{key:"mentions",name:"Mentions",type:"premium"},{key:"mergetags",name:"Merge Tags",type:"premium"},{key:"pageembed",name:"Page Embed",type:"premium"},{key:"permanentpen",name:"Permanent Pen",type:"premium"},{key:"powerpaste",name:"PowerPaste",type:"premium",slug:"introduction-to-powerpaste"},{key:"rtc",name:"Real-Time Collaboration",type:"premium",slug:"rtc-introduction"},{key:"tinymcespellchecker",name:"Spell Checker Pro",type:"premium",slug:"introduction-to-tiny-spellchecker"},{key:"autocorrect",name:"Spelling Autocorrect",type:"premium"},{key:"tableofcontents",name:"Table of Contents",type:"premium"},{key:"tinycomments",name:"Tiny Comments",type:"premium",slug:"introduction-to-tiny-comments"},{key:"tinydrive",name:"Tiny Drive",type:"premium",slug:"tinydrive-introduction"}],(e=>({...e,type:e.type||"opensource",slug:e.slug||e.key}))),L=e=>{const t=p=>`<a href="${p.url}" target="_blank" rel="noopener">${p.name}</a>`,n=(e,n)=>C(I,(e=>e.key===n)).fold((()=>((e,n)=>{const o=e.plugins[n].getMetadata;if(h(o)){const e=o();return{name:e.name,html:t(e)}}return{name:n,html:n}})(e,n)),(e=>{const n="premium"===e.type?`${e.name}*`:e.name;return{name:n,html:t({name:n,url:`https://www.tiny.cloud/docs/tinymce/6/${e.slug}/`})}})),o=e=>{const t=(e=>{const t=T(e.plugins),n=r(e);return d(n)?t:filter(t,(e=>!S(n,e)))})(e),o=k(map(t,(t=>n(e,t))),((e,t)=>e.name.localeCompare(t.name))),l=map(o,(e=>"<li>"+e.html+"</li>")),c=l.length,m=l.join("");return"<p><b>"+D.translate(["Plugins installed ({0}):",c])+"</b></p><ul>"+m+"</ul>"},l={type:"htmlpanel",presets:"document",html:[(e=>null==e?"":'<div data-mce-tabstop="1" tabindex="-1">'+o(e)+"</div>")(e),(()=>{const e=filter(I,(({type:e})=>"premium"===e)),t=k(map(e,(p=>p.name)),((e,t)=>e.localeCompare(t))),n=map(t,(e=>`<li>${e}</li>`)).join("");return'<div data-mce-tabstop="1" tabindex="-1"><p><b>'+D.translate("Premium plugins:")+"</b></p><ul>"+n+'<li class="tox-help__more-link" "><a href="https://www.tiny.cloud/pricing/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" rel="noopener" target="_blank">'+D.translate("Learn more...")+"</a></li></ul></div>"})()].join("")};return{name:"plugins",title:"Plugins",items:[l]}};var B=tinymce.util.Tools.resolve("tinymce.EditorManager");const j=async(e,t,r)=>{const c=F(),nav=await(async e=>({name:"keyboardnav",title:"Keyboard Navigation",items:[{type:"htmlpanel",presets:"document",html:await N(e)}]}))(r),d=L(e),m=(()=>{var e,t;const n='<a href="https://www.tiny.cloud/docs/tinymce/6/changelog/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" rel="noopener" target="_blank">TinyMCE '+(e=B.majorVersion,t=B.minorVersion,(0===e.indexOf("@")?"X.X.X":e+"."+t)+"</a>");return{name:"versions",title:"Version",items:[{type:"htmlpanel",html:"<p>"+D.translate(["You are using {0}",n])+"</p>",presets:"document"}]}})(),h={[c.name]:c,[nav.name]:nav,[d.name]:d,[m.name]:m,...t.get()};return v.from(o(e)).fold((()=>(e=>{const t=T(e),n=t.indexOf("versions");return-1!==n&&(t.splice(n,1),t.push("versions")),{tabs:e,names:t}})(h)),(e=>((e,t)=>{const o={},r=map(e,(e=>{var r;if(l(e))return A(t,e)&&(o[e]=t[e]),e;{const t=null!==(r=e.name)&&void 0!==r?r:n("tab-name");return o[t]=e,t}}));return{tabs:o,names:r}})(e,h)))},z=(e,t,n)=>()=>{j(e,t,n).then((({tabs:t,names:n})=>{const body={type:"tabpanel",tabs:(e=>{const t=[],n=e=>{t.push(e)};for(let i=0;i<e.length;i++)e[i].each(n);return t})(map(n,(e=>{return A(n=t,o=e)?v.from(n[o]):v.none();var n,o})))};e.windowManager.open({title:"Help",size:"medium",body:body,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{}})}))};e.add("help",((e,t)=>{const o=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})({}),r=(e=>({addTab:t=>{var o;const r=null!==(o=t.name)&&void 0!==o?o:n("tab-name"),l=e.get();l[r]=t,e.set(l)}}))(o);(e=>{(0,e.options.register)("help_tabs",{processor:"array"})})(e);const l=z(e,o,t);return((e,t)=>{e.ui.registry.addButton("help",{icon:"help",tooltip:"Help",onAction:t}),e.ui.registry.addMenuItem("help",{text:"Help",icon:"help",shortcut:"Alt+0",onAction:t})})(e,l),((e,t)=>{e.addCommand("mceHelp",t)})(e,l),e.shortcuts.add("Alt+0","Open help dialog","mceHelp"),((e,t)=>{e.on("init",(()=>{N(t)}))})(e,t),r}))}()},690:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,n=t("string"),o=t("object"),r=t("array"),l=(c="function",e=>typeof e===c);var c,d=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),m=tinymce.util.Tools.resolve("tinymce.EditorManager"),h=tinymce.util.Tools.resolve("tinymce.Env"),f=tinymce.util.Tools.resolve("tinymce.util.Tools");const option=e=>t=>t.options.get(e),y=option("importcss_merge_classes"),v=option("importcss_exclusive"),w=option("importcss_selector_converter"),x=option("importcss_selector_filter"),S=option("importcss_groups"),C=option("importcss_append"),k=option("importcss_file_filter"),T=option("skin"),_=option("skin_url"),A=Array.prototype.push,O=(e,t)=>(e=>{const t=[];for(let i=0,n=e.length;i<n;++i){if(!r(e[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+e);A.apply(t,e[i])}return t})(((e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o})(e,t)),D=/^\.(?:ephox|tiny-pageembed|mce)(?:[.-]+\w+)+$/,E=filter=>n(filter)?e=>-1!==e.indexOf(filter):filter instanceof RegExp?e=>filter.test(e):filter,N=(e,t,o)=>{const r=[],l={},c=(t,l)=>{let d,y=t.href;if(y=(e=>{const t=h.cacheSuffix;return n(e)&&(e=e.replace("?"+t,"").replace("&"+t,"")),e})(y),y&&(!o||o(y,l))&&!((e,t)=>{const n=T(e);if(n){const o=_(e),r=o?e.documentBaseURI.toAbsolute(o):m.baseURL+"/skins/ui/"+n,l=m.baseURL+"/skins/content/";return t===r+"/content"+(e.inline?".inline":"")+".min.css"||-1!==t.indexOf(l)}return!1})(e,y)){f.each(t.imports,(e=>{c(e,!0)}));try{d=t.cssRules||t.rules}catch(e){}f.each(d,(e=>{e.styleSheet?c(e.styleSheet,!0):(e=>e.selectorText)(e)&&f.each(e.selectorText.split(","),(e=>{r.push(f.trim(e))}))}))}};f.each(e.contentCSS,(e=>{l[e]=!0})),o||(o=(e,t)=>t||l[e]);try{f.each(t.styleSheets,(e=>{c(e)}))}catch(e){}return r},R=(e,t)=>{let n={};const o=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(!o)return;const r=o[1],l=o[2].substr(1).split(".").join(" "),c=f.makeMap("a,img");return o[1]?(n={title:t},e.schema.getTextBlockElements()[r]?n.block=r:e.schema.getBlockElements()[r]||c[r.toLowerCase()]?n.selector=r:n.inline=r):o[2]&&(n={inline:"span",title:t.substr(1),classes:l}),y(e)?n.classes=l:n.attributes={class:l},n},M=(e,t)=>null===t||v(e),P=e=>{e.on("init",(()=>{const t=(()=>{const e=[],t=[],n={};return{addItemToGroup:(e,o)=>{n[e]?n[e].push(o):(t.push(e),n[e]=[o])},addItem:t=>{e.push(t)},toFormats:()=>O(t,(g=>{const e=n[g];return 0===e.length?[]:[{title:g,items:e}]})).concat(e)}})(),n={},o=E(x(e)),r=(e=>f.map(e,(e=>f.extend({},e,{original:e,selectors:{},filter:E(e.filter)}))))(S(e)),l=(t,o)=>{if(((e,t,n,o)=>!(M(e,n)?t in o:t in n.selectors))(e,t,o,n)){((e,t,n,o)=>{M(e,n)?o[t]=!0:n.selectors[t]=!0})(e,t,o,n);const r=((e,t,n,o)=>{let r;const l=w(e);return r=o&&o.selector_converter?o.selector_converter:l||(()=>R(e,n)),r.call(t,n,o)})(e,e.plugins.importcss,t,o);if(r){const t=r.name||d.DOM.uniqueId();return e.formatter.register(t,r),{title:r.title,format:t}}}return null};f.each(N(e,e.getDoc(),E(k(e))),(e=>{if(!D.test(e)&&(!o||o(e))){const n=((e,t)=>f.grep(e,(e=>!e.filter||e.filter(t))))(r,e);if(n.length>0)f.each(n,(n=>{const o=l(e,n);o&&t.addItemToGroup(n.title,o)}));else{const n=l(e,null);n&&t.addItem(n)}}}));const c=t.toFormats();e.dispatch("addStyleModifications",{items:c,replace:!C(e)})}))};e.add("importcss",(e=>((e=>{const t=e.options.register,r=e=>n(e)||l(e)||o(e);t("importcss_merge_classes",{processor:"boolean",default:!0}),t("importcss_exclusive",{processor:"boolean",default:!0}),t("importcss_selector_converter",{processor:"function"}),t("importcss_selector_filter",{processor:r}),t("importcss_file_filter",{processor:r}),t("importcss_groups",{processor:"object[]"}),t("importcss_append",{processor:"boolean",default:!1})})(e),P(e),(e=>({convertSelectorToFormat:t=>R(e,t)}))(e))))}()},691:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>typeof t===e,n=(e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e)("string"),o=t("boolean"),r=a=>!(a=>null==a)(a),l=t("function"),c=t("number"),d=(m=!1,()=>m);var m;class h{constructor(e,t){this.tag=e,this.value=t}static some(e){return new h(!0,e)}static none(){return h.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?h.some(e(this.value)):h.none()}bind(e){return this.tag?e(this.value):h.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:h.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return r(e)?h.some(e):h.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}h.singletonNone=new h(!1);const f=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},y=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},v={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return y(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return y(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return y(t)},fromDom:y,fromPoint:(e,t,n)=>h.from(e.dom.elementFromPoint(t,n)).map(y)},w=(element,e)=>{const t=element.dom;if(1!==t.nodeType)return!1;{const n=t;if(void 0!==n.matches)return n.matches(e);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(e);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}};"undefined"!=typeof window?window:Function("return this;")();const x=e=>element=>(element=>element.dom.nodeType)(element)===e,S=x(1),C=x(3),k=x(9),T=x(11),_=element=>((e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o})(element.dom.childNodes,v.fromDom),A=(element,e,t)=>{((e,t,r)=>{if(!(n(r)||o(r)||c(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")})(element.dom,e,t)},O=(element,e)=>{element.dom.removeAttribute(e)},D=l(Element.prototype.attachShadow)&&l(Node.prototype.getRootNode)?e=>v.fromDom(e.dom.getRootNode()):e=>{return k(e)?e:(element=e,v.fromDom(element.dom.ownerDocument));var element},E=e=>{const t=D(e);return T(n=t)&&r(n.dom.host)?h.some(t):h.none();var n},N=e=>v.fromDom(e.dom.host),R=element=>{const e=C(element)?element.dom.parentNode:element.dom;if(null==e||null===e.ownerDocument)return!1;const t=e.ownerDocument;return E(v.fromDom(e)).fold((()=>t.body.contains(e)),(n=R,o=N,a=>n(o(a))));var n,o},M=(e,t,n)=>((e,t,n)=>{let element=e.dom;const o=l(n)?n:d;for(;element.parentNode;){element=element.parentNode;const e=v.fromDom(element);if(t(e))return h.some(e);if(o(e))break}return h.none()})(e,(e=>w(e,t)),n),P=(e,t)=>(e=>void 0!==e.style&&l(e.style.getPropertyValue))(e)?e.style.getPropertyValue(t):"",F=element=>"rtl"===((element,e)=>{const t=element.dom,n=window.getComputedStyle(t).getPropertyValue(e);return""!==n||R(element)?n:P(t,e)})(element,"direction")?"rtl":"ltr",I=(e,t)=>((e,t)=>((e,t)=>{const n=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];t(o,i)&&n.push(o)}return n})(_(e),t))(e,(e=>w(e,t))),L=element=>(element=>h.from(element.dom.parentNode).map(v.fromDom))(element).filter(S),B=(j="li",e=>S(e)&&e.dom.nodeName.toLowerCase()===j);var j;const z=(e,t,n)=>{f(t,(t=>{const o=v.fromDom(t),r=B(o),l=((element,e)=>(e?M(element,"ol,ul"):h.some(element)).getOr(element))(o,r);L(l).each((t=>{e.setStyle(l.dom,"direction",null);if(F(t)===n?O(l,"dir"):A(l,"dir",n),F(l)!==n&&e.setStyle(l.dom,"direction",n),r){const t=I(l,"li[dir],li[style]");f(t,(t=>{O(t,"dir"),e.setStyle(t.dom,"direction",null)}))}}))}))},$=(e,t)=>{e.selection.isEditable()&&(z(e.dom,e.selection.getSelectedBlocks(),t),e.nodeChanged())},U=(e,t)=>n=>{const o=o=>{const element=v.fromDom(o.element);n.setActive(F(element)===t),n.setEnabled(e.selection.isEditable())};return e.on("NodeChange",o),n.setEnabled(e.selection.isEditable()),()=>e.off("NodeChange",o)};e.add("directionality",(e=>{(e=>{e.addCommand("mceDirectionLTR",(()=>{$(e,"ltr")})),e.addCommand("mceDirectionRTL",(()=>{$(e,"rtl")}))})(e),(e=>{e.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>e.execCommand("mceDirectionLTR"),onSetup:U(e,"ltr")}),e.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>e.execCommand("mceDirectionRTL"),onSetup:U(e,"rtl")})})(e)}))}()},692:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,n=e=>t=>typeof t===e,o=t("string"),r=t("object"),l=(c=null,a=>c===a);var c;const d=n("boolean"),m=n("number");class h{constructor(e,t){this.tag=e,this.value=t}static some(e){return new h(!0,e)}static none(){return h.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?h.some(e(this.value)):h.none()}bind(e){return this.tag?e(this.value):h.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:h.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(a=>null==a)(e)?h.none():h.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}h.singletonNone=new h(!1);const f=(e,t)=>{for(let i=0,n=e.length;i<n;i++){t(e[i],i)}},y=Object.keys,v=(e,t)=>{const n=y(e);for(let o=0,r=n.length;o<r;o++){const i=n[o];t(e[i],i)}},w="undefined"!=typeof window?window:Function("return this;")(),x=(p,e)=>((e,t)=>{let n=null!=t?t:w;for(let i=0;i<e.length&&null!=n;++i)n=n[e[i]];return n})(p.split("."),e),S=(e,t)=>{const n=((e,t)=>x(e,t))(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},C=Object.getPrototypeOf,k=e=>{const t=x("ownerDocument.defaultView",e);return r(e)&&((e=>S("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(C(e).constructor.name))},T=element=>element.dom.nodeValue,_=e=>element=>(element=>element.dom.nodeType)(element)===e,A=element=>O(element)&&k(element.dom),O=_(1),D=_(3),E=(element,e,t)=>{((e,t,n)=>{if(!(o(n)||d(n)||m(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(element.dom,e,t)},N=(element,e)=>{element.dom.removeAttribute(e)},R=(element,e)=>{const t=((element,e)=>{const t=element.dom.getAttribute(e);return null===t?void 0:t})(element,e);return void 0===t||""===t?[]:t.split(" ")},M=element=>void 0!==element.dom.classList,P=(element,e)=>((element,e,t)=>{const n=R(element,e).concat([t]);return E(element,e,n.join(" ")),!0})(element,"class",e),F=(element,e)=>((element,e,t)=>{const n=((e,t)=>{const n=[];for(let i=0,o=e.length;i<o;i++){const o=e[i];t(o,i)&&n.push(o)}return n})(R(element,e),(e=>e!==t));return n.length>0?E(element,e,n.join(" ")):N(element,e),!1})(element,"class",e),I=element=>{const e=M(element)?element.dom.classList:(element=>R(element,"class"))(element);0===e.length&&N(element,"class")},L=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},B={fromHtml:(html,e)=>{const div=(e||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||div.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,html),new Error(e)}return L(div.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return L(n)},fromText:(text,e)=>{const t=(e||document).createTextNode(text);return L(t)},fromDom:L,fromPoint:(e,t,n)=>h.from(e.dom.elementFromPoint(t,n)).map(L)},j={" ":"nbsp","­":"shy"},z=(e,t)=>{let n="";return v(e,((e,t)=>{n+=t})),new RegExp("["+n+"]",t?"g":"")},$=z(j),U=z(j,!0),H=(e=>{let t="";return v(e,(e=>{t&&(t+=","),t+="span.mce-"+e})),t})(j),W="mce-nbsp",V=element=>element.dom.contentEditable,Z=e=>'<span data-mce-bogus="1" class="mce-'+j[e]+'">'+e+"</span>",K=e=>"span"===e.nodeName.toLowerCase()&&e.classList.contains("mce-nbsp-wrap"),G=e=>{const t=T(e);return D(e)&&o(t)&&$.test(t)},Y=(e,t,n)=>{let o=[];const r=((e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o})(e.dom.childNodes,B.fromDom),l=e=>K(e.dom)||!(e=>A(e)&&"false"===V(e))(e);return f(r,(e=>{n&&l(e)&&t(e)&&(o=o.concat([e])),o=o.concat(Y(e,t,((e,t)=>{if(A(e)&&!K(e.dom)){const t=V(e);if("true"===t)return!0;if("false"===t)return!1}return t})(e,n)))})),o},J=(e,t)=>{const n=e.dom,o=Y(B.fromDom(t),G,e.dom.isEditable(t));f(o,(t=>{var o;const r=t.dom.parentNode;if(K(r))element=B.fromDom(r),l=W,M(element)?element.dom.classList.add(l):P(element,l);else{const r=n.encode(null!==(o=T(t))&&void 0!==o?o:"").replace(U,Z),div=n.create("div",{},r);let l;for(;l=div.lastChild;)n.insertAfter(l,t.dom);e.dom.remove(t.dom)}var element,l}))},X=(e,t)=>{const n=e.dom.select(H,t);f(n,(t=>{K(t)?((element,e)=>{M(element)?element.dom.classList.remove(e):F(element,e);I(element)})(B.fromDom(t),W):e.dom.remove(t,!0)}))},Q=e=>{const body=e.getBody(),t=e.selection.getBookmark();let n=((e,t)=>{for(;e.parentNode;){if(e.parentNode===t)return t;e=e.parentNode}})(e.selection.getNode(),body);n=void 0!==n?n:body,X(e,n),J(e,n),e.selection.moveToBookmark(t)},ee=(e,t)=>{((e,t)=>{e.dispatch("VisualChars",{state:t})})(e,t.get());const body=e.getBody();!0===t.get()?J(e,body):X(e,body)},te=(e,t)=>{e.addCommand("mceVisualChars",(()=>{((e,t)=>{t.set(!t.get());const n=e.selection.getBookmark();ee(e,t),e.selection.moveToBookmark(n)})(e,t)}))},ne=(oe="visualchars_default_state",e=>e.options.get(oe));var oe;const re=(e,t)=>{const n=((e,t)=>{let n=null;return{cancel:()=>{l(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{l(n)&&(n=setTimeout((()=>{n=null,e.apply(null,o)}),t))}}})((()=>{Q(e)}),300);e.on("keydown",(o=>{!0===t.get()&&(13===o.keyCode?Q(e):n.throttle())})),e.on("remove",n.cancel)},se=(e,t)=>n=>{n.setActive(t.get());const o=e=>n.setActive(e.state);return e.on("VisualChars",o),()=>e.off("VisualChars",o)};e.add("visualchars",(e=>{(e=>{(0,e.options.register)("visualchars_default_state",{processor:"boolean",default:!1})})(e);const t=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})(ne(e));return te(e,t),((e,t)=>{const n=()=>e.execCommand("mceVisualChars");e.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:n,onSetup:se(e,t)}),e.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:n,onSetup:se(e,t)})})(e,t),re(e,t),((e,t)=>{e.on("init",(()=>{ee(e,t)}))})(e,t),(e=>({isEnabled:()=>e.get()}))(t)}))}()},693:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(l=String).prototype,o.isPrototypeOf(n)||(null===(c=r.constructor)||void 0===c?void 0:c.name)===l.name)?"string":t;var n,o;var r,l,c})(t)===e,n=t("string"),o=t("object"),r=t("array"),l=(c="function",e=>typeof e===c);var c;const d=(m=!1,()=>m);var m;var h=tinymce.util.Tools.resolve("tinymce.util.Tools");const option=e=>t=>t.options.get(e),f=e=>{const t=e.options.register;t("template_cdate_classes",{processor:"string",default:"cdate"}),t("template_mdate_classes",{processor:"string",default:"mdate"}),t("template_selected_content_classes",{processor:"string",default:"selcontent"}),t("template_preview_replace_values",{processor:"object"}),t("template_replace_values",{processor:"object"}),t("templates",{processor:e=>n(e)||((e,t)=>{if(r(e)){for(let i=0,n=e.length;i<n;++i)if(!t(e[i]))return!1;return!0}return!1})(e,o)||l(e),default:[]}),t("template_cdate_format",{processor:"string",default:e.translate("%Y-%m-%d")}),t("template_mdate_format",{processor:"string",default:e.translate("%Y-%m-%d")})},y=option("template_cdate_classes"),v=option("template_mdate_classes"),w=option("template_selected_content_classes"),x=option("template_preview_replace_values"),S=option("template_replace_values"),C=option("templates"),k=option("template_cdate_format"),T=option("template_mdate_format"),_=option("content_style"),A=option("content_css_cors"),O=option("body_class"),D=(e,t)=>{if((e=""+e).length<t)for(let i=0;i<t-e.length;i++)e="0"+e;return e},E=(e,t,n=new Date)=>{const o="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),r="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),l="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),c="January February March April May June July August September October November December".split(" ");return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",D(n.getMonth()+1,2))).replace("%d",D(n.getDate(),2))).replace("%H",""+D(n.getHours(),2))).replace("%M",""+D(n.getMinutes(),2))).replace("%S",""+D(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+e.translate(c[n.getMonth()]))).replace("%b",""+e.translate(l[n.getMonth()]))).replace("%A",""+e.translate(r[n.getDay()]))).replace("%a",""+e.translate(o[n.getDay()]))).replace("%%","%")};class N{constructor(e,t){this.tag=e,this.value=t}static some(e){return new N(!0,e)}static none(){return N.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?N.some(e(this.value)):N.none()}bind(e){return this.tag?e(this.value):N.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:N.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(a=>null==a)(e)?N.none():N.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}N.singletonNone=new N(!1);const R=(e,t)=>((e,t,n)=>{for(let i=0,o=e.length;i<o;i++){const o=e[i];if(t(o,i))return N.some(o);if(n(o,i))break}return N.none()})(e,t,d),M=Object.hasOwnProperty,P=(e,t)=>M.call(e,t);var F=tinymce.util.Tools.resolve("tinymce.html.Serializer");const I={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},L=html=>html.replace(/["'<>&]/g,(e=>{return(t=I,n=e,P(t,n)?N.from(t[n]):N.none()).getOr(e);var t,n})),B=(e,t,n)=>((e,t)=>{for(let i=0,n=e.length;i<n;i++)if(t(e[i],i))return!0;return!1})(n.split(/\s+/),(n=>e.hasClass(t,n))),j=(e,html)=>F({validate:!0},e.schema).serialize(e.parser.parse(html,{insert:!0})),z=(html,e)=>(h.each(e,((e,t)=>{l(e)&&(e=e(t)),html=html.replace(new RegExp("\\{\\$"+(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"\\}"),"g"),e)})),html),$=(e,t)=>{const n=e.dom,o=S(e);h.each(n.select("*",t),(e=>{h.each(o,((t,o)=>{n.hasClass(e,o)&&l(t)&&t(e)}))}))},U=(e,t,html)=>{const n=e.dom,o=e.selection.getContent();html=z(html,S(e));let r=n.create("div",{},j(e,html));const l=n.select(".mceTmpl",r);l&&l.length>0&&(r=n.create("div"),r.appendChild(l[0].cloneNode(!0))),h.each(n.select("*",r),(t=>{B(n,t,y(e))&&(t.innerHTML=E(e,k(e))),B(n,t,v(e))&&(t.innerHTML=E(e,T(e))),B(n,t,w(e))&&(t.innerHTML=o)})),$(e,r),e.execCommand("mceInsertContent",!1,r.innerHTML),e.addVisual()};var H=tinymce.util.Tools.resolve("tinymce.Env");const W=(e,t)=>{const n=e=>((e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o})(e,(e=>({text:e.text,value:e.text}))),o=(e,t)=>R(e,(e=>e.text===t)),r=t=>{e.windowManager.alert("Could not load the specified template.",(()=>t.focus("template")))},l=e=>e.value.url.fold((()=>Promise.resolve(e.value.content.getOr(""))),(e=>fetch(e).then((e=>e.ok?e.text():Promise.reject())))),c=(e,t)=>(n,c)=>{if("template"===c.name){const c=n.getData().template;o(e,c).each((e=>{n.block("Loading..."),l(e).then((o=>{t(n,e,o)})).catch((()=>{t(n,e,""),n.setEnabled("save",!1),r(n)}))}))}},d=t=>n=>{const data=n.getData();o(t,data.template).each((t=>{l(t).then((t=>{e.execCommand("mceInsertTemplate",!1,t),n.close()})).catch((()=>{n.setEnabled("save",!1),r(n)}))}))};(()=>{if(!t||0===t.length){const t=e.translate("No templates defined.");return e.notificationManager.open({text:t,type:"info"}),N.none()}return N.from(h.map(t,((template,e)=>{const t=e=>void 0!==e.url;return{selected:0===e,text:template.title,value:{url:t(template)?N.from(template.url):N.none(),content:t(template)?N.none():N.from(template.content),description:template.description}}})))})().each((t=>{const o=n(t),m=(e,n)=>({title:"Insert Template",size:"large",body:{type:"panel",items:e},initialData:n,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:d(t),onChange:c(t,f)}),f=(t,template,n)=>{const content=((e,html)=>{var t;let n=j(e,html);if(-1===html.indexOf("<html>")){let o="";const r=null!==(t=_(e))&&void 0!==t?t:"",l=A(e)?' crossorigin="anonymous"':"";h.each(e.contentCSS,(t=>{o+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(t)+'"'+l+">"})),r&&(o+='<style type="text/css">'+r+"</style>");const c=O(e),d=e.dom.encode,m='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(H.os.isMacOS()||H.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",f=e.getBody().dir,y=f?' dir="'+d(f)+'"':"";n='<!DOCTYPE html><html><head><base href="'+d(e.documentBaseURI.getURI())+'">'+o+m+'</head><body class="'+d(c)+'"'+y+">"+n+"</body></html>"}return z(n,x(e))})(e,n),r=[{type:"listbox",name:"template",label:"Templates",items:o},{type:"htmlpanel",html:`<p aria-live="polite">${L(template.value.description)}</p>`},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1,transparent:!1}],l={template:template.text,preview:content};t.unblock(),t.redial(m(r,l)),t.focus("template")},y=e.windowManager.open(m([],{template:"",preview:""}));y.block("Loading..."),l(t[0]).then((e=>{f(y,t[0],e)})).catch((()=>{f(y,t[0],""),y.setEnabled("save",!1),r(y)}))}))},V=e=>{e.addCommand("mceInsertTemplate",function(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}(U,e)),e.addCommand("mceTemplate",((e,t)=>()=>{const o=C(e);l(o)?o(t):n(o)?fetch(o).then((e=>{e.ok&&e.json().then(t)})):t(o)})(e,(e=>t=>{W(e,t)})(e)))},Z=e=>t=>{const n=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",n),n(),()=>{e.off("NodeChange",n)}};e.add("template",(e=>{f(e),(e=>{const t=()=>e.execCommand("mceTemplate");e.ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onSetup:Z(e),onAction:t}),e.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onSetup:Z(e),onAction:t})})(e),V(e),(e=>{e.on("PreProcess",(t=>{const n=e.dom,o=T(e);h.each(n.select("div",t.node),(t=>{n.hasClass(t,"mceTmpl")&&(h.each(n.select("*",t),(t=>{B(n,t,v(e))&&(t.innerHTML=E(e,o))})),$(e,t))}))}))})(e)}))}()},694:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=a=>!(a=>null==a)(a),n=()=>{};class o{constructor(e,t){this.tag=e,this.value=t}static some(e){return new o(!0,e)}static none(){return o.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?o.some(e(this.value)):o.none()}bind(e){return this.tag?e(this.value):o.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:o.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return t(e)?o.some(e):o.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}o.singletonNone=new o(!1);const head=e=>((e,i)=>i>=0&&i<e.length?o.some(e[i]):o.none())(e,0);var r=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");const l="undefined"!=typeof window?window:Function("return this;")(),c=function(e,t,n){const o=window.Prism;window.Prism={manual:!0};var r=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,o={},r={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof l?new l(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++n}),e.__id},clone:function e(t,n){var o,l;switch(n=n||{},r.util.type(t)){case"Object":if(l=r.util.objId(t),n[l])return n[l];for(var c in o={},n[l]=o,t)t.hasOwnProperty(c)&&(o[c]=e(t[c],n));return o;case"Array":return l=r.util.objId(t),n[l]?n[l]:(o=[],n[l]=o,t.forEach((function(t,i){o[i]=e(t,n)})),o);default:return t}},getLanguage:function(element){for(;element;){var e=t.exec(element.className);if(e)return e[1].toLowerCase();element=element.parentElement}return"none"},setLanguage:function(element,e){element.className=element.className.replace(RegExp(t,"gi"),""),element.classList.add("language-"+e)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(n){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(n.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var i in t)if(t[i].src==e)return t[i]}return null}},isActive:function(element,e,t){for(var n="no-"+e;element;){var o=element.classList;if(o.contains(e))return!0;if(o.contains(n))return!1;element=element.parentElement}return!!t}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(e,t){var n=r.util.clone(r.languages[e]);for(var o in t)n[o]=t[o];return n},insertBefore:function(e,t,n,o){var l=(o=o||r.languages)[e],c={};for(var d in l)if(l.hasOwnProperty(d)){if(d==t)for(var m in n)n.hasOwnProperty(m)&&(c[m]=n[m]);n.hasOwnProperty(d)||(c[d]=l[d])}var h=o[e];return o[e]=c,r.languages.DFS(r.languages,(function(t,n){n===h&&t!=e&&(this[t]=c)})),c},DFS:function e(t,n,o,l){l=l||{};var c=r.util.objId;for(var i in t)if(t.hasOwnProperty(i)){n.call(t,i,t[i],o||i);var d=t[i],m=r.util.type(d);"Object"!==m||l[c(d)]?"Array"!==m||l[c(d)]||(l[c(d)]=!0,e(d,n,i,l)):(l[c(d)]=!0,e(d,n,null,l))}}},plugins:{},highlightAll:function(e,t){r.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,n){var o={callback:n,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",o),o.elements=Array.prototype.slice.apply(o.container.querySelectorAll(o.selector)),r.hooks.run("before-all-elements-highlight",o);for(var element,i=0;element=o.elements[i++];)r.highlightElement(element,!0===t,o.callback)},highlightElement:function(element,t,n){var o=r.util.getLanguage(element),l=r.languages[o];r.util.setLanguage(element,o);var c=element.parentElement;c&&"pre"===c.nodeName.toLowerCase()&&r.util.setLanguage(c,o);var d={element:element,language:o,grammar:l,code:element.textContent};function m(e){d.highlightedCode=e,r.hooks.run("before-insert",d),d.element.innerHTML=d.highlightedCode,r.hooks.run("after-highlight",d),r.hooks.run("complete",d),n&&n.call(d.element)}if(r.hooks.run("before-sanity-check",d),(c=d.element.parentElement)&&"pre"===c.nodeName.toLowerCase()&&!c.hasAttribute("tabindex")&&c.setAttribute("tabindex","0"),!d.code)return r.hooks.run("complete",d),void(n&&n.call(d.element));if(r.hooks.run("before-highlight",d),d.grammar)if(t&&e.Worker){var h=new Worker(r.filename);h.onmessage=function(e){m(e.data)},h.postMessage(JSON.stringify({language:d.language,code:d.code,immediateClose:!0}))}else m(r.highlight(d.code,d.grammar,d.language));else m(r.util.encode(d.code))},highlight:function(text,e,t){var n={code:text,grammar:e,language:t};if(r.hooks.run("before-tokenize",n),!n.grammar)throw new Error('The language "'+n.language+'" has no grammar.');return n.tokens=r.tokenize(n.code,n.grammar),r.hooks.run("after-tokenize",n),l.stringify(r.util.encode(n.tokens),n.language)},tokenize:function(text,e){var t=e.rest;if(t){for(var n in t)e[n]=t[n];delete e.rest}var o=new m;return h(o,o.head,text),d(text,o,e,o.head,0),function(e){var t=[],n=e.head.next;for(;n!==e.tail;)t.push(n.value),n=n.next;return t}(o)},hooks:{all:{},add:function(e,t){var n=r.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=r.hooks.all[e];if(n&&n.length)for(var o,i=0;o=n[i++];)o(t)}},Token:l};function l(e,content,t,n){this.type=e,this.content=content,this.alias=t,this.length=0|(n||"").length}function c(pattern,e,text,t){pattern.lastIndex=e;var n=pattern.exec(text);if(n&&t&&n[1]){var o=n[1].length;n.index+=o,n[0]=n[0].slice(o)}return n}function d(text,e,t,n,o,m){for(var y in t)if(t.hasOwnProperty(y)&&t[y]){var v=t[y];v=Array.isArray(v)?v:[v];for(var w=0;w<v.length;++w){if(m&&m.cause==y+","+w)return;var x=v[w],S=x.inside,C=!!x.lookbehind,k=!!x.greedy,T=x.alias;if(k&&!x.pattern.global){var _=x.pattern.toString().match(/[imsuy]*$/)[0];x.pattern=RegExp(x.pattern.source,_+"g")}for(var pattern=x.pattern||x,A=n.next,O=o;A!==e.tail&&!(m&&O>=m.reach);O+=A.value.length,A=A.next){var D=A.value;if(e.length>text.length)return;if(!(D instanceof l)){var E,N=1;if(k){if(!(E=c(pattern,O,text,C))||E.index>=text.length)break;var R=E.index,M=E.index+E[0].length,p=O;for(p+=A.value.length;R>=p;)p+=(A=A.next).value.length;if(O=p-=A.value.length,A.value instanceof l)continue;for(var P=A;P!==e.tail&&(p<M||"string"==typeof P.value);P=P.next)N++,p+=P.value.length;N--,D=text.slice(O,p),E.index-=O}else if(!(E=c(pattern,0,D,C)))continue;R=E.index;var F=E[0],I=D.slice(0,R),L=D.slice(R+F.length),B=O+D.length;m&&B>m.reach&&(m.reach=B);var j=A.prev;if(I&&(j=h(e,j,I),O+=I.length),f(e,j,N),A=h(e,j,new l(y,S?r.tokenize(F,S):F,T,F)),L&&h(e,A,L),N>1){var z={cause:y+","+w,reach:B};d(text,e,t,A.prev,O,z),m&&z.reach>m.reach&&(m.reach=z.reach)}}}}}}function m(){var head={value:null,prev:null,next:null},e={value:null,prev:head,next:null};head.next=e,this.head=head,this.tail=e,this.length=0}function h(e,t,n){var o=t.next,r={value:n,prev:t,next:o};return t.next=r,o.prev=r,e.length++,r}function f(e,t,n){for(var o=t.next,i=0;i<n&&o!==e.tail;i++)o=o.next;t.next=o,o.prev=t,e.length-=i}if(e.Prism=r,l.stringify=function e(t,n){if("string"==typeof t)return t;if(Array.isArray(t)){var s="";return t.forEach((function(t){s+=e(t,n)})),s}var o={type:t.type,content:e(t.content,n),tag:"span",classes:["token",t.type],attributes:{},language:n},l=t.alias;l&&(Array.isArray(l)?Array.prototype.push.apply(o.classes,l):o.classes.push(l)),r.hooks.run("wrap",o);var c="";for(var d in o.attributes)c+=" "+d+'="'+(o.attributes[d]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+c+">"+o.content+"</"+o.tag+">"},!e.document)return e.addEventListener?(r.disableWorkerMessageHandler||e.addEventListener("message",(function(t){var n=JSON.parse(t.data),o=n.language,code=n.code,l=n.immediateClose;e.postMessage(r.highlight(code,r.languages[o],o)),l&&e.close()}),!1),r):r;var script=r.util.currentScript();function y(){r.manual||r.highlightAll()}if(script&&(r.filename=script.src,script.hasAttribute("data-manual")&&(r.manual=!0)),!r.manual){var v=document.readyState;"loading"===v||"interactive"===v&&script&&script.defer?document.addEventListener("DOMContentLoaded",y):window.requestAnimationFrame?window.requestAnimationFrame(y):window.setTimeout(y,16)}return r}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});return void 0!==t&&t.exports&&(t.exports=r),void 0!==e&&(e.Prism=r),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},function(e){function t(e,t){return"___"+e.toUpperCase()+t+"___"}Object.defineProperties(e.languages["markup-templating"]={},{buildPlaceholders:{value:function(n,o,r,l){if(n.language===o){var c=n.tokenStack=[];n.code=n.code.replace(r,(function(e){if("function"==typeof l&&!l(e))return e;for(var r,i=c.length;-1!==n.code.indexOf(r=t(o,i));)++i;return c[i]=e,r})),n.grammar=e.languages.markup}}},tokenizePlaceholders:{value:function(n,o){if(n.language===o&&n.tokenStack){n.grammar=e.languages[o];var r=0,l=Object.keys(n.tokenStack);!function c(d){for(var i=0;i<d.length&&!(r>=l.length);i++){var m=d[i];if("string"==typeof m||m.content&&"string"==typeof m.content){var h=l[r],f=n.tokenStack[h],s="string"==typeof m?m:m.content,y=t(o,h),v=s.indexOf(y);if(v>-1){++r;var w=s.substring(0,v),x=new e.Token(o,e.tokenize(f,n.grammar),"language-"+o,f),S=s.substring(v+y.length),C=[];w&&C.push.apply(C,c([w])),C.push(x),S&&C.push.apply(C,c([S])),"string"==typeof m?d.splice.apply(d,[i,1].concat(C)):m.content=C}}else m.content&&c(m.content)}return d}(n.tokens)}}}})}(r),r.languages.c=r.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),r.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),r.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},r.languages.c.string],char:r.languages.c.char,comment:r.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:r.languages.c}}}}),r.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete r.languages.c.boolean,function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,(function(){return t.source}));e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,(function(){return t.source}))),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,(function(){return n}))+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])}(r),function(e){function t(pattern,e){return pattern.replace(/<<(\d+)>>/g,(function(t,n){return"(?:"+e[+n]+")"}))}function n(pattern,e,n){return RegExp(t(pattern,e),n||"")}function o(pattern,e){for(var i=0;i<e;i++)pattern=pattern.replace(/<<self>>/g,(function(){return"(?:"+pattern+")"}));return pattern.replace(/<<self>>/g,"[^\\s\\S]")}var r="bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",l="class enum interface record struct",c="add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",d="abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield";function m(e){return"\\b(?:"+e.trim().replace(/ /g,"|")+")\\b"}var h=m(l),f=RegExp(m(r+" "+l+" "+c+" "+d)),y=m(l+" "+c+" "+d),v=m(r+" "+l+" "+d),w=o(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),x=o(/\((?:[^()]|<<self>>)*\)/.source,2),S=/@?\b[A-Za-z_]\w*\b/.source,C=t(/<<0>>(?:\s*<<1>>)?/.source,[S,w]),k=t(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[y,C]),T=/\[\s*(?:,\s*)*\]/.source,_=t(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[k,T]),A=t(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[w,x,T]),O=t(/\(<<0>>+(?:,<<0>>+)+\)/.source,[A]),D=t(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[O,k,T]),E={keyword:f,punctuation:/[<>()?,.:[\]]/},N=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,R=/"(?:\\.|[^\\"\r\n])*"/.source,M=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;e.languages.csharp=e.languages.extend("clike",{string:[{pattern:n(/(^|[^$\\])<<0>>/.source,[M]),lookbehind:!0,greedy:!0},{pattern:n(/(^|[^@$\\])<<0>>/.source,[R]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:n(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[k]),lookbehind:!0,inside:E},{pattern:n(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[S,D]),lookbehind:!0,inside:E},{pattern:n(/(\busing\s+)<<0>>(?=\s*=)/.source,[S]),lookbehind:!0},{pattern:n(/(\b<<0>>\s+)<<1>>/.source,[h,C]),lookbehind:!0,inside:E},{pattern:n(/(\bcatch\s*\(\s*)<<0>>/.source,[k]),lookbehind:!0,inside:E},{pattern:n(/(\bwhere\s+)<<0>>/.source,[S]),lookbehind:!0},{pattern:n(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[_]),lookbehind:!0,inside:E},{pattern:n(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[D,v,S]),inside:E}],keyword:f,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),e.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),e.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:n(/([(,]\s*)<<0>>(?=\s*:)/.source,[S]),lookbehind:!0,alias:"punctuation"}}),e.languages.insertBefore("csharp","class-name",{namespace:{pattern:n(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[S]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:n(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[x]),lookbehind:!0,alias:"class-name",inside:E},"return-type":{pattern:n(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[D,k]),inside:E,alias:"class-name"},"constructor-invocation":{pattern:n(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[D]),lookbehind:!0,inside:E,alias:"class-name"},"generic-method":{pattern:n(/<<0>>\s*<<1>>(?=\s*\()/.source,[S,w]),inside:{function:n(/^<<0>>/.source,[S]),generic:{pattern:RegExp(w),alias:"class-name",inside:E}}},"type-list":{pattern:n(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[h,C,S,D,f.source,x,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:n(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[C,x]),lookbehind:!0,greedy:!0,inside:e.languages.csharp},keyword:f,"class-name":{pattern:RegExp(D),greedy:!0,inside:E},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var P=R+"|"+N,F=t(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[P]),I=o(t(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[F]),2),L=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,B=t(/<<0>>(?:\s*\(<<1>>*\))?/.source,[k,I]);e.languages.insertBefore("csharp","class-name",{attribute:{pattern:n(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[L,B]),lookbehind:!0,greedy:!0,inside:{target:{pattern:n(/^<<0>>(?=\s*:)/.source,[L]),alias:"keyword"},"attribute-arguments":{pattern:n(/\(<<0>>*\)/.source,[I]),inside:e.languages.csharp},"class-name":{pattern:RegExp(k),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var j=/:[^}\r\n]+/.source,z=o(t(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[F]),2),$=t(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[z,j]),U=o(t(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[P]),2),H=t(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[U,j]);function W(t,o){return{interpolation:{pattern:n(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[t]),lookbehind:!0,inside:{"format-string":{pattern:n(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[o,j]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:e.languages.csharp}}},string:/[\s\S]+/}}e.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:n(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[$]),lookbehind:!0,greedy:!0,inside:W($,z)},{pattern:n(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[H]),lookbehind:!0,greedy:!0,inside:W(H,U)}],char:{pattern:RegExp(N),greedy:!0}}),e.languages.dotnet=e.languages.cs=e.languages.csharp}(r),function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(r),function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,n=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,o={pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[o,{pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:o.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+n+/[A-Z]\w*\b/.source),lookbehind:!0,inside:o.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":o,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+n+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:o.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+n+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:o.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,(function(){return t.source}))),lookbehind:!0,inside:{punctuation:/\./}}})}(r),r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),r.languages.js=r.languages.javascript,r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",(function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))})),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(e,t){var n={};n["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[t]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};o["language-"+t]={pattern:/[\s\S]+/,inside:r.languages[t]};var l={};l[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return e})),"i"),lookbehind:!0,greedy:!0,inside:o},r.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(e,t){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:r.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,function(e){var t=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,n=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],o=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,r=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,l=/[{}\[\](),:;]/;e.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:t,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:n,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:o,operator:r,punctuation:l};var c={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:e.languages.php},d=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:c}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:c}}];e.languages.insertBefore("php","variable",{string:d,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:t,string:d,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:n,number:o,operator:r,punctuation:l}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),e.hooks.add("before-tokenize",(function(t){if(/<\?/.test(t.code)){e.languages["markup-templating"].buildPlaceholders(t,"php",/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g)}})),e.hooks.add("after-tokenize",(function(t){e.languages["markup-templating"].tokenizePlaceholders(t,"php")}))}(r),r.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},r.languages.python["string-interpolation"].inside.interpolation.inside.rest=r.languages.python,r.languages.py=r.languages.python,function(e){e.languages.ruby=e.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),e.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var t={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:e.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete e.languages.ruby.function;var n="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",o=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;e.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+n+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:t,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:t,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+o),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+o+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),e.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+n),greedy:!0,inside:{interpolation:t,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:t,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:t,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+n),greedy:!0,inside:{interpolation:t,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:t,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete e.languages.ruby.string,e.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),e.languages.rb=e.languages.ruby}(r),window.Prism=o,r}(void 0,void 0),option=e=>t=>t.options.get(e),d=option("codesample_languages"),m=option("codesample_global_prismjs"),h=e=>l.Prism&&m(e)?l.Prism:c,f=e=>t(e)&&"PRE"===e.nodeName&&-1!==e.className.indexOf("language-"),y=e=>{const t=e.selection?e.selection.getNode():null;return f(t)?o.some(t):o.none()},v=e=>{const t=(e=>{const t=d(e);return t||[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}]})(e),n=head(t).fold((l="",()=>l),(e=>e.value));var l;const c=((e,t)=>y(e).fold((()=>t),(e=>{const n=e.className.match(/language-(\w+)/);return n?n[1]:t})))(e,n),m=(e=>y(e).bind((e=>o.from(e.textContent))).getOr(""))(e);e.windowManager.open({title:"Insert/Edit Code Sample",size:"large",body:{type:"panel",items:[{type:"listbox",name:"language",label:"Language",items:t},{type:"textarea",name:"code",label:"Code view"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{language:c,code:m},onSubmit:t=>{const data=t.getData();((e,t,code)=>{const n=e.dom;e.undoManager.transact((()=>{const o=y(e);return code=r.DOM.encode(code),o.fold((()=>{e.insertContent('<pre id="__new" class="language-'+t+'">'+code+"</pre>");const o=n.select("#__new")[0];n.setAttrib(o,"id",null),e.selection.select(o)}),(o=>{n.setAttrib(o,"class","language-"+t),o.innerHTML=code,h(e).highlightElement(o),e.selection.select(o)}))}))})(e,data.language,data.code),t.close()}})},w=(x=/^\s+|\s+$/g,s=>s.replace(x,""));var x,S=tinymce.util.Tools.resolve("tinymce.util.Tools");const C=(e,t=n)=>n=>{const o=()=>{n.setEnabled(e.selection.isEditable()),t(n)};return e.on("NodeChange",o),o(),()=>{e.off("NodeChange",o)}};e.add("codesample",(e=>{(e=>{const t=e.options.register;t("codesample_languages",{processor:"object[]"}),t("codesample_global_prismjs",{processor:"boolean",default:!1})})(e),(e=>{e.on("PreProcess",(t=>{const n=e.dom,o=n.select("pre[contenteditable=false]",t.node);S.each(S.grep(o,f),(e=>{const code=e.textContent;let t;for(n.setAttrib(e,"class",w(n.getAttrib(e,"class"))),n.setAttrib(e,"contentEditable",null),n.setAttrib(e,"data-mce-highlighted",null);t=e.firstChild;)e.removeChild(t);n.add(e,"code").textContent=code}))})),e.on("SetContent",(()=>{const t=e.dom,n=S.grep(t.select("pre"),(e=>f(e)&&"true"!==t.getAttrib(e,"data-mce-highlighted")));n.length&&e.undoManager.transact((()=>{S.each(n,(n=>{var o;S.each(t.select("br",n),(n=>{t.replace(e.getDoc().createTextNode("\n"),n)})),n.innerHTML=t.encode(null!==(o=n.textContent)&&void 0!==o?o:""),h(e).highlightElement(n),t.setAttrib(n,"data-mce-highlighted",!0),n.className=w(n.className)}))}))})),e.on("PreInit",(()=>{e.parser.addNodeFilter("pre",(e=>{var t;for(let i=0,n=e.length;i<n;i++){const n=e[i];-1!==(null!==(t=n.attr("class"))&&void 0!==t?t:"").indexOf("language-")&&(n.attr("contenteditable","false"),n.attr("data-mce-highlighted","false"))}}))}))})(e),(e=>{const t=()=>e.execCommand("codesample");e.ui.registry.addToggleButton("codesample",{icon:"code-sample",tooltip:"Insert/edit code sample",onAction:t,onSetup:C(e,(t=>{t.setActive((e=>{const t=e.selection.getStart();return e.dom.is(t,'pre[class*="language-"]')})(e))}))}),e.ui.registry.addMenuItem("codesample",{text:"Code sample...",icon:"code-sample",onAction:t,onSetup:C(e)})})(e),(e=>{e.addCommand("codesample",(()=>{const t=e.selection.getNode();e.selection.isCollapsed()||f(t)?v(e):e.formatter.toggle("code")}))})(e),e.on("dblclick",(t=>{f(t.target)&&v(e)}))}))}()},695:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env");const option=e=>t=>t.options.get(e),n=option("pagebreak_separator"),o=option("pagebreak_split_block"),r="mce-pagebreak",l=e=>{const html=`<img src="${t.transparentSrc}" class="${r}" data-mce-resize="false" data-mce-placeholder />`;return e?`<p>${html}</p>`:html},c=e=>t=>{const n=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",n),n(),()=>{e.off("NodeChange",n)}};e.add("pagebreak",(e=>{(e=>{const t=e.options.register;t("pagebreak_separator",{processor:"string",default:"\x3c!-- pagebreak --\x3e"}),t("pagebreak_split_block",{processor:"boolean",default:!1})})(e),(e=>{e.addCommand("mcePageBreak",(()=>{e.insertContent(l(o(e)))}))})(e),(e=>{const t=()=>e.execCommand("mcePageBreak");e.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:t,onSetup:c(e)}),e.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:t,onSetup:c(e)})})(e),(e=>{const t=n(e),c=()=>o(e),d=new RegExp(t.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,(a=>"\\"+a)),"gi");e.on("BeforeSetContent",(e=>{e.content=e.content.replace(d,l(c()))})),e.on("PreInit",(()=>{e.serializer.addNodeFilter("img",(n=>{let o,l,i=n.length;for(;i--;)if(o=n[i],l=o.attr("class"),l&&-1!==l.indexOf(r)){const n=o.parent;if(n&&e.schema.getBlockElements()[n.name]&&c()){n.type=3,n.value=t,n.raw=!0,o.remove();continue}o.type=3,o.value=t,o.raw=!0}}))}))})(e),(e=>{e.on("ResolveName",(t=>{"IMG"===t.target.nodeName&&e.dom.hasClass(t.target,r)&&(t.name="pagebreak")}))})(e)}))}()},696:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>typeof t===e,n=t("boolean"),o=t("number"),option=e=>t=>t.options.get(e),r=option("nonbreaking_force_tab"),l=option("nonbreaking_wrap"),c=(e,t)=>{let n="";for(let o=0;o<t;o++)n+=e;return n},d=(e,t)=>{const html=l(e)||e.plugins.visualchars?`<span class="${(e=>!!e.plugins.visualchars&&e.plugins.visualchars.isEnabled())(e)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap"}" contenteditable="false">${c("&nbsp;",t)}</span>`:c("&nbsp;",t);e.undoManager.transact((()=>e.insertContent(html)))};var m=tinymce.util.Tools.resolve("tinymce.util.VK");const h=e=>t=>{const n=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",n),n(),()=>{e.off("NodeChange",n)}};e.add("nonbreaking",(e=>{(e=>{const t=e.options.register;t("nonbreaking_force_tab",{processor:e=>n(e)?{value:e?3:0,valid:!0}:o(e)?{value:e,valid:!0}:{valid:!1,message:"Must be a boolean or number."},default:!1}),t("nonbreaking_wrap",{processor:"boolean",default:!0})})(e),(e=>{e.addCommand("mceNonBreaking",(()=>{d(e,1)}))})(e),(e=>{const t=()=>e.execCommand("mceNonBreaking");e.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:t,onSetup:h(e)}),e.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:t,onSetup:h(e)})})(e),(e=>{const t=r(e);t>0&&e.on("keydown",(n=>{if(n.keyCode===m.TAB&&!n.isDefaultPrevented()){if(n.shiftKey)return;n.preventDefault(),n.stopImmediatePropagation(),d(e,t)}}))})(e)}))}()},697:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>a=>e===a,n=t(null),o=t(void 0),r=()=>{},l=(e=>()=>e)(!1);class c{constructor(e,t){this.tag=e,this.value=t}static some(e){return new c(!0,e)}static none(){return c.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?c.some(e(this.value)):c.none()}bind(e){return this.tag?e(this.value):c.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:c.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(a=>null==a)(e)?c.none():c.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}c.singletonNone=new c(!1);const d=(e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o},m=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},h=Object.keys,f=Object.hasOwnProperty,y=(e,t)=>{const n=h(e);for(let o=0,r=n.length;o<r;o++){const i=n[o];t(e[i],i)}},v=(e,t)=>{const n={};return y(e,((e,i)=>{const o=t(e,i);n[o.k]=o.v})),n},w=(e,t)=>f.call(e,t),x=(S=(e,t)=>t,(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const e in o)w(o,e)&&(t[e]=S(t[e],o[e]))}return t});var S;const C=()=>{const e=(e=>{const t=m(c.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(c.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:s=>{n(),t.set(c.some(s))}}})(r);return{...e,on:t=>e.get().each(t)}},k=(e,t,n=0,r)=>{const l=e.indexOf(t,n);return-1!==l&&(!!o(r)||l+t.length<=r)};var T=tinymce.util.Tools.resolve("tinymce.Resource");const option=e=>t=>t.options.get(e),_=option("emoticons_database"),A=option("emoticons_database_url"),O=option("emoticons_database_id"),D=option("emoticons_append"),E=option("emoticons_images_url"),N="All",R={symbols:"Symbols",people:"People",animals_and_nature:"Animals and Nature",food_and_drink:"Food and Drink",activity:"Activity",travel_and_places:"Travel and Places",objects:"Objects",flags:"Flags",user:"User Defined"},M=(e,t)=>w(e,t)?e[t]:t,P=e=>{const t=D(e);return n=e=>({keywords:[],category:"user",...e}),v(t,((e,i)=>({k:i,v:n(e,i)})));var n},F=(e,t,n)=>{const o=C(),r=C(),l=E(e),d=e=>((e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t)(e.char,"<img",0)?e.char.replace(/src="([^"]+)"/,((e,t)=>`src="${l}${t}"`)):e.char;e.on("init",(()=>{T.load(n,t).then((t=>{const n=P(e);(e=>{const t={},n=[];y(e,((e,title)=>{const o={title:title,keywords:e.keywords,char:d(e),category:M(R,e.category)},r=void 0!==t[o.category]?t[o.category]:[];t[o.category]=r.concat([o]),n.push(o)})),o.set(t),r.set(n)})(x(t,n))}),(e=>{console.log(`Failed to load emojis: ${e}`),o.set({}),r.set([])}))}));const m=()=>r.get().getOr([]),f=()=>o.isSet()&&r.isSet();return{listCategories:()=>[N].concat(h(o.get().getOr({}))),hasLoaded:f,waitForLoad:()=>f()?Promise.resolve(!0):new Promise(((e,n)=>{let o=15;const r=setInterval((()=>{f()?(clearInterval(r),e(!0)):(o--,o<0&&(console.log("Could not load emojis from url: "+t),clearInterval(r),n(!1)))}),100)})),listAll:m,listCategory:e=>e===N?m():o.get().bind((t=>c.from(t[e]))).getOr([])}},I=(e,t)=>k(e.title.toLowerCase(),t)||((e,t)=>{for(let i=0,n=e.length;i<n;i++)if(t(e[i],i))return!0;return!1})(e.keywords,(e=>k(e.toLowerCase(),t))),L=(e,pattern,t)=>{const n=[],o=pattern.toLowerCase(),r=t.fold((()=>l),(e=>t=>t>=e));for(let i=0;i<e.length&&(0!==pattern.length&&!I(e[i],o)||(n.push({value:e[i].char,text:e[i].title,icon:e[i].char}),!r(n.length)));i++);return n},B="pattern",j=(e,t)=>{const o={pattern:"",results:L(t.listAll(),"",c.some(300))},r=m(N),l=((e,t)=>{let o=null;const r=()=>{n(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...n)=>{r(),o=setTimeout((()=>{o=null,e.apply(null,n)}),t)}}})((e=>{(e=>{const n=e.getData(),o=r.get(),l=t.listCategory(o),d=L(l,n[B],o===N?c.some(300):c.none());e.setData({results:d})})(e)}),200),h={label:"Search",type:"input",name:B},f={type:"collection",name:"results"},y=()=>({title:"Emojis",size:"normal",body:{type:"tabpanel",tabs:d(t.listCategories(),(e=>({title:e,name:e,items:[h,f]})))},initialData:o,onTabChange:(e,details)=>{r.set(details.newTabName),l.throttle(e)},onChange:l.throttle,onAction:(t,n)=>{"results"===n.name&&(((e,t)=>{e.insertContent(t)})(e,n.value),t.close())},buttons:[{type:"cancel",text:"Close",primary:!0}]}),v=e.windowManager.open(y());v.focus(B),t.hasLoaded()||(v.block("Loading emojis..."),t.waitForLoad().then((()=>{v.redial(y()),l.throttle(v),v.focus(B),v.unblock()})).catch((e=>{v.redial({title:"Emojis",body:{type:"panel",items:[{type:"alertbanner",level:"error",icon:"warning",text:"Could not load emojis"}]},buttons:[{type:"cancel",text:"Close",primary:!0}],initialData:{pattern:"",results:[]}}),v.focus(B),v.unblock()})))},z=e=>t=>{const n=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",n),n(),()=>{e.off("NodeChange",n)}};e.add("emoticons",((e,t)=>{((e,t)=>{const n=e.options.register;n("emoticons_database",{processor:"string",default:"emojis"}),n("emoticons_database_url",{processor:"string",default:`${t}/js/${_(e)}${e.suffix}.js`}),n("emoticons_database_id",{processor:"string",default:"tinymce.plugins.emoticons"}),n("emoticons_append",{processor:"object",default:{}}),n("emoticons_images_url",{processor:"string",default:"https://twemoji.maxcdn.com/v/13.0.1/72x72/"})})(e,t);const n=A(e),o=O(e),r=F(e,n,o);((e,t)=>{e.addCommand("mceEmoticons",(()=>j(e,t)))})(e,r),(e=>{const t=()=>e.execCommand("mceEmoticons");e.ui.registry.addButton("emoticons",{tooltip:"Emojis",icon:"emoji",onAction:t,onSetup:z(e)}),e.ui.registry.addMenuItem("emoticons",{text:"Emojis...",icon:"emoji",onAction:t,onSetup:z(e)})})(e),((e,t)=>{e.ui.registry.addAutocompleter("emoticons",{trigger:":",columns:"auto",minChars:2,fetch:(pattern,e)=>t.waitForLoad().then((()=>{const n=t.listAll();return L(n,pattern,c.some(e))})),onAction:(t,n,o)=>{e.selection.setRng(n),e.insertContent(o),t.hide()}})})(e,r),(e=>{e.on("PreInit",(()=>{e.parser.addAttributeFilter("data-emoticon",(e=>{((e,t)=>{for(let i=0,n=e.length;i<n;i++)t(e[i],i)})(e,(e=>{e.attr("data-mce-resize","false"),e.attr("data-mce-placeholder","1")}))}))}))})(e)}))}()},698:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=(n="string",e=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,(r=String).prototype.isPrototypeOf(n)||(null===(l=o.constructor)||void 0===l?void 0:l.name)===r.name)?"string":t;var n,o,r,l})(e)===n);var n;const o=(r=void 0,a=>r===a);var r,l=tinymce.util.Tools.resolve("tinymce.util.Delay"),c=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),d=tinymce.util.Tools.resolve("tinymce.util.Tools");const m=e=>{const t=/^(\d+)([ms]?)$/.exec(e);return(t&&t[2]?{s:1e3,m:6e4}[t[2]]:1)*parseInt(e,10)},option=e=>t=>t.options.get(e),h=option("autosave_ask_before_unload"),f=option("autosave_restore_when_empty"),y=option("autosave_interval"),v=option("autosave_retention"),w=e=>{const t=document.location;return e.options.get("autosave_prefix").replace(/{path}/g,t.pathname).replace(/{query}/g,t.search).replace(/{hash}/g,t.hash).replace(/{id}/g,e.id)},x=(e,html)=>{if(o(html))return e.dom.isEmpty(e.getBody());{const t=d.trim(html);if(""===t)return!0;{const n=(new DOMParser).parseFromString(t,"text/html");return e.dom.isEmpty(n)}}},S=e=>{var t;const time=parseInt(null!==(t=c.getItem(w(e)+"time"))&&void 0!==t?t:"0",10)||0;return!((new Date).getTime()-time>v(e))||(C(e,!1),!1)},C=(e,t)=>{const n=w(e);c.removeItem(n+"draft"),c.removeItem(n+"time"),!1!==t&&(e=>{e.dispatch("RemoveDraft")})(e)},k=e=>{const t=w(e);!x(e)&&e.isDirty()&&(c.setItem(t+"draft",e.getContent({format:"raw",no_events:!0})),c.setItem(t+"time",(new Date).getTime().toString()),(e=>{e.dispatch("StoreDraft")})(e))},T=e=>{var t;const n=w(e);S(e)&&(e.setContent(null!==(t=c.getItem(n+"draft"))&&void 0!==t?t:"",{format:"raw"}),(e=>{e.dispatch("RestoreDraft")})(e))};var _=tinymce.util.Tools.resolve("tinymce.EditorManager");const A=e=>t=>{t.setEnabled(S(e));const n=()=>t.setEnabled(S(e));return e.on("StoreDraft RestoreDraft RemoveDraft",n),()=>e.off("StoreDraft RestoreDraft RemoveDraft",n)},O=e=>{(e=>{const t=y(e);l.setEditorInterval(e,(()=>{k(e)}),t)})(e);const t=()=>{(e=>{e.undoManager.transact((()=>{T(e),C(e)})),e.focus()})(e)};e.ui.registry.addButton("restoredraft",{tooltip:"Restore last draft",icon:"restore-draft",onAction:t,onSetup:A(e)}),e.ui.registry.addMenuItem("restoredraft",{text:"Restore last draft",icon:"restore-draft",onAction:t,onSetup:A(e)})};e.add("autosave",(e=>((e=>{const n=e.options.register,o=e=>{const n=t(e);return n?{value:m(e),valid:n}:{valid:!1,message:"Must be a string."}};n("autosave_ask_before_unload",{processor:"boolean",default:!0}),n("autosave_prefix",{processor:"string",default:"tinymce-autosave-{path}{query}{hash}-{id}-"}),n("autosave_restore_when_empty",{processor:"boolean",default:!1}),n("autosave_interval",{processor:o,default:"30s"}),n("autosave_retention",{processor:o,default:"20m"})})(e),(e=>{e.editorManager.on("BeforeUnload",(e=>{let t;d.each(_.get(),(e=>{e.plugins.autosave&&e.plugins.autosave.storeDraft(),!t&&e.isDirty()&&h(e)&&(t=e.translate("You have unsaved changes are you sure you want to navigate away?"))})),t&&(e.preventDefault(),e.returnValue=t)}))})(e),O(e),e.on("init",(()=>{f(e)&&e.dom.isEmpty(e.getBody())&&T(e)})),(e=>({hasDraft:()=>S(e),storeDraft:()=>k(e),restoreDraft:()=>T(e),removeDraft:t=>C(e,t),isEmpty:html=>x(e,html)}))(e))))}()},699:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=(n=null,a=>n===a);var n;const o=e=>e,map=(e,t)=>{const n=e.length,o=new Array(n);for(let i=0;i<n;i++){const n=e[i];o[i]=t(n,i)}return o},r={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\ufeff￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"},l=0,c=1,d=2,m=3,h=4,f=5,y=6,v=7,w=8,x=9,S=10,C=11,k=12,T=13,_=[new RegExp(r.aletter),new RegExp(r.midnumlet),new RegExp(r.midletter),new RegExp(r.midnum),new RegExp(r.numeric),new RegExp(r.cr),new RegExp(r.lf),new RegExp(r.newline),new RegExp(r.extend),new RegExp(r.format),new RegExp(r.katakana),new RegExp(r.extendnumlet),new RegExp("@")],A=new RegExp("^"+r.punctuation+"$"),O=_,D=T,E=e=>{let t=D;const n=O.length;for(let o=0;o<n;++o){const n=O[o];if(n&&n.test(e)){t=o;break}}return t},N=(map,e)=>{const t=map[e],n=map[e+1];if(e<0||e>map.length-1&&0!==e)return!1;if(t===l&&n===l)return!1;const o=map[e+2];if(t===l&&(n===d||n===c||n===k)&&o===l)return!1;const r=map[e-1];return(t!==d&&t!==c&&n!==k||n!==l||r!==l)&&((t!==h&&t!==l||n!==h&&n!==l)&&((t!==m&&t!==c||n!==h||r!==h)&&((t!==h||n!==m&&n!==c||o!==h)&&((t!==w&&t!==x||n!==l&&n!==h&&n!==S&&n!==w&&n!==x)&&(n!==w&&(n!==x||o!==l&&o!==h&&o!==S&&o!==w&&o!==x)||t!==l&&t!==h&&t!==S&&t!==w&&t!==x)&&((t!==f||n!==y)&&(t===v||t===f||t===y||(n===v||n===f||n===y||(t!==S||n!==S)&&((n!==C||t!==l&&t!==h&&t!==S&&t!==C)&&((t!==C||n!==l&&n!==h&&n!==S)&&t!==k)))))))))},R=/^\s+$/,M=A,P=e=>"http"===e||"https"===e,F=(e,t)=>{const n=((e,t)=>{let i;for(i=t;i<e.length&&!R.test(e[i]);i++);return i})(e,t+1);return"://"===e.slice(t+1,n).join("").substr(0,3)?n:t},I=(e,t,n)=>{n={includeWhitespace:!1,includePunctuation:!1,...n};const o=map(e,t);return((e,t,n,o)=>{const r=[],l=[];let c=[];for(let i=0;i<n.length;++i)if(c.push(e[i]),N(n,i)){const n=t[i];if((o.includeWhitespace||!R.test(n))&&(o.includePunctuation||!M.test(n))){const n=i-c.length+1,o=i+1,d=t.slice(n,o).join("");if(P(d)){const n=F(t,i),r=e.slice(o,n);Array.prototype.push.apply(c,r),i=n}r.push(c),l.push({start:n,end:o})}c=[]}return{words:r,indices:l}})(e,o,(e=>{const t=(e=>{const t={};return n=>{if(t[n])return t[n];{const o=e(n);return t[n]=o,o}}})(E);return map(e,t)})(o),n)},L=(e,t,n)=>I(e,t,n).words;var B=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const j=(e,t)=>{const n=t.getBlockElements(),o=t.getVoidElements(),r=e=>n[e.nodeName]||o[e.nodeName],l=[];let c="";const d=new B(e,e);let m;for(;m=d.next();)3===m.nodeType?c+=m.data.replace(/\uFEFF/g,""):r(m)&&c.length&&(l.push(c),c="");return c.length&&l.push(c),l},z=e=>e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,$=(e,t)=>{const text=(text=>text.replace(/\u200B/g,""))(j(e,t).join("\n"));return L(text.split(""),o).length},U=(e,t)=>{const text=j(e,t).join("");return z(text)},H=(e,t)=>{const text=j(e,t).join("").replace(/\s/g,"");return z(text)},W=(e,t)=>()=>t(e.getBody(),e.schema),V=(e,t)=>()=>t(e.selection.getRng().cloneContents(),e.schema),Z=e=>W(e,$),K=(e,t)=>{e.addCommand("mceWordCount",(()=>((e,t)=>{e.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(t.body.getWordCount()),String(t.selection.getWordCount())],["Characters (no spaces)",String(t.body.getCharacterCountWithoutSpaces()),String(t.selection.getCharacterCountWithoutSpaces())],["Characters",String(t.body.getCharacterCount()),String(t.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})})(e,t)))};var G=tinymce.util.Tools.resolve("tinymce.util.Delay");const Y=(e,t)=>{((e,t)=>{e.dispatch("wordCountUpdate",{wordCount:{words:t.body.getWordCount(),characters:t.body.getCharacterCount(),charactersWithoutSpaces:t.body.getCharacterCountWithoutSpaces()}})})(e,t)},J=(e,n,o)=>{const r=((e,n)=>{let o=null;return{cancel:()=>{t(o)||(clearTimeout(o),o=null)},throttle:(...r)=>{t(o)&&(o=setTimeout((()=>{o=null,e.apply(null,r)}),n))}}})((()=>Y(e,n)),o);e.on("init",(()=>{Y(e,n),G.setEditorTimeout(e,(()=>{e.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",r.throttle)}),0),e.on("remove",r.cancel)}))};((t=300)=>{e.add("wordcount",(e=>{const n=(e=>({body:{getWordCount:Z(e),getCharacterCount:W(e,U),getCharacterCountWithoutSpaces:W(e,H)},selection:{getWordCount:V(e,$),getCharacterCount:V(e,U),getCharacterCountWithoutSpaces:V(e,H)},getCount:Z(e)}))(e);return K(e,n),(e=>{const t=()=>e.execCommand("mceWordCount");e.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:t}),e.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:t})})(e),J(e,n,t),n}))})()}()}}]);