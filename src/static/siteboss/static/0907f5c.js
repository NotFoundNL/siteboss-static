(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{571:function(t,e,r){t.exports={primary:"#5b3776"}},661:function(t,e,r){"use strict";r.d(e,"b",(function(){return j})),r.d(e,"a",(function(){return w}));var o=r(4),n=r(3),c=r(1),l=r(32),d=r(6),h=r(39),m=r(23),f=r(0),O=r(22),v=r(26),j=Object(f.d)({animated:Object(f.c)(c.g,null),label:Object(f.c)(c.t),labelHtml:Object(f.c)(c.t),max:Object(f.c)(c.o,null),precision:Object(f.c)(c.o,null),showProgress:Object(f.c)(c.g,null),showValue:Object(f.c)(c.g,null),striped:Object(f.c)(c.g,null),value:Object(f.c)(c.o,0),variant:Object(f.c)(c.t)},n.Cb),w=Object(o.c)({name:n.Cb,mixins:[v.a],inject:{getBvProgress:{default:function(){return function(){return{}}}}},props:j,computed:{bvProgress:function(){return this.getBvProgress()},progressBarClasses:function(){var t=this.computedAnimated,e=this.computedVariant;return[e?"bg-".concat(e):"",this.computedStriped||t?"progress-bar-striped":"",t?"progress-bar-animated":""]},progressBarStyles:function(){return{width:this.computedValue/this.computedMax*100+"%"}},computedValue:function(){return Object(m.b)(this.value,0)},computedMax:function(){var t=Object(m.b)(this.max)||Object(m.b)(this.bvProgress.max,0);return t>0?t:100},computedPrecision:function(){return Object(h.c)(Object(m.c)(this.precision,Object(m.c)(this.bvProgress.precision,0)),0)},computedProgress:function(){var t=this.computedPrecision,p=Object(h.e)(10,t);return Object(m.a)(100*p*this.computedValue/this.computedMax/p,t)},computedVariant:function(){return this.variant||this.bvProgress.variant},computedStriped:function(){return Object(d.b)(this.striped)?this.striped:this.bvProgress.striped||!1},computedAnimated:function(){return Object(d.b)(this.animated)?this.animated:this.bvProgress.animated||!1},computedShowProgress:function(){return Object(d.b)(this.showProgress)?this.showProgress:this.bvProgress.showProgress||!1},computedShowValue:function(){return Object(d.b)(this.showValue)?this.showValue:this.bvProgress.showValue||!1}},render:function(t){var e,label=this.label,r=this.labelHtml,o=this.computedValue,n=this.computedPrecision,c={};return this.hasNormalizedSlot()?e=this.normalizeSlot():label||r?c=Object(l.a)(r,label):this.computedShowProgress?e=this.computedProgress:this.computedShowValue&&(e=Object(m.a)(o,n)),t("div",{staticClass:"progress-bar",class:this.progressBarClasses,style:this.progressBarStyles,attrs:{role:"progressbar","aria-valuemin":"0","aria-valuemax":Object(O.g)(this.computedMax),"aria-valuenow":Object(m.a)(o,n)},domProps:c},e)}})},662:function(t,e,r){"use strict";r(571)},665:function(t,e,r){"use strict";r.r(e);var o=r(38),n=r(47),c=(r(98),r(10),r(68),r(71),r(30),r(56),r(545),r(239),r(14),r(174),r(36),r(399),r(707)),progress=r(712),l=r(708),d=r(9),h={components:{BAlert:c.a,BProgress:progress.a,BSpinner:l.a,AutoLayout:function(){return Promise.all([r.e(1),r.e(2),r.e(3),r.e(6),r.e(129)]).then(r.bind(null,700))}},props:{items:{type:Array,default:function(){return[]}},properties:{type:Object,default:function(){}}},data:function(){return{fields:{},bus:new d.default,error:!1,errorMessage:"",progress:0,errorTitle:"Error",validated:!1,options:{}}},methods:{downloadFile:function(t){var e=this,r="report.csv";this.$axios({url:t,method:"GET"}).then((function(t){if(t.data.message)e.$sbToast.error(t.data.message);else{var o=t.headers["content-disposition"];if(o&&-1!==o.indexOf("attachment")){var n=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(o);null!=n&&n[1]&&(r=n[1].replace(/['"]/g,""))}var c=window.URL.createObjectURL(new Blob([t.data])),l=document.createElement("a");l.href=c,l.setAttribute("download",r),document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(l)}})).error((function(t){e.$sbToast.error("Download mislukt")})).catch((function(t){e.$sbToast.error("Er ging iets mis. Probeer het opnieuw.")}))},setFormOption:function(option,t){this.$set(this.options,option,t)},updateValues:function(t){var e=this;this.$set(this.fields,t.field,t),this.validated=!0,Object.entries(this.fields).forEach((function(t){!1!==t[1].valid&&0!==t[1].valid||(e.validated=!1)}))},submitHandler:function(t){if(!this.validated)return this.$sbToast.error(this.$t("autolayout.form_error")),this.bus.$emit("setStatus",{active:!0}),void this.$nextTick((function(){var t=document.getElementsByClassName("is-invalid");t&&t.length&&t[0].scrollIntoView({behavior:"smooth",block:"center"})}));this.error=!1,this.bus.$emit("setStatus",{active:!1});var e=[],data={};Object.entries(this.fields).forEach((function(t){var r=Object(n.a)(t,2),o=r[0],c=r[1];c.files&&(e=e.concat(c.files)),data[o]=c.value})),data.siteboss_formOptions=this.options,this.properties.onSubmit?this.properties.onSubmit(t,data,e):this.sendFormData(data,e)},sendFormData:function(data,t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=new FormData,n=t.length>0,o.append("payload",JSON.stringify(data)),t.forEach((function(t){o.append(t.id,t.file)})),r.next=6,e.$axios.post(e.properties.url,o,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){e.progress=parseInt(Math.round(100*t.loaded/t.total),10),n&&e.$bvModal.show("progressModal")}}).then((function(t){"ok"===t.data.status?(void 0!==t.data.actions&&e.runActions(t.data.actions),void 0!==t.data.ui&&e.showUIElements(t.data.ui)):e.$sbToast.error(e.$t("autolayout.api_error"))})).catch((function(t){var r,o;e.error=!0,e.errorMessage=null===(r=t.response)||void 0===r?void 0:r.statusText,e.$sbToast.error(null!==(o=e.errorMessage)&&void 0!==o?o:e.$t("autolayout.api_error"))})).finally((function(){e.bus.$emit("setStatus",{active:!0}),e.$bvModal.hide("progressModal")}));case 6:case"end":return r.stop()}}),r)})))()},showUIElements:function(t){"Page"===t[0].type&&this.$nuxt.$emit("siteboss-load-ui",t[0])},runActions:function(t){var e=this;t.forEach((function(t){switch(t.type){case"Toast":"ok"===t.data.status?e.$sbToast.success(t.data.message):e.$sbToast.error(t.data.message);break;case"Modal":break;case"Redirect":e.$nuxt.$router.push(e.localePath({path:t.data.target}));break;case"Download":e.downloadFile(t.data.link);break;default:console.log("Unknown action",t)}}))}}},m=(r(662),r(63)),component=Object(m.a)(h,(function(){var t=this,e=t._self._c;return e("b-form",{staticClass:"w-100 c-2",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submitHandler.apply(null,arguments)}}},[e("b-alert",{staticClass:"m-3 c-a sticky-error",attrs:{show:t.error,variant:"danger",dismissible:""}},[t._v("\n    "+t._s(t.errorMessage)+"\n  ")]),t._v(" "),e("AutoLayout",{attrs:{elements:t.items,bus:t.bus,toplevel:!1},on:{updateValues:t.updateValues,setFormOption:t.setFormOption}}),t._v(" "),e("b-modal",{attrs:{id:"progressModal",title:"Momentje...","hide-header-close":!0,"cancel-only":""},scopedSlots:t._u([{key:"modal-footer",fn:function(t){return function(t){if(null==t)throw new TypeError("Cannot destructure "+t)}(t),[e("b-spinner")]}}])},[t._v(" "),e("b-progress",{attrs:{value:t.progress,max:100,animated:""}})],1),t._v(" "),e("b-modal",{attrs:{id:"modalPopover",title:t.errorTitle,"ok-only":""}},[e("p",[t._v("\n      "+t._s(t.errorMessage)+"\n    ")])])],1)}),[],!1,null,null,null);e.default=component.exports},707:function(t,e,r){"use strict";r.d(e,"a",(function(){return A}));r(17),r(16),r(13),r(10),r(18),r(14),r(19);var o,n=r(2),c=(r(107),r(3)),l=r(8),d=r(1),h=r(12),m=r(26),f=r(5),O=r(6),v=r(69),j=r(23),w=r(7),y=r(0),P=r(4),$=r(123),S=r(148);function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function D(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var k=Object(v.a)("show",{type:d.i,defaultValue:!1}),T=k.mixin,C=k.props,_=k.prop,E=k.event,V=function(t){return""===t||Object(O.b)(t)?0:(t=Object(j.c)(t,0))>0?t:0},M=function(t){return""===t||!0===t||!(Object(j.c)(t,0)<1)&&!!t},B=Object(y.d)(Object(w.m)(D(D({},C),{},{dismissLabel:Object(y.c)(d.t,"Close"),dismissible:Object(y.c)(d.g,!1),fade:Object(y.c)(d.g,!1),variant:Object(y.c)(d.t,"info")})),c.a),A=Object(P.c)({name:c.a,mixins:[T,m.a],props:B,data:function(){return{countDown:0,localShow:M(this[_])}},watch:(o={},Object(n.a)(o,_,(function(t){this.countDown=V(t),this.localShow=M(t)})),Object(n.a)(o,"countDown",(function(t){var e=this;this.clearCountDownInterval();var r=this[_];Object(O.i)(r)&&(this.$emit(l.l,t),r!==t&&this.$emit(E,t),t>0?(this.localShow=!0,this.$_countDownTimeout=setTimeout((function(){e.countDown--}),1e3)):this.$nextTick((function(){Object(f.B)((function(){e.localShow=!1}))})))})),Object(n.a)(o,"localShow",(function(t){var e=this[_];t||!this.dismissible&&!Object(O.i)(e)||this.$emit(l.k),Object(O.i)(e)||e===t||this.$emit(E,t)})),o),created:function(){this.$_filterTimer=null;var t=this[_];this.countDown=V(t),this.localShow=M(t)},beforeDestroy:function(){this.clearCountDownInterval()},methods:{dismiss:function(){this.clearCountDownInterval(),this.countDown=0,this.localShow=!1},clearCountDownInterval:function(){clearTimeout(this.$_countDownTimeout),this.$_countDownTimeout=null}},render:function(t){var e=t();if(this.localShow){var r=this.dismissible,o=this.variant,c=t();r&&(c=t($.a,{attrs:{"aria-label":this.dismissLabel},on:{click:this.dismiss}},[this.normalizeSlot(h.i)])),e=t("div",{staticClass:"alert",class:Object(n.a)({"alert-dismissible":r},"alert-".concat(o),o),attrs:{role:"alert","aria-live":"polite","aria-atomic":!0},key:this[P.a]},[c,this.normalizeSlot()])}return t(S.a,{props:{noFade:!this.fade}},[e])}})},708:function(t,e,r){"use strict";r.d(e,"a",(function(){return v}));var o=r(2),n=(r(241),r(4)),c=r(114),l=r(3),d=r(1),h=r(12),m=r(50),f=r(0),O=Object(f.d)({label:Object(f.c)(d.t),role:Object(f.c)(d.t,"status"),small:Object(f.c)(d.g,!1),tag:Object(f.c)(d.t,"span"),type:Object(f.c)(d.t,"border"),variant:Object(f.c)(d.t)},l.Eb),v=Object(n.c)({name:l.Eb,functional:!0,props:O,render:function(t,e){var r,n=e.props,data=e.data,l=e.slots,d=e.scopedSlots,f=l(),O=d||{},v=Object(m.b)(h.u,{},O,f)||n.label;return v&&(v=t("span",{staticClass:"sr-only"},v)),t(n.tag,Object(c.a)(data,{attrs:{role:v?n.role||"status":null,"aria-hidden":v?null:"true"},class:(r={},Object(o.a)(r,"spinner-".concat(n.type),n.type),Object(o.a)(r,"spinner-".concat(n.type,"-sm"),n.small),Object(o.a)(r,"text-".concat(n.variant),n.variant),r)}),[v||t()])}})},712:function(t,e,r){"use strict";r.d(e,"a",(function(){return y}));r(17),r(16),r(13),r(10),r(18),r(14),r(19);var o=r(2),n=r(4),c=r(3),l=r(1),d=r(7),h=r(0),m=r(26),f=r(661);function O(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var j=Object(d.j)(f.b,["label","labelHtml"]),w=Object(h.d)(Object(d.m)(v(v({},j),{},{animated:Object(h.c)(l.g,!1),height:Object(h.c)(l.t),max:Object(h.c)(l.o,100),precision:Object(h.c)(l.o,0),showProgress:Object(h.c)(l.g,!1),showValue:Object(h.c)(l.g,!1),striped:Object(h.c)(l.g,!1)})),c.Bb),y=Object(n.c)({name:c.Bb,mixins:[m.a],provide:function(){var t=this;return{getBvProgress:function(){return t}}},props:w,computed:{progressHeight:function(){return{height:this.height||null}}},render:function(t){var e=this.normalizeSlot();return e||(e=t(f.a,{props:Object(h.e)(j,this.$props)})),t("div",{staticClass:"progress",style:this.progressHeight},[e])}})}}]);