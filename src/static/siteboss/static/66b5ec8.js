(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{840:function(t,e,n){"use strict";n.r(e);var r=n(38),o=(n(98),n(30),n(56),n(171),n(146),n(10),n(36),n(701),n(705)),l=(n(702),n(703),n(704),{data:function(){return{preview_errors:!1,status:"",formSettings:{branding:!1,height:300,menubar:!1,skin:!1,content_css:!1,language:"nl"===this.$i18n.locale?"nl_NL":"en_GB",plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen noneditable","insertdatetime media table code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help"}}},components:{editor:o.a},filters:{preview:function(t,form){if("string"==typeof t||t instanceof String){return t.replace(/<span.*?data-field="[0-9]+".*?>.*?<\/span>/gi,(function(t){var e=t.match(/data-field="([0-9]+)"/),n=parseInt(e[1],10),label=form.fields.find((function(t){return t.id===n}));return void 0!==label?'<strong style="background-color: #bbffbb">'.concat(label.label,"</strong>"):'<strong style="color: red">ONBEKEND VELD, Corrigeer alvorens op te staan</strong>'}))}return""}},asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$axios,r=t.params,e.abrupt("return",n.get("/forms/".concat(r.id,"/settings/")).then((function(t){return t.data})).catch((function(t){var e;return 403===(null===(e=t.response)||void 0===e?void 0:e.status)?{status:"unauth"}:{status:"error"}})));case 2:case"end":return e.stop()}}),e)})))()},methods:{insertText:function(t){tinyMCE.activeEditor.execCommand("mceInsertContent",!1,'<span class="formfield mceNonEditable" data-field="'.concat(t.id,'">').concat(t.label,"</span>"))},saveText:function(){var t=this;this.$axios.put("/forms/".concat(this.$route.params.id,"/settings/"),{texts:this.form}).then((function(e){"OK"===e.statusText?t.$sbToast.success("Teksten opgeslagen"):t.$sbToast.error("Er ging iets mis. Probeer het opnieuw.")})).catch((function(e){t.$sbToast.error("Er ging iets mis. Probeer het opnieuw.")}))}}}),c=n(63),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",["unauth"===t.status?e("b-container",{attrs:{fluid:""}},[e("div",{staticClass:"mt-4 d-flex justify-content-between"},[t._v("\n      "+t._s(t.$t("forms.text.unauth"))+"\n    ")])]):t._e(),t._v(" "),"error"===t.status?e("b-container",{attrs:{fluid:""}},[e("div",{staticClass:"mt-4 d-flex justify-content-between"},[t._v("\n      "+t._s(t.$t("forms.text.error"))+"\n    ")])]):t._e(),t._v(" "),null!=t.form?e("div",[t._l(t.$store.state.locales.list,(function(n,r){return e("b-card",{key:r,staticClass:"mb-1",attrs:{"no-body":""}},[e("b-card-header",{staticClass:"p-0",attrs:{"header-tag":"header",role:"tab"}},[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"accordion-"+r,expression:"'accordion-' + index"}],attrs:{block:"",variant:"primary"}},[t._v("\n          "+t._s(n.language)+"\n        ")])],1),t._v(" "),e("b-collapse",{attrs:{id:"accordion-"+r,visible:"",accordion:"my-accordion",role:"tabpanel"}},[e("b-card-body",[e("b-card-text",[e("b-row",{staticClass:"mb-3"},[e("b-col",[e("label",[t._v("\n                  "+t._s(t.$t("forms.text.htmlConfirm"))+"\n                ")]),t._v(" "),e("editor",{attrs:{init:t.formSettings},model:{value:t.form.success_text[n.url],callback:function(e){t.$set(t.form.success_text,n.url,e)},expression:"form.success_text[lang.url]"}})],1)],1),t._v(" "),e("b-row",[e("b-col",{attrs:{cols:"12",md:"6"}},[e("label",[t._v("\n                  "+t._s(t.$t("forms.text.emailConfirm"))+"\n                ")]),t._v(" "),e("editor",{attrs:{init:t.formSettings},model:{value:t.form.confirmation_mail[n.url],callback:function(e){t.$set(t.form.confirmation_mail,n.url,e)},expression:"form.confirmation_mail[lang.url]"}}),t._v(" "),t.form.fields?e("b-nav",{attrs:{pills:"",small:""}},t._l(t.form.fields,(function(n){return e("b-nav-item",{key:n.id,attrs:{active:""},on:{click:function(e){return e.preventDefault(),t.insertText(n)}}},[t._v("\n                    "+t._s(n.label)+"\n                  ")])})),1):t._e()],1),t._v(" "),e("b-col",{attrs:{cols:"12",md:"6"}},[e("label",[t._v("Preview")]),t._v(" "),e("div",{domProps:{innerHTML:t._f("preview")(t.form.confirmation_mail[n.url],t.form)}})])],1)],1)],1)],1)],1)})),t._v(" "),e("b-navbar",{staticClass:"navbar-fixed",attrs:{toggleable:"lg",type:"dark",variant:"secondary",fixed:"bottom"}},[e("b-navbar-nav",{staticClass:"ml-auto mr-3"},[e("b-button",{attrs:{type:"light",variant:"primary",disabled:t.preview_errors},on:{click:t.saveText}},[t._v("\n          "+t._s(t.$t("save"))+"\n        ")])],1)],1)],2):t._e()],1)}),[],!1,null,null,null);e.default=component.exports}}]);