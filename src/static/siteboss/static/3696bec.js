(window.webpackJsonp=window.webpackJsonp||[]).push([[28,54],{541:function(e,t,n){"use strict";n.r(t);n(16),n(80),n(238);var r={props:{label:{type:String,required:!0},required:{type:Boolean,default:!1},cols:{type:Number,default:12},description:{type:String,default:""},internal:{type:String,required:!0}},setup:function(){}},o=n(63),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",{class:"col-".concat(e.cols)},[t("b-form-group",{attrs:{id:"input-group-".concat(e.internal),description:e.description}},[t("label",{attrs:{"label-for":"input-".concat(e.internal)}},[e._v("\n      "+e._s(e.label)),e.required?t("span",{staticClass:"required-star"},[e._v(" *")]):e._e()]),e._v(" "),e._t("default")],2)],1)}),[],!1,null,null,null);t.default=component.exports},556:function(e,t,n){e.exports={}},592:function(e,t,n){"use strict";n(556)},611:function(e,t,n){"use strict";n.r(t);n(16),n(80),n(91),n(114),n(17),n(13),n(18),n(14),n(19);var r=n(47),o=n(38),l=n(2),c=(n(98),n(33),n(50),n(10),n(66),n(68),n(546),n(205),n(56),n(51),n(28),n(54),n(43),n(9)),d=n(708),v=n(589),h=(n(590),n(591)),f=n.n(h);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function w(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var y={components:{Cropper:v.a,BSpinner:d.a},props:{internal:{type:String,required:!0},properties:{type:Object,default:function(){}},data:{type:Object,default:function(){}},bus:{type:c.default,required:!0}},data:function(){return w({value:null,preview:null,newValues:[],delete:!1,cropping:!1,dragging:!1,resizing:!1,onTouched:!0,valid:!0,cropperProps:{},cropperRequirements:null},this.setCropperLimits())},computed:{state:function(){return this.onTouched?null:this.valid}},created:function(){var e=this;this.bus.$on("setStatus",(function(t){e.onTouched=!1}))},beforeMount:function(){var e;null!==(e=this.data)&&void 0!==e&&e.value&&(this.value=this.data.value,this.preview=this.data.value.url?"".concat(this.data.value.url,"?").concat(Date.now()):null)},mounted:function(){var e=function(e){e.preventDefault()};window.addEventListener("dragover",e,!1),window.addEventListener("drop",e,!1),this.validate(),this.updateFormValues()},beforeDestroy:function(){var e=function(e){e.preventDefault()};window.removeEventListener("dragover",e,!1),window.removeEventListener("drop",e,!1)},methods:{checkMinimalRequirements:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,o,l,c,d,v,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=["png","jpg","jpeg","avif","webp"],o=e.name.split(".").pop().toLowerCase(),r.includes(o)){n.next=4;break}throw new Error("dit bestandstype kan niet worden gebruikt");case 4:return l=function(e){return new Promise((function(t){var img=new Image;img.onload=function(){t({height:img.height,width:img.width})},img.src=e}))},c=URL.createObjectURL(e),d=t.cropperProps,n.next=9,l(c);case 9:if(v=n.sent,h=[],d.minHeight&&v.height<d.minHeight&&(h=h.concat(["hoogte"])),d.minWidth&&v.width<d.minWidth&&(h=h.concat(["breedte"])),!h.length){n.next=15;break}throw new Error("De afbeelding is te klein (".concat(h.join(" en "),")."));case 15:return n.abrupt("return",c);case 16:case"end":return n.stop()}}),n)})))()},ignoreClickOnTargetId:function(e,t){return e.target.id===t||e.target.parentElement.id===t||e.target.parentElement.parentElement.id===t},onCropperCloseClick:function(){var e=this,t=function(){var t,n=e.newValues[e.newValues.length-1];return n?n.url:null!==(t=e.value)&&void 0!==t&&t.url&&!e.delete?e.value.url:null};this.cropping=!1,this.$refs["file-input"].value=null,this.newValues=this.newValues.slice(0,-1),this.preview=t()?"".concat(t(),"?").concat(Date.now()):null},onEditsSave:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,canvas,o,l,c,d,v,h,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),t.delete=!1,t.resizing=!0,r=t.$refs.cropper.getResult(),canvas=r.canvas,o=r.coordinates,l=t.newValues[t.newValues.length-1],c=[l.name,"_",t.internal,".png"].join(""),d="image/png",v=canvas,!(t.cropperProps.minWidth&&t.cropperProps.minHeight&&(o.width>2*t.cropperProps.minWidth||o.height>2*t.cropperProps.minHeight))){n.next=16;break}return h=new f.a,(m=document.createElement("canvas")).width=2*t.cropperProps.minWidth,m.height=2*t.cropperProps.minHeight,n.next=15,h.resize(canvas,m,{unsharpAmount:25,unsharpRadius:1,unsharpThreshold:1,quality:3});case 15:v=n.sent;case 16:t.resizing=!1,t.cropping=!1,t.preview=v.toDataURL(d),v.toBlob((function(e){var n=new File([e],c,{type:d});t.newValues=[{url:v.toDataURL(d),name:c,file:n}],t.validate(),t.updateFormValues()}));case 20:case"end":return n.stop()}}),n)})))()},onFileInputChange:function(e){var t=this,n=Object(r.a)(e.target.files,1)[0];this.cropping||this.properties.disabled||void 0===n||this.checkMinimalRequirements(n).then((function(e){t.newValues=t.newValues.concat([{url:e,name:n.name.replace(/\.[^/.]+$/,"")}]),t.preview=e,t.cropping=!0})).catch((function(e){t.$sbToast.error(e.message)})).finally((function(){e.target.value=""}))},onPreviewClick:function(e){var t;this.cropping||this.properties.disabled||this.ignoreClickOnTargetId(e,"reset")||null===(t=this.$refs["file-input"])||void 0===t||t.click()},onPreviewDeleteClick:function(){var e,t;this.preview.includes(null===(e=this.value)||void 0===e?void 0:e.url)?(this.preview=null,this.delete=!0):(this.newValues=[],this.$refs["file-input"].value=null,this.preview=null===(t=this.value)||void 0===t?void 0:t.url);this.validate(),this.updateFormValues()},onPreviewUndoDeleteClick:function(){this.newValues=[],this.preview="".concat(this.value.url,"?").concat(Date.now()),this.delete=!1,this.validate(),this.updateFormValues()},onPreviewDrop:function(e){var t=this,n=Object(r.a)(e.dataTransfer.files,1)[0];this.cropping||this.properties.disabled||void 0===n||this.checkMinimalRequirements(n).then((function(e){t.newValues=t.newValues.concat([{url:e,name:n.name.replace(/\.[^/.]+$/,"")}]),t.preview=e,t.dragging=!1,t.cropping=!0})).catch((function(e){t.$sbToast.error(e.message)}))},setCropperLimits:function(){var e,t={},n=[];if(!this.properties.sizes||!this.properties.sizes[0])return t;var r=parseInt(this.properties.sizes[0].width,10),o=parseInt(this.properties.sizes[0].height,10),l=null!==(e=this.properties.sizes[0].croptype)&&void 0!==e?e:"constrain",c=!!r&&0!==r,d=!!o&&0!==o;return c&&d&&(t.defaultSize={width:r,height:o}),"fitwithin"===l?(c&&(t.maxWidth=r,n=n.concat(["maximale breedte: ".concat(r,"px")])),d&&(t.maxHeight=o,n=n.concat(["maximale hoogte: ".concat(o,"px")]))):(c&&(t.minWidth=r,n=n.concat(["minimale breedte: ".concat(r,"px")])),d&&(t.minHeight=o,n=n.concat(["minimale hoogte: ".concat(o,"px")])),c&&d&&(t.stencilProps={aspectRatio:r/o})),{cropperProps:t,cropperRequirements:n.join(", ")}},setEditName:function(e){var t=this;e&&(this.newValues=this.newValues.map((function(n,r){return r===t.newValues.length-1?w(w({},n),{},{name:e}):n})))},toggleCropping:function(){this.cropping=!this.cropping},updateFormValues:function(){var e="".concat(this._uid).concat(this.internal,"_file"),t={files:this.newValues.length>0?[e]:[],delete:this.delete},n=this.newValues[0]&&this.newValues[0].file?{files:[{id:e,file:this.newValues[0].file}]}:{files:[]};this.$emit("updateValues",w({field:this.internal,valid:this.valid,value:t},n))},validate:function(){var e=this.value&&this.value.url&&!this.delete,t=this.newValues&&this.newValues[0]&&this.newValues[0].name&&this.newValues[0].file;this.properties.required?this.valid=!(!e&&!t):this.valid=!0}}},O=(n(592),n(63)),component=Object(O.a)(y,(function(){var e=this,t=e._self._c;return t("div",[t("CommonAutolayoutLabelWrapper",{attrs:{id:"input-group-".concat(e.internal),label:e.properties.title,"label-for":"input-".concat(e.internal),description:e.properties.description,required:e.properties.required,internal:e.internal}},[e.valid||e.onTouched?e._e():t("div",{staticClass:"input-feedback",attrs:{id:"input-".concat(e.internal,"-feedback")}},[e._v("\n      "+e._s(e.$t("common.required"))+"\n    ")]),e._v(" "),t("div",{on:{dragover:function(e){e.preventDefault()},drop:function(e){e.preventDefault()}}},[t("div",{class:["preview-container",e.preview?"":"empty",e.dragging?"droppable":"",e.properties.disabled?"disabled":"",e.valid||e.onTouched?"":"is-invalid",e.valid&&!e.onTouched?"is-valid":""],attrs:{tabindex:e.properties.disabled?-1:0},on:{dragover:function(t){e.dragging=!0},dragleave:function(t){e.dragging=!1},drop:e.onPreviewDrop,click:e.onPreviewClick,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onPreviewClick.apply(null,arguments)}}},[t("div",{staticClass:"preview-buttons"},[e.preview?t("b-button",{attrs:{id:"reset",type:"button",variant:"primary"},on:{click:e.onPreviewDeleteClick}},[t("Icon",{attrs:{icon:e.preview.includes(this.value.url)?"trash":"undo"}})],1):e._e(),e._v(" "),!e.preview&&this.value.url?t("b-button",{attrs:{id:"reset",type:"button",variant:"primary"},on:{click:e.onPreviewUndoDeleteClick}},[t("Icon",{attrs:{icon:"undo"}})],1):e._e()],1),e._v(" "),t("div",{staticClass:"preview-flex-container"},[e.preview?t("img",{staticClass:"preview-image",attrs:{src:e.preview}}):e.properties.disabled?t("div",[e._v("\n            "+e._s(e.$t("forms.field.disabled"))+"\n          ")]):t("div",[t("Icon",{attrs:{icon:"file-image"}}),e._v(" "),t("p",{staticClass:"mb-0"},[e._v(e._s(e.$t("forms.field.imageAdd")))])],1),e._v(" "),e.cropperRequirements?t("div",{staticClass:"image-field-requirements"},[e._v("\n            "+e._s(e.cropperRequirements)+"\n          ")]):e._e()])]),e._v(" "),t("input",{ref:"file-input",attrs:{hidden:"",id:"input-".concat(e.internal),state:e.state,disabled:e.properties.disabled,accept:"image/png, image/jpeg, image/svg+xml, image/avif, image/webp",type:"file"},on:{change:e.onFileInputChange}})])]),e._v(" "),e.cropping&&e.newValues.length?t("div",{staticClass:"cropper-modal"},[t("b-button",{staticClass:"cropper-modal-close",attrs:{type:"button",variant:"dark"},on:{click:e.onCropperCloseClick}},[t("Icon",{attrs:{icon:"xmark"}})],1),e._v(" "),t("cropper",e._b({ref:"cropper",staticClass:"cropper",attrs:{src:e.preview}},"cropper",e.cropperProps,!1)),e._v(" "),t("div",{staticClass:"mt-2 image-info"},[t("b-button",{attrs:{type:"button",variant:"primary",disabled:e.resizing},on:{click:e.onEditsSave}},[e.resizing?t("b-spinner",{staticClass:"spinner",attrs:{small:""}}):e._e(),e._v("\n        "+e._s(e.$t("forms.crop"))+"\n      ")],1)],1)],1):e._e()],1)}),[],!1,null,"663e83d9",null);t.default=component.exports;installComponents(component,{CommonAutolayoutLabelWrapper:n(541).default})},708:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(2),o=(n(239),n(4)),l=n(113),c=n(3),d=n(1),v=n(12),h=n(52),f=n(0),m=Object(f.d)({label:Object(f.c)(d.t),role:Object(f.c)(d.t,"status"),small:Object(f.c)(d.g,!1),tag:Object(f.c)(d.t,"span"),type:Object(f.c)(d.t,"border"),variant:Object(f.c)(d.t)},c.Eb),w=Object(o.c)({name:c.Eb,functional:!0,props:m,render:function(e,t){var n,o=t.props,data=t.data,c=t.slots,d=t.scopedSlots,f=c(),m=d||{},w=Object(h.b)(v.u,{},m,f)||o.label;return w&&(w=e("span",{staticClass:"sr-only"},w)),e(o.tag,Object(l.a)(data,{attrs:{role:w?o.role||"status":null,"aria-hidden":w?null:"true"},class:(n={},Object(r.a)(n,"spinner-".concat(o.type),o.type),Object(r.a)(n,"spinner-".concat(o.type,"-sm"),o.small),Object(r.a)(n,"text-".concat(o.variant),o.variant),n)}),[w||e()])}})}}]);